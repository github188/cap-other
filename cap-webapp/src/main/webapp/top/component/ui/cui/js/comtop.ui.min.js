function _log(t){if(_canLog){var e=Array.prototype.slice.apply(arguments,[1]),i=new Date,n=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();e[0]=n+" - "+e[0];try{switch(t){case"info":window.console.info.apply(window.console,e);break;case"warn":window.console.warn.apply(window.console,e);break;default:window.console.log.apply(window.console,e)}}catch(s){window.console||(_canLog=!1)}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}window.comtop=window.comtop||{},function(t){function e(t){var e,i,n=t.split("."),s=window;for(e=0;e<n.length;e+=1)i=n[e],s[i]=s[i]||{},s=s[i];return s}function i(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}).toUpperCase()}window.console=window.console||{log:function(){},info:function(){},warn:function(){},error:function(){}},t.namespace=e,t.guid=i}(window.comtop=window.comtop||{}),comtop.namespace("comtop.UI"),comtop.namespace("comtop.Dom"),comtop.namespace("comtop.String"),comtop.namespace("comtop.Date"),comtop.namespace("comtop.Number"),comtop.namespace("comtop.Browser"),comtop.namespace("comtop.Tools"),function(t,e){function i(t){var e=fe[t]={};return G.each(t.split(ee),function(t,i){e[i]=!0}),e}function n(t,i,n){if(n===e&&1===t.nodeType){var s="data-"+i.replace(me,"-$1").toLowerCase();if(n=t.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ge.test(n)?G.parseJSON(n):n}catch(o){}G.data(t,i,n)}else n=e}return n}function s(t){var e;for(e in t)if(("data"!==e||!G.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function o(){return!1}function a(){return!0}function r(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function l(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function d(t,e,i){if(e=e||0,G.isFunction(e))return G.grep(t,function(t,n){var s=!!e.call(t,n,t);return s===i});if(e.nodeType)return G.grep(t,function(t){return t===e===i});if("string"==typeof e){var n=G.grep(t,function(t){return 1===t.nodeType});if(Ae.test(e))return G.filter(e,n,!i);e=G.filter(e,n)}return G.grep(t,function(t){return G.inArray(t,e)>=0===i})}function h(t){var e=je.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function c(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function u(t,e){if(1===e.nodeType&&G.hasData(t)){var i,n,s,o=G._data(t),a=G._data(e,o),r=o.events;if(r){delete a.handle,a.events={};for(i in r)for(n=0,s=r[i].length;s>n;n++)G.event.add(e,i,r[i][n])}a.data&&(a.data=G.extend({},a.data))}}function p(t,e){var i;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),i=e.nodeName.toLowerCase(),"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),G.support.html5Clone&&t.innerHTML&&!G.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ye.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.selected=t.defaultSelected:"input"===i||"textarea"===i?e.defaultValue=t.defaultValue:"script"===i&&e.text!==t.text&&(e.text=t.text),e.removeAttribute(G.expando))}function f(t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll("*"):[]}function g(t){Ye.test(t.type)&&(t.defaultChecked=t.checked)}function m(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=vi.length;s--;)if(e=vi[s]+i,e in t)return e;return n}function v(t,e){return t=e||t,"none"===G.css(t,"display")||!G.contains(t.ownerDocument,t)}function y(t,e){for(var i,n,s=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(s[o]=G._data(i,"olddisplay"),e?(s[o]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&v(i)&&(s[o]=G._data(i,"olddisplay",w(i.nodeName)))):(n=ii(i,"display"),s[o]||"none"===n||G._data(i,"olddisplay",n)));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function b(t,e,i){var n=hi.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function _(t,e,i,n){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=G.css(t,i+mi[s],!0)),n?("content"===i&&(o-=parseFloat(ii(t,"padding"+mi[s]))||0),"margin"!==i&&(o-=parseFloat(ii(t,"border"+mi[s]+"Width"))||0)):(o+=parseFloat(ii(t,"padding"+mi[s]))||0,"padding"!==i&&(o+=parseFloat(ii(t,"border"+mi[s]+"Width"))||0));return o}function x(t,e,i){var n="width"===e?t.offsetWidth:t.offsetHeight,s=!0,o=G.support.boxSizing&&"border-box"===G.css(t,"boxSizing");if(0>=n||null==n){if(n=ii(t,e),(0>n||null==n)&&(n=t.style[e]),ci.test(n))return n;s=o&&(G.support.boxSizingReliable||n===t.style[e]),n=parseFloat(n)||0}return n+_(t,e,i||(o?"border":"content"),s)+"px"}function w(t){if(pi[t])return pi[t];var e=G("<"+t+">").appendTo(F.body),i=e.css("display");return e.remove(),("none"===i||""===i)&&(ni=F.body.appendChild(ni||G.extend(F.createElement("iframe"),{frameBorder:0,width:0,height:0})),si&&ni.createElement||(si=(ni.contentWindow||ni.contentDocument).document,si.write("<!doctype html><html><body>"),si.close()),e=si.body.appendChild(si.createElement(t)),i=ii(e,"display"),F.body.removeChild(ni)),pi[t]=i,i}function C(t,e,i,n){var s;if(G.isArray(e))G.each(e,function(e,s){i||_i.test(t)?n(t,s):C(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==G.type(e))n(t,e);else for(s in e)C(t+"["+s+"]",e[s],i,n)}function k(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s,o,a=e.toLowerCase().split(ee),r=0,l=a.length;if(G.isFunction(i))for(;l>r;r++)n=a[r],o=/^\+/.test(n),o&&(n=n.substr(1)||"*"),s=t[n]=t[n]||[],s[o?"unshift":"push"](i)}}function T(t,i,n,s,o,a){o=o||i.dataTypes[0],a=a||{},a[o]=!0;for(var r,l=t[o],d=0,h=l?l.length:0,c=t===Ai;h>d&&(c||!r);d++)r=l[d](i,n,s),"string"==typeof r&&(!c||a[r]?r=e:(i.dataTypes.unshift(r),r=T(t,i,n,s,r,a)));return!c&&r||a["*"]||(r=T(t,i,n,s,"*",a)),r}function S(t,i){var n,s,o=G.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((o[n]?t:s||(s={}))[n]=i[n]);s&&G.extend(!0,t,s)}function N(t,i,n){var s,o,a,r,l=t.contents,d=t.dataTypes,h=t.responseFields;for(o in h)o in n&&(i[h[o]]=n[o]);for(;"*"===d[0];)d.shift(),s===e&&(s=t.mimeType||i.getResponseHeader("content-type"));if(s)for(o in l)if(l[o]&&l[o].test(s)){d.unshift(o);break}if(d[0]in n)a=d[0];else{for(o in n){if(!d[0]||t.converters[o+" "+d[0]]){a=o;break}r||(r=o)}a=a||r}return a?(a!==d[0]&&d.unshift(a),n[a]):void 0}function D(t,e){var i,n,s,o,a=t.dataTypes.slice(),r=a[0],l={},d=0;if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a[1])for(i in t.converters)l[i.toLowerCase()]=t.converters[i];for(;s=a[++d];)if("*"!==s){if("*"!==r&&r!==s){if(i=l[r+" "+s]||l["* "+s],!i)for(n in l)if(o=n.split(" "),o[1]===s&&(i=l[r+" "+o[0]]||l["* "+o[0]])){i===!0?i=l[n]:l[n]!==!0&&(s=o[0],a.splice(d--,0,s));break}if(i!==!0)if(i&&t["throws"])e=i(e);else try{e=i(e)}catch(h){return{state:"parsererror",error:i?h:"No conversion from "+r+" to "+s}}}r=s}return{state:"success",data:e}}function E(){try{return new t.XMLHttpRequest}catch(e){}}function L(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function I(){return setTimeout(function(){Qi=e},0),Qi=G.now()}function $(t,e){G.each(e,function(e,i){for(var n=(Zi[e]||[]).concat(Zi["*"]),s=0,o=n.length;o>s;s++)if(n[s].call(t,e,i))return})}function H(t,e,i){var n,s=0,o=Gi.length,a=G.Deferred().always(function(){delete r.elem}),r=function(){for(var e=Qi||I(),i=Math.max(0,l.startTime+l.duration-e),n=1-(i/l.duration||0),s=0,o=l.tweens.length;o>s;s++)l.tweens[s].run(n);return a.notifyWith(t,[l,n,i]),1>n&&o?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:G.extend({},e),opts:G.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Qi||I(),duration:i.duration,tweens:[],createTween:function(e,i){var n=G.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){for(var i=0,n=e?l.tweens.length:0;n>i;i++)l.tweens[i].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),d=l.props;for(M(d,l.opts.specialEasing);o>s;s++)if(n=Gi[s].call(l,t,d,l.opts))return n;return $(l,d),G.isFunction(l.opts.start)&&l.opts.start.call(t,l),G.fx.timer(G.extend(r,{anim:l,queue:l.opts.queue,elem:t})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function M(t,e){var i,n,s,o,a;for(i in t)if(n=G.camelCase(i),s=e[n],o=t[i],G.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),a=G.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function P(t,e,i){var n,s,o,a,r,l,d,h,c=this,u=t.style,p={},f=[],g=t.nodeType&&v(t);i.queue||(d=G._queueHooks(t,"fx"),null==d.unqueued&&(d.unqueued=0,h=d.empty.fire,d.empty.fire=function(){d.unqueued||h()}),d.unqueued++,c.always(function(){c.always(function(){d.unqueued--,G.queue(t,"fx").length||d.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===G.css(t,"display")&&"none"===G.css(t,"float")&&(G.support.inlineBlockNeedsLayout&&"inline"!==w(t.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",G.support.shrinkWrapBlocks||c.done(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],Yi.exec(o)){if(delete e[n],o===(g?"hide":"show"))continue;f.push(n)}if(a=f.length)for(r=G._data(t,"fxshow")||G._data(t,"fxshow",{}),g?G(t).show():c.done(function(){G(t).hide()}),c.done(function(){var e;G.removeData(t,"fxshow",!0);for(e in p)G.style(t,e,p[e])}),n=0;a>n;n++)s=f[n],l=c.createTween(s,g?r[s]:0),p[s]=r[s]||G.style(t,s),s in r||(r[s]=l.start,g&&(l.end=l.start,l.start="width"===s||"height"===s?1:0))}function A(t,e,i,n,s){return new A.prototype.init(t,e,i,n,s)}function B(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=mi[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function z(t){return G.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var j,R,F=t.document,O=t.location,q=t.navigator,W=t.jQuery,V=t.$,U=Array.prototype.push,Q=Array.prototype.slice,K=Array.prototype.indexOf,Y=Object.prototype.toString,X=Object.prototype.hasOwnProperty,J=String.prototype.trim,G=function(t,e){return new G.fn.init(t,e,j)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,te=/\S/,ee=/\s+/,ie=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^[\],:{}\s]*$/,ae=/(?:^|:|,)(?:\s*\[)+/g,re=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,le=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,de=/^-ms-/,he=/-([\da-z])/gi,ce=function(t,e){return(e+"").toUpperCase()},ue=function(){F.addEventListener?(F.removeEventListener("DOMContentLoaded",ue,!1),G.ready()):"complete"===F.readyState&&(F.detachEvent("onreadystatechange",ue),G.ready())},pe={};G.fn=G.prototype={constructor:G,init:function(t,i,n){var s,o,a;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("string"==typeof t){if(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ne.exec(t),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(s[1])return i=i instanceof G?i[0]:i,a=i&&i.nodeType?i.ownerDocument||i:F,t=G.parseHTML(s[1],a,!0),se.test(s[1])&&G.isPlainObject(i)&&this.attr.call(t,i,!0),G.merge(this,t);if(o=F.getElementById(s[2]),o&&o.parentNode){if(o.id!==s[2])return n.find(t);this.length=1,this[0]=o}return this.context=F,this.selector=t,this}return G.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),G.makeArray(t,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Q.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,i){var n=G.merge(this.constructor(),t);return n.prevObject=this,n.context=this.context,"find"===e?n.selector=this.selector+(this.selector?" ":"")+i:e&&(n.selector=this.selector+"."+e+"("+i+")"),n},each:function(t,e){return G.each(this,t,e)},ready:function(t){return G.ready.promise().done(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Q.apply(this,arguments),"slice",Q.call(arguments).join(","))},map:function(t){return this.pushStack(G.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},G.fn.init.prototype=G.fn,G.extend=G.fn.extend=function(){var t,i,n,s,o,a,r=arguments[0]||{},l=1,d=arguments.length,h=!1;for("boolean"==typeof r&&(h=r,r=arguments[1]||{},l=2),"object"==typeof r||G.isFunction(r)||(r={}),d===l&&(r=this,--l);d>l;l++)if(null!=(t=arguments[l]))for(i in t)n=r[i],s=t[i],r!==s&&(h&&s&&(G.isPlainObject(s)||(o=G.isArray(s)))?(o?(o=!1,a=n&&G.isArray(n)?n:[]):a=n&&G.isPlainObject(n)?n:{},r[i]=G.extend(h,a,s)):s!==e&&(r[i]=s));return r},G.extend({noConflict:function(e){return t.$===G&&(t.$=V),e&&t.jQuery===G&&(t.jQuery=W),G},isReady:!1,readyWait:1,holdReady:function(t){t?G.readyWait++:G.ready(!0)},ready:function(t){if(t===!0?!--G.readyWait:!G.isReady){if(!F.body)return setTimeout(G.ready,1);G.isReady=!0,t!==!0&&--G.readyWait>0||(R.resolveWith(F,[G]),G.fn.trigger&&G(F).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===G.type(t)},isArray:Array.isArray||function(t){return"array"===G.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):pe[Y.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==G.type(t)||t.nodeType||G.isWindow(t))return!1;try{if(t.constructor&&!X.call(t,"constructor")&&!X.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in t);return n===e||X.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,i){var n;return t&&"string"==typeof t?("boolean"==typeof e&&(i=e,e=0),e=e||F,(n=se.exec(t))?[e.createElement(n[1])]:(n=G.buildFragment([t],e,i?null:[]),G.merge([],(n.cacheable?G.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=G.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):oe.test(e.replace(re,"@").replace(le,"]").replace(ae,""))?new Function("return "+e)():void G.error("Invalid JSON: "+e)):null},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{t.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(o){n=e}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||G.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&te.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(de,"ms-").replace(he,ce)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,i,n){var s,o=0,a=t.length,r=a===e||G.isFunction(t);if(n)if(r){for(s in t)if(i.apply(t[s],n)===!1)break}else for(;a>o&&i.apply(t[o++],n)!==!1;);else if(r){for(s in t)if(i.call(t[s],s,t[s])===!1)break}else for(;a>o&&i.call(t[o],o,t[o++])!==!1;);return t},trim:J&&!J.call("\ufeff\xa0")?function(t){return null==t?"":J.call(t)}:function(t){return null==t?"":(t+"").replace(ie,"")},makeArray:function(t,e){var i,n=e||[];return null!=t&&(i=G.type(t),null==t.length||"string"===i||"function"===i||"regexp"===i||G.isWindow(t)?U.call(n,t):G.merge(n,t)),n},inArray:function(t,e,i){var n;if(e){if(K)return K.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=i.length,s=t.length,o=0;if("number"==typeof n)for(;n>o;o++)t[s++]=i[o];else for(;i[o]!==e;)t[s++]=i[o++];return t.length=s,t},grep:function(t,e,i){var n,s=[],o=0,a=t.length;for(i=!!i;a>o;o++)n=!!e(t[o],o),i!==n&&s.push(t[o]);return s},map:function(t,i,n){var s,o,a=[],r=0,l=t.length,d=t instanceof G||l!==e&&"number"==typeof l&&(l>0&&t[0]&&t[l-1]||0===l||G.isArray(t));if(d)for(;l>r;r++)s=i(t[r],r,n),null!=s&&(a[a.length]=s);else for(o in t)s=i(t[o],o,n),null!=s&&(a[a.length]=s);return a.concat.apply([],a)},guid:1,proxy:function(t,i){var n,s,o;return"string"==typeof i&&(n=t[i],i=t,t=n),G.isFunction(t)?(s=Q.call(arguments,2),o=function(){return t.apply(i,s.concat(Q.call(arguments)))},o.guid=t.guid=t.guid||G.guid++,o):e},access:function(t,i,n,s,o,a,r){var l,d=null==n,h=0,c=t.length;if(n&&"object"==typeof n){for(h in n)G.access(t,i,h,n[h],1,a,s);o=1}else if(s!==e){if(l=r===e&&G.isFunction(s),d&&(l?(l=i,i=function(t,e,i){return l.call(G(t),i)}):(i.call(t,s),i=null)),i)for(;c>h;h++)i(t[h],n,l?s.call(t[h],h,i(t[h],n)):s,r);o=1}return o?t:d?i.call(t):c?i(t[0],n):a},now:function(){return(new Date).getTime()}}),G.ready.promise=function(e){if(!R)if(R=G.Deferred(),"complete"===F.readyState)setTimeout(G.ready,1);else if(F.addEventListener)F.addEventListener("DOMContentLoaded",ue,!1),t.addEventListener("load",G.ready,!1);else{F.attachEvent("onreadystatechange",ue),t.attachEvent("onload",G.ready);var i=!1;try{i=null==t.frameElement&&F.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!G.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}G.ready()}}()}return R.promise(e)},G.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){pe["[object "+e+"]"]=e.toLowerCase()}),j=G(F);var fe={};G.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):G.extend({},t);var n,s,o,a,r,l,d=[],h=!t.once&&[],c=function(e){for(n=t.memory&&e,s=!0,l=a||0,a=0,r=d.length,o=!0;d&&r>l;l++)if(d[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,d&&(h?h.length&&c(h.shift()):n?d=[]:u.disable())},u={add:function(){if(d){var e=d.length;!function i(e){G.each(e,function(e,n){var s=G.type(n);"function"!==s||t.unique&&u.has(n)?n&&n.length&&"string"!==s&&i(n):d.push(n)})}(arguments),o?r=d.length:n&&(a=e,c(n))}return this},remove:function(){return d&&G.each(arguments,function(t,e){for(var i;(i=G.inArray(e,d,i))>-1;)d.splice(i,1),o&&(r>=i&&r--,l>=i&&l--)}),this},has:function(t){return G.inArray(t,d)>-1},empty:function(){return d=[],this},disable:function(){return d=h=n=e,this},disabled:function(){return!d},lock:function(){return h=e,n||u.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!d||s&&!h||(o?h.push(e):c(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},G.extend({Deferred:function(t){var e=[["resolve","done",G.Callbacks("once memory"),"resolved"],["reject","fail",G.Callbacks("once memory"),"rejected"],["notify","progress",G.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return G.Deferred(function(i){G.each(e,function(e,n){var o=n[0],a=t[e];s[n[1]](G.isFunction(a)?function(){var t=a.apply(this,arguments);t&&G.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o+"With"](this===s?i:this,[t])}:i[o])}),t=null}).promise()},promise:function(t){return null!=t?G.extend(t,n):n}},s={};return n.pipe=n.then,G.each(e,function(t,o){var a=o[2],r=o[3];n[o[1]]=a.add,r&&a.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),s[o[0]]=a.fire,s[o[0]+"With"]=a.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=Q.call(arguments),a=o.length,r=1!==a||t&&G.isFunction(t.promise)?a:0,l=1===r?t:G.Deferred(),d=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?Q.call(arguments):s,n===e?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(a>1)for(e=new Array(a),i=new Array(a),n=new Array(a);a>s;s++)o[s]&&G.isFunction(o[s].promise)?o[s].promise().done(d(s,n,o)).fail(l.reject).progress(d(s,i,e)):--r;return r||l.resolveWith(n,o),l.promise()}}),G.support=function(){var e,i,n,s,o,a,r,l,d,h,c,u=F.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=u.getElementsByTagName("*"),n=u.getElementsByTagName("a")[0],n.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length)return{};s=F.createElement("select"),o=s.appendChild(F.createElement("option")),a=u.getElementsByTagName("input")[0],e={leadingWhitespace:3===u.firstChild.nodeType,tbody:!u.getElementsByTagName("tbody").length,htmlSerialize:!!u.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:o.selected,getSetAttribute:"t"!==u.className,enctype:!!F.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==F.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===F.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,e.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!o.disabled;try{delete u.test}catch(p){e.deleteExpando=!1}if(!u.addEventListener&&u.attachEvent&&u.fireEvent&&(u.attachEvent("onclick",c=function(){e.noCloneEvent=!1}),u.cloneNode(!0).fireEvent("onclick"),u.detachEvent("onclick",c)),a=F.createElement("input"),a.value="t",a.setAttribute("type","radio"),e.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),u.appendChild(a),r=F.createDocumentFragment(),r.appendChild(u.lastChild),e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=a.checked,r.removeChild(a),r.appendChild(u),u.attachEvent)for(d in{submit:!0,change:!0,focusin:!0})l="on"+d,h=l in u,h||(u.setAttribute(l,"return;"),h="function"==typeof u[l]),e[d+"Bubbles"]=h;return G(function(){var i,n,s,o,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",r=F.getElementsByTagName("body")[0];r&&(i=F.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",r.insertBefore(i,r.firstChild),n=F.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=n.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",e.reliableHiddenOffsets=h&&0===s[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===n.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==r.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(n,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(n,null)||{width:"4px"}).width,o=F.createElement("div"),o.style.cssText=n.style.cssText=a,o.style.marginRight=o.style.width="0",n.style.width="1px",n.appendChild(o),e.reliableMarginRight=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),r.removeChild(i),i=n=s=o=null)}),r.removeChild(u),i=n=s=o=a=r=u=null,e}();var ge=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,me=/([A-Z])/g;G.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(G.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?G.cache[t[G.expando]]:t[G.expando],!!t&&!s(t)},data:function(t,i,n,s){if(G.acceptData(t)){var o,a,r=G.expando,l="string"==typeof i,d=t.nodeType,h=d?G.cache:t,c=d?t[r]:t[r]&&r;if(c&&h[c]&&(s||h[c].data)||!l||n!==e)return c||(d?t[r]=c=G.deletedIds.pop()||G.guid++:c=r),h[c]||(h[c]={},d||(h[c].toJSON=G.noop)),("object"==typeof i||"function"==typeof i)&&(s?h[c]=G.extend(h[c],i):h[c].data=G.extend(h[c].data,i)),o=h[c],s||(o.data||(o.data={}),o=o.data),n!==e&&(o[G.camelCase(i)]=n),l?(a=o[i],null==a&&(a=o[G.camelCase(i)])):a=o,a}},removeData:function(t,e,i){if(G.acceptData(t)){var n,o,a,r=t.nodeType,l=r?G.cache:t,d=r?t[G.expando]:G.expando;if(l[d]){if(e&&(n=i?l[d]:l[d].data)){G.isArray(e)||(e in n?e=[e]:(e=G.camelCase(e),e=e in n?[e]:e.split(" ")));for(o=0,a=e.length;a>o;o++)delete n[e[o]];if(!(i?s:G.isEmptyObject)(n))return}(i||(delete l[d].data,s(l[d])))&&(r?G.cleanData([t],!0):G.support.deleteExpando||l!=l.window?delete l[d]:l[d]=null)}}},_data:function(t,e,i){return G.data(t,e,i,!0)},acceptData:function(t){var e=t.nodeName&&G.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),G.fn.extend({data:function(t,i){var s,o,a,r,l,d=this[0],h=0,c=null;if(t===e){if(this.length&&(c=G.data(d),1===d.nodeType&&!G._data(d,"parsedAttrs"))){for(a=d.attributes,l=a.length;l>h;h++)r=a[h].name,r.indexOf("data-")||(r=G.camelCase(r.substring(5)),n(d,r,c[r]));G._data(d,"parsedAttrs",!0)}return c}return"object"==typeof t?this.each(function(){G.data(this,t)}):(s=t.split(".",2),s[1]=s[1]?"."+s[1]:"",o=s[1]+"!",G.access(this,function(i){return i===e?(c=this.triggerHandler("getData"+o,[s[0]]),c===e&&d&&(c=G.data(d,t),c=n(d,t,c)),c===e&&s[1]?this.data(s[0]):c):(s[1]=i,void this.each(function(){var e=G(this);e.triggerHandler("setData"+o,s),G.data(this,t,i),e.triggerHandler("changeData"+o,s)}))},null,i,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){G.removeData(this,t)})}}),G.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=G._data(t,e),i&&(!n||G.isArray(i)?n=G._data(t,e,G.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=G.queue(t,e),n=i.length,s=i.shift(),o=G._queueHooks(t,e),a=function(){G.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return G._data(t,i)||G._data(t,i,{empty:G.Callbacks("once memory").add(function(){G.removeData(t,e+"queue",!0),G.removeData(t,i,!0)})})}}),G.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),arguments.length<n?G.queue(this[0],t):i===e?this:this.each(function(){var e=G.queue(this,t,i);G._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&G.dequeue(this,t)})},dequeue:function(t){return this.each(function(){G.dequeue(this,t)})},delay:function(t,e){return t=G.fx?G.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var n,s=1,o=G.Deferred(),a=this,r=this.length,l=function(){--s||o.resolveWith(a,[a])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";r--;)n=G._data(a[r],t+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),o.promise(i)}});var ve,ye,be,_e=/[\t\r\n]/g,xe=/\r/g,we=/^(?:button|input)$/i,Ce=/^(?:button|input|object|select|textarea)$/i,ke=/^a(?:rea|)$/i,Te=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Se=G.support.getSetAttribute;G.fn.extend({attr:function(t,e){return G.access(this,G.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){G.removeAttr(this,t)})},prop:function(t,e){return G.access(this,G.prop,t,e,arguments.length>1)},removeProp:function(t){return t=G.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,s,o,a,r;if(G.isFunction(t))return this.each(function(e){G(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(ee),i=0,n=this.length;n>i;i++)if(s=this[i],1===s.nodeType)if(s.className||1!==e.length){for(o=" "+s.className+" ",a=0,r=e.length;r>a;a++)o.indexOf(" "+e[a]+" ")<0&&(o+=e[a]+" ");s.className=G.trim(o)}else s.className=t;return this},removeClass:function(t){var i,n,s,o,a,r,l;if(G.isFunction(t))return this.each(function(e){G(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(i=(t||"").split(ee),r=0,l=this.length;l>r;r++)if(s=this[r],1===s.nodeType&&s.className){for(n=(" "+s.className+" ").replace(_e," "),o=0,a=i.length;a>o;o++)for(;n.indexOf(" "+i[o]+" ")>=0;)n=n.replace(" "+i[o]+" "," ");s.className=t?G.trim(n):""}return this},toggleClass:function(t,e){var i=typeof t,n="boolean"==typeof e;return this.each(G.isFunction(t)?function(i){G(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var s,o=0,a=G(this),r=e,l=t.split(ee);s=l[o++];)r=n?r:!a.hasClass(s),a[r?"addClass":"removeClass"](s);else("undefined"===i||"boolean"===i)&&(this.className&&G._data(this,"__className__",this.className),this.className=this.className||t===!1?"":G._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(_e," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,n,s,o=this[0];{if(arguments.length)return s=G.isFunction(t),this.each(function(n){var o,a=G(this);1===this.nodeType&&(o=s?t.call(this,n,a.val()):t,null==o?o="":"number"==typeof o?o+="":G.isArray(o)&&(o=G.map(o,function(t){return null==t?"":t+""})),i=G.valHooks[this.type]||G.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==e||(this.value=o))});if(o)return i=G.valHooks[o.type]||G.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==e?n:(n=o.value,"string"==typeof n?n.replace(xe,""):null==n?"":n)}}}),G.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,i,n,s,o=t.selectedIndex,a=[],r=t.options,l="select-one"===t.type;if(0>o)return null;for(i=l?o:0,n=l?o+1:r.length;n>i;i++)if(s=r[i],!(!s.selected||(G.support.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&G.nodeName(s.parentNode,"optgroup"))){if(e=G(s).val(),l)return e;a.push(e)}return l&&!a.length&&r.length?G(r[o]).val():a},set:function(t,e){var i=G.makeArray(e);return G(t).find("option").each(function(){this.selected=G.inArray(G(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attrFn:{},attr:function(t,i,n,s){var o,a,r,l=t.nodeType;if(t&&3!==l&&8!==l&&2!==l)return s&&G.isFunction(G.fn[i])?G(t)[i](n):"undefined"==typeof t.getAttribute?G.prop(t,i,n):(r=1!==l||!G.isXMLDoc(t),r&&(i=i.toLowerCase(),a=G.attrHooks[i]||(Te.test(i)?ye:ve)),n!==e?null===n?void G.removeAttr(t,i):a&&"set"in a&&r&&(o=a.set(t,n,i))!==e?o:(t.setAttribute(i,n+""),n):a&&"get"in a&&r&&null!==(o=a.get(t,i))?o:(o=t.getAttribute(i),null===o?e:o))},removeAttr:function(t,e){var i,n,s,o,a=0;if(e&&1===t.nodeType)for(n=e.split(ee);a<n.length;a++)s=n[a],s&&(i=G.propFix[s]||s,o=Te.test(s),o||G.attr(t,s,""),t.removeAttribute(Se?s:i),o&&i in t&&(t[i]=!1))},attrHooks:{type:{set:function(t,e){if(we.test(t.nodeName)&&t.parentNode)G.error("type property can't be changed");else if(!G.support.radioValue&&"radio"===e&&G.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}},value:{get:function(t,e){return ve&&G.nodeName(t,"button")?ve.get(t,e):e in t?t.value:null},set:function(t,e,i){return ve&&G.nodeName(t,"button")?ve.set(t,e,i):void(t.value=e)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,n){var s,o,a,r=t.nodeType;
if(t&&3!==r&&8!==r&&2!==r)return a=1!==r||!G.isXMLDoc(t),a&&(i=G.propFix[i]||i,o=G.propHooks[i]),n!==e?o&&"set"in o&&(s=o.set(t,n,i))!==e?s:t[i]=n:o&&"get"in o&&null!==(s=o.get(t,i))?s:t[i]},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Ce.test(t.nodeName)||ke.test(t.nodeName)&&t.href?0:e}}}}),ye={get:function(t,i){var n,s=G.prop(t,i);return s===!0||"boolean"!=typeof s&&(n=t.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():e},set:function(t,e,i){var n;return e===!1?G.removeAttr(t,i):(n=G.propFix[i]||i,n in t&&(t[n]=!0),t.setAttribute(i,i.toLowerCase())),i}},Se||(be={name:!0,id:!0,coords:!0},ve=G.valHooks.button={get:function(t,i){var n;return n=t.getAttributeNode(i),n&&(be[i]?""!==n.value:n.specified)?n.value:e},set:function(t,e,i){var n=t.getAttributeNode(i);return n||(n=F.createAttribute(i),t.setAttributeNode(n)),n.value=e+""}},G.each(["width","height"],function(t,e){G.attrHooks[e]=G.extend(G.attrHooks[e],{set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}})}),G.attrHooks.contenteditable={get:ve.get,set:function(t,e,i){""===e&&(e="false"),ve.set(t,e,i)}}),G.support.hrefNormalized||G.each(["href","src","width","height"],function(t,i){G.attrHooks[i]=G.extend(G.attrHooks[i],{get:function(t){var n=t.getAttribute(i,2);return null===n?e:n}})}),G.support.style||(G.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=e+""}}),G.support.optSelected||(G.propHooks.selected=G.extend(G.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),G.support.enctype||(G.propFix.enctype="encoding"),G.support.checkOn||G.each(["radio","checkbox"],function(){G.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]=G.extend(G.valHooks[this],{set:function(t,e){return G.isArray(e)?t.checked=G.inArray(G(t).val(),e)>=0:void 0}})});var Ne=/^(?:textarea|input|select)$/i,De=/^([^\.]*|)(?:\.(.+)|)$/,Ee=/(?:^|\s)hover(\.\S+|)\b/,Le=/^key/,Ie=/^(?:mouse|contextmenu)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,He=function(t){return G.event.special.hover?t:t.replace(Ee,"mouseenter$1 mouseleave$1")};G.event={add:function(t,i,n,s,o){var a,r,l,d,h,c,u,p,f,g,m;if(3!==t.nodeType&&8!==t.nodeType&&i&&n&&(a=G._data(t))){for(n.handler&&(f=n,n=f.handler,o=f.selector),n.guid||(n.guid=G.guid++),l=a.events,l||(a.events=l={}),r=a.handle,r||(a.handle=r=function(t){return"undefined"==typeof G||t&&G.event.triggered===t.type?e:G.event.dispatch.apply(r.elem,arguments)},r.elem=t),i=G.trim(He(i)).split(" "),d=0;d<i.length;d++)h=De.exec(i[d])||[],c=h[1],u=(h[2]||"").split(".").sort(),m=G.event.special[c]||{},c=(o?m.delegateType:m.bindType)||c,m=G.event.special[c]||{},p=G.extend({type:c,origType:h[1],data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&G.expr.match.needsContext.test(o),namespace:u.join(".")},f),g=l[c],g||(g=l[c]=[],g.delegateCount=0,m.setup&&m.setup.call(t,s,u,r)!==!1||(t.addEventListener?t.addEventListener(c,r,!1):t.attachEvent&&t.attachEvent("on"+c,r))),m.add&&(m.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),o?g.splice(g.delegateCount++,0,p):g.push(p),G.event.global[c]=!0;t=null}},global:{},remove:function(t,e,i,n,s){var o,a,r,l,d,h,c,u,p,f,g,m=G.hasData(t)&&G._data(t);if(m&&(u=m.events)){for(e=G.trim(He(e||"")).split(" "),o=0;o<e.length;o++)if(a=De.exec(e[o])||[],r=l=a[1],d=a[2],r){for(p=G.event.special[r]||{},r=(n?p.delegateType:p.bindType)||r,f=u[r]||[],h=f.length,d=d?new RegExp("(^|\\.)"+d.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=0;c<f.length;c++)g=f[c],!s&&l!==g.origType||i&&i.guid!==g.guid||d&&!d.test(g.namespace)||n&&n!==g.selector&&("**"!==n||!g.selector)||(f.splice(c--,1),g.selector&&f.delegateCount--,p.remove&&p.remove.call(t,g));0===f.length&&h!==f.length&&(p.teardown&&p.teardown.call(t,d,m.handle)!==!1||G.removeEvent(t,r,m.handle),delete u[r])}else for(r in u)G.event.remove(t,r+e[o],i,n,!0);G.isEmptyObject(u)&&(delete m.handle,G.removeData(t,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,s,o){if(!s||3!==s.nodeType&&8!==s.nodeType){var a,r,l,d,h,c,u,p,f,g,m=i.type||i,v=[];if(!$e.test(m+G.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),r=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),s&&!G.event.customEvent[m]||G.event.global[m]))if(i="object"==typeof i?i[G.expando]?i:new G.Event(m,i):new G.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=r,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",s){if(i.result=e,i.target||(i.target=s),n=null!=n?G.makeArray(n):[],n.unshift(i),u=G.event.special[m]||{},!u.trigger||u.trigger.apply(s,n)!==!1){if(f=[[s,u.bindType||m]],!o&&!u.noBubble&&!G.isWindow(s)){for(g=u.delegateType||m,d=$e.test(g+m)?s:s.parentNode,h=s;d;d=d.parentNode)f.push([d,g]),h=d;h===(s.ownerDocument||F)&&f.push([h.defaultView||h.parentWindow||t,g])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)d=f[l][0],i.type=f[l][1],p=(G._data(d,"events")||{})[i.type]&&G._data(d,"handle"),p&&p.apply(d,n),p=c&&d[c],p&&G.acceptData(d)&&p.apply&&p.apply(d,n)===!1&&i.preventDefault();return i.type=m,o||i.isDefaultPrevented()||u._default&&u._default.apply(s.ownerDocument,n)!==!1||"click"===m&&G.nodeName(s,"a")||!G.acceptData(s)||c&&s[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!G.isWindow(s)&&(h=s[c],h&&(s[c]=null),G.event.triggered=m,s[m](),G.event.triggered=e,h&&(s[c]=h)),i.result}}else{a=G.cache;for(l in a)a[l].events&&a[l].events[m]&&G.event.trigger(i,n,a[l].handle.elem,!0)}}},dispatch:function(i){i=G.event.fix(i||t.event);var n,s,o,a,r,l,d,h,c,u=(G._data(this,"events")||{})[i.type]||[],p=u.delegateCount,f=Q.call(arguments),g=!i.exclusive&&!i.namespace,m=G.event.special[i.type]||{},v=[];if(f[0]=i,i.delegateTarget=this,!m.preDispatch||m.preDispatch.call(this,i)!==!1){if(p&&(!i.button||"click"!==i.type))for(o=i.target;o!=this;o=o.parentNode||this)if(o.disabled!==!0||"click"!==i.type){for(r={},d=[],n=0;p>n;n++)h=u[n],c=h.selector,r[c]===e&&(r[c]=h.needsContext?G(c,this).index(o)>=0:G.find(c,this,null,[o]).length),r[c]&&d.push(h);d.length&&v.push({elem:o,matches:d})}for(u.length>p&&v.push({elem:this,matches:u.slice(p)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,s=0;s<l.matches.length&&!i.isImmediatePropagationStopped();s++)h=l.matches[s],(g||!i.namespace&&!h.namespace||i.namespace_re&&i.namespace_re.test(h.namespace))&&(i.data=h.data,i.handleObj=h,a=((G.event.special[h.origType]||{}).handle||h.handler).apply(l.elem,f),a!==e&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return m.postDispatch&&m.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,s,o,a=i.button,r=i.fromElement;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||F,s=n.documentElement,o=n.body,t.pageX=i.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),t.pageY=i.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?i.toElement:r),t.which||a===e||(t.which=1&a?1:2&a?3:4&a?2:0),t}},fix:function(t){if(t[G.expando])return t;var e,i,n=t,s=G.event.fixHooks[t.type]||{},o=s.props?this.props.concat(s.props):this.props;for(t=G.Event(n),e=o.length;e;)i=o[--e],t[i]=n[i];return t.target||(t.target=n.srcElement||F),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,n):t},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,i){G.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,i,n){var s=G.extend(new G.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?G.event.trigger(s,null,e):G.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},G.event.handle=G.event.dispatch,G.removeEvent=F.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&("undefined"==typeof t[n]&&(t[n]=null),t.detachEvent(n,i))},G.Event=function(t,e){return this instanceof G.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?a:o):this.type=t,e&&G.extend(this,e),this.timeStamp=t&&t.timeStamp||G.now(),void(this[G.expando]=!0)):new G.Event(t,e)},G.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},G.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){G.event.special[t]={delegateType:e,bindType:e,handle:function(t){{var i,n=this,s=t.relatedTarget,o=t.handleObj;o.selector}return(!s||s!==n&&!G.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),G.support.submitBubbles||(G.event.special.submit={setup:function(){return G.nodeName(this,"form")?!1:void G.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=G.nodeName(i,"input")||G.nodeName(i,"button")?i.form:e;n&&!G._data(n,"_submit_attached")&&(G.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),G._data(n,"_submit_attached",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&G.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return G.nodeName(this,"form")?!1:void G.event.remove(this,"._submit")}}),G.support.changeBubbles||(G.event.special.change={setup:function(){return Ne.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(G.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),G.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),G.event.simulate("change",this,t,!0)})),!1):void G.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ne.test(e.nodeName)&&!G._data(e,"_change_attached")&&(G.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||G.event.simulate("change",this.parentNode,t,!0)}),G._data(e,"_change_attached",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return G.event.remove(this,"._change"),!Ne.test(this.nodeName)}}),G.support.focusinBubbles||G.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){G.event.simulate(e,t.target,G.event.fix(t),!0)};G.event.special[e]={setup:function(){0===i++&&F.addEventListener(t,n,!0)},teardown:function(){0===--i&&F.removeEventListener(t,n,!0)}}}),G.fn.extend({on:function(t,i,n,s,a){var r,l;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(l in t)this.on(l,i,n,t[l],a);return this}if(null==n&&null==s?(s=i,n=i=e):null==s&&("string"==typeof i?(s=n,n=e):(s=n,n=i,i=e)),s===!1)s=o;else if(!s)return this;return 1===a&&(r=s,s=function(t){return G().off(t),r.apply(this,arguments)},s.guid=r.guid||(r.guid=G.guid++)),this.each(function(){G.event.add(this,t,s,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){var s,a;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,G(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof t){for(a in t)this.off(a,i,t[a]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=o),this.each(function(){G.event.remove(this,t,n,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,i){return G(this.context).on(t,this.selector,e,i),this},die:function(t,e){return G(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},trigger:function(t,e){return this.each(function(){G.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?G.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,i=t.guid||G.guid++,n=0,s=function(i){var s=(G._data(this,"lastToggle"+t.guid)||0)%n;return G._data(this,"lastToggle"+t.guid,s+1),i.preventDefault(),e[s].apply(this,arguments)||!1};for(s.guid=i;n<e.length;)e[n++].guid=i;return this.click(s)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),G.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){G.fn[e]=function(t,i){return null==i&&(i=t,t=null),arguments.length>0?this.on(e,null,t,i):this.trigger(e)},Le.test(e)&&(G.event.fixHooks[e]=G.event.keyHooks),Ie.test(e)&&(G.event.fixHooks[e]=G.event.mouseHooks)}),function(t,e){function i(t,e,i,n){i=i||[],e=e||I;var s,o,a,r,l=e.nodeType;if(!t||"string"!=typeof t)return i;if(1!==l&&9!==l)return[];if(a=x(e),!a&&!n&&(s=ie.exec(t)))if(r=s[1]){if(9===l){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&w(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return A.apply(i,B.call(e.getElementsByTagName(t),0)),i;if((r=s[3])&&ue&&e.getElementsByClassName)return A.apply(i,B.call(e.getElementsByClassName(r),0)),i}return g(t.replace(J,"$1"),e,i,n,a)}function n(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function s(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function o(t){return j(function(e){return e=+e,j(function(i,n){for(var s,o=t([],i.length,e),a=o.length;a--;)i[s=o[a]]&&(i[s]=!(n[s]=i[s]))})})}function a(t,e,i){if(t===e)return i;for(var n=t.nextSibling;n;){if(n===e)return-1;n=n.nextSibling}return 1}function r(t,e){var n,s,o,a,r,l,d,h=O[E][t];if(h)return e?0:h.slice(0);for(r=t,l=[],d=b.preFilter;r;){(!n||(s=Z.exec(r)))&&(s&&(r=r.slice(s[0].length)),l.push(o=[])),n=!1,(s=te.exec(r))&&(o.push(n=new L(s.shift())),r=r.slice(n.length),n.type=s[0].replace(J," "));for(a in b.filter)!(s=re[a].exec(r))||d[a]&&!(s=d[a](s,I,!0))||(o.push(n=new L(s.shift())),r=r.slice(n.length),n.type=a,n.matches=s);if(!n)break}return e?r.length:r?i.error(t):O(t,l).slice(0)}function l(t,e,i){var n=e.dir,s=i&&"parentNode"===e.dir,o=M++;return e.first?function(e,i,o){for(;e=e[n];)if(s||1===e.nodeType)return t(e,i,o)}:function(e,i,a){if(a){for(;e=e[n];)if((s||1===e.nodeType)&&t(e,i,a))return e}else for(var r,l=H+" "+o+" ",d=l+v;e=e[n];)if(s||1===e.nodeType){if((r=e[E])===d)return e.sizset;if("string"==typeof r&&0===r.indexOf(l)){if(e.sizset)return e}else{if(e[E]=d,t(e,i,a))return e.sizset=!0,e;e.sizset=!1}}}}function d(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function h(t,e,i,n,s){for(var o,a=[],r=0,l=t.length,d=null!=e;l>r;r++)(o=t[r])&&(!i||i(o,n,s))&&(a.push(o),d&&e.push(r));return a}function c(t,e,i,n,s,o){return n&&!n[E]&&(n=c(n)),s&&!s[E]&&(s=c(s,o)),j(function(o,a,r,l){if(!o||!s){var d,c,u,p=[],g=[],m=a.length,v=o||f(e||"*",r.nodeType?[r]:r,[],o),y=!t||!o&&e?v:h(v,p,t,r,l),b=i?s||(o?t:m||n)?[]:a:y;if(i&&i(y,b,r,l),n)for(u=h(b,g),n(u,[],r,l),d=u.length;d--;)(c=u[d])&&(b[g[d]]=!(y[g[d]]=c));if(o)for(d=t&&b.length;d--;)(c=b[d])&&(o[p[d]]=!(a[p[d]]=c));else b=h(b===a?b.splice(m,b.length):b),s?s(null,a,b,l):A.apply(a,b)}})}function u(t){for(var e,i,n,s=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],r=o?1:0,h=l(function(t){return t===e},a,!0),p=l(function(t){return z.call(e,t)>-1},a,!0),f=[function(t,i,n){return!o&&(n||i!==S)||((e=i).nodeType?h(t,i,n):p(t,i,n))}];s>r;r++)if(i=b.relative[t[r].type])f=[l(d(f),i)];else{if(i=b.filter[t[r].type].apply(null,t[r].matches),i[E]){for(n=++r;s>n&&!b.relative[t[n].type];n++);return c(r>1&&d(f),r>1&&t.slice(0,r-1).join("").replace(J,"$1"),i,n>r&&u(t.slice(r,n)),s>n&&u(t=t.slice(n)),s>n&&t.join(""))}f.push(i)}return d(f)}function p(t,e){var n=e.length>0,s=t.length>0,o=function(a,r,l,d,c){var u,p,f,g=[],m=0,y="0",_=a&&[],x=null!=c,w=S,C=a||s&&b.find.TAG("*",c&&r.parentNode||r),k=H+=null==w?1:Math.E;for(x&&(S=r!==I&&r,v=o.el);null!=(u=C[y]);y++){if(s&&u){for(p=0;f=t[p];p++)if(f(u,r,l)){d.push(u);break}x&&(H=k,v=++o.el)}n&&((u=!f&&u)&&m--,a&&_.push(u))}if(m+=y,n&&y!==m){for(p=0;f=e[p];p++)f(_,g,r,l);if(a){if(m>0)for(;y--;)_[y]||g[y]||(g[y]=P.call(d));g=h(g)}A.apply(d,g),x&&!a&&g.length>0&&m+e.length>1&&i.uniqueSort(d)}return x&&(H=k,S=w),_};return o.el=0,n?j(o):o}function f(t,e,n,s){for(var o=0,a=e.length;a>o;o++)i(t,e[o],n,s);return n}function g(t,e,i,n,s){{var o,a,l,d,h,c=r(t);c.length}if(!n&&1===c.length){if(a=c[0]=c[0].slice(0),a.length>2&&"ID"===(l=a[0]).type&&9===e.nodeType&&!s&&b.relative[a[1].type]){if(e=b.find.ID(l.matches[0].replace(ae,""),e,s)[0],!e)return i;t=t.slice(a.shift().length)}for(o=re.POS.test(t)?-1:a.length-1;o>=0&&(l=a[o],!b.relative[d=l.type]);o--)if((h=b.find[d])&&(n=h(l.matches[0].replace(ae,""),ne.test(a[0].type)&&e.parentNode||e,s))){if(a.splice(o,1),t=n.length&&a.join(""),!t)return A.apply(i,B.call(n,0)),i;break}}return C(t,c)(n,e,s,i,ne.test(t)),i}function m(){}var v,y,b,_,x,w,C,k,T,S,N=!0,D="undefined",E=("sizcache"+Math.random()).replace(".",""),L=String,I=t.document,$=I.documentElement,H=0,M=0,P=[].pop,A=[].push,B=[].slice,z=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},j=function(t,e){return t[E]=null==e||e,t},R=function(){var t={},e=[];return j(function(i,n){return e.push(i)>b.cacheLength&&delete t[e.shift()],t[i]=n},t)},F=R(),O=R(),q=R(),W="[\\x20\\t\\r\\n\\f]",V="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=V.replace("w","w#"),Q="([*^$|!~]?=)",K="\\["+W+"*("+V+")"+W+"*(?:"+Q+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+W+"*\\]",Y=":("+V+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+K+")|[^:]|\\\\.)*|.*))\\)|)",X=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",J=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=new RegExp("^"+W+"*,"+W+"*"),te=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),ee=new RegExp(Y),ie=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ne=/[\x20\t\r\n\f]*[+~]/,se=/h\d/i,oe=/input|select|textarea|button/i,ae=/\\(?!\\)/g,re={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),NAME:new RegExp("^\\[name=['\"]?("+V+")['\"]?\\]"),TAG:new RegExp("^("+V.replace("w","w*")+")"),ATTR:new RegExp("^"+K),PSEUDO:new RegExp("^"+Y),POS:new RegExp(X,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+X,"i")},le=function(t){var e=I.createElement("div");try{return t(e)}catch(i){return!1}finally{e=null}},de=le(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),he=le(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==D&&"#"===t.firstChild.getAttribute("href")}),ce=le(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),ue=le(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),pe=le(function(t){t.id=E+0,t.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",$.insertBefore(t,$.firstChild);var e=I.getElementsByName&&I.getElementsByName(E).length===2+I.getElementsByName(E+0).length;return y=!I.getElementById(E),$.removeChild(t),e});try{B.call($.childNodes,0)[0].nodeType}catch(fe){B=function(t){for(var e,i=[];e=this[t];t++)i.push(e);return i}}i.matches=function(t,e){return i(t,null,null,e)},i.matchesSelector=function(t,e){return i(e,null,null,[t]).length>0},_=i.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=_(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n];n++)i+=_(e);return i},x=i.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},w=i.contains=$.contains?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:$.compareDocumentPosition?function(t,e){return e&&!!(16&t.compareDocumentPosition(e))}:function(t,e){for(;e=e.parentNode;)if(e===t)return!0;return!1},i.attr=function(t,e){var i,n=x(t);return n||(e=e.toLowerCase()),(i=b.attrHandle[e])?i(t):n||ce?t.getAttribute(e):(i=t.getAttributeNode(e),i?"boolean"==typeof t[e]?t[e]?e:null:i.specified?i.value:null:null)},b=i.selectors={cacheLength:50,createPseudo:j,match:re,attrHandle:he?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},find:{ID:y?function(t,e,i){if(typeof e.getElementById!==D&&!i){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}}:function(t,i,n){if(typeof i.getElementById!==D&&!n){var s=i.getElementById(t);return s?s.id===t||typeof s.getAttributeNode!==D&&s.getAttributeNode("id").value===t?[s]:e:[]}},TAG:de?function(t,e){return typeof e.getElementsByTagName!==D?e.getElementsByTagName(t):void 0}:function(t,e){var i=e.getElementsByTagName(t);if("*"===t){for(var n,s=[],o=0;n=i[o];o++)1===n.nodeType&&s.push(n);return s}return i},NAME:pe&&function(t,e){return typeof e.getElementsByName!==D?e.getElementsByName(name):void 0},CLASS:ue&&function(t,e,i){return typeof e.getElementsByClassName===D||i?void 0:e.getElementsByClassName(t)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ae,""),t[3]=(t[4]||t[5]||"").replace(ae,""),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1]?(t[2]||i.error(t[0]),t[3]=+(t[3]?t[4]+(t[5]||1):2*("even"===t[2]||"odd"===t[2])),t[4]=+(t[6]+t[7]||"odd"===t[2])):t[2]&&i.error(t[0]),t},PSEUDO:function(t){var e,i;return re.CHILD.test(t[0])?null:(t[3]?t[2]=t[3]:(e=t[4])&&(ee.test(e)&&(i=r(e,!0))&&(i=e.indexOf(")",e.length-i)-e.length)&&(e=e.slice(0,i),t[0]=t[0].slice(0,i)),t[2]=e),t.slice(0,3))}},filter:{ID:y?function(t){return t=t.replace(ae,""),function(e){return e.getAttribute("id")===t}}:function(t){return t=t.replace(ae,""),function(e){var i=typeof e.getAttributeNode!==D&&e.getAttributeNode("id");return i&&i.value===t}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(ae,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=F[E][t];return e||(e=F(t,new RegExp("(^|"+W+")"+t+"("+W+"|$)"))),function(t){return e.test(t.className||typeof t.getAttribute!==D&&t.getAttribute("class")||"")}},ATTR:function(t,e,n){return function(s){var o=i.attr(s,t);return null==o?"!="===e:e?(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.substr(o.length-n.length)===n:"~="===e?(" "+o+" ").indexOf(n)>-1:"|="===e?o===n||o.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n){return"nth"===t?function(t){var e,s,o=t.parentNode;if(1===i&&0===n)return!0;if(o)for(s=0,e=o.firstChild;e&&(1!==e.nodeType||(s++,t!==e));e=e.nextSibling);return s-=n,s===i||s%i===0&&s/i>=0}:function(e){var i=e;switch(t){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===t)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(t,e){var n,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||i.error("unsupported pseudo: "+t);return s[E]?s(e):s.length>1?(n=[t,t,"",e],b.setFilters.hasOwnProperty(t.toLowerCase())?j(function(t,i){for(var n,o=s(t,e),a=o.length;a--;)n=z.call(t,o[a]),t[n]=!(i[n]=o[a])}):function(t){return s(t,0,n)}):s}},pseudos:{not:j(function(t){var e=[],i=[],n=C(t.replace(J,"$1"));return n[E]?j(function(t,e,i,s){for(var o,a=n(t,null,s,[]),r=t.length;r--;)(o=a[r])&&(t[r]=!(e[r]=o))}):function(t,s,o){return e[0]=t,n(e,null,o,i),!i.pop()}}),has:j(function(t){return function(e){return i(t,e).length>0}}),contains:j(function(t){return function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!b.pseudos.empty(t)},empty:function(t){var e;for(t=t.firstChild;t;){if(t.nodeName>"@"||3===(e=t.nodeType)||4===e)return!1;t=t.nextSibling}return!0},header:function(t){return se.test(t.nodeName)},text:function(t){var e,i;return"input"===t.nodeName.toLowerCase()&&"text"===(e=t.type)&&(null==(i=t.getAttribute("type"))||i.toLowerCase()===e)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:s("submit"),reset:s("reset"),button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return oe.test(t.nodeName)},focus:function(t){var e=t.ownerDocument;return!(t!==e.activeElement||e.hasFocus&&!e.hasFocus()||!t.type&&!t.href)},active:function(t){return t===t.ownerDocument.activeElement},first:o(function(){return[0]}),last:o(function(t,e){return[e-1]}),eq:o(function(t,e,i){return[0>i?i+e:i]}),even:o(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:o(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:o(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:o(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},k=$.compareDocumentPosition?function(t,e){return t===e?(T=!0,0):(t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e):t.compareDocumentPosition)?-1:1}:function(t,e){if(t===e)return T=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var i,n,s=[],o=[],r=t.parentNode,l=e.parentNode,d=r;if(r===l)return a(t,e);if(!r)return-1;if(!l)return 1;for(;d;)s.unshift(d),d=d.parentNode;for(d=l;d;)o.unshift(d),d=d.parentNode;i=s.length,n=o.length;for(var h=0;i>h&&n>h;h++)if(s[h]!==o[h])return a(s[h],o[h]);return h===i?a(t,o[h],-1):a(s[h],e,1)},[0,0].sort(k),N=!T,i.uniqueSort=function(t){var e,i=1;if(T=N,t.sort(k),T)for(;e=t[i];i++)e===t[i-1]&&t.splice(i--,1);return t},i.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},C=i.compile=function(t,e){var i,n=[],s=[],o=q[E][t];if(!o){for(e||(e=r(t)),i=e.length;i--;)o=u(e[i]),o[E]?n.push(o):s.push(o);o=q(t,p(s,n))}return o},I.querySelectorAll&&!function(){var t,e=g,n=/'|\\/g,s=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],a=[":active",":focus"],l=$.matchesSelector||$.mozMatchesSelector||$.webkitMatchesSelector||$.oMatchesSelector||$.msMatchesSelector;le(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||o.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||o.push(":checked")}),le(function(t){t.innerHTML="<p test=''></p>",t.querySelectorAll("[test^='']").length&&o.push("[*^$]="+W+"*(?:\"\"|'')"),t.innerHTML="<input type='hidden'/>",t.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=new RegExp(o.join("|")),g=function(t,i,s,a,l){if(!(a||l||o&&o.test(t))){var d,h,c=!0,u=E,p=i,f=9===i.nodeType&&t;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(d=r(t),(c=i.getAttribute("id"))?u=c.replace(n,"\\$&"):i.setAttribute("id",u),u="[id='"+u+"'] ",h=d.length;h--;)d[h]=u+d[h].join("");p=ne.test(t)&&i.parentNode||i,f=d.join(",")}if(f)try{return A.apply(s,B.call(p.querySelectorAll(f),0)),s}catch(g){}finally{c||i.removeAttribute("id")}}return e(t,i,s,a,l)},l&&(le(function(e){t=l.call(e,"div");try{l.call(e,"[test!='']:sizzle"),a.push("!=",Y)}catch(i){}}),a=new RegExp(a.join("|")),i.matchesSelector=function(e,n){if(n=n.replace(s,"='$1']"),!(x(e)||a.test(n)||o&&o.test(n)))try{var r=l.call(e,n);if(r||t||e.document&&11!==e.document.nodeType)return r}catch(d){}return i(n,null,null,[e]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=m.prototype=b.pseudos,b.setFilters=new m,i.attr=G.attr,G.find=i,G.expr=i.selectors,G.expr[":"]=G.expr.pseudos,G.unique=i.uniqueSort,G.text=i.getText,G.isXMLDoc=i.isXML,G.contains=i.contains}(t);var Me=/Until$/,Pe=/^(?:parents|prev(?:Until|All))/,Ae=/^.[^:#\[\.,]*$/,Be=G.expr.match.needsContext,ze={children:!0,contents:!0,next:!0,prev:!0};G.fn.extend({find:function(t){var e,i,n,s,o,a,r=this;if("string"!=typeof t)return G(t).filter(function(){for(e=0,i=r.length;i>e;e++)if(G.contains(r[e],this))return!0});for(a=this.pushStack("","find",t),e=0,i=this.length;i>e;e++)if(n=a.length,G.find(t,this[e],a),e>0)for(s=n;s<a.length;s++)for(o=0;n>o;o++)if(a[o]===a[s]){a.splice(s--,1);break}return a},has:function(t){var e,i=G(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(G.contains(this,i[e]))return!0})},not:function(t){return this.pushStack(d(this,t,!1),"not",t)},filter:function(t){return this.pushStack(d(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?Be.test(t)?G(t,this.context).index(this[0])>=0:G.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var i,n=0,s=this.length,o=[],a=Be.test(t)||"string"!=typeof t?G(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==e&&11!==i.nodeType;){if(a?a.index(i)>-1:G.find.matchesSelector(i,t)){o.push(i);break}i=i.parentNode}return o=o.length>1?G.unique(o):o,this.pushStack(o,"closest",t)},index:function(t){return t?"string"==typeof t?G.inArray(this[0],G(t)):G.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var i="string"==typeof t?G(t,e):G.makeArray(t&&t.nodeType?[t]:t),n=G.merge(this.get(),i);return this.pushStack(r(i[0])||r(n[0])?n:G.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),G.fn.andSelf=G.fn.addBack,G.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return G.dir(t,"parentNode")},parentsUntil:function(t,e,i){return G.dir(t,"parentNode",i)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return G.dir(t,"nextSibling")},prevAll:function(t){return G.dir(t,"previousSibling")},nextUntil:function(t,e,i){return G.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return G.dir(t,"previousSibling",i)},siblings:function(t){return G.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return G.sibling(t.firstChild)
},contents:function(t){return G.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:G.merge([],t.childNodes)}},function(t,e){G.fn[t]=function(i,n){var s=G.map(this,e,i);return Me.test(t)||(n=i),n&&"string"==typeof n&&(s=G.filter(n,s)),s=this.length>1&&!ze[t]?G.unique(s):s,this.length>1&&Pe.test(t)&&(s=s.reverse()),this.pushStack(s,t,Q.call(arguments).join(","))}}),G.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?G.find.matchesSelector(e[0],t)?[e[0]]:[]:G.find.matches(t,e)},dir:function(t,i,n){for(var s=[],o=t[i];o&&9!==o.nodeType&&(n===e||1!==o.nodeType||!G(o).is(n));)1===o.nodeType&&s.push(o),o=o[i];return s},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var je="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Fe=/^\s+/,Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qe=/<([\w:]+)/,We=/<tbody/i,Ve=/<|&#?\w+;/,Ue=/<(?:script|style|link)/i,Qe=/<(?:script|object|embed|option|style)/i,Ke=new RegExp("<(?:"+je+")[\\s/>]","i"),Ye=/^(?:checkbox|radio)$/,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/\/(java|ecma)script/i,Ge=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ti=h(F),ei=ti.appendChild(F.createElement("div"));Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td,G.support.htmlSerialize||(Ze._default=[1,"X<div>","</div>"]),G.fn.extend({text:function(t){return G.access(this,function(t){return t===e?G.text(this):this.empty().append((this[0]&&this[0].ownerDocument||F).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(G.isFunction(t))return this.each(function(e){G(this).wrapAll(t.call(this,e))});if(this[0]){var e=G(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(G.isFunction(t)?function(e){G(this).wrapInner(t.call(this,e))}:function(){var e=G(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=G.isFunction(t);return this.each(function(i){G(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){G.nodeName(this,"body")||G(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){if(!r(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=G.clean(arguments);return this.pushStack(G.merge(t,this),"before",this.selector)}},after:function(){if(!r(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=G.clean(arguments);return this.pushStack(G.merge(this,t),"after",this.selector)}},remove:function(t,e){for(var i,n=0;null!=(i=this[n]);n++)(!t||G.filter(t,[i]).length)&&(e||1!==i.nodeType||(G.cleanData(i.getElementsByTagName("*")),G.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&G.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return G.clone(this,t,e)})},html:function(t){return G.access(this,function(t){var i=this[0]||{},n=0,s=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(Re,""):e;if(!("string"!=typeof t||Ue.test(t)||!G.support.htmlSerialize&&Ke.test(t)||!G.support.leadingWhitespace&&Fe.test(t)||Ze[(qe.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Oe,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(G.cleanData(i.getElementsByTagName("*")),i.innerHTML=t);i=0}catch(o){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return r(this[0])?this.length?this.pushStack(G(G.isFunction(t)?t():t),"replaceWith",t):this:G.isFunction(t)?this.each(function(e){var i=G(this),n=i.html();i.replaceWith(t.call(this,e,n))}):("string"!=typeof t&&(t=G(t).detach()),this.each(function(){var e=this.nextSibling,i=this.parentNode;G(this).remove(),e?G(e).before(t):G(i).append(t)}))},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,n){t=[].concat.apply([],t);var s,o,a,r,l=0,d=t[0],h=[],u=this.length;if(!G.support.checkClone&&u>1&&"string"==typeof d&&Xe.test(d))return this.each(function(){G(this).domManip(t,i,n)});if(G.isFunction(d))return this.each(function(s){var o=G(this);t[0]=d.call(this,s,i?o.html():e),o.domManip(t,i,n)});if(this[0]){if(s=G.buildFragment(t,this,h),a=s.fragment,o=a.firstChild,1===a.childNodes.length&&(a=o),o)for(i=i&&G.nodeName(o,"tr"),r=s.cacheable||u-1;u>l;l++)n.call(i&&G.nodeName(this[l],"table")?c(this[l],"tbody"):this[l],l===r?a:G.clone(a,!0,!0));a=o=null,h.length&&G.each(h,function(t,e){e.src?G.ajax?G.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):G.error("no ajax"):G.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Ge,"")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),G.buildFragment=function(t,i,n){var s,o,a,r=t[0];return i=i||F,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,!(1===t.length&&"string"==typeof r&&r.length<512&&i===F&&"<"===r.charAt(0))||Qe.test(r)||!G.support.checkClone&&Xe.test(r)||!G.support.html5Clone&&Ke.test(r)||(o=!0,s=G.fragments[r],a=s!==e),s||(s=i.createDocumentFragment(),G.clean(t,i,s,n),o&&(G.fragments[r]=a&&s)),{fragment:s,cacheable:o}},G.fragments={},G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){G.fn[t]=function(i){var n,s=0,o=[],a=G(i),r=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===r)return a[e](this[0]),this;for(;r>s;s++)n=(s>0?this.clone(!0):this).get(),G(a[s])[e](n),o=o.concat(n);return this.pushStack(o,t,a.selector)}}),G.extend({clone:function(t,e,i){var n,s,o,a;if(G.support.html5Clone||G.isXMLDoc(t)||!Ke.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(ei.innerHTML=t.outerHTML,ei.removeChild(a=ei.firstChild)),!(G.support.noCloneEvent&&G.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||G.isXMLDoc(t)))for(p(t,a),n=f(t),s=f(a),o=0;n[o];++o)s[o]&&p(n[o],s[o]);if(e&&(u(t,a),i))for(n=f(t),s=f(a),o=0;n[o];++o)u(n[o],s[o]);return n=s=null,a},clean:function(t,e,i,n){var s,o,a,r,l,d,c,u,p,f,m,v=e===F&&ti,y=[];for(e&&"undefined"!=typeof e.createDocumentFragment||(e=F),s=0;null!=(a=t[s]);s++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Ve.test(a)){for(v=v||h(e),c=e.createElement("div"),v.appendChild(c),a=a.replace(Oe,"<$1></$2>"),r=(qe.exec(a)||["",""])[1].toLowerCase(),l=Ze[r]||Ze._default,d=l[0],c.innerHTML=l[1]+a+l[2];d--;)c=c.lastChild;if(!G.support.tbody)for(u=We.test(a),p="table"!==r||u?"<table>"!==l[1]||u?[]:c.childNodes:c.firstChild&&c.firstChild.childNodes,o=p.length-1;o>=0;--o)G.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o]);!G.support.leadingWhitespace&&Fe.test(a)&&c.insertBefore(e.createTextNode(Fe.exec(a)[0]),c.firstChild),a=c.childNodes,c.parentNode.removeChild(c)}else a=e.createTextNode(a);a.nodeType?y.push(a):G.merge(y,a)}if(c&&(a=c=v=null),!G.support.appendChecked)for(s=0;null!=(a=y[s]);s++)G.nodeName(a,"input")?g(a):"undefined"!=typeof a.getElementsByTagName&&G.grep(a.getElementsByTagName("input"),g);if(i)for(f=function(t){return!t.type||Je.test(t.type)?n?n.push(t.parentNode?t.parentNode.removeChild(t):t):i.appendChild(t):void 0},s=0;null!=(a=y[s]);s++)G.nodeName(a,"script")&&f(a)||(i.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(m=G.grep(G.merge([],a.getElementsByTagName("script")),f),y.splice.apply(y,[s+1,0].concat(m)),s+=m.length));return y},cleanData:function(t,e){for(var i,n,s,o,a=0,r=G.expando,l=G.cache,d=G.support.deleteExpando,h=G.event.special;null!=(s=t[a]);a++)if((e||G.acceptData(s))&&(n=s[r],i=n&&l[n])){if(i.events)for(o in i.events)h[o]?G.event.remove(s,o):G.removeEvent(s,o,i.handle);l[n]&&(delete l[n],d?delete s[r]:s.removeAttribute?s.removeAttribute(r):s[r]=null,G.deletedIds.push(n))}}}),function(){var t,e;G.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t=G.uaMatch(q.userAgent),e={},t.browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),G.browser=e,G.sub=function(){function t(e,i){return new t.fn.init(e,i)}G.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,n){return n&&n instanceof G&&!(n instanceof t)&&(n=t(n)),G.fn.init.call(this,i,n,e)},t.fn.init.prototype=t.fn;var e=t(F);return t}}();var ii,ni,si,oi=/alpha\([^)]*\)/i,ai=/opacity=([^)]*)/,ri=/^(top|right|bottom|left)$/,li=/^(none|table(?!-c[ea]).+)/,di=/^margin/,hi=new RegExp("^("+Z+")(.*)$","i"),ci=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),ui=new RegExp("^([-+])=("+Z+")","i"),pi={},fi={position:"absolute",visibility:"hidden",display:"block"},gi={letterSpacing:0,fontWeight:400},mi=["Top","Right","Bottom","Left"],vi=["Webkit","O","Moz","ms"],yi=G.fn.toggle;G.fn.extend({css:function(t,i){return G.access(this,function(t,i,n){return n!==e?G.style(t,i,n):G.css(t,i)},t,i,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(t,e){var i="boolean"==typeof t;return G.isFunction(t)&&G.isFunction(e)?yi.apply(this,arguments):this.each(function(){(i?t:v(this))?G(this).show():G(this).hide()})}}),G.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ii(t,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":G.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,r,l=G.camelCase(i),d=t.style;if(i=G.cssProps[l]||(G.cssProps[l]=m(d,l)),r=G.cssHooks[i]||G.cssHooks[l],n===e)return r&&"get"in r&&(o=r.get(t,!1,s))!==e?o:d[i];if(a=typeof n,"string"===a&&(o=ui.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(G.css(t,i)),a="number"),!(null==n||"number"===a&&isNaN(n)||("number"!==a||G.cssNumber[l]||(n+="px"),r&&"set"in r&&(n=r.set(t,n,s))===e)))try{d[i]=n}catch(h){}}},css:function(t,i,n,s){var o,a,r,l=G.camelCase(i);return i=G.cssProps[l]||(G.cssProps[l]=m(t.style,l)),r=G.cssHooks[i]||G.cssHooks[l],r&&"get"in r&&(o=r.get(t,!0,s)),o===e&&(o=ii(t,i)),"normal"===o&&i in gi&&(o=gi[i]),n||s!==e?(a=parseFloat(o),n||G.isNumeric(a)?a||0:o):o},swap:function(t,e,i){var n,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];n=i.call(t);for(s in e)t.style[s]=o[s];return n}}),t.getComputedStyle?ii=function(e,i){var n,s,o,a,r=t.getComputedStyle(e,null),l=e.style;return r&&(n=r[i],""!==n||G.contains(e.ownerDocument,e)||(n=G.style(e,i)),ci.test(n)&&di.test(i)&&(s=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=r.width,l.width=s,l.minWidth=o,l.maxWidth=a)),n}:F.documentElement.currentStyle&&(ii=function(t,e){var i,n,s=t.currentStyle&&t.currentStyle[e],o=t.style;return null==s&&o&&o[e]&&(s=o[e]),ci.test(s)&&!ri.test(e)&&(i=o.left,n=t.runtimeStyle&&t.runtimeStyle.left,n&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":s,s=o.pixelLeft+"px",o.left=i,n&&(t.runtimeStyle.left=n)),""===s?"auto":s}),G.each(["height","width"],function(t,e){G.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&li.test(ii(t,"display"))?G.swap(t,fi,function(){return x(t,e,n)}):x(t,e,n):void 0},set:function(t,i,n){return b(t,i,n?_(t,e,n,G.support.boxSizing&&"border-box"===G.css(t,"boxSizing")):0)}}}),G.support.opacity||(G.cssHooks.opacity={get:function(t,e){return ai.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=G.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,e>=1&&""===G.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,s):o+" "+s)}}),G(function(){G.support.reliableMarginRight||(G.cssHooks.marginRight={get:function(t,e){return G.swap(t,{display:"inline-block"},function(){return e?ii(t,"marginRight"):void 0})}}),!G.support.pixelPosition&&G.fn.position&&G.each(["top","left"],function(t,e){G.cssHooks[e]={get:function(t,i){if(i){var n=ii(t,e);return ci.test(n)?G(t).position()[e]+"px":n}}}})}),G.expr&&G.expr.filters&&(G.expr.filters.hidden=function(t){return 0===t.offsetWidth&&0===t.offsetHeight||!G.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ii(t,"display"))},G.expr.filters.visible=function(t){return!G.expr.filters.hidden(t)}),G.each({margin:"",padding:"",border:"Width"},function(t,e){G.cssHooks[t+e]={expand:function(i){var n,s="string"==typeof i?i.split(" "):[i],o={};for(n=0;4>n;n++)o[t+mi[n]+e]=s[n]||s[n-2]||s[0];return o}},di.test(t)||(G.cssHooks[t+e].set=b)});var bi=/%20/g,_i=/\[\]$/,xi=/\r?\n/g,wi=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ci=/^(?:select|textarea)/i;G.fn.extend({serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?G.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ci.test(this.nodeName)||wi.test(this.type))}).map(function(t,e){var i=G(this).val();return null==i?null:G.isArray(i)?G.map(i,function(t){return{name:e.name,value:t.replace(xi,"\r\n")}}):{name:e.name,value:i.replace(xi,"\r\n")}}).get()}}),G.param=function(t,i){var n,s=[],o=function(t,e){e=G.isFunction(e)?e():null==e?"":e,s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=G.ajaxSettings&&G.ajaxSettings.traditional),G.isArray(t)||t.jquery&&!G.isPlainObject(t))G.each(t,function(){o(this.name,this.value)});else for(n in t)C(n,t[n],i,o);return s.join("&").replace(bi,"+")};var ki,Ti,Si=/#.*$/,Ni=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Di=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ei=/^(?:GET|HEAD)$/,Li=/^\/\//,Ii=/\?/,$i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hi=/([?&])_=[^&]*/,Mi=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pi=G.fn.load,Ai={},Bi={},zi=["*/"]+["*"];try{Ti=O.href}catch(ji){Ti=F.createElement("a"),Ti.href="",Ti=Ti.href}ki=Mi.exec(Ti.toLowerCase())||[],G.fn.load=function(t,i,n){if("string"!=typeof t&&Pi)return Pi.apply(this,arguments);if(!this.length)return this;var s,o,a,r=this,l=t.indexOf(" ");return l>=0&&(s=t.slice(l,t.length),t=t.slice(0,l)),G.isFunction(i)?(n=i,i=e):i&&"object"==typeof i&&(o="POST"),G.ajax({url:t,type:o,dataType:"html",data:i,complete:function(t,e){n&&r.each(n,a||[t.responseText,e,t])}}).done(function(t){a=arguments,r.html(s?G("<div>").append(t.replace($i,"")).find(s):t)}),this},G.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){G.fn[e]=function(t){return this.on(e,t)}}),G.each(["get","post"],function(t,i){G[i]=function(t,n,s,o){return G.isFunction(n)&&(o=o||s,s=n,n=e),G.ajax({type:i,url:t,data:n,success:s,dataType:o})}}),G.extend({getScript:function(t,i){return G.get(t,e,i,"script")},getJSON:function(t,e,i){return G.get(t,e,i,"json")},ajaxSetup:function(t,e){return e?S(t,G.ajaxSettings):(e=t,t=G.ajaxSettings),S(t,e),t},ajaxSettings:{url:Ti,isLocal:Di.test(ki[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":zi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":G.parseJSON,"text xml":G.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Ai),ajaxTransport:k(Bi),ajax:function(t,i){function n(t,i,n,a){var d,c,y,b,x,C=i;2!==_&&(_=2,l&&clearTimeout(l),r=e,o=a||"",w.readyState=t>0?4:0,n&&(b=N(u,w,n)),t>=200&&300>t||304===t?(u.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(G.lastModified[s]=x),x=w.getResponseHeader("Etag"),x&&(G.etag[s]=x)),304===t?(C="notmodified",d=!0):(d=D(u,b),C=d.state,c=d.data,y=d.error,d=!y)):(y=C,(!C||t)&&(C="error",0>t&&(t=0))),w.status=t,w.statusText=(i||C)+"",d?g.resolveWith(p,[c,C,w]):g.rejectWith(p,[w,C,y]),w.statusCode(v),v=e,h&&f.trigger("ajax"+(d?"Success":"Error"),[w,u,d?c:y]),m.fireWith(p,[w,C]),h&&(f.trigger("ajaxComplete",[w,u]),--G.active||G.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var s,o,a,r,l,d,h,c,u=G.ajaxSetup({},i),p=u.context||u,f=p!==u&&(p.nodeType||p instanceof G)?G(p):G.event,g=G.Deferred(),m=G.Callbacks("once memory"),v=u.statusCode||{},y={},b={},_=0,x="canceled",w={readyState:0,setRequestHeader:function(t,e){if(!_){var i=t.toLowerCase();t=b[i]=b[i]||t,y[t]=e}return this},getAllResponseHeaders:function(){return 2===_?o:null},getResponseHeader:function(t){var i;if(2===_){if(!a)for(a={};i=Ni.exec(o);)a[i[1].toLowerCase()]=i[2];i=a[t.toLowerCase()]}return i===e?null:i},overrideMimeType:function(t){return _||(u.mimeType=t),this},abort:function(t){return t=t||x,r&&r.abort(t),n(0,t),this}};if(g.promise(w),w.success=w.done,w.error=w.fail,w.complete=m.add,w.statusCode=function(t){if(t){var e;if(2>_)for(e in t)v[e]=[v[e],t[e]];else e=t[w.status],w.always(e)}return this},u.url=((t||u.url)+"").replace(Si,"").replace(Li,ki[1]+"//"),u.dataTypes=G.trim(u.dataType||"*").toLowerCase().split(ee),null==u.crossDomain&&(d=Mi.exec(u.url.toLowerCase())||!1,u.crossDomain=d&&d.join(":")+(d[3]?"":"http:"===d[1]?80:443)!==ki.join(":")+(ki[3]?"":"http:"===ki[1]?80:443)),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=G.param(u.data,u.traditional)),T(Ai,u,i,w),2===_)return w;if(h=u.global,u.type=u.type.toUpperCase(),u.hasContent=!Ei.test(u.type),h&&0===G.active++&&G.event.trigger("ajaxStart"),!u.hasContent&&(u.data&&(u.url+=(Ii.test(u.url)?"&":"?")+u.data,delete u.data),s=u.url,u.cache===!1)){var C=G.now(),k=u.url.replace(Hi,"$1_="+C);u.url=k+(k===u.url?(Ii.test(u.url)?"&":"?")+"_="+C:"")}(u.data&&u.hasContent&&u.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(s=s||u.url,G.lastModified[s]&&w.setRequestHeader("If-Modified-Since",G.lastModified[s]),G.etag[s]&&w.setRequestHeader("If-None-Match",G.etag[s])),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+zi+"; q=0.01":""):u.accepts["*"]);for(c in u.headers)w.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(u.beforeSend.call(p,w,u)===!1||2===_))return w.abort();x="abort";for(c in{success:1,error:1,complete:1})w[c](u[c]);if(r=T(Bi,u,i,w)){w.readyState=1,h&&f.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},u.timeout));try{_=1,r.send(y,n)}catch(S){if(!(2>_))throw S;n(-1,S)}}else n(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Ri=[],Fi=/\?/,Oi=/(=)\?(?=&|$)|\?\?/,qi=G.now();G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ri.pop()||G.expando+"_"+qi++;return this[t]=!0,t}}),G.ajaxPrefilter("json jsonp",function(i,n,s){var o,a,r,l=i.data,d=i.url,h=i.jsonp!==!1,c=h&&Oi.test(d),u=h&&!c&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oi.test(l);return"jsonp"===i.dataTypes[0]||c||u?(o=i.jsonpCallback=G.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,a=t[o],c?i.url=d.replace(Oi,"$1"+o):u?i.data=l.replace(Oi,"$1"+o):h&&(i.url+=(Fi.test(d)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return r||G.error(o+" was not called"),r[0]},i.dataTypes[0]="json",t[o]=function(){r=arguments},s.always(function(){t[o]=a,i[o]&&(i.jsonpCallback=n.jsonpCallback,Ri.push(o)),r&&G.isFunction(a)&&a(r[0]),r=a=e}),"script"):void 0}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return G.globalEval(t),t}}}),G.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),G.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=F.head||F.getElementsByTagName("head")[0]||F.documentElement;return{send:function(s,o){i=F.createElement("script"),i.async="async",t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,s){(s||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=e,s||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Wi,Vi=t.ActiveXObject?function(){for(var t in Wi)Wi[t](0,1)}:!1,Ui=0;G.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&E()||L()}:E,function(t){G.extend(G.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(G.ajaxSettings.xhr()),G.support.ajax&&G.ajaxTransport(function(i){if(!i.crossDomain||G.support.cors){var n;return{send:function(s,o){var a,r,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(r in i.xhrFields)l[r]=i.xhrFields[r];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(r in s)l.setRequestHeader(r,s[r])}catch(d){}l.send(i.hasContent&&i.data||null),n=function(t,s){var r,d,h,c,u;try{if(n&&(s||4===l.readyState))if(n=e,a&&(l.onreadystatechange=G.noop,Vi&&delete Wi[a]),s)4!==l.readyState&&l.abort();else{r=l.status,h=l.getAllResponseHeaders(),c={},u=l.responseXML,u&&u.documentElement&&(c.xml=u);try{c.text=l.responseText}catch(t){}try{d=l.statusText}catch(p){d=""}r||!i.isLocal||i.crossDomain?1223===r&&(r=204):r=c.text?200:404}}catch(f){s||o(-1,f)}c&&o(r,d,c,h)},i.async?4===l.readyState?setTimeout(n,0):(a=++Ui,Vi&&(Wi||(Wi={},G(t).unload(Vi)),Wi[a]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var Qi,Ki,Yi=/^(?:toggle|show|hide)$/,Xi=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Ji=/queueHooks$/,Gi=[P],Zi={"*":[function(t,e){var i,n,s=this.createTween(t,e),o=Xi.exec(e),a=s.cur(),r=+a||0,l=1,d=20;if(o){if(i=+o[2],n=o[3]||(G.cssNumber[t]?"":"px"),"px"!==n&&r){r=G.css(s.elem,t,!0)||i||1;do l=l||".5",r/=l,G.style(s.elem,t,r+n);while(l!==(l=s.cur()/a)&&1!==l&&--d)}s.unit=n,s.start=r,s.end=o[1]?r+(o[1]+1)*i:i}return s}]};G.Animation=G.extend(H,{tweener:function(t,e){G.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],Zi[i]=Zi[i]||[],Zi[i].unshift(e)},prefilter:function(t,e){e?Gi.unshift(t):Gi.push(t)}}),G.Tween=A,A.prototype={constructor:A,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(G.cssNumber[i]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,i=A.propHooks[this.prop];return this.pos=e=this.options.duration?G.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=G.css(t.elem,t.prop,!1,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){G.fx.step[t.prop]?G.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[G.cssProps[t.prop]]||G.cssHooks[t.prop])?G.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},G.each(["toggle","show","hide"],function(t,e){var i=G.fn[e];G.fn[e]=function(n,s,o){return null==n||"boolean"==typeof n||!t&&G.isFunction(n)&&G.isFunction(s)?i.apply(this,arguments):this.animate(B(e,!0),n,s,o)}}),G.fn.extend({fadeTo:function(t,e,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=G.isEmptyObject(t),o=G.speed(e,i,n),a=function(){var e=H(this,G.extend({},t),o);s&&e.stop(!0)};return s||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,i,n){var s=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=G.timers,a=G._data(this);if(i)a[i]&&a[i].stop&&s(a[i]);else for(i in a)a[i]&&a[i].stop&&Ji.test(i)&&s(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&G.dequeue(this,t)})}}),G.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){G.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),G.speed=function(t,e,i){var n=t&&"object"==typeof t?G.extend({},t):{complete:i||!i&&e||G.isFunction(t)&&t,duration:t,easing:i&&e||e&&!G.isFunction(e)&&e};return n.duration=G.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in G.fx.speeds?G.fx.speeds[n.duration]:G.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){G.isFunction(n.old)&&n.old.call(this),n.queue&&G.dequeue(this,n.queue)},n},G.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},G.timers=[],G.fx=A.prototype.init,G.fx.tick=function(){for(var t,e=G.timers,i=0;i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||G.fx.stop()},G.fx.timer=function(t){t()&&G.timers.push(t)&&!Ki&&(Ki=setInterval(G.fx.tick,G.fx.interval))},G.fx.interval=13,G.fx.stop=function(){clearInterval(Ki),Ki=null},G.fx.speeds={slow:600,fast:200,_default:400},G.fx.step={},G.expr&&G.expr.filters&&(G.expr.filters.animated=function(t){return G.grep(G.timers,function(e){return t===e.elem}).length});var tn=/^(?:body|html)$/i;G.fn.offset=function(i){if(arguments.length)return i===e?this:this.each(function(t){G.offset.setOffset(this,i,t)});var n,s,o,a,r,l,d,h={top:0,left:0},c=this[0],u=c&&c.ownerDocument;if(u){if((s=u.body)===c)return G.offset.bodyOffset(c);if(n=u.documentElement,!G.contains(n,c))return h;"undefined"!=typeof c.getBoundingClientRect&&(h=c.getBoundingClientRect()),o=z(u),a=n.clientTop||s.clientTop||0,r=n.clientLeft||s.clientLeft||0,l=o.pageYOffset||n.scrollTop,d=o.pageXOffset||n.scrollLeft;var p=t.document.compatMode;return"BackCompat"==p&&t.ActiveXObject?{top:h.top+Math.max(t.document.documentElement.scrollTop,t.document.body.scrollTop)-a,left:h.left+Math.max(t.document.documentElement.scrollLeft,t.document.body.scrollLeft)-r}:{top:h.top+l-a,left:h.left+d-r}}},G.offset={bodyOffset:function(t){var e=t.offsetTop,i=t.offsetLeft;return G.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(G.css(t,"marginTop"))||0,i+=parseFloat(G.css(t,"marginLeft"))||0),{top:e,left:i}},setOffset:function(t,e,i){var n=G.css(t,"position");"static"===n&&(t.style.position="relative");var s,o,a=G(t),r=a.offset(),l=G.css(t,"top"),d=G.css(t,"left"),h=("absolute"===n||"fixed"===n)&&G.inArray("auto",[l,d])>-1,c={},u={};h?(u=a.position(),s=u.top,o=u.left):(s=parseFloat(l)||0,o=parseFloat(d)||0),G.isFunction(e)&&(e=e.call(t,i,r)),null!=e.top&&(c.top=e.top-r.top+s),null!=e.left&&(c.left=e.left-r.left+o),"using"in e?e.using.call(t,c):a.css(c)}},G.fn.extend({position:function(){if(this[0]){var t=this[0],e=this.offsetParent(),i=this.offset(),n=tn.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(G.css(t,"marginTop"))||0,i.left-=parseFloat(G.css(t,"marginLeft"))||0,n.top+=parseFloat(G.css(e[0],"borderTopWidth"))||0,n.left+=parseFloat(G.css(e[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||F.body;t&&!tn.test(t.nodeName)&&"static"===G.css(t,"position");)t=t.offsetParent;return t||F.body})}}),G.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(i,n){var s=/Y/.test(n);G.fn[i]=function(o){return G.access(this,function(i,o,a){var r=z(i);if(a===e){var l=t.document.compatMode;return"BackCompat"==l&&t.ActiveXObject?r?n in r?r[n]:Math.max(t.document.documentElement[o],t.document.body[o]):i[o]:r?n in r?r[n]:r.document.documentElement[o]:i[o]}r?r.scrollTo(s?G(r).scrollLeft():a,s?a:G(r).scrollTop()):i[o]=a},i,o,arguments.length,null)}}),G.each({Height:"height",Width:"width"},function(i,n){G.each({padding:"inner"+i,content:n,"":"outer"+i},function(s,o){G.fn[o]=function(o,a){var r=arguments.length&&(s||"boolean"!=typeof o),l=s||(o===!0||a===!0?"margin":"border");return G.access(this,function(n,s,o){var a;if(G.isWindow(n)){var r=t.document.compatMode;return"BackCompat"==r?n.document.body["client"+i]:n.document.documentElement["client"+i]}return 9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+i],a["scroll"+i],n.body["offset"+i],a["offset"+i],a["client"+i])):o===e?G.css(n,s,o,l):G.style(n,s,o,l)},n,r?o:e,r,null)}})}),t.comtop.cQuery=G,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return G})}(window),function(t,e){var i=t("head");i.attr("style","font-family:isIE\\0; border:none; *font-family:isIE7; _font-family:isIE6;-moz-border-radius-topleft:0"),e.Browser={isIE:!1,isIE6:!1,isIE7:!1,isIE8:!1,isIE9:!1,notIE:!0,isQM:"CSS1Compat"!==document.compatMode};var n=i.css("font-family");/^isIE\d?$/.test(n)&&(e.Browser[n]=!0,e.Browser.notIE=!1,"isIE6"===n||"isIE7"===n?e.Browser.isIE=!0:void 0===i.css("border")?e.Browser.isIE8=!0:e.Browser.isIE9=!0),i.removeAttr("style")}(window.comtop.cQuery,window.comtop),comtop.Browser.isIE6&&document.execCommand("BackgroundImageCache",!1,!0),function(t){var e=t.cQuery;e.page={height:function(){if(t.Browser.isIE6||t.Browser.isIE7||t.Browser.isIE8){var i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return n>i?e(window).height():t.Browser.isQM?i-4:i}return t.Browser.isQM?e(document).height()-4:e(document).height()},width:function(){var t=e("<div></div>");t.css({height:1});var i=parseInt(e("body").css("paddingLeft"))+parseInt(e("body").css("paddingRight"))+parseInt(e("body").css("marginLeft"))+parseInt(e("body").css("marginRight"));e("body").append(t);var n=t.width();return t.remove(),n+i},scrollTop:function(){return e("html").scrollTop()||e("body").scrollTop()},scrollLeft:function(){return e("html").scrollLeft()||e("body").scrollLeft()}},e.client={width:function(){return t.Browser.isQM?document.documentElement.clientWidth||document.documentElement.offsetWidth-21:e(window).width()},height:function(){return t.Browser.isQM?window.innerHeight||document.documentElement.offsetHeight-4:e(window).height()}}}(window.comtop),function(t){function e(t,i){e.clearWhiteSpace&&(t=t.replace(/[\f\n\r\t\v]+/g,"")),this.Fn=new e.Instance(t,i);
for(var n in this)this.Fn.Reserve+=n+","}t.JCT=e,e.prototype={Extend:function(t,e){for(var i in t)this[i]&&this[i].Fn&&this[i].Fn.JavaScriptCommonTemplates&&this[i].Extend?this[i].Extend(t[i]):-1==this.Fn.Reserve.indexOf(","+i+",")&&(this[i]=t[i]);return"function"==typeof t.ERun&&t.ERun.apply(this,e||[]),this},ExtendTo:function(t,e){for(var i in this)this.Fn.Reserve.indexOf(","+i+",")>0&&t[i]||(null==t[i]?t[i]=this[i]:this[i].Fn&&this[i].Fn.JavaScriptCommonTemplates&&this[i].ExtendTo&&this[i].ExtendTo(t[i]));return"function"==typeof t.ERun&&t.ERun.apply(t,e||[]),this},ExecChilds:function(t,e){if("string"==typeof t&&(e=t,t=0),e=e||"Exec",!t){t={};for(var i in this)this[i].Fn&&this[i].Fn.JavaScriptCommonTemplates&&(t[i]=[])}for(var i in t)this[i]&&"function"==typeof this[i][e]&&this[i][e].apply(this[i],t[i]);return this},BuildChilds:function(t){var e={},i=!1;if(void 0==t?t=[]:"string"==typeof t?t=t.split(","):(e=t,i=!0),t instanceof Array)for(var n=0;n<t.length;n++)e[t[n]]=!0;for(var n in this)this[n].Fn&&this[n].Fn.JavaScriptCommonTemplates&&(0==t.length||e[n])&&this[n].Build(i?t[n]:[]);return this},GetView:function(){return this.Fn.V=[],this.GetViewContinue.apply(this,arguments),this.Fn.V.join("")},GetViewContinue:function(){this.Build.apply(this,[arguments])},Build:function(t){return this.Fn.Build(this,t,arguments.callee.caller===this.GetViewContinue),this},PushView:function(t){this.Fn.V.push(t)}},e.Instance=function(t,e){this.Init(t,e)},e.clearWhiteSpace=!0,e.Instance.prototype={JavaScriptCommonTemplates:3,Reserve:",",args:[],Tags:{comment:{block:{begin:"<!---",end:"-->"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},script:{block:{begin:'<script type="text/jct">',end:"</script>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},code:{block:{begin:'<code class="jct">',end:"</code>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}}},Init:function(t,e){this.Src=t||"",this.Path=e||"";for(var i in this.Tags)if(this.Src.indexOf(this.Tags[i].block.begin)>=0)break;this.Tag=this.Tags[i],this.A=[],this.V=[],this.EXEC=[];for(var n=[],s=[0,0,0,0,0],o=this.Src.length;this.Slice(this.Tag.clean,s[4],s,o);)n.push(this.Src.slice(s[0],s[1]));n.length&&(n.push(this.Src.slice(s[4])),this.Src=n.join(""))},Build:function(t,e,i){this.EXEC=[],this.Parse(t);try{var n=this.EXEC.join("\n");t.GetViewContinue=new Function(this.args,n),this.Src=""}catch(s){this.V=["jCT Parse Error"],t.ERROR={message:s.message+"\n"+(s.lineNumber||s.number),code:n}}t.BRun&&t.BRun.apply(t,e||[]),i&&(this.V=[],t.GetViewContinue.apply(t,e||[]))},Parse:function(t){for(var i=this.Tag,n=this.A,s=this.EXEC,o=this.Src.length,a=[0,0,0,0,0],r=[0,0,0,0,0];this.Slice(i.block,a[4],a,o);){for(r=[0,0,0,0,a[0]];this.Slice(i.exp,r[4],r,a[1]);)s.push("this.Fn.V.push(this.Fn.A["+n.length+"]);"),n.push(this.Src.slice(r[0],r[1])),s.push("this.Fn.V.push("+this.Src.slice(r[2],r[3])+");");if(r[4]!=a[1]&&(s.push("this.Fn.V.push(this.Fn.A["+n.length+"]);"),n.push(this.Src.slice(r[4],a[1]))),"//"==this.Src.slice(a[2],a[2]+2)){var l=this.Src.slice(a[2]+2,a[2]+3);if("/"==l){l=this.Src.slice(a[2]+3,a[3]);var d=l.indexOf(" "),h=[];d>0&&(h=l.slice(d+1).split(","),l=l.slice(0,d));var c=i.block.begin+"///"+l+i.block.end,u=this.Src.indexOf(c,a[4]);if(u>0){var p=new e(this.Src.slice(a[4],u),this.Path);p.Fn.args=h,t[l]||(t[l]={});for(var f in p)t[l][f]=p[f];a[4]=u+c.length}}else if("."==l){l=this.Src.slice(a[2]+3,a[3]);var d=l.indexOf(" ")+1;if("function"==l.slice(d,d+8)){var g=l.slice(0,d-1);t[g]=new Function("return "+l.slice(d,l.length))()}else{var g=new Function("return "+l.slice(d));t[l.slice(0,d)]=g.call(t)}}else" "==l&&(this.args=this.Src.slice(a[2]+2,a[3]).slice(1).split(","))}else s.push(this.Src.slice(a[2],a[3]))}for(r=[0,0,0,0,a[4]],a[1]=o;this.Slice(i.exp,r[4],r,a[1]);)s.push("this.Fn.V.push(this.Fn.A["+n.length+"]);"),n.push(this.Src.slice(r[0],r[1])),s.push("this.Fn.V.push("+this.Src.slice(r[2],r[3])+");");r[4]!=a[1]&&(s.push("this.Fn.V.push(this.Fn.A["+n.length+"]);"),n.push(this.Src.slice(r[4],a[1])))},Slice:function(t,e,i,n){var s,o,a,r=t.begin,l=t.end;return s=this.Src.indexOf(r,e),0>s||s>=n?!1:(o=s+r.length,0>o||o>=n?!1:(a=this.Src.indexOf(l,o),0>a||a>=n?!1:(i[0]=e,i[1]=s,i[2]=o,i[3]=a,i[4]=a+l.length,!0)))}}}(window.comtop),function(t,e){function i(i,n){if(i.options=t.extend(!0,{},n.options,i.options),n.options&&n.options.uitype){var s=n.options.uitype;i._superUITypes=t.extend(!0,[],n._superUITypes),i._superUITypes.push(s)}var o=i.options?i.options.uitype:null;if(o){var a=o.charAt(0).toLowerCase()+o.substring(1);null==t.fn[a]&&(t.fn[a]=function(i){var n=t(this).eq(0);if(n.selector=n.selector.replace(".slice(0,1)",""),!n.selector){var s="e-"+e.guid(),a=this.nodeName||"";n.attr("eventID",s),n.selector=a+"[eventID="+s+"]:eq(0)"}var r=n.data("uitype");return null==r&&(i=i||{},i.el=n,r=new e.UI[o](i),e.UI.componentList.push(r),n.size()&&n.data("uitype",r)),r}),i[a]=function(){return this}}}window.cui=function(e){var i=t(e),n=i.data("uitype")||i;if(n.options){var s=n.options.uitype;s=s.charAt(0).toLowerCase()+s.substring(1),n[s]||(n[s]=function(){return this})}return n};var n=!1,s=/xyz/.test(function(){})?/\b_super\b/:/.*/;e.Class=function(){},e.Class.extend=function(t){function e(){!n&&this.__init&&this.__init.apply(this,arguments)}var o=this.prototype;i(t,o),n=!0;var a=new this;n=!1;for(var r in t)a[r]="function"==typeof t[r]&&"function"==typeof o[r]&&s.test(t[r])?function(t,e){return function(){var i=this._super;this._super=o[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,t[r]):t[r];return e.prototype=a,e.prototype.constructor=e,e.extend=arguments.callee,e},e._registerCmp=i}(window.comtop.cQuery,window.comtop),function(t,e){function i(t){for(var i=e.UI.templatePath,n=new RegExp(t),s=0;s<i.scriptTP.length;s++)if(n.test(i.scriptTP[s].attrTmpl))return{path:i.scriptTP[s].path,mark:"extend"};return{path:i.scriptOP[0].path,mark:"cui"}}function n(e,i){var n;"undefined"!=typeof e.outerHTML?n=e.outerHTML:(t("body").append('<div style="display: none;" id="f8_outerHTML_bug"></div>'),t("#f8_outerHTML_bug").append(t(e).clone()),n=t("#f8_outerHTML_bug")[0].innerHTML,t("#f8_outerHTML_bug").remove());var s=n.match(/<[^>]*>/)[0].replace(/[\r\n\t]/g,""),o=new RegExp("\\s"+i+"=[\"']*([\\w-\\%]*)[\"']*"),a=s.match(o);return a?a[1]:null}var s=s||{};e.UI.templatePath=null,e.UI.componentList=[],e.UI.setOpt=function(e){var i,n,s=this;if("object"==typeof e)for(i in e)e.hasOwnProperty(i)&&"function"==typeof s[i]&&(n=s[i].prototype.options,"object"==typeof n&&t.extend(n,e[i]))},e.UI.Base=e.Class.extend({options:{},tpls:{},autoTpls:{},isInit:!1,cui_prompt:"\u4e0d\u5efa\u8bae\u4f7f\u7528\u6216\u4fee\u6539\uff08\u4e8c\u6b21\u5f00\u53d1\u9664\u5916\uff09\u6ca1\u6709\u5bf9\u5916\u516c\u5e03\u7684\u5185\u90e8\u65b9\u6cd5\u4e0e\u53d8\u91cf\uff0c\u4ee5\u907f\u514d\u56e0\u7ec4\u4ef6\u5347\u7ea7\u800c\u5f15\u8d77\u529f\u80fd\u5f02\u5e38",__init:function(e){var i=this,s={target:{eventName:"change",source:"getValue",target:"setValue"}},o=e.isScanner,a={},r="",l="";i.options.tpls=i.options.tpls||{};for(var d in i.options)if(o){switch(d){case"readonly":case"width":case"height":r=n(e.el[0],d);break;default:r=e.el.attr(d)}"string"==typeof r&&(a[d]=r,"null"!=r?(l=null==i.options[d]?"function":typeof i.options[d],e[d]=i._convertTo(r,l,i.options[d])):e[d]=null)}else r=e[d],a[d]=r;if(void 0==i.options.textmode&&delete e.textmode,s=i.options=t.extend(!0,{},s,i.options,e),i._init(a,e),s.textmode)return void i.setTextMode();i.__loadTemplate(s.template);for(var h in s.tpls)i.tpls["super."+h]=i.tpls[h],i.tpls[h]="string"==typeof s.tpls[h]?i.tpls[s.tpls[h]]||s.tpls[h]:s.tpls[h];for(h in i.tpls)if(1==i.autoTpls[h]){var c=t(s.el),u=c.get(0).tagName;/[DIV|SPAN|A]/.test(u)&&""==t.trim(c.html())?i._buildTemplate(c,h,s):i._bindTplEvent()}if(i._create(),c){var p=c.data("cuiCreated");p&&(t.each(p,function(){i[this.method]&&i[this.method].apply(i,this.arg)}),c.removeData("cuiCreated"))}},__load:function(i,n,s){"undefined"==typeof s&&(s=!1),"function"!=typeof n&&(n=function(){}),t.ajax({url:i+"?v="+e.version,async:s,dataType:"text",success:n,error:function(){}})},__loadTemplate:function(n){n=n||"template.html";var o,a=this,r=a.options.uitype,l="",d=s[r],h=t("body"),c=h.attr("cuitmplmark")||"",u=new RegExp(n);if(r=r.charAt(0).toUpperCase()+r.substring(1),d||(u.test(c)||(e.UI.templatePath||e.UI.scanTemplateUrl(n),o=i(n),l=o.path+"template/"+n,h.attr("cuitmplmark",c+"["+o.mark+"#"+n+"]"),a.__load(l,function(t){t=t.match(/<cmptpl[^>]*>(\s|\r|\t|.)*?<\/cmptpl>/g);for(var e=0,i=t.length;i>e;e++){var n=t[e].match(/uiType="([\w-]*)"/)[1],o=t[e].match(/var="([\w-]*)"/)[1],a="false"!=t[e].match(/parse="([\w-]*)"/)[1],r=t[e].replace(/<cmptpl[^>]*>/,"").replace(/<\/cmptpl>/,""),l=s[n]||{tpls:{},autoTpls:{}};l.tpls[o]=r,a&&(l.autoTpls[o]=!0),s[n]=l}})),d=s[r]||{tpls:{},autoTpls:{}}),a.tpls=t.extend(!0,{},d.tpls),a.autoTpls=t.extend(!0,{},d.autoTpls),a._superUITypes)for(var p=a._superUITypes.length-1;p>=0;p--){r=a._superUITypes[p];var f=s[r];if(f){var g=s[r].tpls;for(var m in g)a.tpls[m]||(a.tpls[m]=g[m]);var v=s[r].autoTpls;for(m in v)a.autoTpls[m]||(a.autoTpls[m]=v[m])}}h=null},_buildTemplate:function(e,i,n,s){var o=this,a=t(e);if(n=n||o.options,"object"!=typeof o.tpls[i]){for(var r=t.trim(o._buildTemplateStr(i,n))||"",l=r.match(/\#ref\=[\w\.]*\#/g)||[],d="",h=0;h<l.length;h++)d=t.trim(l[h].replace(/#/g,"").replace("ref=","")),r=r.replace(l[h],o._buildTemplateStr(d,n)||"");return r=o._bindTplEvent(r),s?a.append(r):a.html(r),r}o.tpls[i].el=a,o.__createTargetCmp(o.tpls[i])},_buildTemplateStr:function(t,i){var n=this,s=new e.JCT(n.tpls[t]);return s.Build(),s.GetView(i)},__createTargetCmp:function(t){new e.UI[t.uitype](t)},_bindTplEvent:function(i){var n=this,s=n.options;if("string"==typeof i){for(var o=s.el.selector,a=i.match(/events=\"[\w-\s\;\=\,\.]*\"/g)||[],r=[],l=null,d=null,h=null,c=0;c<a.length;c++){r=[],l=a[c].replace(/\"/g,"").replace(/events\=/,"").split(";");for(var u=0,p=l.length;p>u;u++)d=l[u].split("="),t.trim(d[0])&&r.push("on",d[0],'="',e.Browser.isIE?"return ":"","comtop.proxyHandler(event, '",o,"', this, '",d[1],"');\" ");var h=new RegExp(a[c],"g");r.push(a[c].replace("events","etsBak")),i=i.replace(h,r.join(""))}return i}return i=i||t(s.el),t("[etsBak]",i).each(function(){for(var e,i=t(this),s=i.attr("etsBak").split(";"),o=0;o<s.length;o++)e=s[o].split("="),i.bind(e[0]+".comtopBase",{self:n,func:e[1]},comtop.proxyHandler);i=null}),i},_unbindTplEvent:function(e){var i=this,n=i.options;e=e||n.el,t("[etsBak]",e).each(function(){for(var e=t(this),i=e.attr("etsBak").split(";"),n=0;n<i.length;n++)e.removeAttr("on"+i[n].split("=")[0]);e.unbind(".comtopBase")})},_triggerHandler:function(e,i){t(this).triggerHandler(e,i)},_init:function(){},_create:function(){},bind:function(e,i,n){return t(this).bind(e,i,n),this},unbind:function(e,i){return t(this).unbind(e,i),this},setValue:function(){},getValue:function(){},show:function(){return this.options.el.show(),this},hide:function(){return this.options.el.hide(),this},setReadonly:function(){},setTextMode:function(){var t=this,e=t.options,i=e.el[0].nodeName,n=t.getLabelValue();"SPAN"==i||"DIV"==i?e.el.html(n):("INPUT"==i||"BUTTON"==i||"TEXTAREA"==i)&&(e.el=e.el.replaceWith("<span>"+n+"</span>"))},getLabelValue:function(){return this.options.value||""},disable:function(e){return e="undefined"==typeof e?!1:e,t("input, select, textarea, button",this.options.el).attr("disabled",e),this},destroy:function(){var t=this,e=t.options;t._unbindTplEvent(e.el),e.el.removeData(),t.tpls&&e.el.empty()},_convertTo:function(e,i,n){function s(t){for(var e=t.split("."),i=window,s=0;s<e.length;s++)i=i[e[s]];return"object"!=typeof i&&"function"!=typeof i||i.nodeName?n:i}if(""===t.trim(e))return"string"===i?"":n;var o=/^(?:\{.*\}|\[.*\])$/;switch(i){case"string":e=""+e;break;case"boolean":e=!("true"!==e);break;case"number":e=+e;break;case"object":e=o.test(e)?t.parseJSON(e.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):s(e);break;case"function":e=s(e);break;default:e=n}return e}}),e.proxyHandler=function(i,n,s,o){var a=null,r=null,l=null,d=null,h=0,c=0;if(n){for(i||(i=t.Event()),i=t.event.fix(i),h=0;h<e.UI.componentList.length;h++)if(d=e.UI.componentList[h],d.options.el.selector===n){a=d;break}if(null==a)return!1}else a=i.data.self,o=i.data.func,s=this,i.data=null;for(o=o.split(","),h=0;h<o.length;h++)if(t.isFunction(a[o[h]]))a[o[h]](i,s,i.target||i.srcElement);else{for(r=window,l=o[h].split("."),c=0;c<l.length;c++)r=r[l[c]];r(i,s,i.target||i.srcElement)}return"click"===i.type&&"a"===i.target.nodeName.toLocaleLowerCase()&&e.Browser.isIE?!1:void 0},e.UI.scanTemplateUrl=function(i){var n,s,o,a,r=0,l=0,d=(new RegExp(i),[]),h=[];for(n=t('script[src*="cui/js/comtop.ui"]'),s=t("script[cuiTemplate]"),o=n.eq(0).attr("src"),a=o.substr(0,o.lastIndexOf("/")),a=o.substr(0,a.lastIndexOf("/")+1),d.push({path:a,attrTmpl:""}),l=s.length;l>r;r++)o=s.eq(r).attr("src"),o&&(a=o.substr(0,o.lastIndexOf("/")),a=o.substr(0,a.lastIndexOf("/")+1),h.push({path:a,attrTmpl:s.eq(r).attr("cuiTemplate")}));e.UI.templatePath={scriptTP:h,scriptOP:d}},t(window).bind("unload",function(){comtop.Browser.isIE&&window.CollectGarbage&&window.CollectGarbage(),window.comtop=void 0,window.cui=void 0})}(window.comtop.cQuery,window.comtop),function(t,e){e.String.getBytesLength=function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n>=1&&126>=n||n>=65376&&65439>=n?e++:e+=2}return e},e.String.intercept=function(t,e){for(var i="",n=0,s=0,o=t.length;o>s;s++){var a=t.charCodeAt(s);if(a>=0&&126>=a||a>=65376&&65439>=a?n++:n+=2,!(e>=n))break;i+=t.charAt(s)}return i},e.Date.format=function(t,i){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds(),"w+":e.Date.getOnWeek(t).week};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in n)new RegExp("("+s+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return i},e.Date.simpleformat=function(e,i){function n(t){return t.charAt(1)?t:0+t}if(!e)return"";var s=t.type(e);if("string"===s||"number"===s){var o=new Date;if(o.setTime(e),isNaN(o.getDate()))return e;e=o}for(var a=["y+","yyyy","M","MM","d","dd","h","hh","m","mm","s","ss"],r=e.getFullYear().toString(),l=(e.getMonth()+1).toString(),d=e.getDate().toString(),h=e.getHours().toString(),c=e.getMinutes().toString(),u=e.getSeconds().toString(),p=[r.slice(2),r,l,n(l),d,n(d),h,n(h),c,n(c),u,n(u)],f=a.length;f--;)i=i.replace(new RegExp(a[f]),p[f]);return i},e.Date.getOnWeek=function(t,e,i){if(!t)return null;var n,s=e?4:1,o=new Date(t.getTime());return o.setDate(o.getDate()+s-(i?o.getDay():o.getDay()||7)),n=o.getTime(),o.setMonth(0),o.setDate(1),{year:o.getFullYear(),week:Math.floor(Math.round((n-o)/864e5)/7)+1}},e.Date.getWeekRange=function(t,i,n,s){s=n?!1:s;var o,a,r,l=new Date(t,0,1),d=e.Date.getOnWeek(l,n,s).week;return r=1!=d?s?7-l.getDay():8-(l.getDay()||7):0,o=7*(i-1)+r,a=o+6,[new Date(864e5*o+l.getTime()),new Date(864e5*a+l.getTime())]},e.Date.parse=function(i,n){function s(t,e){return e=e.replace(/yyyy/,r[1]).replace(/yy/,r[2]).replace(/MM/,l[1]).replace(/M/,l[2]).replace(/dd/,d[1]).replace(/d/,d[2]).replace(/hh/,h[1]).replace(/h/,h[2]).replace(/mm/,c[1]).replace(/m/,c[2]).replace(/ss/,u[1]).replace(/s/,u[2]).replace(/qq/,p[1]).replace(/q/,p[2]).replace(/ww/,f[1]).replace(/w/,f[2]),a=new RegExp("^"+e+"$"),a.test(t)}function o(t){var e,i,n=[],s=0;for(r[0]=t.indexOf("yyyy"),r[0]<0&&(r[0]=t.indexOf("yy")),r[0]>=0&&(n[s]=r[0],s++),l[0]=t.indexOf("MM"),l[0]<0&&(l[0]=t.indexOf("M")),l[0]>=0&&(n[s]=l[0],s++),d[0]=t.indexOf("dd"),d[0]<0&&(d[0]=t.indexOf("d")),d[0]>=0&&(n[s]=d[0],s++),h[0]=t.indexOf("hh"),h[0]<0&&(h[0]=t.indexOf("h")),h[0]>=0&&(n[s]=h[0],s++),c[0]=t.indexOf("mm"),c[0]<0&&(c[0]=t.indexOf("m")),c[0]>=0&&(n[s]=c[0],s++),u[0]=t.indexOf("ss"),u[0]<0&&(u[0]=t.indexOf("s")),u[0]>=0&&(n[s]=u[0],s++),p[0]=t.indexOf("qq"),p[0]<0&&(p[0]=t.indexOf("q")),p[0]>=0&&(n[s]=p[0],s++),f[0]=t.indexOf("ww"),f[0]<0&&(f[0]=t.indexOf("w")),f[0]>=0&&(n[s]=f[0],s++),i=[r[0],l[0],d[0],h[0],c[0],u[0],p[0],f[0]],s=0;s<n.length-1;s++)for(e=0;e<n.length-1-s;e++)if(n[e]>n[e+1]){var o=n[e];n[e]=n[e+1],n[e+1]=o}for(s=0;s<n.length;s++)for(e=0;e<i.length;e++)n[s]==i[e]&&(i[e]=s);return i}if(i=t.trim(i),""===i)return null;var a,r,l,d,h,c,u,p,f;if(r=[-1,"([0-9]{4})","([0-9]{2})"],l=[-1,"(0[1-9]|1[0-2])","([1-9]|1[0-2])"],d=[-1,"(0[1-9]|[1-2][0-9]|30|31)","([1-9]|[1-2][0-9]|30|31)"],h=[-1,"([0-1][0-9]|20|21|22|23)","([0-9]|1[0-9]|20|21|22|23)"],c=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"],u=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"],p=[-1,"([0-0][1-4])","([1-4])"],f=[-1,"([0-5][0-9])","([0-9]|[1-4][0-9]|5[0-3])"],s(i,n)){var g=new Date,m=a.exec(i),v=o(n),y=[g.getFullYear(),1,1,0,0,0,1,1];m.shift();for(var b=0;8>b;b++)y[b]=v[b]>=0?+m[v[b]]:y[b];if(v[6]>=0&&v[1]<0)y[1]=3*(y[6]-1),y[2]=1,y[3]=0,y[4]=0,y[5]=0;else if(v[7]>=0&&v[1]){var _=e.Date.getWeekRange(y[0],y[7]);y[1]=_[0].getMonth(),y[2]=_[0].getDate()}else y[1]=y[1]-1;return new Date(y[0],y[1],y[2],y[3],y[4],y[5],0)}return null},e.Number.money=function(t,e){"string"!=typeof t&&"number"!=typeof t&&(t=0),e=void 0===e?2:e;var i="",n=!1,s=1;/-/.test(t+"")&&(n=!0,t=(t+"").replace("-",""));for(var o=0;e>o;o++)i+="0",s=10*s;t=parseFloat(t,10)||0,t=(Math.round(t*s)/s).toString().split(".");for(var a=t[0],r=(t[1]||""+i).slice(0,e),l=a.length,d=l%3,h=d?[a.slice(0,d)]:[],c=0,u=Math.floor(l/3);u>c;c+=1)h.push(a.slice(d+3*c,d+3*c+3));if(r.length<e)for(var o=0,l=r.length;e-l>o;o++)r+="0";return(n?"-":"")+h.join(",")+(e>0?".":"")+r},e.Number.round=function(t,e){var i,n,s,o,a,r,l,d,h;if(i=/^(\+|\-)?(\d+|\d*(\.)\d+)$/.exec(t+"")){if(e=!e||0>e?0:e,n=i[1]?i[1].replace("+",""):"",r=i[2].replace(/^0+/g,""),r=r.replace(/(\.\d*?)0+$/g,"$1"),r="."===r.charAt(0)?"0"+r:r,s=r.search(/\./),o=r.substring(s),-1===s||!o||o.length<=e)h=n+r;else if(a=r.split(""),a.length=s+e+1,o.charAt(e+1)-0<5)h=n+a.join("");else{for(l=a.length;l--;)if("."!==a[l]){if(a[l]=a[l]-0+1,10!==a[l])break;a[l]=d?0:""}else d=!0;h=n+(0>l?"1"+a.join(""):a.join(""))}return h=h.replace(/\.0*$/,"").replace(/^\-0$/,""),h?h:"0"}},e.Tools.fixedNumber=function(e){var i=typeof e,n=null;return"number"===i?n=Math.floor(e):"string"===i&&(e=t.trim(e),"auto"===e?n="auto":/\d+(\.\d*)?%/.test(e)?(n=e.replace(/\.\d*/,""),("%"===n||"0%"===n)&&(n=0)):/\d/.test(e.charAt(0))&&(n=parseInt(e.replace(/x/,"")))),n},cui.ajax=function(t){var e=t.type||"GET",i=t.dataType||"json",n=t.success||a.noop,s=t.error,o=t.scope||window,a=window.comtop.cQuery;a.ajax({url:t.url,type:e,data:t.data,dataType:i,success:function(t){"json"==i&&t.success===!1?s&&s.call?s.call(o,t):cui.error(t.exMessage):n.call(o,t)},error:function(t,e){s&&s.call?s.call(o):"parsererror"==e?cui.error("\u670d\u52a1\u5668\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):"timeout"==e?cui.error("\u7f51\u7edc\u8fde\u63a5\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):404==t.status?cui.error("\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25\uff0c\u53ef\u80fd\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):0==t.status||cui.error("\u670d\u52a1\u5f02\u5e38")}})}}(window.comtop.cQuery,window.comtop),window.comtop.icon={glass:"&#xf000;",music:"&#xf001;",search:"&#xf002;","envelope-o":"&#xf003;",heart:"&#xf004;",star:"&#xf005;","star-o":"&#xf006;",user:"&#xf007;",film:"&#xf008;","th-large":"&#xf009;",th:"&#xf00a;","th-list":"&#xf00b;",check:"&#xf00c;",remove:"&#xf00d;","search-plus":"&#xf00e;","search-minus":"&#xf010;","power-off":"&#xf011;",signal:"&#xf012;",cog:"&#xf013;","trash-o":"&#xf014;",home:"&#xf015;","file-o":"&#xf016;","clock-o":"&#xf017;",road:"&#xf018;",download:"&#xf019;","arrow-circle-o-down":"&#xf01a;","arrow-circle-o-up":"&#xf01b;",inbox:"&#xf01c;","play-circle-o":"&#xf01d;",repeat:"&#xf01e;",refresh:"&#xf021;","list-alt":"&#xf022;",lock:"&#xf023;",flag:"&#xf024;",headphones:"&#xf025;","volume-off":"&#xf026;","volume-down":"&#xf027;","volume-up":"&#xf028;",qrcode:"&#xf029;",barcode:"&#xf02a;",tag:"&#xf02b;",tags:"&#xf02c;",book:"&#xf02d;",bookmark:"&#xf02e;",print:"&#xf02f;",camera:"&#xf030;",font:"&#xf031;",bold:"&#xf032;",italic:"&#xf033;","text-height":"&#xf034;","text-width":"&#xf035;","align-left":"&#xf036;","align-center":"&#xf037;","align-right":"&#xf038;","align-justify":"&#xf039;",list:"&#xf03a;",outdent:"&#xf03b;",indent:"&#xf03c;","video-camera":"&#xf03d;","picture-o":"&#xf03e;",pencil:"&#xf040;","map-marker":"&#xf041;",adjust:"&#xf042;",tint:"&#xf043;","pencil-square-o":"&#xf044;","share-square-o":"&#xf045;","check-square-o":"&#xf046;",arrows:"&#xf047;","step-backward":"&#xf048;","fast-backward":"&#xf049;",backward:"&#xf04a;",play:"&#xf04b;",pause:"&#xf04c;",stop:"&#xf04d;",forward:"&#xf04e;","fast-forward":"&#xf050;","step-forward":"&#xf051;",eject:"&#xf052;","chevron-left":"&#xf053;","chevron-right":"&#xf054;","plus-circle":"&#xf055;","minus-circle":"&#xf056;","remove-circle":"&#xf057;","check-circle":"&#xf058;","question-circle":"&#xf059;","info-circle":"&#xf05a;",crosshairs:"&#xf05b;","remove-circle-o":"&#xf05c;","check-circle-o":"&#xf05d;",ban:"&#xf05e;","arrow-left":"&#xf060;","arrow-right":"&#xf061;","arrow-up":"&#xf062;","arrow-down":"&#xf063;",share:"&#xf064;",expand:"&#xf065;",compress:"&#xf066;",plus:"&#xf067;",minus:"&#xf068;",asterisk:"&#xf069;","exclamation-circle":"&#xf06a;",gift:"&#xf06b;",leaf:"&#xf06c;",fire:"&#xf06d;",eye:"&#xf06e;","eye-slash":"&#xf070;","exclamation-triangle":"&#xf071;",plane:"&#xf072;",calendar:"&#xf073;",random:"&#xf074;",comment:"&#xf075;",magnet:"&#xf076;","chevron-up":"&#xf077;","chevron-down":"&#xf078;",retweet:"&#xf079;","shopping-cart":"&#xf07a;",folder:"&#xf07b;","folder-open":"&#xf07c;","arrows-v":"&#xf07d;","arrows-h":"&#xf07e;","bar-chart-o":"&#xf080;","twitter-square":"&#xf081;","facebook-square":"&#xf082;","camera-retro":"&#xf083;",key:"&#xf084;",cogs:"&#xf085;",comments:"&#xf086;","thumbs-o-up":"&#xf087;","thumbs-o-down":"&#xf088;","star-half":"&#xf089;","heart-o":"&#xf08a;","sign-out":"&#xf08b;","linkedin-square":"&#xf08c;","thumb-tack":"&#xf08d;","external-link":"&#xf08e;","sign-in":"&#xf090;",trophy:"&#xf091;","github-square":"&#xf092;",upload:"&#xf093;","lemon-o":"&#xf094;",phone:"&#xf095;","square-o":"&#xf096;","bookmark-o":"&#xf097;","phone-square":"&#xf098;",twitter:"&#xf099;",facebook:"&#xf09a;",github:"&#xf09b;",unlock:"&#xf09c;","credit-card":"&#xf09d;",rss:"&#xf09e;","hdd-o":"&#xf0a0;",bullhorn:"&#xf0a1;",bell:"&#xf0f3;",certificate:"&#xf0a3;","hand-o-right":"&#xf0a4;","hand-o-left":"&#xf0a5;","hand-o-up":"&#xf0a6;","hand-o-down":"&#xf0a7;","arrow-circle-left":"&#xf0a8;","arrow-circle-right":"&#xf0a9;","arrow-circle-up":"&#xf0aa;","arrow-circle-down":"&#xf0ab;",globe:"&#xf0ac;",wrench:"&#xf0ad;",tasks:"&#xf0ae;",filter:"&#xf0b0;",briefcase:"&#xf0b1;","arrows-alt":"&#xf0b2;",users:"&#xf0c0;",link:"&#xf0c1;",cloud:"&#xf0c2;",flask:"&#xf0c3;",scissors:"&#xf0c4;","files-o":"&#xf0c5;",paperclip:"&#xf0c6;","floppy-o":"&#xf0c7;",square:"&#xf0c8;",bars:"&#xf0c9;","list-ul":"&#xf0ca;","list-ol":"&#xf0cb;",strikethrough:"&#xf0cc;",underline:"&#xf0cd;",table:"&#xf0ce;",magic:"&#xf0d0;",truck:"&#xf0d1;",pinterest:"&#xf0d2;","pinterest-square":"&#xf0d3;","google-plus-square":"&#xf0d4;","google-plus":"&#xf0d5;",money:"&#xf0d6;","caret-down":"&#xf0d7;","caret-up":"&#xf0d8;","caret-left":"&#xf0d9;","caret-right":"&#xf0da;",columns:"&#xf0db;",sort:"&#xf0dc;","sort-asc":"&#xf0dd;","sort-desc":"&#xf0de;",envelope:"&#xf0e0;",linkedin:"&#xf0e1;",undo:"&#xf0e2;",gavel:"&#xf0e3;",tachometer:"&#xf0e4;","comment-o":"&#xf0e5;","comments-o":"&#xf0e6;",bolt:"&#xf0e7;",sitemap:"&#xf0e8;",umbrella:"&#xf0e9;",clipboard:"&#xf0ea;","lightbulb-o":"&#xf0eb;",exchange:"&#xf0ec;","cloud-download":"&#xf0ed;","cloud-upload":"&#xf0ee;","user-md":"&#xf0f0;",stethoscope:"&#xf0f1;",suitcase:"&#xf0f2;","bell-o":"&#xf0a2;",coffee:"&#xf0f4;",cutlery:"&#xf0f5;","file-text-o":"&#xf0f6;","building-o":"&#xf0f7;","hospital-o":"&#xf0f8;",ambulance:"&#xf0f9;",medkit:"&#xf0fa;","fighter-jet":"&#xf0fb;",beer:"&#xf0fc;","h-square":"&#xf0fd;","plus-square":"&#xf0fe;","angle-double-left":"&#xf100;","angle-double-right":"&#xf101;","angle-double-up":"&#xf102;","angle-double-down":"&#xf103;","angle-left":"&#xf104;","angle-right":"&#xf105;","angle-up":"&#xf106;","angle-down":"&#xf107;",desktop:"&#xf108;",laptop:"&#xf109;",tablet:"&#xf10a;",mobile:"&#xf10b;","circle-o":"&#xf10c;","quote-left":"&#xf10d;","quote-right":"&#xf10e;",spinner:"&#xf110;",circle:"&#xf111;",reply:"&#xf112;","github-alt":"&#xf113;","folder-o":"&#xf114;","folder-open-o":"&#xf115;","smile-o":"&#xf118;","frown-o":"&#xf119;","meh-o":"&#xf11a;",gamepad:"&#xf11b;","keyboard-o":"&#xf11c;","flag-o":"&#xf11d;","flag-checkered":"&#xf11e;",terminal:"&#xf120;",code:"&#xf121;","reply-all":"&#xf122;","mail-reply-all":"&#xf122;","star-half-o":"&#xf123;","location-arrow":"&#xf124;",crop:"&#xf125;","code-fork":"&#xf126;","chain-broken":"&#xf127;",question:"&#xf128;",info:"&#xf129;",exclamation:"&#xf12a;",superscript:"&#xf12b;",subscript:"&#xf12c;",eraser:"&#xf12d;","puzzle-piece":"&#xf12e;",microphone:"&#xf130;","microphone-slash":"&#xf131;",shield:"&#xf132;","calendar-o":"&#xf133;","fire-extinguisher":"&#xf134;",rocket:"&#xf135;",maxcdn:"&#xf136;","chevron-circle-left":"&#xf137;","chevron-circle-right":"&#xf138;","chevron-circle-up":"&#xf139;","chevron-circle-down":"&#xf13a;",html5:"&#xf13b;",css3:"&#xf13c;",anchor:"&#xf13d;","unlock-alt":"&#xf13e;",bullseye:"&#xf140;","ellipsis-h":"&#xf141;","ellipsis-v":"&#xf142;","rss-square":"&#xf143;","play-circle":"&#xf144;",ticket:"&#xf145;","minus-square":"&#xf146;","minus-square-o":"&#xf147;","level-up":"&#xf148;","level-down":"&#xf149;","check-square":"&#xf14a;","pencil-square":"&#xf14b;","external-link-square":"&#xf14c;","share-square":"&#xf14d;",compass:"&#xf14e;","caret-square-o-down":"&#xf150;","caret-square-o-up":"&#xf151;","caret-square-o-right":"&#xf152;",eur:"&#xf153;",gbp:"&#xf154;",usd:"&#xf155;",inr:"&#xf156;",jpy:"&#xf157;",rub:"&#xf158;",krw:"&#xf159;",btc:"&#xf15a;",file:"&#xf15b;","file-text":"&#xf15c;","sort-alpha-asc":"&#xf15d;","sort-alpha-desc":"&#xf15e;","sort-amount-asc":"&#xf160;","sort-amount-desc":"&#xf161;","sort-numeric-asc":"&#xf162;","sort-numeric-desc":"&#xf163;","thumbs-up":"&#xf164;","thumbs-down":"&#xf165;","youtube-square":"&#xf166;",youtube:"&#xf167;",xing:"&#xf168;","xing-square":"&#xf169;","youtube-play":"&#xf16a;",dropbox:"&#xf16b;","stack-overflow":"&#xf16c;",instagram:"&#xf16d;",flickr:"&#xf16e;",adn:"&#xf170;",bitbucket:"&#xf171;","bitbucket-square":"&#xf172;",tumblr:"&#xf173;","tumblr-square":"&#xf174;","long-arrow-down":"&#xf175;","long-arrow-up":"&#xf176;","long-arrow-left":"&#xf177;","long-arrow-right":"&#xf178;",apple:"&#xf179;",windows:"&#xf17a;",android:"&#xf17b;",linux:"&#xf17c;",dribbble:"&#xf17d;",skype:"&#xf17e;",foursquare:"&#xf180;",trello:"&#xf181;",female:"&#xf182;",male:"&#xf183;",gittip:"&#xf184;","sun-o":"&#xf185;","moon-o":"&#xf186;",archive:"&#xf187;",bug:"&#xf188;",vk:"&#xf189;",weibo:"&#xf18a;",renren:"&#xf18b;",pagelines:"&#xf18c;","stack-exchange":"&#xf18d;","arrow-circle-o-right":"&#xf18e;","arrow-circle-o-left":"&#xf190;","caret-square-o-left":"&#xf191;","dot-circle-o":"&#xf192;",wheelchair:"&#xf193;","vimeo-square":"&#xf194;","try":"&#xf195;","plus-square-o":"&#xf196;"},function(t,e){"use strict";e.UI.Databind=e.UI.Base.extend({options:{uitype:"Databind",scope:"uitype",data:{}},data:{},initData:{},bindMapping:{},_init:function(){this.data=this.options.el.get(0),delete this.data.eventID,this.initData=t.extend(!0,{},this.data),this.bindMapping={}},setValue:function(t,e){for(var i in t)i.toLowerCase().indexOf("jquery")>=0||this.set(i,t[i],e)},getValue:function(){var e=t.extend({},this.data);for(var i in e)i.toLowerCase().indexOf("jquery")>=0&&delete e[i];return e},_change:function(t){var e=t.data.propName,i=t.data.el,n=cui(i).getValue(),s=this.data[e];n!=s&&(this.data[e]=n,this._triggerHandler("change",[e,s,n]))},addBind:function(e,i){this.bindMapping[i]=e;var n=cui(e),s=n.getValue();return"undefined"==typeof this.data[i]&&("string"==typeof s&&""!==s?this.data[i]=s:"array"===t.type(s)&&0!==s.lenght&&(this.data[i]=s)),n.bind("change",{propName:i,el:e},t.proxy(this._change,this)),"undefined"!=typeof this.data[i]&&(n.options.textmode?(n.options.value=this.data[i],n.setTextMode()):n.setValue(this.data[i],!0)),this},reset:function(){for(var t in this.initData)this.set(t,this.initData[t],!0)},setEmpty:function(){var t,e,i="";for(e in this.bindMapping)cui(this.bindMapping[e]).onValid();for(e in this.data)if(!(e.toLowerCase().indexOf("jquery")>=0)){switch(t=Object.prototype.toString.call(this.data[e]).match(/\[object\s([A-Za-z]{1,})\]/)[1].toLocaleLowerCase(),t=null===this.data[e]?"null":t){case"number":i="";break;case"string":i="";break;case"array":i=[];break;case"object":i={};break;case"null":i=null;break;case"undefined":i=void 0}this.set(e,i,!0)}},set:function(t,e,i){var n=this.data[t];if(e!=n||i){this.data[t]=e;var s=this.bindMapping[t],o=cui(s);s&&(o.options.textmode?(o.options.value=e,o.setTextMode()):o.setValue(e,!!i)),this._triggerHandler("change",[t,n,e])}},get:function(t){return this.data[t]},destroy:function(){this._super();for(var t in this.bindMapping)t&&cui(this.bindMapping[t]).unbind("change",null,this._change)}})}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.Validate=e.UI.Base.extend({options:{uitype:"Validate",onValid:null,onInValid:null},invalidClass:"validate_invalid",messageClass:"validate_validation_message",invalidFieldClass:"validate_invalid_field",_create:function(){t.extend(this,this.options)},destroy:function(){var e=this,i=t.data(this.options.el,"validateEl")||[];t.each(i,function(t,i){var n=cui("#"+i.id),s=n.options.el;n.unbind("change",e._validateEvent),s.removeData("validateRule")}),t.removeData(this.options.el,"validateEl")},add:function(e,n,s){var o="string"==t.type(e)?cui("#"+e):e;if(o.options){var a=o.options.el,r=a.data("validateRule")||[],l=null;l=s||i[n]?{type:n,params:s||{}}:{type:"required",params:{m:n}},r.push(l),a.data("validateRule",r);var d=t.data(this.options.el,"validateEl")||[];this._contains(a[0],d)||(o.bind("change",this,this._validateEvent),d.push(a[0])),t.data(this.options.el,"validateEl",d)}},setTips:function(e,i){if(e&&i){var n="string"===t.type(e)?cui("#"+e):e;if(n.options){var s=n.options.el,o=s.data("validateRule")||[],a=[],r=this;if("string"===t.type(i))return t.each(o,function(t){var e=o[t];"required"===e.type&&(e.params.m=i)}),void(n.options.el.attr("tip")&&this.validOneElement(n));t.isArray(i)?a=i:a.push(i),t.each(a,function(e){var i=a[e];t.each(o,function(t){var e=o[t];if(i.type===e.type){var n=r._getPropertyNames(i)[1]||"m";e.params[n]&&(e.params[n]=i[n])}})}),n.options.el.attr("tip")&&this.validOneElement(n)}}},_getPropertyNames:function(t){var e=[];for(key in t)e.push(key);return e},disValid:function(e,i){var n="string"==t.type(e)?cui("#"+e):e;if(n.options){var s=n.options.el;i?s.data("disValid","true"):s.removeData("disValid")}},_contains:function(e,i){var n=!1;return t.each(i,function(t,i){return e===i?void(n=!0):void 0}),n},remove:function(e,i){var n="string"==t.type(e)?cui("#"+e):e;if(n.options){var s=n.options.el,o=[];if(i){o=s.data("validateRule")||[];var a=-1;t.each(o,function(t,e){e.type==i&&(a=t)}),a>=0&&o.splice(a,1)}if(o.length<1){s.removeData("validateRule"),n.unbind("change",this,this._validateEvent);var r=t.data(this.options.el,"validateEl")||[],l=-1;t.each(r,function(t,e){e.id==s[0].id&&(l=t)}),l>=0&&r.splice(l,1),r.length<1?t.removeData(this.options.el,"validateEl"):t.data(this.options.el,"validateEl",r)}else s.data("validateRule",o)}},_validateEvent:function(t,e){var i=t.data;i._validate(this,!!e)},validAllElement:function(){return this._validElement(t.data(this.options.el,"validateEl"))},validOneElement:function(e){var i="string"==t.type(e)?cui("#"+e):e;return i.options?this._validate(i):!1},validElement:function(i,n,s){var o,a,r=[];switch(i=i||"ALL",i=i.toLocaleUpperCase(i)){case"AREA":var l=t(n),d=[],h=[],c=e.UI.componentList;for(o=0,a=c.length;a>o;o++)l.find(c[o].options.el).length&&"undefined"!=typeof c[o].options.textmode&&h.push(c[o].options.el[0]),c[o].options.el&&"undefined"!=typeof c[o].options.textmode&&d.push(c[o].options.el[0]);
if(s="undefined"==typeof s?!0:!1)r=h;else{var u=!1;for(o=0,a=d.length;a>o;o++){for(var p=0,f=h.length;f>p;p++)if(t(h[p]).attr("id")==t(d[o]).attr("id")){u=!0;break}u||r.push(d[o]),u=!1}}break;case"CUSTOM":if(s="undefined"==typeof s?!0:!1)for(o=0,a=n.length;a>o;o++)r.push(t("#"+n[o])[0]);else{var c=e.UI.componentList,h=[];for(o=0,a=c.length;a>o;o++)c[o].options.el&&"undefined"!=typeof c[o].options.textmode&&h.push(c[o].options.el[0]);var u=!1;for(o=0,a=h.length;a>o;o++){for(var p=0,f=n.length;f>p;p++)if(t(h[o]).attr("id")==n[p]){u=!0;break}u||r.push(h[o]),u=!1}}break;case"ALL":default:r=t.data(this.options.el,"validateEl")}return this._validElement(r)},_validElement:function(e){e=e||[];for(var i=[],n=[],s=!0,o=0;o<e.length;o++){var a=e[o],r=cui(a);if("undefined"!=typeof r.options){var l=this._validate(r);l=t.extend(l,{id:a.id}),l.valid?i.push(l):(s=!1,n.push(l))}}return[n,i,s]},_validate:function(t,e){var i=t.options.el;if(e)return t.onValid(t),!1;if(!i[0].disabled){var n=null,s=t.options.el.data("disValid");n=s&&"true"==s?{valid:!0,message:""}:this._doValidate(t);var o=n.valid;return o?t.onValid&&!this.options.onValid?t.onValid(t):t.onValid||this.options.onValid?this.options.onValid.apply(this,[i]):this.onValid(i):t.onInValid&&!this.options.onInValid?t.onInValid(t,n.message):t.onInValid||this.options.onInValid?this.options.onInValid.apply(this,[i,n.message]):this.onInValid(i,n.message),n}},_doValidate:function(t){for(var e=t.options.el,i=!1,n=e.data("validateRule")||[],s=0;s<n.length;s++){var o=n[s],a=this._validateElement(t,o);if(i=!a.valid)return{valid:!1,message:a.message}}return{valid:!0,message:""}},_validateElement:function(t,e){var n=e.type,s=e.params,o=t.getValue(),a=!0,r="";try{i[n](o,s)}catch(l){r=l.message,a=!1}finally{return{valid:a,message:r}}},onInValid:function(t,e){this._insertMessage(t,this._createMessageSpan(e)),this._addFieldClass(t)},onValid:function(t){this._removeMessageAndFieldClass(t)},_createMessageSpan:function(e){return t("<span></span>").html(e)},_insertMessage:function(e,i){this._removeMessage(e),t(i).addClass(this.messageClass+(" "+this.invalidClass)),t(i).insertAfter(e)},_addFieldClass:function(e){this._removeFieldClass(e),t(e).addClass(this.invalidFieldClass)},_removeMessage:function(e){(nextEl=t(e).next("."+this.messageClass))&&t(nextEl).remove()},_removeFieldClass:function(e){t(e).removeClass(this.invalidFieldClass)},_removeMessageAndFieldClass:function(t){this._removeMessage(t),this._removeFieldClass(t)}});var i=null;e.UI.Validate.rule=i={required:function(e,n){var s=t.extend({m:"\u4e0d\u80fd\u4e3a\u7a7a!"},n||{});if((""===t.trim(e)||null===e||void 0===e)&&i.fail(s.m),s.emptyVal&&t.each(s.emptyVal,function(t,n){e==n&&i.fail(s.m)}),"array"===t.type(e)&&0===e.length)i.fail(s.m);else if("array"===t.type(e))for(var o=0;o<e.length;o++)if(""===t.trim(e[o])||null===e[o]||void 0===e[o]){i.fail(s.m);break}return!0},numeric:function(t,e){var n=t;if(""===t)return!0;var t=Number(t),e=e||{},s={notANumberMessage:e.notnm||"\u5fc5\u987b\u4e3a\u6570\u5b57!",notAnIntegerMessage:e.notim||"\u5fc5\u987b\u4e3a\u6574\u6570!",wrongNumberMessage:e.wrongm||"\u5fc5\u987b\u4e3a "+e.is+"!",tooLowMessage:e.minm||"\u5fc5\u987b\u5927\u4e8e "+e.min+"!",tooHighMessage:e.maxm||"\u5fc5\u987b\u5c0f\u4e8e "+e.max+"!",is:e.is||0==e.is?e.is:null,minimum:e.min||0==e.min?e.min:null,maximum:e.max||0==e.max?e.max:null,onlyInteger:e.oi||!1};switch(isFinite(t)||i.fail(s.notANumberMessage),s.onlyInteger&&!/^\d+$/.test(String(n))&&i.fail(s.notAnIntegerMessage),!0){case null!==s.is:t!=Number(s.is)&&i.fail(s.wrongNumberMessage);break;case null!==s.minimum&&null!==s.maximum:i.numeric(t,{minm:s.tooLowMessage,min:s.minimum}),i.numeric(t,{maxm:s.tooHighMessage,max:s.maximum});break;case null!==s.minimum:t<Number(s.minimum)&&i.fail(s.tooLowMessage);break;case null!==s.maximum:t>Number(s.maximum)&&i.fail(s.tooHighMessage)}return!0},format:function(e,n){var e=String(e);if(""==e)return!0;var s=t.extend({m:"\u4e0d\u7b26\u5408\u89c4\u5b9a\u683c\u5f0f!",pattern:/./,negate:!1},n||{});return s.pattern="string"==t.type(s.pattern)?new RegExp(s.pattern):s.pattern,s.negate||s.pattern.test(e)||i.fail(s.m),!0},email:function(e,n){if(""==e)return!0;var s=t.extend({m:"\u90ae\u7bb1\u683c\u5f0f\u8f93\u5165\u4e0d\u5408\u6cd5!"},n||{});return i.format(e,{m:s.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}),!0},dateFormat:function(e,n){var s=t.extend({m:"\u65e5\u671f\u683c\u5f0f\u5fc5\u987b\u4e3ayyyy-MM-dd\u5f62\u5f0f\uff01"},n||{});return i.format(e,{m:s.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i}),!0},length:function(t,e){var t=String(t),e=e||{},n={wrongLengthMessage:e.wrongm||"\u957f\u5ea6\u5fc5\u987b\u4e3a "+e.is+" \u5b57\u8282!",tooShortMessage:e.minm||"\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e "+e.min+" \u5b57\u8282!",tooLongMessage:e.maxm||"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e "+e.max+" \u5b57\u8282!",is:e.is||0==e.is?e.is:null,minimum:e.min||0==e.min?e.min:null,maximum:e.max||0==e.max?e.max:null};switch(!0){case null!==n.is:t.replace(/[^\x00-\xff]/g,"xx").length!=Number(n.is)&&i.fail(n.wrongLengthMessage);break;case null!==n.minimum&&null!==n.maximum:i.length(t,{minm:n.tooShortMessage,min:n.minimum}),i.length(t,{maxm:n.tooLongMessage,max:n.maximum});break;case null!==n.minimum:t.replace(/[^\x00-\xff]/g,"xx").length<Number(n.minimum)&&i.fail(n.tooShortMessage);break;case null!==n.maximum:t.replace(/[^\x00-\xff]/g,"xx").length>Number(n.maximum)&&i.fail(n.tooLongMessage);break;default:throw new i.error("Validate::Length - \u957f\u5ea6\u9a8c\u8bc1\u5fc5\u987b\u63d0\u4f9b\u957f\u5ea6\u503c!")}return!0},inclusion:function(e,n){var s=t.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0,negate:!1},n||{});if(s.m=s.m||e+"\u6ca1\u6709\u5305\u542b\u5728\u6570\u7ec4"+s.within.join(",")+"\u4e2d",s.allowNull&&!e)return!0;if(s.allowNull||e||i.fail(s.m),!s.caseSensitive){var o=[];t.each(s.within,function(t,e){"string"==typeof e&&(e=e.toLowerCase()),o.push(e)}),s.within=o,"string"==typeof e&&(e=e.toLowerCase())}var a=!1;return t.each(s.within,function(t,i){i==e&&(a=!0),s.partialMatch&&-1!=e.indexOf(i)&&(a=!0)}),(!s.negate&&!a||s.negate&&a)&&i.fail(s.m),!0},exclusion:function(e,n){var s=t.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0},n||{});return s.m=s.m||e+"\u4e0d\u5e94\u8be5\u5728\u6570\u7ec4"+s.within.join(",")+"\u4e2d\uff01",s.negate=!0,i.inclusion(e,s),!0},confirmation:function(e,n){if(!n.match)throw new Error("Validate::Confirmation - \u4e0e\u4e4b\u5339\u914d\u7684\u5143\u7d20\u5f15\u7528\u6216\u5143\u7d20id\u5fc5\u987b\u88ab\u63d0\u4f9b!");var s=t.extend({m:"\u4e24\u8005\u4e0d\u4e00\u81f4!",match:null},n||{});if(s.match="string"==t.type(s.match)?cui("#"+s.match):s.match,!s.match||0==s.match.length)throw new Error("Validate::Confirmation - \u4e0e\u4e4b\u5339\u914d\u7684\u5143\u7d20\u5f15\u7528\u6216\u5143\u7d20\u4e0d\u5b58\u5728!");return e!=s.match.getValue()&&i.fail(s.m),!0},acceptance:function(e,n){var s=t.extend({m:"\u5fc5\u987b\u9009\u62e9!"},n||{});return e||i.fail(s.m),!0},custom:function(e,n){var s=t.extend({against:function(){return!0},args:{},m:"\u4e0d\u5408\u6cd5!"},n||{}),o=s.against;return"string"==t.type(o)&&(o=window[o]),o(e,s.args)||i.fail(s.m),!0},error:function(t){this.message=t,this.name="ValidationError"},fail:function(t){throw new i.error(t)}}}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.Tip=e.UI.Base.extend({options:{uitype:"Tip",pointee:!0,position:"auto",live:!1,trigger:"hover",x:!1,maxWidth:150,fade:!1,opacity:1,tipEl:null,content_cls:".ctip-msg",close_cls:".ctip-x",tipType:"normal"},_init:function(){this.options.uid="tip_"+comtop.guid();var e=this.options;this.$el=t(e.el),this.$tipEl=e.tipEl?t(e.tipEl):this.$el,this._fixTitle()},_create:function(){"onload"===this.options.trigger?this.show():this._bindElEvent()},_createDOM:function(){var e=this,i=e.options,n=[];n.push('<div class="ctip" id="',i.uid,'">'),i.pointee&&n.push('<div class="ctip-arrow"><span class="tip-arrow-border">&#9670</span><span class="tip-arrow-bg">&#9670</span></div>'),n.push('<div class="ctip-content ',i.x===!0?"ctip-closed":"",'">'),i.x&&n.push('<a class="ctip-x cui-icon" href="#">&#xf00d;</a>'),n.push('<div class="ctip-msg"></div></div></div>'),t("body").append(n.join(""))},_bindElEvent:function(){var t=this,e=t.options,i="true"==e.live||e.live===!0?"live":"bind",n="hover"==e.trigger?"mouseenter":"click"==e.trigger?"click":"focus",s="hover"==e.trigger?"mouseleave":"click"==e.trigger?"":"blur";t.$el[i](n,function(){return t.show(t.$el.attr("tipType")),"hover"!==e.trigger?!1:void 0})[i](s,function(){return t.hide(),"hover"!==e.trigger?!1:void 0})},_lazyCreate:function(){var e=this,i=e.options;this.created||(this._createDOM(),e.$tip=t("#"+i.uid),e._bindEvent(),e.created=!0)},_setMaxWidth:function(){var t=this.$tip,i=this.options;if(e.Browser.isIE6){var n=t.find(".ctip-msg").width()>i.maxWidth?i.maxWidth:"auto";e.Browser.isQM&&"auto"!=n&&(n+=16),t.children(".ctip-content").css("width",n)}else t.children(".ctip-content").css("maxWidth",i.maxWidth)},_bindEvent:function(){var t=this,e=this.options;e.x===!0&&this.$tip.find(e.close_cls).bind("click",function(){return t.hide(),!1})},_fixTitle:function(){this.$el.removeAttr("title")},_setPosition:function(){var i=this.$tip,n=this.$el,s=this.options,o=t.extend({},n.offset(),{width:n[0].offsetWidth,height:n[0].offsetHeight}),a=i[0].offsetWidth,r=i[0].offsetHeight,l=s.position;e.Browser.isIE&&a>s.maxWidth&&(i.width(s.maxWidth),a=i[0].offsetWidth,r=i[0].offsetHeight),"auto"==l&&(l=this._calAutoPosition(o));var d={};switch(l){case"t":d={left:o.left+o.width/2-a/2,top:o.top-r-5};break;case"b":d={left:o.left+o.width/2-a/2,top:o.top+o.height+5};break;case"l":d={left:o.left-a-5,top:o.top+o.height/2-r/2};break;case"r":d={left:o.left+o.width+5,top:o.top+o.height/2-r/2};break;case"lt":d={left:o.left,top:o.top-r-5};break;case"lb":d={left:o.left,top:o.top+o.height+5};break;case"rt":d={left:o.left+o.width-a,top:o.top-r-5};break;case"rb":d={left:o.left+o.width-a,top:o.top+o.height+5}}i.css(d).addClass("ctip-"+l)},_calAutoPosition:function(e){var i=t(window),n={width:i.width(),height:i.height()},s=e.top>t(document).scrollTop()+n.height/2?"t":"b",o="",a=this.options.maxWidth/2,r=e.left+e.width/2-t(document).scrollLeft(),l=n.width-r;return a>r?o="l":a>l&&(o="r"),o+s},getContent:function(){var t=this.options;return t.content?t.content:this.$tipEl.attr("tip")},setContent:function(t){var t=t||this.getContent();this.created||this._lazyCreate(),this.$tip.find(this.options.content_cls).html(t),this.$tipEl.attr("tip",t)},setType:function(t){var e=this,i=e.options;e.$tip.removeClass("ctip-"+i.tipType),e.$tip.addClass("ctip-"+t),i.tipType=t},show:function(e){var i=this;i._lazyCreate(),""!==t.trim(i.getContent())&&(i.setContent(),i.$tip[0].className="ctip",i.$tip.css({top:0,left:0,display:"block"}),i._setMaxWidth(),i._setPosition(),i.setType(e||i.options.tipType))},hide:function(){this.$tip&&this.$tip.hide()}}),cui.tipList={},cui.tip=function(i,n){n=n||{},n.el=t(i);var s=new e.UI.Tip(n);return cui.tipList[s.options.uid]=s,n.el.attr("tipID",s.options.uid),s}}(window.comtop.cQuery,window.comtop),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}s(e)},t.widget=function(e,i,n){var s,o,a,r,l={},d=e.split(".")[0];e=e.split(".")[1],s=d+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[d]=t[d]||{},o=t[d][e],a=t[d][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:e},l,{constructor:a,namespace:d,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,l=a.length;l>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,l=n.call(arguments,1),d=this;return a=!r&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,this.each(r?function(){var n,s=t.data(this,o);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==e?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new s(a,this))}),d}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),d=l[1]+o.eventNamespace,h=l[2];h?s.delegate(h,d,r):i.bind(d,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(window.comtop.cQuery),function(t){t.cookie=function(e,i,n){if("undefined"==typeof i){var s=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var r=t.trim(o[a]);if(r.substring(0,e.length+1)==e+"="){s=decodeURIComponent(r.substring(e.length+1));break}}return s}n=n||{},null===i&&(i="",n=$.extend({},n),n.expires=-1);var l="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var d;"number"==typeof n.expires?(d=new Date,d.setTime(d.getTime()+24*n.expires*60*60*1e3)):d=n.expires,l="; expires="+d.toUTCString()}var h=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(i),l,h,c,u].join("")}}(window.comtop.cQuery);var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(t){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(t)}function noop(){}function _initDragAndDrop(t){var e=t.options.dnd||null;e&&(e.onDragStart||e.onDrop)&&_registerDnd(),e&&e.onDragStart&&t.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(t){var e=$.ui.dynatree.getNode(t.target);return e?e.tree._onDragEvent("helper",e,null,t,null,null):"<div></div>"},start:function(t,e){var i=e.helper.data("dtSourceNode");return!!i},_last:null}),e&&e.onDrop&&t.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(t,e,i){this.parent=t,this.tree=e,"string"==typeof i&&(i={title:i}),void 0===i.key&&(i.key="_"+e._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,i),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(t,e){var i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,e&&e(i),t&&this.childList){i.children=[];for(var n=0,s=this.childList.length;s>n;n++)i.children.push(this.childList[n].toDict(!0,e))}else delete i.children;return i},disable:function(){this.data.disable=!0;var t=$(this.li);this.expand(!1),t.children().removeClass("dynatree-active").addClass("dynatree-node-disable"),t.find(".dynatree-checkbox").removeClass("dynatree-checkbox").addClass("dynatree-checkbox-disable"),t.find(".dynatree-radio").removeClass("dynatree-radio").addClass("dynatree-radio-disable")},enable:function(){this.data.disable=!1;var t=$(this.li);t.children().removeClass("dynatree-node-disable"),t.find(".dynatree-checkbox-disable").removeClass("dynatree-checkbox-disable").addClass("dynatree-checkbox"),t.find(".dynatree-radio-disable").removeClass("dynatree-radio-disable").addClass("dynatree-radio")},fromDict:function(t){var e=t.children;return void 0===e?(this.data=$.extend(this.data,t),void this.render()):(t=$.extend({},t),t.children=void 0,this.data=$.extend(this.data,t),this.removeChildren(),void this.addChild(e))},_getInnerHtml:function(){var t,e=this.tree,i=e.options,n=e.cache,s=this.getLevel(),o=this.data,a="";s<i.minExpandLevel?s>1&&(a+=n.tagConnector):a+=this.hasChildren()!==!1?n.tagExpander:n.tagConnector,i.checkbox&&o.hideCheckbox!==!0&&!o.isStatusNode&&(a+=n.tagCheckbox),o.icon?(t="/"===o.icon.charAt(0)?o.icon:i.imagePath+o.icon,a+="<img src='"+t+"' alt='' />"):o.icon===!1||(a+=n.tagNodeIcon);var r="";if(i.onCustomRender&&(r=i.onCustomRender.call(e,this)||""),!r){var l=o.tooltip?' title="'+o.tooltip.replace(/\"/g,"&quot;")+'"':"",d=o.href||"javascript:;";r=i.noLink||o.noLink?'<span style="display:inline-block;" class="'+i.classNames.title+'"'+l+">"+o.title+"</span>":'<a hidefocus="true" onclick="return false;"  href="'+d+'" class="'+i.classNames.title+'"'+l+">"+o.title+"</a>"}return a+=r},_fixOrder:function(){var t=this.childList;if(t&&this.ul)for(var e=this.ul.firstChild,i=0,n=t.length-1;n>i;i++){var s=t[i],o=e.dtnode;s!==o?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+s+" != "+o),this.ul.insertBefore(s.li,o.li)):e=e.nextSibling}},render:function(t,e){var i=this.tree,n=this.parent,s=this.data,o=i.options,a=o.classNames,r=this.isLastSibling(),l=!1;if(n||this.ul){if(n){this.li||(l=!0,this.li=document.createElement("li"),this.li.dtnode=this,s.key&&o.generateIds&&(this.li.id=o.idPrefix+s.key),this.span=document.createElement("span"),this.span.className=a.title,this.li.appendChild(this.span),n.ul||(n.ul=document.createElement("ul"),n.ul.style.display="none",n.li.appendChild(n.ul)),n.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var d=[];d.push(a.node),s.isFolder&&d.push(a.folder),this.bExpanded&&d.push(a.expanded),this.hasChildren()!==!1&&d.push(a.hasChildren),s.isLazy&&null===this.childList&&d.push(a.lazy),r&&d.push(a.lastsib),this.bSelected&&d.push(a.selected),this.hasSubSel&&d.push(a.partsel),i.activeNode===this&&d.push(a.active),s.addClass&&d.push(s.addClass),s._firstNode&&(d.push("dynatree-first-node"),$(this.span).find(".dynatree-expander").addClass("dynatree-expander-first")),s.partSelect&&d.push(a.partsel),d.push(a.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(s.isLazy&&null===this.childList?"d":"")+(r?"l":"")),d.push(a.combinedIconPrefix+(this.bExpanded?"e":"c")+(s.isFolder?"f":"")),this.span.className=d.join(" "),this.li.className=r?a.lastsib:"",s.disable&&this.disable(),s._customStyle&&$(this.span).find("a").attr("style",s._customStyle),"string"==typeof s.customerClass&&$(this.span).find("a").addClass(s.customerClass),l&&o.onCreate&&o.onCreate.call(i,this,this.span),o.onRender&&o.onRender.call(i,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=o.minExpandLevel>1?a.container+" "+a.noConnector:a.container;if(this.li&&$(this.li).data("nodeData",this.data),(this.bExpanded||e===!0)&&$.isArray(this.childList)){for(var h=0,c=this.childList.length;c>h;h++)this.childList[h].render(!1,e);this._fixOrder()}if(this.ul){var u="none"===this.ul.style.display,p=!!this.bExpanded;if(t&&o.fx&&u===p){var f=o.fx.duration||200;$(this.ul).animate(o.fx,f)}else this.ul.style.display=this.bExpanded||!n?"":"none"}},getKeyPath:function(t){var e=[];return this.visitParents(function(t){t.parent&&e.unshift(t.data.key)},!t),"/"+e.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var t=this.parent;return!t||t.childList[0]===this},isLastSibling:function(){var t=this.parent;return!t||t.childList[t.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var t=this.parent.childList,e=1,i=t.length;i>e;e++)if(t[e]===this)return t[e-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var t=this.parent.childList,e=0,i=t.length-1;i>e;e++)if(t[e]===this)return t[e+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(t){return this.parent&&this.parent===t},isDescendantOf:function(t){if(!t)return!1;for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},countChildren:function(){var t=this.childList;if(!t)return 0;for(var e=t.length,i=0,n=e;n>i;i++){var s=t[i];e+=s.countChildren()}return e},sortChildren:function(t,e){var i=this.childList;if(i){if(t=t||function(t,e){var i=t.data.title.toLowerCase(),n=e.data.title.toLowerCase();return i===n?0:i>n?1:-1},i.sort(t),e)for(var n=0,s=i.length;s>n;n++)i[n].childList&&i[n].sortChildren(t,"$norender$");"$norender$"!==e&&this.render()}},_setStatusNode:function(t){var e=this.childList?this.childList[0]:null;if(t)e?(t.isStatusNode=!0,t.key="_statusNode",e.data=t,e.render()):(t.isStatusNode=!0,t.key="_statusNode",e=this.addChild(t));else if(e&&e.isStatusNode()){try{this.ul&&(this.ul.removeChild(e.li),e.li=null)}catch(i){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(t,e){var i=e&&e.tooltip?e.tooltip:null,n=e&&e.info?" ("+e.info+")":"";switch(t){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+n,tooltip:i,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+n,tooltip:i,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+t+"'."}},_parentList:function(t,e){for(var i=[],n=e?this:this.parent;n;)(t||n.parent)&&i.unshift(n),n=n.parent;return i},getLevel:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},_getTypeForOuterNodeEvent:function(t){var e=this.tree.options.classNames,i=t.target;if(i.className.indexOf(e.node)<0)return null;for(var n=t.pageX-i.offsetLeft,s=t.pageY-i.offsetTop,o=0,a=i.childNodes.length;a>o;o++){var r=i.childNodes[o],l=r.offsetLeft-i.offsetLeft,d=r.offsetTop-i.offsetTop,h=r.clientWidth,c=r.clientHeight;if(n>=l&&l+h>=n&&s>=d&&d+c>=s){if(r.className==e.title)return"title";if(r.className==e.expander)return"expander";if(r.className==e.checkbox)return"checkbox";if(r.className==e.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(t){var e=t&&t.target?t.target.className:"",i=this.tree.options.classNames;return e===i.title?"title":-1!==e.indexOf(i.expander)?"expander":e===i.checkbox?"checkbox":e===i.nodeIcon?"icon":e===i.empty||e===i.vline||e===i.connector?"prefix":e.indexOf(i.node)>=0?this._getTypeForOuterNodeEvent(t):null},isVisible:function(){for(var t=this._parentList(!0,!1),e=0,i=t.length;i>e;e++)if(!t[e].bExpanded)return!1;return!0},makeVisible:function(){for(var t=this._parentList(!0,!1),e=0,i=t.length;i>e;e++)t[e]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(t){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(t,e,i){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",t,e,this);var n=this.tree.options;if(!(this.data.isStatusNode||e&&n.onQueryActivate&&n.onQueryActivate.call(this.tree,t,this)===!1))if(t){if(this.tree.activeNode){if(this.tree.activeNode===this&&!i)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),e&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&n.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,e&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(t){this._activate(!0,!0,t)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var t=!0,e=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:t=!1,e=!0;break;case 3:t=e=!0}null===this.parent&&(e=!1),e&&this.toggleExpand(),t&&this.activate(this.tree.options.reactive)},_setSubSel:function(t){t?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var t,e=this.bSelected;if(!this.hasChildren())return t=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),t;var i,n,s=this.childList,o=!0,a=!0;for(i=0,n=s.length;n>i;i++){var r=s[i],l=r._updatePartSelectionState();l!==!1&&(a=!1),l!==!0&&(o=!1)}return t=o?!0:a?!1:void 0,this._setSubSel(void 0===t),this.bSelected=t===!0,4==this.tree.options.selectMode&&(this.bSelected=e),t},_fixSelectionState:function(t){var e,i,n;if(this.bSelected)for(this.visit(function(t){t.parent._setSubSel(!0),t.data.unselectable||t._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var s=!0;for(i=0,n=e.childList.length;n>i;i++){var o=e.childList[i];if(!o.bSelected&&!o.data.isStatusNode&&!o.data.unselectable){s=!1;break}}s&&!t&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit(function(t){t._setSubSel(!1),t._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(i=0,n=e.childList.length;n>i;i++)if(e.childList[i].bSelected||e.childList[i].hasSubSel){a=!0;break}e._setSubSel(a),e=e.parent}},_select:function(t,e,i){var n=this.tree.options;this.data.isStatusNode||this.bSelected!==t&&(e&&n.onQuerySelect&&n.onQuerySelect.call(this.tree,t,this)===!1||(1==n.selectMode&&t&&this.tree.visit(function(t){return t.bSelected?(t._select(!1,!1,!1),!1):void 0}),this.bSelected=t,i&&3===n.selectMode&&this._fixSelectionState(),i&&4===n.selectMode&&this._fixSelectionState(!0),t?(n.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(n.classNames.selected),e&&n.onSelect&&n.onSelect.call(this.tree,!0,this)):(n.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(n.classNames.selected),e&&n.onSelect&&n.onSelect.call(this.tree,!1,this))))},select:function(t){return this.data.unselectable?this.bSelected:this._select(t!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var t=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===t.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(t,e){if(this.bExpanded===t)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",t,this);this.tree.logDebug("dtnode._expand(%o) - %o",t,this);var i=this.tree.options;if(!t&&this.getLevel()<i.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",t,this);
if(!i.onQueryExpand||i.onQueryExpand.call(this.tree,t,this)!==!1){this.bExpanded=t,i.persist&&(t?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var n=!(this.data.isLazy&&null===this.childList||this._isLoading||e);if(this.render(n),this.bExpanded&&this.parent&&i.autoCollapse)for(var s=this._parentList(!1,!0),o=0,a=s.length;a>o;o++)s[o].collapseSiblings();return i.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),t&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void(i.onExpand&&i.onExpand.call(this.tree,t,this))}},isExpanded:function(){return this.bExpanded},expand:function(t){t=t!==!1,(this.childList||this.data.isLazy||!t)&&(null!==this.parent||t)&&this._expand(t)},scheduleAction:function(t,e){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var i=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger expand"),i.expand(!0)},e);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger activate"),i.activate()},e);break;default:throw"Invalid mode "+t}this.tree.logDebug("setTimeout(%s, %s): %s",t,e,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var t=this.parent.childList,e=0,i=t.length;i>e;e++)t[e]!==this&&t[e].bExpanded&&t[e]._expand(!1)},_onClick:function(t){var e=this.getEventTargetType(t);if("expander"===e)this.toggleExpand();else if("checkbox"===e)this.toggleSelect();else{this._userActivate();var i=this.span.getElementsByTagName("a");if(!i[0])return!0}},_onDblClick:function(){},_onKeydown:function(t){var e,i=!0;switch(t.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(e=this.getPrevSibling();e&&e.bExpanded&&e.childList;)e=e.childList[e.childList.length-1];!e&&this.parent&&this.parent.parent&&(e=this.parent),e&&e.focus();break;case 40:if(this.bExpanded&&this.childList)e=this.childList[0];else for(var n=this._parentList(!1,!0),s=n.length-1;s>=0&&!(e=n[s].getNextSibling());s--);e&&e.focus();break;default:i=!1}i&&t.preventDefault()},_onKeypress:function(){},_onFocus:function(t){var e=this.tree.options;"blur"==t.type||"focusout"==t.type?(e.onBlur&&e.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(e.classNames.focused),this.tree.tnFocused=null,e.persist&&$.cookie(e.cookieId+"-focus","",e.cookie)):("focus"==t.type||"focusin"==t.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(e.classNames.focused)),this.tree.tnFocused=this,e.onFocus&&e.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(e.classNames.focused),e.persist&&$.cookie(e.cookieId+"-focus",this.data.key,e.cookie))},visit:function(t,e){var i=!0;if(e===!0&&(i=t(this),i===!1||"skip"==i))return i;if(this.childList)for(var n=0,s=this.childList.length;s>n&&(i=this.childList[n].visit(t,!0),i!==!1);n++);return i},visitParents:function(t,e){if(e&&t(this)===!1)return!1;for(var i=this.parent;i;){if(t(i)===!1)return!1;i=i.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";this.parent.removeChild(this),this.parent.render()},removeChild:function(t){var e=this.childList;if(1==e.length){if(t!==e[0])throw"removeChild: invalid child";return this.removeChildren(),void $(this.ul).addClass("tree-hide-ul")}t===this.tree.activeNode&&t.deactivate(),this.tree.options.persist&&(t.bSelected&&this.tree.persistence.clearSelect(t.data.key),t.bExpanded&&this.tree.persistence.clearExpand(t.data.key)),t.removeChildren(!0),this.ul&&t.li&&this.ul.removeChild(t.li);for(var i=0,n=e.length;n>i;i++)if(e[i]===t){this.childList.splice(i,1);break}},removeChildren:function(t,e){this.tree.logDebug("%s.removeChildren(%o)",this,t);var i=this.tree,n=this.childList;if(n){for(var s=0,o=n.length;o>s;s++){var a=n[s];a!==i.activeNode||e||a.deactivate(),this.tree.options.persist&&!e&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key)),a.removeChildren(!0,e),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}t||(this._isLoading=!1,this.render())},setTitle:function(t){this.fromDict({title:t})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(t){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(t){var e=this,i="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(i,function(n,s,o){if(e.tree.$tree.unbind(i),e.tree.logDebug("loaded %o, %o, %o",n,s,o),s!==e)throw"got invalid load event";t.call(e.tree,s,o)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(t,e){var i=this.tree;if(i.logDebug("%s._loadKeyPath(%s)",this,t),""===t)throw"Key path must not be empty";var n=t.split(i.options.keyPathSeparator);if(""===n[0])throw"Key path must be relative (don't start with '/')";var s=n.shift();if(this.childList)for(var o=0,a=this.childList.length;a>o;o++){var r=this.childList[o];if(r.data.key===s){if(0===n.length)e.call(i,r,"ok");else if(!r.data.isLazy||null!==r.childList&&void 0!==r.childList)e.call(i,r,"loaded"),r._loadKeyPath(n.join(i.options.keyPathSeparator),e);else{i.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,t,r);var l=this;r.reloadChildren(function(s,o){o?(i.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",s,t,s),e.call(i,r,"loaded"),s._loadKeyPath(n.join(i.options.keyPathSeparator),e)):(i.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,t),e.call(i,r,"error"))})}return}}e.call(i,void 0,"notfound",s,0===n.length),i.logWarning("Node not found: "+s)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(t,e){var i=this.tree,n=i.options,s=i.persistence;if(t.parent=this,null===this.childList?this.childList=[]:e||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(n.classNames.lastsib),e){var o=$.inArray(e,this.childList);if(0>o)throw"<beforeNode> must be a child of <this>";this.childList.splice(o,0,t)}else this.childList.push(t);var a=i.isInitializing();if(n.persist&&s.cookiesFound&&a?(s.activeKey===t.data.key&&(i.activeNode=t),s.focusedKey===t.data.key&&(i.focusNode=t),t.bExpanded=$.inArray(t.data.key,s.expandedKeyList)>=0,t.bSelected=$.inArray(t.data.key,s.selectedKeyList)>=0):(t.data.activate&&(i.activeNode=t,n.persist&&(s.activeKey=t.data.key)),t.data.focus&&(i.focusNode=t,n.persist&&(s.focusedKey=t.data.key)),t.bExpanded=t.data.expand===!0,t.bExpanded&&n.persist&&s.addExpand(t.data.key),t.bSelected=t.data.select===!0,t.bSelected&&n.persist&&s.addSelect(t.data.key)),n.minExpandLevel>=t.getLevel()&&(this.bExpanded=!0),t.bSelected&&3==n.selectMode)for(var r=this;r;)r.hasSubSel||r._setSubSel(!0),r=r.parent;return i.bEnableUpdate&&this.render(),t},addChild:function(t,e){if($(this.ul).removeClass("tree-hide-ul"),"string"==typeof t)throw"Invalid data type for "+t;if(t&&0!==t.length){if(t instanceof DynaTreeNode)return this._addChildNode(t,e);t.length||(t=[t]);for(var i=this.tree.enableUpdate(!1),n=null,s=0,o=t.length;o>s;s++){var a=t[s],r=this._addChildNode(new DynaTreeNode(this,this.tree,a),e);n||(n=r),a.children&&r.addChild(a.children,null)}return this.tree.enableUpdate(i),n}},append:function(t){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(t,null)},appendAjax:function(t){var e=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),t.debugLazyDelay){var i=t.debugLazyDelay;return t.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+i),void setTimeout(function(){e.appendAjax(t)},i)}var n=t.success,s=t.error,o="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,a=$.extend({},this.tree.options.ajaxDefaults,t,{success:function(t,i){var s=e.tree.phase;e.tree.phase="init",a.postProcess?t=a.postProcess.call(this,t,this.dataType):t&&t.hasOwnProperty("d")&&(t="string"==typeof t.d?$.parseJSON(t.d):t.d),$.isArray(t)&&0===t.length||e.addChild(t,null),e.tree.phase="postInit",n&&n.call(a,e,t,i),e.tree.logDebug("trigger "+o),e.tree.$tree.trigger(o,[e,!0]),e.tree.phase=s,e.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(t)&&0===t.length&&(e.childList=[],e.render())},error:function(t,i,n){e.tree.logWarning("appendAjax failed:",i,":\n",t,"\n",n),s&&s.call(a,e,t,i,n),e.tree.$tree.trigger(o,[e,!1]),e.setLazyNodeStatus(DTNodeStatus_Error,{info:i,tooltip:""+n})}});$.ajax(a)},move:function(t,e){var i;if(this!==t){if(!this.parent)throw"Cannot move system root";(void 0===e||"over"==e)&&(e="child");var n=this.parent,s="child"===e?t:t.parent;if(s.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if(i=$.inArray(this,this.parent.childList),0>i)throw"Internal error";this.parent.childList.splice(i,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=s,s.hasChildren())switch(e){case"child":s.childList.push(this);break;case"before":if(i=$.inArray(t,s.childList),0>i)throw"Internal error";s.childList.splice(i,0,this);break;case"after":if(i=$.inArray(t,s.childList),0>i)throw"Internal error";s.childList.splice(i+1,0,this);break;default:throw"Invalid mode "+e}else s.childList=[this];if(s.ul||(s.ul=document.createElement("ul"),s.ul.style.display="none",s.li.appendChild(s.ul)),this.li&&s.ul.appendChild(this.li),this.tree!==t.tree)throw this.visit(function(e){e.tree=t.tree},null,!0),"Not yet implemented.";var o=function(t){for(var e=0,i=t.length;i>e;e++)t[e].data._firstNode=0==e?!0:!1};this.data._firstNode=!1,n.isDescendantOf(s)||(null===n.parent&&o(n.childList),n.render()),s.isDescendantOf(n)||(null===n.parent&&o(n.childList),s.render())}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(t,e){var i=new DynaTreeStatus(t,e);return i.read(),i.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(t,e){void 0===t&&(t=$.ui.dynatree.prototype.options.cookieId),e=$.extend({},$.ui.dynatree.prototype.options.cookie,e),this.cookieId=t,this.cookieOpts=e,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var t=$.cookie(this.cookieId+"-active");this.activeKey=null===t?"":t,null!==t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===t?"":t,null!==t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===t?[]:t.split(","),null!==t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===t?[]:t.split(","),null!==t&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(t){$.inArray(t,this.expandedKeyList)<0&&(this.expandedKeyList.push(t),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(t){var e=$.inArray(t,this.expandedKeyList);e>=0&&(this.expandedKeyList.splice(e,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(t){$.inArray(t,this.selectedKeyList)<0&&(this.selectedKeyList.push(t),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(t){var e=$.inArray(t,this.selectedKeyList);e>=0&&(this.selectedKeyList.splice(e,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version:$",DynaTree.prototype={initialize:function(t){this.phase="init",this.$widget=t,this.options=t.options,this.$tree=t.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(t){var e=(this.$widget,this.options);this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==e.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),e.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),e.minExpandLevel=1),e.classNames!==$.ui.dynatree.prototype.options.classNames&&(e.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,e.classNames)),e.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(e.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,e.ajaxDefaults)),e.dnd!==$.ui.dynatree.prototype.options.dnd&&(e.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,e.dnd)),this.persistence=new DynaTreeStatus(e.cookieId,e.cookie),e.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+e.classNames.empty+"'></span>",tagVline:"<span class='"+e.classNames.vline+"'></span>",tagExpander:"<span class='cui-icon tree-icon-expanded "+e.classNames.expander+"'>&#xf0d7;</span><span class='cui-icon tree-icon-unexpanded "+e.classNames.expander+"'>&#xf0da;</span>",tagConnector:"<span class='"+e.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+e.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+e.classNames.checkbox+"'></span>",lastentry:void 0},(e.children||e.initAjax&&e.initAjax.url||e.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var n=this.tnRoot,s=e.persist&&this.persistence.isReloading(),o=!1,a=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),e.children?n.addChild(e.children):e.initAjax&&e.initAjax.url?(o=!0,n.data.isLazy=!0,this._reloadAjax(t)):e.initId?this._createFromTag(n,$("#"+e.initId)):(this._createFromTag(n,i),i.remove()),this._checkConsistency(),o||3!=e.selectMode&&4!=e.selectMode||n._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(a),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",e.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),o||(e.onPostInit&&e.onPostInit.call(this,s,!1),t&&t.call(this,"ok")),this.phase="idle"},_reloadAjax:function(t){var e=this.options;if(!e.initAjax||!e.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var i=this.persistence,n=$.extend({},e.initAjax);n.addActiveKey&&(n.data.activeKey=i.activeKey),n.addFocusedKey&&(n.data.focusedKey=i.focusedKey),n.addExpandedKeyList&&(n.data.expandedKeyList=i.expandedKeyList.join(",")),n.addSelectedKeyList&&(n.data.selectedKeyList=i.selectedKeyList.join(",")),n.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),n.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var s=i.isReloading();n.success=function(i){3==e.selectMode&&i.tree.tnRoot._updatePartSelectionState(),e.onPostInit&&e.onPostInit.call(i.tree,s,!1),t&&t.call(i.tree,"ok")},n.error=function(i,n,o,a){e.onPostInit&&e.onPostInit.call(i.tree,s,!0,n,o,a),t&&t.call(i.tree,"error",n,o,a)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(n)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(t){for(var e=this.getSelectedNodes(t),i=this.$tree.attr("name")||this.$tree.attr("id"),n=[],s=0,o=e.length;o>s;s++)n.push({name:i,value:e[s].data.key});return n},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(t){this._load(t)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(t){var e=document.getElementById(this.options.idPrefix+t);if(e)return e.dtnode?e.dtnode:null;var i=null;return this.visit(function(e){return e.data.key==t?(i=e,!1):void 0},!0),i},getActiveNode:function(){return this.activeNode},reactivate:function(t){var e=this.activeNode;e&&(this.activeNode=null,e.activate(),t&&e.focus())},getSelectedNodes:function(t){var e=[];return this.tnRoot.visit(function(i){return i.bSelected&&(e.push(i),t===!0)?"skip":void 0}),e},activateKey:function(t){var e=null===t?null:this.getNodeByKey(t);return e?(e.focus(),e.activate(),e):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(t,e){var i=t.split(this.options.keyPathSeparator);return""===i[0]&&i.shift(),i[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),i.shift()),t=i.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(t,e)},selectKey:function(t,e){var i=this.getNodeByKey(t);return i?(i.select(e),i):null},enableUpdate:function(t){return this.bEnableUpdate==t?t:(this.bEnableUpdate=t,t&&this.redraw(),!t)},count:function(){return this.tnRoot.countChildren()},visit:function(t,e){return this.tnRoot.visit(t,e)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=$.trim(iPos>=0?title.substring(0,iPos):title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(t,e,i,n,s){var o=t?$(t.span):null,a=$(e.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===n||"before"===n||"over"===n){var r="0 0";switch(n){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),r="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),r="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),a.addClass("dynatree-drop-target"),r="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:a,offset:r})}else a.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===n?a.addClass("dynatree-drop-after"):a.removeClass("dynatree-drop-after"),"before"===n?a.addClass("dynatree-drop-before"):a.removeClass("dynatree-drop-before"),s===!0?(o&&o.addClass("dynatree-drop-accept"),a.addClass("dynatree-drop-accept"),i.addClass("dynatree-drop-accept")):(o&&o.removeClass("dynatree-drop-accept"),a.removeClass("dynatree-drop-accept"),i.removeClass("dynatree-drop-accept")),s===!1?(o&&o.addClass("dynatree-drop-reject"),a.addClass("dynatree-drop-reject"),i.addClass("dynatree-drop-reject")):(o&&o.removeClass("dynatree-drop-reject"),a.removeClass("dynatree-drop-reject"),i.removeClass("dynatree-drop-reject"))},_onDragEvent:function(t,e,i,n,s,o){var a,r,l=(this.options,this.options.dnd),d=null,h=$(e.span);switch(t){case"helper":var c=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(n.target).closest("a").clone());$("ul.dynatree-container",e.tree.divTree).append(c),c.data("dtSourceNode",e),d=c;break;case"start":e.isStatusNode()?d=!1:l.onDragStart&&(d=l.onDragStart(e)),d===!1?(this.logDebug("tree.onDragStart() cancelled"),s.helper.trigger("mouseup"),s.helper.hide()):h.addClass("dynatree-drag-source");break;case"enter":d=l.onDragEnter?l.onDragEnter(e,i):null,d=d?{over:d===!0||"over"===d||$.inArray("over",d)>=0,before:d===!0||"before"===d||$.inArray("before",d)>=0,after:d===!0||"after"===d||$.inArray("after",d)>=0}:!1,s.helper.data("enterResponse",d);break;case"over":if(r=s.helper.data("enterResponse"),a=null,r===!1);else if("string"==typeof r)a=r;else{var u=h.offset(),p={x:n.pageX-u.left,y:n.pageY-u.top},f={x:p.x/h.width(),y:p.y/h.height()};r.after&&f.y>.75?a="after":!r.over&&r.after&&f.y>.5?a="after":r.before&&f.y<=.25?a="before":!r.over&&r.before&&f.y<=.5?a="before":r.over&&(a="over"),l.preventVoidMoves&&(e===i?a=null:"before"===a&&i&&e===i.getNextSibling()?a=null:"after"===a&&i&&e===i.getPrevSibling()?a=null:"over"===a&&i&&i.parent===e&&i.isLastSibling()&&(a=null)),s.helper.data("hitMode",a)}"over"===a&&l.autoExpandMS&&e.hasChildren()!==!1&&!e.bExpanded&&e.scheduleAction("expand",l.autoExpandMS),a&&l.onDragOver&&(d=l.onDragOver(e,i,a),("over"===d||"before"===d||"after"===d)&&(a=d)),this._setDndStatus(i,e,s.helper,a,d!==!1&&null!==a);break;case"drop":var g=s.helper.hasClass("dynatree-drop-reject");a=s.helper.data("hitMode"),a&&l.onDrop&&!g&&l.onDrop(e,i,a,s,o);break;case"leave":e.scheduleAction("cancel"),s.helper.data("enterResponse",null),s.helper.data("hitMode",null),this._setDndStatus(i,e,s.helper,"out",void 0),l.onDragLeave&&l.onDragLeave(e,i);break;case"stop":h.removeClass("dynatree-drag-source"),l.onDragStop&&l.onDragStop(e);break;default:throw"Unsupported drag event: "+t}return d},cancelDrag:function(){var t=$.ui.ddmanager.current;t&&t.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return parseFloat($.ui.version)<1.8?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var t=this.options;t.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function t(t){t=$.event.fix(t||window.event);var e=$.ui.dynatree.getNode(t.target);return e?e._onFocus(t):!1}this.unbind();var e="click.dynatree dblclick.dynatree";this.options.keyboard&&(e+=" keypress.dynatree keydown.dynatree"),this.element.bind(e,function(t){var e=$.ui.dynatree.getNode(t.target);if(!e)return!0;if(!e.data.disable){var i=e.tree,n=i.options;i.logDebug("event(%s): dtnode: %s",t.type,e);var s=i.phase;i.phase="userEvent";try{switch(t.type){case"click":"function"!=typeof n.onDblClick||e.data.isFolder!==!0&&"true"!==e.data.isFolder?e._onClick(t):e._timer_?(clearTimeout(e._timer_),e._timer_=null):e._timer_=setTimeout(function(){e._onClick(t),e._timer_=null},200),"function"==typeof n.onClick&&n.onClick.call(i,e,t);break;case"dblclick":"function"==typeof n.onDblClick&&n.onDblClick.call(i,e,t),e._onDblClick(t);break;case"keydown":return n.onKeydown&&n.onKeydown.call(i,e,t)===!1?!1:e._onKeydown(t);case"keypress":return n.onKeypress&&n.onKeypress.call(i,e,t)===!1?!1:e._onKeypress(t)}}catch(o){i.logWarning("bind(%o): dtnode: %o, error: %o",t,e,o)}finally{i.phase=s}}});var i=this.tree.divTree;i.addEventListener?(i.addEventListener("focus",t,!0),i.addEventListener("blur",t,!0)):i.onfocusin=i.onfocusout=t},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version:$",$.ui.dynatree.getNode=function(t){if(t instanceof DynaTreeNode)return t;for(void 0!==t.selector&&(t=t[0]);t;){if(t.dtnode)return t.dtnode;t=t.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:"",children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,reactive:!0,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:0,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:!1,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(t,e){var i=$(this).data("draggable"),n=e.helper.data("dtSourceNode")||null;return n?(i.offset.click.top=-2,i.offset.click.left=16,n.tree._onDragEvent("start",n,null,t,e,i)):void 0},drag:function(t,e){var i=$(this).data("draggable"),n=e.helper.data("dtSourceNode")||null,s=e.helper.data("dtTargetNode")||null,o=$.ui.dynatree.getNode(t.target);if(t.target&&!o){var a=$(t.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(a)return}e.helper.data("dtTargetNode",o),s&&s!==o&&s.tree._onDragEvent("leave",s,n,t,e,i),o&&o.tree.options.dnd.onDrop&&(o===s?o.tree._onDragEvent("over",o,n,t,e,i):o.tree._onDragEvent("enter",o,n,t,e,i))},stop:function(t,e){var i=$(this).data("draggable"),n=e.helper.data("dtSourceNode")||null,s=e.helper.data("dtTargetNode")||null,o=(i._mouseDownEvent,t.type),a="mouseup"==o&&1==t.which;a||logMsg("Drag was cancelled"),s&&(a&&s.tree._onDragEvent("drop",s,n,t,e,i),s.tree._onDragEvent("leave",s,n,t,e,i)),n&&n.tree._onDragEvent("stop",n,null,t,e,i)}}),didRegisterDnd=!0)}}(window.comtop.cQuery),function(t,e){function i(){return a.init(),a}var n=t.browser.msie,s=n&&"6.0"===t.browser.version,o=n&&!t.support.boxModel,a={init:function(){var e;this.overlayBuild||(e=t(document.createElement("div")),e.addClass("cui_overlay"),t("body").append(e),this.overlayBuild=!0,this._dom=e)},show:function(e){var i=this._dom.data("opa")||0;e=i+parseInt(100*e),(s||o)&&t("html,body").addClass("cui_overlay_ie6"),this._dom.data("opa",e).css("opacity",e/100).show()},hide:function(e){var i=this._dom.data("opa");e=i-parseInt(100*e),this._dom.data("opa",e),this._dom.css("opacity",e/100),0>=e&&(this._dom.hide(),(s||o)&&t("html,body").removeClass("cui_overlay_ie6"))}};e.comtop&&e.comtop.UI&&(comtop.UI.Overlay=i),e._overlay=i}(window.comtop?window.comtop.cQuery:window.jQuery,window),function(t,e){"use strict";var i="";e.UI.Button=e.UI.Base.extend({options:{uitype:"Button",label:"",hide:!1,disable:!1,icon:"",on_click:null,menu:null,button_type:"",mark:""},_init:function(){var t=this.options;this.$el=t.el,t.label=t.label||this.$el.html()||"\u6309&nbsp;\u94ae",t.menuId="button_"+e.guid()},_create:function(){var e=this,i=e.options;this._createDom(),i.hide&&this.hide(),i.disable&&this.disable(!0),i.icon&&this._setIcon(i.icon),i.menu&&(t.isFunction(i.menu)&&(i.menu=i.menu()),i.menu=cui("#"+i.menuId).menu(i.menu),i.el.children("a").unbind("click")),i.el.children("a").on("click",function(t){return e._clickHandler(t,this,t.target),!1})},_createDom:function(){var t=this.options,i=this.$el,n=[];n.push('<a class="cui-button '),e.Browser.isQM&&n.push("QM-cui-button "),t.button_type&&n.push(t.button_type),n.push('" hidefocus="true" href="#">'),t.icon&&n.push('<span class="button-icon cui-icon">&nbsp;</span>'),n.push('<span class="button-label">'+t.label+"</span>"),t.menu&&n.push('<span class="button-arrow cui-icon">&#xf0dc;</span>'),n.push("</a>"),i.html(n.join(""))
},_setIcon:function(t){var i=e.icon;/\./.test(t)?(/\/+/.test(t)||(t=this._getIconPath("comtop.ui")+"images/button/"+t),this.$el.find(".button-icon").addClass("button-icon-center").html('<img src="'+t+'" />')):this.$el.find(".button-icon").html(i[t]||"")},_clickHandler:function(t){var e=this.options;if(!e.disable){t.stopPropagation();var i=e.menu;i&&i.show(this.$el.children(".cui-button")),this.options.on_click&&this.options.on_click(t,this,e.mark)}},_getIconPath:function(e){if(i)return i;for(var n,s=t("link"),o=new RegExp(e),a=0;a<s.length&&(n=s.eq(a).attr("href"),!o.test(n));a++);return n=n.substr(0,n.lastIndexOf("/")),i=n=n.substr(0,n.lastIndexOf("/")+1),n},disable:function(t){1==t?(this.options.disable=!0,this.options.el.children(".cui-button").addClass("disable-button"),this.options.menu&&this.options.menu.hide&&this.options.menu.hide()):(this.options.disable=!1,this.options.el.children(".cui-button").removeClass("disable-button"))},hide:function(){this.options.el.hide(),this.options.menu&&this.options.menu.hide&&this.options.menu.hide()},setLabel:function(e){var i=t.type(e),n=this.options;("number"===i||"string"===i)&&(n.label=e,n.el.children("a").children(".button-label").html(e))},getLabel:function(){return this.options.label},getMenu:function(){return this.options.menu}})}(window.comtop.cQuery,window.comtop),function(t){"use strict";var e=t.cQuery,i={bottom:"&#xf0d7;",top:"&#xf0d8;",left:"&#xf0d9;",right:"&#xf0da;"},n={top:"&#xf0d7;",bottom:"&#xf0d8;",right:"&#xf0d9;",left:"&#xf0da;"};t.UI.Borderlayout=t.UI.Base.extend({options:{uitype:"Borderlayout",id:"",is_root:!0,gap:"0px 0px 0px 0px",fixed:{top:!0,middle:!1,left:!0,center:!1,right:!0,bottom:!0},items:[],on_sizechange:null},_init:function(){},_create:function(){var e=this.options;this.id=t.guid(),this.el=e.el,"BODY"===this.el.parent().prop("tagName")&&(this.body=!0,this.el.parent().css({margin:0,overflow:"hidden"})),this._setItems(),this._createDom(),this._bindHandler()},_setItems:function(){var i=this.options.items,n=this.el,s=this.items_default={position:"left",width:-1,height:-1,gap:"0px 0px 0px 0px",resizable:!1,min_size:30,max_size:200,split_size:2,is_header:!1,header_content:"",header_height:30,collapsable:!1,url:".",show_expand_icon:!1};if(!i.length){var o={string:function(t){return t},number:t.Tools.fixedNumber,"boolean":function(t){return"true"===t}};this.setattr=!0,n.children("[position]").each(function(){var t,n={};i.push(n);for(var a in s)s.hasOwnProperty(a)&&(t=e(this).attr(a),n[a]=void 0===t?s[a]:o[typeof s[a]](t))})}},_isCols:function(t){return"left"===t||"center"===t||"right"===t},_createDom:function(){for(var t=this.options.items,n=this.el,s=this.setattr,o={},a={},r={},l=[],d=this.options.fixed,h={top:"bottom",bottom:"top",left:"right",right:"left"},c=this.box_css={},u=this.min_size={},p=this.max_size={},f=this.collapsable={},g=this.items_default,m={},v=this._isCols,y=t.length;y--;){var b=t[y],_=b.position;b=s?t[y]:e.extend(g,t[y]),v(_)?(a[_]=-1!==b.width?b.width:"auto",l.push(b.height)):r[_]=-1!==b.height?b.height:"auto";var x=b.gap.split(" "),w=x.length;switch(w){case 1:x[1]=x[2]=x[3]=x[0];break;case 2:x[2]=x[0],x[3]=x[1];break;case 3:x[3]=x[1]}c[_]={"margin-top":parseInt(x[0],10),"margin-right":parseInt(x[1],10),"margin-bottom":parseInt(x[2],10),"margin-left":parseInt(x[3],10)},d[_]&&(u[_]=b.min_size,p[_]=b.max_size);var C='<div class="bl_'+_+" bl_"+_+this.id+'">',k="",T="";if("center"!==_){var S=this._isCols(_)?"width":"height";k='<div class="'+(b.resizable?"bl_move":"bl_border")+'" style="'+S+":"+b.split_size+'px;">'+(d[_]&&b.collapsable&&b.show_expand_icon?'<a href="javascript:;" class="bl_fold bl_unfold cui-icon">'+i[_]+"</a>":"")+"</div>",c[_]["margin-"+h[_]]+=b.split_size}d[_]&&b.collapsable&&(f[_]=b.collapsable),b.id&&(m[_]=b.id),b.is_header&&(T='<div class="bl_header" style="height:'+(b.header_height-1)+"px;line-height:"+(b.header_height-1)+'px;">'+b.header_content+"</div>"),C+='<div class="bl_inner" header="'+(b.is_header?b.header_height-1:0)+'">'+T+'<div class="bl_box_'+_+" bl_box"+this.id+'">'+("."!==b.url?'<iframe url="'+b.url+'" frameborder="0" class="bl_iframe_page"></iframe>':"")+"</div></div>",o[_]=C+=k+"</div>"}var N=e("<div class='bl_middle bl_middle"+this.id+"'></div>").append(o.left).append(o.center).append(o.right);if(n.append(o.top).append(N.html()?N:"").append(o.bottom).append("<div class='bl_overlay'></div>"),n.find(".bl_box"+this.id).each(function(){var t=this.className.match(/top|left|center|bottom|right/)[0];m[t]?e(this).append(e("#"+m[t],n).css({height:"100%"}).append(e(this).html())):e(this).html(n.children("[position="+t+"]").css({height:"100%"}).append(e(this).html()))}),n.find(".bl_iframe_page").each(function(){e(this).attr("src",e(this).attr("url")).removeAttr("url")}),d.middle){var D=Math.max.apply(null,l);r.middle=-1===D?"auto":D}else r.middle="auto";this._setLayout(a,r),this._setBoxLayout()},_setLayout:function(t,i){var n=this,s=this.options.gap,o=this.el;n.auto_lays={width:[],height:[]};var a=s.split(" ");this.margin_v=parseInt(a[0],10)+(void 0===a[2]?parseInt(a[0],10):parseInt(a[2],10));var r=void 0===a[1]?parseInt(a[0],10):parseInt(a[1],10);this.margin_r=r+(void 0===a[3]?r:parseInt(a[3],10)),this.scope={};var l=this.scope=this._getParentLayout();t=this._separateAutoLayout(t,l.width,"width"),i=this._separateAutoLayout(i,l.height,"height"),this.layout=e.extend(t,i),this._setPartLayout();var d=e.client.height(),h=e.client.width();e(window).on("resize",function(){(d!==e.client.height()||h!==e.client.width())&&(d=e.client.height(),h=e.client.width(),n._resizeHandle(!0))}),o.addClass("bl_main").css("padding",s)},_setPartLayout:function(){var t=this.layout,e=this.el;for(var i in t)e.find(".bl_"+i+this.id).eq(0).css(this._isCols(i)?"width":"height",t[i])},_resizeHandle:function(t){var e=this._getParentLayout();this._resetLayout(e,this.scope,t),this.scope.width=e.width,this.scope.height=e.height},_separateAutoLayout:function(t,e,i){var n=[],s={},o=this.options.fixed;for(var a in t)if(t.hasOwnProperty(a)){if(!o[a]){this.auto_lays[i].push(a),n.push(a);continue}t[a]="number"!=typeof t[a]?"width"===i?500:300:t[a],e-=t[a],s[a]=t[a]}for(var r=n.length;r--;)s[n[r]]=e/n.length;return s},_getParentLayout:function(){var i=this.el.parent().css({positon:"relative",overflow:"hidden"}),n=t.Browser,s=this.scope,o=document.createElement("div");o.style.width="100%",o.style.height="100%",o.style.positon="absolute",o.style.left=0,o.style.top=0,i.append(o);var a=e(o).width(),r=e(o).height();return this.body?r=n.isQM?window.innerHeight||document.documentElement.offsetHeight-4:e(window).height():i.css("overflow",""),e(o).remove(),i.css("positon",""),{width:s.fix_width||a-this.margin_r-1,height:s.fix_height||r-this.margin_v}},_setBoxLayout:function(){var t=this.el,e=this.box_height={},i=this.box_css;for(var n in i)if(i.hasOwnProperty(n)){var s=t.find(".bl_box_"+n).eq(0),o=s.parent();e[n]=o.parent().css("overflow","hidden").height()-o.attr("header")-0-i[n]["margin-top"]-i[n]["margin-bottom"],o.parent().css("overflow",""),o.css(i[n]),s.css("height",e[n])}},_resetLayout:function(t,e,i){var n=t.width-e.width,s=t.height-e.height;n&&this._setWidthAndHeight(n,"width",i),s&&this._setWidthAndHeight(s,"height",i)},setWidth:function(e){var i=t.Browser.isQM?e+this.margin_r:e;this.el.css("width",i),this.scope.fix_width=e,this._resizeHandle(!1)},setHeight:function(e){var i=t.Browser.isQM?e+this.margin_v:e;this.el.css("height",i),this.scope.fix_height=e,this._resizeHandle(!1)},_setWidthAndHeight:function(t,e,i){for(var n=this.el,s=this.auto_lays[e],o=s.length,a=this.layout,r=t,l=0,d=o;d--;)l+=a[s[d]];for(d=o;d--;){var h=Math.round(t*a[s[d]]/l),c=n.find(".bl_"+s[d]+this.id),u=0===d?r:h;r-=h,c.css(e,a[s[d]]+=u),"height"===e&&this._setBoxHeight(c,u)}i||this._childrenHandler()},_setBoxHeight:function(t,i){var n=this.box_height;t.find(".bl_box"+this.id).each(function(t,s){var o=e(s).attr("class").match(/top|left|center|bottom|right/)[0],a=n[o]+=i;e(s).css("height",Math.max(a,0)),a?e(s).show():e(s).hide()})},_bindHandler:function(){var t=this,e=this.el;e.find(".bl_top>.bl_move, .bl_bottom>.bl_move").on("mousedown",function(e){t._drag(e,this,"height")}),e.find(".bl_left>.bl_move, .bl_center>.bl_move, .bl_right>.bl_move").on("mousedown",function(e){t._drag(e,this,"width")}),e.find(".bl_top .bl_fold, .bl_bottom .bl_fold").on("mousedown",function(e){t._fold(e,this,"height")}),e.find(".bl_middle .bl_fold").on("mousedown",function(e){t._fold(e,this,"width")})},_drag:function(t,i,n){var s=e(i);if(s.find(".bl_unfold").length){t.stopPropagation(),t.preventDefault();var o,a=t.pageX,r=t.pageY,l=this,d=this.layout,h=this.min_size,c=this.max_size,u=s.parent(),p=u.prev(),f=u.next(),g=u.parent().not(".bl_main:eq(0)");p.length?f=u:p=u;var m=p.attr("class").match(/top|left|center|bottom|middle|right/)[0],v=f.attr("class").match(/top|left|center|bottom|middle|right/)[0],y=d[m],b=d[v],_=h[m],x=h[v],w=c[m],C=c[v];this.el.children(".bl_overlay").show().css("height",this.scope.height).css("cursor","width"===n?"col-resize":"row-resize").on("mousemove",function(t){t.stopPropagation(),t.preventDefault();var e=t.pageX,i=t.pageY,s=g.length?e-a:i-r;0===s||s*o>0||(o=0,void 0!==w&&(y+s>w||_>y+s)&&(s=s>0?w-y:_-y,o=s),void 0!==C&&(b-s>C||x>b-s)&&(s=0>s?b-C:b-x,o=s),p.css(n,y+=s),f.css(n,b-=s),"height"===n&&(l._setBoxHeight(p,s),l._setBoxHeight(f,-s)),r=i,a=e,l._childrenHandler())}).on("mouseup mouseout",function(t){t.stopPropagation(),e(this).hide().off("mousemove"),d[m]=d[m]===y?d[m]:y,d[v]=d[v]===b?d[v]:b})}},_fold:function(t,i,n){t.stopPropagation(),t.button>1||this._foldAction(e(i).parent().parent(),n)},_foldAction:function(t,e,s){var o=this.layout,a=t.attr("class").match(/top|left|center|bottom|right/)[0],r=t.data("fold"),l=t.children(".bl_move,.bl_border").eq(0).children().eq(0);if(this.collapsable[a]){if(s===!0&&void 0!==r||s===!1&&void 0===r)return;if(void 0===r)return this._setWidthAndHeight(o[a],e),t.children(".bl_inner").hide(),t.data("fold",o[a]).css(e,o[a]=0),void l.removeClass("bl_unfold").html(n[a]);this._setWidthAndHeight(-r,e),l.addClass("bl_unfold").html(i[a]),t.children(".bl_inner").show(),t.removeData("fold").css(e,o[a]=r).children(".bl_inner")}},_childrenHandler:function(){var t=null;this.child_bl||(t=this.el.find("[uitype=Borderlayout]"),this.child_bl=0===t.length?null:t),t=this.child_bl,t&&t.each(function(){window.cui(this)._resizeHandle()});var e=this.options.on_sizechange;e&&"function"==typeof e&&e()},setContentURL:function(t,e){var i=this.el.find(".bl_"+t+this.id).eq(0).find(".bl_box"+this.id).eq(0).children().eq(0),n=i.find(".bl_iframe_page");n.length?n.eq(0).attr("src",e):i.append('<iframe class="bl_iframe_page" src="'+e+'" frameborder="0"></iframe>')},setCollapse:function(t,i){this.options.fixed[t]&&this._foldAction(e(".bl_"+t+this.id),this._isCols(t)?"width":"height",i)},getCollapseState:function(t){return{collapsed:!!this.el.find(".bl_"+t+this.id).eq(0).data("fold"),contentHeight:this.box_height[t],contentWidth:this.el.find(".bl_"+t+this.id).eq(0).width()}},setGap:function(t){var e=this.options.gap=t,i=e.split(" ");this.el.css("padding",e),this.margin_v=parseInt(i[0],10)+(void 0===i[2]?parseInt(i[0],10):parseInt(i[2],10)),this._resizeHandle()},setTittle:function(t,i){e(".bl_"+t+this.id).find(".bl_header").eq(0).html(i)},setCollapsable:function(t,i){if(this.options.fixed[t]){this.collapsable[t]=i;var n=e(".bl_"+t).children(".bl_move,.bl_border").eq(0).children(".bl_fold").eq(0);if(i)return void n.show();n.hide()}},changeSize:function(t,e){this.options.fixed[t]&&e&&(this.layout[t]=this.layout[t]+e,this._setPartLayout(),this._setBoxLayout(),this._setWidthAndHeight(-e,this._isCols(t)?"width":"height"))}})}(window.comtop),function(t,e){function i(i,n){for(var s=null,o=0,a=i.length;a>o;o++)s=t.type(i[o]),"string"===s?i[o]=l(e.Date.parse(i[o],n),n)||null:"date"===s&&(i[o]=l(i[o],n)||null);return i}function n(t,i,n){for(var s=[],o=new Date(t.getTime()),a=n?o.getDay()-1:(o.getDay()||7)-1,r=0;6>r;r++)s.push([e.Date.getOnWeek(new Date(o.getTime()),i,n).week,0]),o.setDate(o.getDate()+(7-a)),a=0;return s}function s(t){function e(t,e,i){return e?"mindate"===i?t.getTime()<e.getTime():t.getTime()>e.getTime():!1}var i,s,o,a,r,l,d,c=this,u=c.options,p=[],f=0,g=0,m=[],v=t.getFullYear(),y=t.getMonth();u.mindate[1]=h.call(c,"mindate"),u.maxdate[1]=h.call(c,"maxdate"),a=new Date(v,y,1).getDay(),r=new Date(v,y,0).getDate(),l=new Date(v,y+1,0).getDate(),u.sunday_first||a--,0>a&&(a=6);var b=0>y-1?!0:!1,_=y+1>11?!0:!1;for(i=0;a>i;i++)o=new Date(b?v-1:v,b?11:y-1,r,0,0,0,0),s=e(o,u.mindate[1],"mindate")||e(o,u.maxdate[1],"maxdate")?0:1,p.push([r,s,o.getFullYear(),o.getMonth()]),r--;for(p.reverse(),i=1;l>=i;i++)o=new Date(v,y,i,0,0,0,0),s=e(o,u.mindate[1],"mindate")||e(o,u.maxdate[1],"maxdate")?0:1,p.push([i,s,v,y]);for(i=1;42-l-a>=i;i++)o=new Date(_?v+1:v,_?0:y+1,i,0,0,0,0),s=e(o,u.mindate[1],"mindate")||e(o,u.maxdate[1],"maxdate")?0:1,p.push([i,s,o.getFullYear(),o.getMonth()]);for(d=n(t,u.iso8601,u.sunday_first),i=0;48>i;i++)0!=i&&i%8!=0?(m.push(p[f]),f++):(m.push(d[g]),g++);return{year:v,month:y,date:m}}function o(t,e){var i=[];if(e>0)for(var n=0;e>n;n++)i.push(t),t++;else{for(var n=0;-e>n;n++)i.push(t),t--;i.reverse()}return i}function a(t){var e=["1","2","3","4","5","6","7","8","9","10","11","12"],i=[];t=t||[0,11];for(var n=t[0];n<=t[1];n++)i.push([n,e[n]]);return i}function r(t,i,n){for(var s,o=[],a=31;a>0&&(s=e.Date.getOnWeek(new Date(t,11,a),i,n).week,1===s);a--);for(a=1;s>=a;a++)o.push([a,1]);return o}function l(t,i){if(!t)return null;var n=[];return n.push(t),n.push(e.Date.format(t,i)),n.push(t.getFullYear(),t.getMonth(),t.getDate()),n.push(t.getHours(),t.getMinutes(),t.getSeconds()),n}function d(t){if(!t||t.length<2||!t[0]||!t[1])return t;var e;return t[0][0]>t[1][0]&&(e=t[1],t[1]=t[0],t[0]=e),t}function h(i,n){var s,o=this,a=o.options,r=a[i][0],l=a.nocurrent;if(!r)return null;var d=/^([\+\-]{1})([0-9]{1,})([yMd]{1})$/,h=[null,null,null];if("string"==typeof r)if(/[\+\-]{1}[0-9]{1,}[yMd]{1}/.test(r)){for(var c,u,p=r.split(","),f=[0,0,0],g=[(new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()],m=0;m<p.length;m++)c=p[m].match(d),u="yMd".indexOf(c[3]),h[u]+=("+"===c[1]?1:-1)*+c[2]+g[u];for(m=0;m<h.length;m++)f[m]=null===h[m]?0:1;switch(f.join("-")){case"1-0-0":r="mindate"===i?new Date(h[0],0,1):new Date(h[0],11,31);break;case"1-1-0":r="mindate"===i?new Date(h[0],h[1],1):new Date(h[0],h[1],new Date(h[0],h[1]+1,0).getDate());break;case"1-1-1":l&&(h[2]="mindate"===i?h[2]+1:h[2]-1),r=new Date(h[0],h[1],h[2]);break;case"0-1-1":l&&(h[2]="mindate"===i?h[2]+1:h[2]-1),r=new Date(g[0],h[1],h[2]);break;case"0-0-1":l&&(h[2]="mindate"===i?h[2]+1:h[2]-1),r=new Date(g[0],g[1],h[2]);break;case"0-1-0":r="mindate"===i?new Date(g[0],h[1],1):new Date(g[0],h[1],new Date(h[0],h[1]+1,0).getDate());break;case"1-0-1":l&&(h[2]="mindate"===i?h[2]+1:h[2]-1),r=new Date(h[0],g[1],h[2])}r="maxdate"===i?new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59):new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0)}else if(s=t(r).data("uitype")){if(!(r=s.getValue("date")))return null;l&&r.setDate("mindate"===i?r.getDate()+1:r.getDate()-1)}else{if(!/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}|[0-9]{4}\-[0-9]{2}|[0-9]{4}$/.test(r))return null;r=e.Date.parse(r,"yyyy-MM-dd"),l&&r.setDate("mindate"===i?r.getDate()+1:r.getDate()-1),r="maxdate"===i?new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59):new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0)}else r="date"===t.type(r)?r:null,l&&r&&r.setDate("mindate"===i?r.getDate()+1:r.getDate()-1);return n?new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),0,0):new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0,0)}function c(e,i){var n=e.children(".C_CR_YM_wrap");if("hide"===i)n.hide();else{switch(i){case"disYear":n.find("span.C_CR_YMer_tx_y").parents("td").eq(0).hide().next().hide();break;case"disMonth":n.find(".C_CR_YMer").each(function(e,i){t(i).children("tbody").children("tr").children("td").slice(2).hide()});break;case"dis":n.find("span.C_CR_YMer_tx_wrap").parents("table").find("td").hide();break;case"unDis":default:n.find("span.C_CR_YMer_tx_wrap").parents("table").find("td").show()}n.show()}}function u(e,i,n){var s=t("table.C_CR_YMer:eq("+n+")",e).attr("val",i.year+"|"+(i.month-1)).find("input.C_CR_tx");s.eq(0).val(i.year),s.eq(1).val(i.month)}function p(t){var e=this,i=e.options;(i.activePop||t)&&(i.activePop&&i.activePop.hide(),t&&(t.show(),i.activePop=t))}function f(){var t=this,e=t.options,i=e.pEl.children(".C_CR_OPBar_wrap").children("a").show(),n=i.filter('[val^="ok"]'),s=i.filter('[val^="clear"]'),o=i.filter('[val^="cur"]'),a={date:"\u4eca&nbsp;\u5929",month:"\u672c&nbsp;\u6708",year:"\u672c&nbsp;\u5e74",quarter:"\u672c\u5b63\u5ea6",week:"\u672c&nbsp;\u5468"};o.html(a[e.curModel[0]]),e.okbtn||n.hide(),e.clearbtn||s.hide()}function g(){var e=this,i=e.options,n=i.pEl.children(".C_CR_Timer_box"),s=[/s/.test(i.format),/m/.test(i.format),/h/.test(i.format)];s[0]||i.pEl.find("td.C_CR_Timer_com_s").hide().prev().hide(),s[1]||i.pEl.find("td.C_CR_Timer_com_m").hide().prev().hide(),s[2]||i.pEl.find("td.C_CR_Timer_com_h").hide().prev().hide(),e.$tmp.$timeHour=t("div.C_CR_Timer_pop_h",n),e.$tmp.$timeMin=t("div.C_CR_Timer_pop_m",n),e.$tmp.$timeSecond=t("div.C_CR_Timer_pop_s",n)}function m(){var t=this,e=t.options,i=e.pEl.children(".C_CR_Timer_box");"date"===e.curModel[0]&&/[h|s|m]/.test(e.format)?i.show():i.hide()}function v(e,i,n){var s,o=this,a=o.options,r=a.curModel[0];switch(i){case"CUR":s="C_CR_main_cur";break;case"SEL":s="C_CR_main_cur_d";break;case"clear":return void t("td.C_CR_main_cur_d",a.pEl).removeClass("C_CR_main_cur_d")}if(e)e.parent("td").addClass(s);else for(var l=0;l<n.length;l++)t("#C_CR_"+r+"_"+n[l].join("_")+"_"+a.uuid).parent("td").addClass(s)}function y(t){var i=t.panel,n=226*i;t.pEl.css("width",n+3*(t.panel-1));var s=t.pEl.outerWidth(),o=t.pEl.outerHeight();(e.Browser.isIE6||e.Browser.isQM)&&t.pEl.find("iframe").css({width:s,height:o})}function b(e){var i=t(window),n=e.el.children(".C_CR_calInput_bd"),s=n.offset(),o=n.outerHeight(),a=n.outerWidth(),r=i.width(),l=i.height(),d=i.scrollLeft(),h=i.scrollTop(),c=e.pEl.outerWidth(),u=e.pEl.outerHeight(),p=t(document).height(),f={};f.left=r-(s.left-d)>c?s.left:s.left-d+a>c?s.left+a-c:0,p-s.top-o>u&&l-(s.top-h)-o>u?f.top=s.top+o:s.top-h>u?f.top=s.top-u:(f.top=h+(l-u)/2,f.left=r-(s.left-d+a)>c?s.left+a:s.left-d+a>c?s.left-a:0),f.left=f.left<0?0:f.left,f.top=f.top<0?0:f.top,e.pEl.css(f),e.isBuild||(e.isBuild=!0)}var _=null;e.UI.Calender=e.UI.Base.extend({options:{uitype:"Calender",name:"",model:"date",isrange:!1,trigger:"click",value:[],format:"",entering:!1,emptytext:"",readonly:!1,disable:!1,icon:!0,textmode:!1,panel:1,zindex:11e3,width:"200px",okbtn:!1,clearbtn:!0,mindate:null,maxdate:null,nocurrent:!1,iso8601:!1,on_change:null,separator:!1,sunday_first:!1},tipPosition:".C_CR_calInput_bd",_init:function(i){var n=this,s=n.options;if(i.value){var o=t.type(i.value);switch(o){case"string":s.value=/^(?:\{.*\}|\[.*\])$/.test(i.value)?t.parseJSON(i.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[i.value];break;case"array":s.value=i.value;break;default:s.value=[i.value]}}i.width&&(s.width="string"==typeof i.width&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(i.width)?i.width:i.width+"px"),s.value=null===s.value?[]:s.value,s.mindate=[i.mindate,null],s.maxdate=[i.maxdate,null],s.uuid=e.guid(),s.template="calender.html",s.curModel=[],s.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"},s.inputFocusClass="C_CR_calInput_focus",s.inputDisClass="C_CR_calInput_rd",s.inputErrClass="C_CR_calInput_err",s.selDate=[],s.cache={yearPop:{},selDate:[]},s.isBuild=!1,s.inputEl=null,s.tipTxt=null,s.pEl=null,s.datePanel=[],s.yearPanel=[],s.monthPanel=[],s.quarterPanel=[],s.timePanel=[],s.weekPanel=[],s.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]},s.selIndex=0,s.activePop=null,s.isChangeTag=!1,n.$tmp={};var a="all"===s.model?"date":s.model;s.curModel=[a,"for"+a.charAt(0).toUpperCase()+a.substring(1),a+"Frame",a+"Panel"],"all"===s.model&&i.format?(s.format=t.parseJSON(i.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")),s.formatList=t.extend(s.formatList,s.format),s.format=s.formatList[s.curModel[0]]):i.format?s.formatList[s.curModel[0]]=s.format:s.format=s.formatList[s.curModel[0]],s.okbtn=/[y|M|q|w|d]/.test(s.format)?s.okbtn:!0},_create:function(){var e=this,i=e.options;i.inputEl=i.el.find(":text").bind("click",function(){i.readonly||(e.show(),t(this).parents(".C_CR_calInput_bd").addClass(i.inputFocusClass),e._setEmptyText(!1),e.onValid())}).bind("mouseup.calender",function(t){t.stopPropagation()}),e._getDefault(),e.setValue(t.extend(!0,[],i.selDate),!0);for(var n=0;n<i.cache.selDate.length;n++)if(null===i.cache.selDate[n]){i.selIndex=n;break}(i.disable||i.readonly)&&i.el.children(".C_CR_calInput_bd").addClass(i.inputDisClass),(!i.entering||i.disable||i.readonly)&&(i.disable&&i.inputEl.attr("disabled",!0),(i.readonly||!i.entering)&&i.inputEl.attr("readonly",!0)),i.entering&&e._enter()},_enter:function(){var t=this,e=t.options,i=e.format,n=e.format,s=function(t,e){for(var i=[/y+/,/M+/,/d+/,/h+/,/m+/,/s+/,/w+/,/q+/],n=0;n<i.length;n++)t=t.replace(i[n],e[n]);return t};i=s(i,["9999","1x","3z","2r","59","59","5k","q"]),n=s(n,["yyyy","MM","dd","hh","mm","ss","ww","q"]),e.inputEl.data("fmOpts",{format:e.format,fullFormat:n,isRange:e.isrange,okBtn:e.okbtn,separator:e.separator}).unmaskCL().maskCL(e.isrange?i+"~"+i:i)},_getDefault:function(){var e=this,n=e.options,s=[];0!==n.value.length?s=n.value:n.isrange?(s=t.trim(n.inputEl.eq(0).val()).split("~"),s=s.join("")?s:[null,null]):t.each(n.inputEl,function(){s.push(t.trim(t(this).val()))}),n.selDate=d(i(s,n.format))},_buildData:function(i,n){var d,h,c,u,p,f,g=this,m=g.options;if(m.isBuild&&(void 0===n?(m[m.curModel[3]]=[],m.yearPop[m.curModel[1]]=[]):(f=!g._isReady("yearPop",n),m[m.curModel[3]][n]=[],f&&(m.yearPop[m.curModel[1]][n]=[]))),!m.isBuild&&"all"===m.model||"date"===m.curModel[0])if(void 0===n)for(u=0;u<m.panel;u++)d=i[u]?new Date(i[u][0],i[u][1],1):new Date(d.getFullYear(),d.getMonth()+1,1),m.yearPop.forDate.push(o(d.getFullYear()-4,12)),m.datePanel.push(s.call(g,d));else d=new Date(i[0][0],i[0][1],1),f&&(m.yearPop.forDate[n]=o(d.getFullYear()-4,12)),m.datePanel[n]=s.call(g,d);if(!m.isBuild&&"all"===m.model||"year"===m.curModel[0])if(void 0===n)for(u=0;u<m.panel;u++)p=i[u]?i[u][0]:m.yearPanel[u-1].data[11]+14,m.yearPop.forYear.push(o(p-4,12)),m.yearPanel.push({year:p,month:null,data:o(p-7,18)});else p=i[0][0],f&&(m.yearPop.forYear[n]=o(p-4,12)),m.yearPanel[n]={year:p,month:null,data:o(p-7,18)};if(!m.isBuild&&"all"===m.model||"month"===m.curModel[0])if(void 0===n)for(u=0;u<m.panel;u++)p=i[u]?i[u][0]:m.monthPanel[u-1].year+1,m.yearPop.forMonth.push(o(p-4,12)),m.monthPanel.push({year:p,month:null,data:a()});else p=i[0][0],f&&(m.yearPop.forMonth[n]=o(p-4,12)),m.monthPanel[n]={year:p,month:null,data:a()};if(!m.isBuild&&"all"===m.model||"quarter"===m.curModel[0])if(void 0===n)for(u=0;u<m.panel;u++)p=i[u]?i[u][0]:m.quarterPanel[u-1].year+1,m.yearPop.forQuarter.push(o(p-4,12)),m.quarterPanel.push({year:p,month:null,quarter:[1,2,3,4]});else p=i[0][0],f&&(m.yearPop.forQuarter[n]=o(p-4,12)),m.quarterPanel[n]={year:p,month:null,quarter:[1,2,3,4]};if(!m.isBuild&&"all"===m.model||"date"===m.curModel[0]){var v;for(m.timePanel=[],v=m.isrange?2:1,h=0;v>h;h++)c=m.cache.selDate[h]?m.cache.selDate[h]:l(new Date,m.format),m.timePanel.push([c[5],c[6],c[7]])}if(!m.isBuild&&"all"===m.model||"week"===m.curModel[0]){var y;if(void 0===n)for(u=0;u<m.panel;u++)i[u]&&(y=e.Date.getOnWeek(new Date(i[u][0],i[u][1]>0?i[u][1]:1,i[u][2]||1),m.iso8601,m.sunday_first)),p=i[u]?y.year:m.weekPanel[u-1].year+1,m.yearPop.forWeek.push(o(p-4,12)),m.weekPanel.push({year:p,month:null,data:r(p,m.iso8601,m.sunday_first)});else p=i[0][0],f&&(m.yearPop.forWeek[n]=o(p-4,12)),m.weekPanel[n]={year:p,month:null,data:r(p,m.iso8601,m.sunday_first)}}m.cache.yearPop=t.extend(!0,{},m.yearPop)},_buildUpdateDate:function(){var t,e,i,n=this,s=n.options,o=new Date,a=[],r=[];for("date"===s.model&&(t=h.call(n,"mindate"),e=h.call(n,"maxdate"),t=void 0!==s.mindate[0]?t:0,o=0===t?o:t-o>0?t:o,e=void 0!==s.maxdate[0]?e:0,o=0===e?o:0>e-o?e:o,o=o||new Date),o=l(o,s.format),i=0;i<s.cache.selDate.length;i++)0===i?(r.push(s.cache.selDate[i]?s.cache.selDate[i]:o),a.push([r[i][2],r[i][3],r[i][4]])):s.cache.selDate[i]&&(r.push(s.cache.selDate[i]),a.push([r[i][2],r[i][3],r[i][4]]));return a},_draw:function(){var e=this,i=e.options;e._buildData(e._buildUpdateDate()),e._buildTemplate("body","calFrame",t.extend(!0,{},i),!0),i.pEl=t("#C_CR_"+i.uuid)},_drawYearPop:function(t,e){var i,n=this,s=n.options,o=s.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y");if(i=s.yearPop[t]||[],"undefined"!=typeof e)n._buildTemplate(o.eq(e),"yearPopFrame",i[e]);else for(var a=0;a<i.length;a++)n._buildTemplate(o.eq(a),"yearPopFrame",i[a])},_tagEventHandle:function(e,i,n){e.stopPropagation();var s=this,o=s.options,a=n.nodeName;if(p.call(s),"A"===a){var r=t(n),l=r.attr("val");r.parents("ul").find("a").removeClass("C_CR_Tag_cur"),r.addClass("C_CR_Tag_cur"),o.curModel=[l,"for"+l.charAt(0).toUpperCase()+l.substring(1),l+"Frame",l+"Panel"],o.cache.selDate=[],o.isChangeTag=!0,s._selectTag(o.curModel)}},_binderHandler:function(t,e,i){t.stopPropagation();var n=this,s=n.options,o=i.nodeName;s.readonly||s.disable||"true"!==s.el.attr("isShow")&&(s.el.attr("isShow","true"),"INPUT"!==o&&s.inputEl.click())},_mainEventHandle:function(e,i,n){e.stopPropagation();var s=this,o=t(n),a=o[0].nodeName;if(p.call(s),"A"===a){for(var r=o.attr("val").split("|"),l=0;l<r.length;l++)r[l]=+r[l];s._cachingDate(r,o)}},_ymEventHandle:function(e,i,n){e.stopPropagation();var s,o,a=this,r=a.options,l=t(n),d=l[0].nodeName;if("A"===d)switch(s=l.attr("val"),o=+l.parents(".C_CR_YMer_item:eq(0)").attr("popIndex"),s){case"prevMonth":p.call(a),"date"===r.curModel[0]?a._selectMonthYear("month",null,null,-1):"year"===r.curModel[0]?a._selectMonthYear("year",null,null,-18):a._selectMonthYear("year",null,null,-1);break;case"nextMonth":p.call(a),"date"===r.curModel[0]?a._selectMonthYear("month",null,null,1):"year"===r.curModel[0]?a._selectMonthYear("year",null,null,18):a._selectMonthYear("year",null,null,1);break;case"prevPop":a._changeYear(-12,o);break;case"nextPop":a._changeYear(12,o);break;case"closePop":p.call(a);break;default:a._closeYMerPop(!0),s=Number(s),"y"===l.attr("panel")?a._selectMonthYear("year",s,o):a._selectMonthYear("month",s,o)}else"INPUT"===d||"SPAN"===d?(l=l.children("input").size()?l.children("input"):l,a._closeYMerPop(!1,l),l.blur()):p.call(a)},_timerEventHandle:function(e,i,n){e.stopPropagation();var s,o,a=this,r=t(n),l=r[0].nodeName;if("SPAN"===l){switch(s=r.attr("val")){case"up":a._selectTime(r,1);break;case"down":a._selectTime(r,-1)}p.call(a)}else if("INPUT"===l){switch(r.blur(),r.attr("val")){case"h":o=a.$tmp.$timeHour;break;case"m":o=a.$tmp.$timeMin;break;case"s":o=a.$tmp.$timeSecond}a.$tmp.curTimeTxt=r,p.call(a,o)}else if("A"===l){if("C_CR_Timer_up"===r.attr("class")||"C_CR_Timer_down"===r.attr("class")){switch(r=r.children("span"),s=r.attr("val")){case"up":a._selectTime(r,1);break;case"down":a._selectTime(r,-1)}return void p.call(a)}s=r.attr("val"),a.$tmp.curTimeTxt&&a.$tmp.curTimeTxt.val(10>s?"0"+s:s),p.call(a)}},_btnEventHandle:function(i,n,s){i.stopPropagation();var o,a=this,r=a.options,d=t(s),h=d.attr("val");switch(p.call(a),h){case"close":a.hide();break;case"cur":var c=new Date,u=l(c,r.format);a._cachingDate("quarter"===r.curModel[0]?[u[2],Math.floor(u[3]/3)+1,1]:"week"===r.curModel[0]?[u[2],e.Date.getOnWeek(new Date(u[0]),r.iso8601,r.sunday_first).week]:[u[2],u[3],u[4]]);break;case"clear":v.call(a,null,"clear",null),r.selIndex=0,a.setValue(r.isrange?["",""]:[""]),r.entering&&"function"==typeof r.inputEl.data("fmOpts").clearBuffer&&r.inputEl.data("fmOpts").clearBuffer(0,r.inputEl.data("fmOpts").buffer.length);break;case"ok":"date"===r.curModel[0]&&(o=l(new Date,r.format),r.cache.selDate=/[y|M|q|w|d]/.test(r.format)?r.cache.selDate:r.isrange?[o,o]:[o]),a._export()}},_selectTag:function(e){var i=this,n=i.options,s=n.pEl.children(".C_CR_main_wrap"),o=s.children(".C_CR_main_loading"),a=s.children(".C_CR_main_panel[val="+e[0]+"]"),r=a.siblings(),l="true"===a.attr("isBuild");n.cache.selDate=t.extend(!0,[],n.selDate),n.format=n.formatList[e[0]],r.hide(),o.show(),"all"!==e[0]&&"date"!==e[0]?c(n.pEl,"disMonth"):c(n.pEl,"undo"),l?l&&!i._isReady("mainPanel")?i._update(i._buildUpdateDate()):v.call(i,null,"clear",null):(i._buildTemplate(a,e[2],n),a.attr("isBuild","true")),o.hide(),a.show(),f.call(i),n.isBuild||("all"===n.model||"date"===e[0]&&/[h|m|s]/.test(n.format))&&(i._buildTemplate(n.pEl.children(".C_CR_Timer_box"),"timeFrame",n),g.call(i)),m.call(i),"all"===n.model&&(y(n),b(n)),i._setYM(e[0]),i._scanFocus(),n.isBuild&&p.call(i),n.entering&&n.isChangeTag&&(i._clear(),i._enter(),n.isChangeTag=!1)},_selectMonthYear:function(e,i,n,s){function o(t){a=r.eq(t).attr("val").split("|"),a[c]="undefined"!=typeof s?Number(a[c])+s:i,h.push([Number(a[0]),Number(a[1])])}var a,r,l=this,d=l.options,h=[],c="month"===e?1:0;if(r=t("table.C_CR_YMer",d.pEl),"undefined"!=typeof n&&null!=n)o(n);else for(var u=0;u<r.length;u++)o(u);l._update(h,n)},_selectTime:function(e,i){var n,s,o,a;s=e.parents(".C_CR_Timer_op").eq(0),o=s.prev().children("input"),n=+t.trim(o.val()),a=n+i,"timer_h"===o.attr("name")?a>23?a=0:0>a&&(a=23):a>59?a=0:0>a&&(a=59),a=String(a),o.val(1===a.length?0+a:a)},_cachingDate:function(t,i){var n=this,s=n.options,o=null,a=null,r=null;switch(s.isrange?(2===s.selIndex||0===s.selIndex)&&n._clear(s.okbtn):n._clear(s.okbtn),s.curModel[0]){case"date":o=n._getTime(s.selIndex),a=new Date(t[0],t[1],t[2],o[0],o[1],o[2]);break;case"year":a=new Date(t[0],0,1);break;case"month":a=new Date(t[0],t[1],1);break;case"quarter":a=new Date(t[0],3*(t[1]-1),1);break;case"week":a=e.Date.getWeekRange(t[0],t[1],s.iso8601,s.sunday_first)[0]}if(r=l(a,s.format),s.cache.selDate[s.selIndex]=r,s.isrange){s.selIndex=0;for(var d=0;d<s.cache.selDate.length;d++){if(null===s.cache.selDate[d]){s.selIndex=d;break}s.selIndex++}}else s.selIndex++;n._focus([a],"SEL",i),s.okbtn||n._export()},_changeYear:function(t,e){var i,n=this,s=n.options,a=s.yearPop[s.curModel[1]];t>0?i=o(a[e][a[e].length-1]+1,t):0>t&&(i=o(a[e][0]-1,t)),s.yearPop[s.curModel[1]][e]=i,n._drawYearPop(s.curModel[1],e)},_getTime:function(e){var i=this,n=i.options,s=[],o=null,a=t("table.C_CR_Timer",n.pEl).eq(e);return o=a.find(":text"),s.push(+o.eq(0).val()||0,+o.eq(1).val()||0,+o.eq(2).val()||0),s},_update:function(t,e){var i,n=this,s=n.options;i=s.pEl.children(".C_CR_main_wrap").children(".C_CR_main_panel[val="+s.curModel[0]+"]"),"undefined"!=typeof e&&null!==e?n._buildData(t,e):n._buildData(t,void 0),n._buildTemplate(i,s.curModel[2],s),("all"===s.model||"date"===s.model&&/[h|m|s]/.test(s.format))&&n._setTime(s.selDate),n._setYM(s.curModel[0]),n._scanFocus()},_setYM:function(t){var e,i=this,n=i.options;e=n[t+"Panel"];for(var s=0,o=e.length;o>s;s++)u(n.pEl,{year:e[s].year,month:null!=e[s].month?e[s].month+1:""},s)},_setTime:function(e){var i,n,s,o,a,r=this,l=r.options;i=t("table.C_CR_Timer",l.pEl);for(var d=0;d<i.length;d++)n=i.eq(d).find(":text"),e[d]&&(s=e[d][5],o=e[d][6],a=e[d][7],n.eq(0).val(10>s?"0"+s:s),n.eq(1).val(10>o?"0"+o:o),n.eq(2).val(10>a?"0"+a:a))},_closeYMerPop:function(e,i){var n=this,s=n.options,o=null,a=null,r=i?i.parents(".C_CR_YMer_item"):null;p.call(n,e?null:r.children(".C_CR_YMer_pop"),"ym"),r&&(o=r.attr("pop"),a=r.attr("popIndex")),"year"===o&&(""===a||n._isReady("yearPop",a)||(s.yearPop=t.extend(!0,{},s.cache.yearPop),setTimeout(function(){n._drawYearPop(s.curModel[1],a)},50)))},_scanFocus:function(){for(var t=this,e=t.options,i=(e.inputEl.index(t.eventEl),[]),n=0;n<e.cache.selDate.length;n++)e.cache.selDate[n]&&i.push(e.cache.selDate[n][0]);t._focus(i,"SEL"),t._focus([new Date],"CUR")},_focus:function(t,i,n){for(var s=this,o=s.options,a=[],r=0;r<t.length;r++){switch(o.curModel[0]){case"date":t[r]=[t[r].getFullYear(),t[r].getMonth(),t[r].getDate()];
break;case"year":t[r]=[t[r].getFullYear()];break;case"month":t[r]=[t[r].getFullYear(),t[r].getMonth()];break;case"quarter":t[r]=[t[r].getFullYear(),Math.floor(t[r].getMonth()/3)+1];break;case"week":t[r]=[t[r].getFullYear(),e.Date.getOnWeek(t[r]).week]}a.push(t[r])}v.call(s,n,i,a)},_clear:function(t){var e=this,i=e.options;t||(i.inputEl.val(""),i.value=i.isrange?["",""]:[""],i.selDate=i.isrange?[null,null]:[null]),i.cache.selDate=i.isrange?[null,null]:[null],i.selIndex=0,v.call(e,null,"clear",null)},_export:function(){function t(){for(var t=s.cache.selDate.length,e=0;t>e;e++)s.cache.selDate[e]&&(o=n._getTime(e),i=s.cache.selDate[e],i=new Date(i[2],i[3],i[4],o[0],o[1],o[2]),i=l(i,s.format),s.cache.selDate[e]=i)}var e,i,n=this,s=n.options,o=null,a=!0;if(s.isrange){s.cache.selDate=d(s.cache.selDate),t(),e=[s.cache.selDate[0]?s.cache.selDate[0][1]:"",s.cache.selDate[1]?s.cache.selDate[1][1]:""];for(var r=0;r<e.length;r++)e[r]||(a=!1);a=s.okbtn?!0:a}else t(),e=s.cache.selDate[0]?s.cache.selDate[0][1]:"";n.setValue(e),a&&n.hide()},_isReady:function(i,n){function s(t,e){return t=t?t.getTime():t,e=e?e.getTime():e,t!=e}var o,a,r,l,d=this,c=d.options,u=c.curModel[0];if("mainPanel"===i){r=c.cache.selDate,l=c[c.curModel[3]],o=s(c.mindate[1],h.call(d,"mindate"))||s(c.maxdate[1],h.call(d,"maxdate"));for(var p=0;p<r.length;p++)if(null!==r[p]){for(var f=0;f<l.length;f++){switch(u){case"date":a=r[p][2]===l[f].year&&r[p][3]===l[f].month;break;case"year":for(var g=0;g<l[f].data.length;g++){if(r[p][2]===l[f].data[g]){a=!0;break}a=!1}break;case"week":var m=e.Date.getOnWeek(r[p][0],c.iso8601,c.sunday_first);a=m.year===l[f].year;break;default:a=r[p][2]===l[f].year}if(a)break}if(!a)break}else a=!0;a=a&&!o}else"yearPop"===i&&(r=c[c.curModel[3]][n].year,l=c.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y:eq("+n+")>table").attr("val")||"none",a=t.trim(l).indexOf(r+"")>=0);return a},_setEmptyText:function(t){var e=this,i=e.options;i.el.find(".C_CR_emptytext").html(t?i.emptytext:"")},show:function(){var e=this,n=e.options;return n.disable?!1:(_&&_.hide(),n.isBuild?(n.selDate=i(t.extend([],n.selDate),n.format),n.cache.selDate=t.extend([],n.selDate),e._isReady("mainPanel")?(e._scanFocus(),("all"===n.model||"date"===n.model&&/[h|m|s]/.test(n.format))&&e._setTime(n.selDate)):e._update(e._buildUpdateDate()),n.pEl.show()):(e._draw(),n.pEl.show(),e._selectTag(n.curModel)),n.isBuild&&"all"!==n.model||y(n),b(n),_=e,t(document).unbind("mouseup.calender").one("mouseup.calender",function(t){t.stopPropagation(),_&&_.hide(),_=null}),e)},hide:function(){var t=this,e=t.options;return e.disable||!e.pEl?t:(e.el.attr("isShow","false"),p.call(t),e.pEl.hide(),e.inputEl.parents(".C_CR_calInput_bd").removeClass(e.inputFocusClass),""===e.inputEl.val()&&t._setEmptyText(!0),v.call(t,null,"clear",null),_=null,t)},setValue:function(n,s){var o=this,a=o.options,r=[],l=[],d=t.extend({},a.formatList);if(a.disable)return o;if(n="number"===t.type(n)?n+"":n,n=n||null,n="array"!==t.type(n)?[n]:n,a.value=[],0!==n.length){if(r=i(t.extend(!0,[],n),a.format),!s){var c=h.call(o,"maxdate",!0),u=h.call(o,"mindate",!0);t.each(r,function(t,e){if(null!=e){if(c&&e[0]-c>0)return r[t]=null,!0;if(u&&u-e[0]>0)return r[t]=null,!0}})}a.selDate=t.extend(!0,[],r),a.cache.selDate=t.extend(!0,[],r)}a.selIndex=0;for(var p=0;p<r.length;p++)r[p]&&a.selIndex++,a.value.push(r[p]?r[p][1]:""),l.push(r[p]?e.Date.format(r[p][0],d[a.curModel[0]]):"");return l=l.join("~"),n=/^~$/.test(l)?"":/^.*~$/.test(l)?a.separator?l:l=l.replace("~",""):l,a.inputEl.eq(0).val(n),o._setEmptyText(""===l?!0:!1),s?o.onValid():o._triggerHandler("change"),"function"!=typeof a.on_change||s||a.on_change.apply(o,t.extend(!0,[],r)),o},getValue:function(t){var i=this,n=i.options,s=[];if(n.disable)return"";t=t?t:"string";for(var o=n.isrange?2:1,a=0;o>a;a++)n.value[a]?s[a]="date"===t?e.Date.parse(n.value[a],n.format):n.value[a]:(s[a]="string"===t?"":null,n.value[a]="string"===t?"":null);return n.isrange?s:s[0]},setMaxDate:function(t){var e=this.options;"date"===e.model&&"string"==typeof t&&/\d{4}(\-\d{2}){2}/.test(t)&&(e.maxdate[0]=t)},setMinDate:function(t){var e=this.options;"date"===e.model&&"string"==typeof t&&/\d{4}(\-\d{2}){2}/.test(t)&&(e.mindate[0]=t)},getDateRange:function(i){function n(t){return"date"===i?t:e.Date.format(t,"yyyy-MM-dd hh:mm:ss")}var s,o,a=this,r=a.options,l=t.extend(!0,[],r.selDate),d=[];i=i?i:"date",o="date"===i?null:"";for(var h=0;h<l.length;h++)if(s=l[h])switch(r.curModel[0]){case"month":d.push([n(new Date(s[2],s[3],1,0,0,0,0)),n(new Date(s[2],s[3],new Date(s[2],s[3]+1,0).getDate(),23,59,59,0))]);break;case"year":d.push([n(new Date(s[2],0,1,0,0,0,0)),n(new Date(s[2],11,31,23,59,59,0))]);break;case"quarter":d.push([n(new Date(s[2],s[3],1,0,0,0,0)),n(new Date(s[2],s[3]+2,new Date(s[2],s[3]+3,0).getDate(),23,59,59,0))]);break;case"week":d.push([n(new Date(s[2],s[3],s[4],0,0,0,0)),n(new Date(s[2],s[3],s[4]+6,23,59,59,0))]);break;default:d.push([n(new Date(s[0].getTime())),n(new Date(s[2],s[3],s[4],23,59,59,0))])}else d.push([o,o]);return 1===d.length?"date"===r.curModel[0]?d[0][0]:d[0]:[d[0][0],d[1][1]]},setWidth:function(t){var e=this.options.el.children("div"),i=this.options.width;null!=t&&void 0!==t&&""!==t&&"object"!=typeof t&&(i="string"==typeof t&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(t)?t:t+"px",e.css({width:t}))},setReadonly:function(t){t="undefined"==typeof t?!0:t;var e=this,i=e.options,n=t?"addClass":"removeClass";t!==i.readonly&&(i.el.children(".C_CR_calInput_bd")[n](i.inputDisClass),t?i.inputEl.prop("readonly",!0):i.entering&&i.inputEl.prop("readonly",!1),i.readonly=t)},destroy:function(){var t=this,e=t.options;t._super(),e.el.unbind().remove(),e.pEl&&e.pEl.remove()},setTextMode:function(){var t=this,e=t.options,i=t.getLabelValue();e.el.eq(0).html(e.isrange?i[0]+"~"+i[1]:i[0])},getLabelValue:function(){var e,i=this,n=i.options,s=[],o=/^(?:\{.*\}|\[.*\])$/;(null===n.value||void 0===n.value)&&(n.value=""),e=t.type(n.value),"string"===e&&(n.value=o.test(n.value)?t.parseJSON(n.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[n.value]);for(var a=0;a<n.value.length;a++)e=t.type(n.value[a]),"string"===e?s.push(n.value[a]):"date"===e&&s.push(l(n.value[a],n.format)[1]);return s},onInValid:function(e,i){var n=this,s=n.options;s.tipTxt=null===s.tipTxt?s.el.attr("tip"):s.tipTxt,s.el.attr("tip",i),t(n.tipPosition,s.el).attr("tipType","error"),s.el.children(".C_CR_calInput_bd").addClass(s.inputErrClass)},onValid:function(){var e=this,i=e.options;i.tipTxt=null===i.tipTxt?i.el.attr("tip"):i.tipTxt,i.el.attr("tip",i.tipTxt||""),t(e.tipPosition,i.el).attr("tipType","normal"),i.el.children(".C_CR_calInput_bd").removeClass(i.inputErrClass)}})}(window.comtop.cQuery,window.comtop),function(t,e){function i(){var t=document.createElement("input"),e="onpaste";return t.setAttribute(e,""),"function"==typeof t[e]?"paste":"input"}var n,s=i()+".mask",o=navigator.userAgent,a=/iphone/i.test(o),r=/android/i.test(o);e.maskCL={definitions:{9:"[0-9]",1:"[0-1]",2:"[0-2]",3:"[0-3]",4:"[0-4]",5:"[0-5]",6:"[0-6]",7:"[0-7]",8:"[0-8]",a:"[A-Za-z]","*":"[A-Za-z0-9]",q:"[1-4]",x:"x",r:"r",z:"z",k:"k"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caretCL:function(t,e){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmaskCL:function(){return this.trigger("unmaskCL")},maskCL:function(i,o){var l,d,h,c,u,p;return!i&&this.length>0?(l=e(this[0]),l.data(e.maskCL.dataName)()):(o=e.extend({placeholder:e.maskCL.placeholder,completed:null},o),d=e.maskCL.definitions,h=[],c=p=i.length,u=null,e.each(i.split(""),function(t,e){"?"===e?(p--,c=t):d[e]?(h.push(new RegExp(d[e])),null===u&&(u=h.length-1)):h.push(null)}),this.trigger("unmaskCL").each(function(){function l(t){for(;++t<p&&!h[t];);return t}function f(t){for(;--t>=0&&!h[t];);return t}function g(t,e){var i,n;if(!(0>t)){for(i=t,n=l(e);p>i;i++)if(h[i]){if(!(p>n&&v(h[i],k[n],i)))break;k[i]=k[n],k[n]=o.placeholder,n=l(n)}x(),C.caretCL(Math.max(u,t))}}function m(t){var e,i,n,s;for(e=t,i=o.placeholder;p>e;e++)if(h[e]){if(n=l(e),s=k[e],k[e]=i,!(p>n&&v(h[n],s,n)))break;i=s}}function v(t,e,i){var n,s,o;switch(t.toString().replace(/\//g,"")){case"x":if(n=C.val().substring(i-1,i),s=parseFloat(e),"0"===n)return s>0&&9>=s;if("1"===n)return s>=0&&3>s;break;case"z":if(o=C.val(),n=o.substring(i-1,i),s=parseFloat(e),s=parseFloat(e),"0"===n)return s>0&&9>=s;if("1"===n||"2"===n)return s>=0&&9>=s;if("3"===n)return s>=0&&1>=s;break;case"r":if(n=C.val().substring(i-1,i),s=parseFloat(e),"0"===n||"1"===n)return s>=0&&9>=s;if("2"===n)return s>=0&&3>=s;break;case"k":if(n=C.val().substring(i-1,i),s=parseFloat(e),"0"===n)return s>0&&9>=s;if("1"===n||"2"===n||"3"===n||"4"===n)return s>=0&&9>=s;if("5"===n)return s>=0&&3>=s;break;default:return t.test(e)}}function y(t){if(!C.prop("readonly")){var e,i,n,s=t.which;8===s||46===s||a&&127===s?(e=C.caretCL(),i=e.begin,n=e.end,n-i===0&&(i=46!==s?f(i):n=l(i-1),n=46===s?l(n):n),_(i,n),g(i,n-1),t.preventDefault()):27===s&&(C.val(T),C.caretCL(0,w()),t.preventDefault())}}function b(t){if(!C.prop("readonly")){var i,n,s,a=t.which,d=C.caretCL();return t.ctrlKey||t.altKey||t.metaKey||32>a?!1:void(a&&(d.end-d.begin!==0&&(_(d.begin,d.end),g(d.begin,d.end-1)),i=l(d.begin-1),p>i&&(n=String.fromCharCode(a),v(h[i],n,i)&&(m(i),k[i]=n,x(),s=l(i),r?setTimeout(e.proxy(e.fn.caret,C,s),0):C.caretCL(s),o.completed&&s>=p&&o.completed.call(C))),t.preventDefault()))}}function _(t,e){var i;for(i=t;e>i&&p>i;i++)h[i]&&(k[i]=o.placeholder)}function x(){C.val(k.join(""))}function w(t){var e,i,n,s,a,r=C.val(),l=-1,d=C.data("fmOpts");for(e=0,i=0;p>e;e++)if(h[e]){for(k[e]=o.placeholder;i++<r.length;)if(n=r.charAt(i-1),v(h[e],n,e)){k[e]=n,l=e;break}if(i>r.length)break}else k[e]===r.charAt(i)&&e!==c&&(i++,l=e);return t?(x(),C.val(C.val().substring(0,l+1))):c>l+1?(a=cui(C.parents("span").eq(0)),s=a.options,l===(c-1)/2&&d.isRange?(x(),C.val(C.val().substring(0,d.separator?l+1:l))):(C.val(""),s&&a._clear(C.data("fmOpts").okBtn),_(0,p))):(x(),C.val(C.val().substring(0,l+1))),c?e:firstNonmaskCLPos}var C=e(this),k=e.map(i.split(""),function(t){return"?"!==t?d[t]?o.placeholder:t:void 0}),T=C.val();C.data("fmOpts").buffer=k,C.data("fmOpts").clearBuffer=_,C.data(e.maskCL.dataName,function(){return e.map(k,function(t,e){return h[e]&&t!==o.placeholder?t:null}).join("")}),C.one("unmaskCL",function(){C.unbind(".maskCL").removeData(e.maskCL.dataName)}).bind("focus.maskCL",function(){if(!C.prop("readonly")){clearTimeout(n);var s,o,a=C.data("fmOpts");T=C.val(),""!==e.trim(T)&&(a.isRange?(o=T.split("~"),o[0]&&(o[0]=t.Date.parse(o[0],a.format),T=t.Date.format(o[0],a.fullFormat)),o[1]?(o[1]=t.Date.parse(o[1],a.format),T+="~"+t.Date.format(o[1],a.fullFormat)):T+=a.separator?"~":"",C.val(T)):(o=t.Date.parse(T,a.format),T=C.val(t.Date.format(o,a.fullFormat)))),s=w(!0),n=setTimeout(function(){x(),s===i.length?C.caretCL(0,s):C.caretCL(s)},10)}}).bind("blur.maskCL",function(){var e,i=C.data("fmOpts"),n=cui(C.parents("span").eq(0));w(),""!==C.val()&&(i.isRange?(e=C.val().split("~"),e[0]=t.Date.parse(e[0],i.fullFormat),e[1]=t.Date.parse(e[1],i.fullFormat),null===e[0]&&null!==e[1]&&(e[0]=e[1]),null!==e[0]&&null!==e[1]&&(e[0]-e[1]>0&&e.reverse(),C.val(t.Date.format(e[0],i.format)+"~"+t.Date.format(e[1],i.format)))):(e=t.Date.parse(C.val(),i.fullFormat),C.val(t.Date.format(e,i.format)))),n.setValue(e)}).bind("keydown.maskCL",y).bind("keypress.maskCL",b).bind(s,function(){setTimeout(function(){var t=w(!0);C.caretCL(t),o.completed&&t===C.val().length&&o.completed.call(C)},0)}),w(!0)}))}})}(window.comtop,window.comtop.cQuery),function(t,e){e.UI.ClickInput=e.UI.Base.extend({options:{uitype:"ClickInput",name:"",value:"",emptytext:"",width:"",maxlength:-1,readonly:!1,icon:"",iconwidth:"",enterable:!1,editable:!1,textmode:!1,on_iconclick:null,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},relation:"data-relation-value",tipPosition:".click_input_base",_init:function(){var t=this.options;t.id=e.guid(),""==t.name&&(t.name=e.guid()+"_"+t.uitype)},_create:function(){var i,n=this.options,s=e.icon,o=n.icon;this.$inputWrap=t("#"+n.id+"_wrap"),this.$inputBox=t("#"+n.id+"_box"),i=this.$input=t("#"+n.id),this.$iconspan=t("#"+n.id+"_icon"),this.$iconWarp=t("#"+n.id+"_warp"),this.$empty=n.el.find(".cui_clickinput_empty").eq(0).on("click",function(){i.focus()}),/\./.test(o)?this.$iconspan.css("backgroundImage","url("+o+")"):this.$iconspan.html(s[o]||"&#xf03a;"),this.setWidth(n.width),n.readonly&&this.setReadOnly(!0),""==n.value&&""!=n.emptytext&&this.$empty.html(n.emptytext),this.setEditAble(n.editable)},setWidth:function(t){this.$inputWrap.css({width:e.Tools.fixedNumber(t)})},setValue:function(e,i){var n=this.$input,s=this.options;e=null==e||void 0==e?"":e,"string"===t.type(e)?(n.removeAttr(this.relation),n.val(e)):"array"===t.type(e)&&(e=t.extend([],e),e.length>0&&(n.val(e[0]),e.splice(0,1),n.attr(this.relation,e.join("|")))),""!==e&&null!=e||"array"===t.type(e)&&e.length>0?this.$empty.html(""):""!==s.emptytext&&this.$empty.html(s.emptytext),i?this.onValid():this._triggerHandler("change")},getValue:function(){var e=this.$input,i=this.options,n=t.trim(e.val()),s=e.attr(this.relation),o=i.emptytext;return n===o?"":s?(n=n+"|"+s,n.split("|")):n},getLabelValue:function(){var e=this.options.value;return"string"==t.type(e)?e:"array"==t.type(e)?e.length>0?e[0]:"":void 0},setMaxLength:function(t){this.options.maxlength=t},setReadOnly:function(t){this.setReadonly(t)},setReadonly:function(t){var e=this.options,i=this.$inputWrap,n=this.$input;e.readonly=t,t?(n.attr("readonly",!0),i.addClass("input_garybg"),this._removeEmptyText(!0)):(e.editable&&n.attr("readonly",!1),i.removeClass("input_garybg"),this._removeEmptyText(!1)),this.$iconWarp.css({display:t?"none":"inline-block"}),t&&this.$inputBox.css("marginRight",0)},setEditAble:function(t){var e=this.options,i=this.$input;return e.readonly?!1:(e.editable=t,void(t?i.attr("readonly",!1):i.attr("readonly",!0)))},_changeHander:function(t){var e=this.options;return e.readonly?!1:(""!=this.getValue()&&this.$empty.html(""),this._triggerHandler("change"),void this._customHandler("on_change",t))},_focusHandler:function(t){var e=this.options;return e.readonly?!1:(this._removeEmptyText(!0),this.$inputBox.addClass("input_focus"),this.onValid(),void this._customHandler("on_focus",t))},_blurHandler:function(e){var i=this.options,n=this.$inputBox;if(i.readonly)return!1;this._removeEmptyText(!1),n.removeClass("input_focus"),this._textCounter();var s=this.getValue();switch(t.type(s)){case"string":""!==s&&null!=s&&this._triggerHandler("change");break;case"array":0!==s.length&&this._triggerHandler("change")}this._customHandler("on_blur",e)},_keyupHandler:function(t){var e=this.options;return e.readonly?!1:(this._textCounter(),void this._customHandler("on_keyup",t))},_keydownHandler:function(t){var e=this.options;return e.readonly?!1:e.enterable&&13==t.keyCode?(this._iconclickHandler(t),!1):void this._customHandler("on_keydown",t)},_iconclickHandler:function(t){var e=this.options;return e.readonly?!1:void this._customHandler("on_iconclick",t)},_customHandler:function(e,i){var n=this.options,s=n[e];"string"==t.type(s)?"function"==typeof window[s]&&window[s].call(this,i,this):"function"==typeof s&&s.call(this,i,this)},_removeEmptyText:function(t){var e=(this.$input,this.options.emptytext),i=this.getValue();""!=e&&0==i.length&&this.$empty.html(t?"":e)},_textCounter:function(){var t=this.options,i=this.getValue();if("object"==typeof i&&(i=this.$input.val()),t.maxlength>0){var n=e.String.getBytesLength(i);if(!(n>t.maxlength))return!1;this.setValue(e.String.intercept(i,t.maxlength))}return!1},onInValid:function(e,i){var n=this,s=n.options;n.$inputBox.addClass("click_input_invalid"),null==s.tipTxt&&(s.tipTxt=s.el.attr("tip")||""),s.el.attr("tip",i),t(n.tipPosition,s.el).attr("tipType","error")},onValid:function(){var e=this,i=e.options,n=t(e.tipPosition,i.el).attr("tipID");if(e.$inputBox.removeClass("click_input_invalid"),null==i.tipTxt&&(i.tipTxt=i.el.attr("tip")||""),void 0!==n){var s=cui.tipList[n];"undefined"!=typeof s&&s.hide()}i.el.attr("tip",i.tipTxt),t(e.tipPosition,i.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.Customform=e.UI.Base.extend({options:{uitype:"Customform",columnCount:2,datasource:[],classname:"customform"},_create:function(){var i,n,s,o,a,r,l=this.options.datasource;for(window.validater=window.validater||cui().validate(),a=0;a<l.length;a++)i=l[a],s=i.uitype||i.uiType,n=s.charAt(0).toLowerCase()+s.substring(1),cui(i.el)[n](i);for(a=0;a<l.length;a++)i=l[a],this._bindData(t(i.el),i.databind);if(!e.UI.scan.textmode&&!comtop.UI.scan.disable)for(a=0,r=l.length;r>a;a++)i=l[a],o=t(i.el).data("uitype"),!o||o.options.textmode||o.options.disable||(this._bindValidate(o.options.el,i.validate),this._bindTip(o.options.el,i,o.tipPosition||o.options.el))},_bindData:function(t,e){if(e){var i=e.split("."),n=i[0],s=i[1],o=window[n];if(o||(o=window[n]={}),o.nodeName)return alert("\u6570\u636e"+n+"\u4e0e\u9875\u9762\u7684\u6807\u7b7eID\u540d\u76f8\u540c\uff0c\u8bf7\u66f4\u540d;"),!1;var a=cui(o).databind();a.addBind(t,s)}},_bindValidate:function(e,i){if(i)switch(t.type(i)){case"array":for(var n=0;n<i.length;n++)i[n].rule?window.validater.add(cui(e),i[n].type,i[n].rule):window.validater.add(cui(e),i[n].type);break;case"string":window.validater.add(cui(e),i)}},_bindTip:function(e,i,n){n=t(n,e),void 0!=cui(e).options.textmode&&void 0==i.tip&&(e.attr("tip",""),i.tip=""),void 0!=i.tip&&(e.attr("tip",i.tip),cui.tip(n,{trigger:i.trigger,tipEl:e}))}})}(window.comtop.cQuery,window.comtop),function(t){"use strict";t.cui||(t.cui={});var e=t.comtop,i=e&&e.cQuery?e.cQuery:t.jQuery,n=t.cui,s=t.document,o=i.browser.msie,a=o&&"6.0"===i.browser.version,r=o&&!i.support.boxModel,l=function(){var t=i("body"),e=t.data("cui_dialog_eventproxylay");return e||(e=i(s.createElement("div")).addClass("cui_dialog_eventproxylay").appendTo(t),t.data("cui_dialog_eventproxylay",e)),e},d=function(t){t=t||{},this.opt=i.extend(!0,{},this.options,t),this._init()};d.prototype={options:{uitype:"Dialog",id:"",title:"",modal:!0,opacity:.5,canClose:!0,outClose:!1,width:350,height:100,left:"50%",top:"50%",draggable:!0,hideContent:!1,onClose:null,beforeClose:null,src:"",html:"",buttons:[],page_scroll:!0,dragClass:".dialog-titlebar"},_init:function(){this._preProcessSettings(),this._buildHTML(),this._markUp(),this._setContent(),this._setUpSize(),this._bindEvent()},_preProcessSettings:function(){var t=this.opt,e=function(){return(900*Math.random()+100).toString().replace(".","")};t.id=""===t.id?"dialog_"+e():t.id,t.left=t.left.toString(),t.top=t.top.toString(),t.left=-1!==t.left.indexOf("%")?t.left:parseInt(t.left,10)+"px",t.top=-1!==t.top.indexOf("%")?t.top:parseInt(t.top,10)+"px"},_buildHTML:function(){var t=this.opt,e=[];t.modal&&(a&&e.push('<iframe id="cui_overlay_iframe_',t.id,'" class="cui_overlay_iframe"></iframe>'),e.push('<div class="cui_overlay" id="cui_overlay_',t.id,'"></div>')),e.push('<div class="cui-dialog-container" id="',t.id,'" style="'),e.push("left:",t.left,"; top:",t.top,';">'),t.canClose&&e.push('<a href="#" title="\u5173\u95ed" class="dialog-close-btn cui-icon">&#xf00d;<!--span class="dialog-close-btn-span"></span--></a>'),e.push('<div class="dialog-titlebar"><span class="dialog-title" title="'+t.title.replace(/<.*?>/g,"").replace('"',"\uff02")+'">'),e.push(t.title,"</span></div>"),e.push('<div class="dialog-content" >'),"string"==typeof t.html&&""!==t.html?(e.push('<div class="dialog-content-inner">'),e.push(t.html),e.push("</div>")):e.push("string"==typeof t.src&&""!==t.src?'<iframe class="dialog-content-iframe" frameborder="no" border="0" src="about:blank;" ></iframe><div class="dialog-iframe-loading"></div>':'<div class="dialog-content-inner"></div>'),i.isArray(t.buttons)&&t.buttons.length>0&&(e.push('<div class="dialog-ft">'),e.push(this._buildButtons()),e.push("</div>")),e.push("</div>"),e.push("</div>"),i("body").append(e.join(""))},_markUp:function(){var t=this.opt;this._$dialogContainer=i("#"+t.id),this._$dialogContent=this._$dialogContainer.find(".dialog-content-inner"),this._$iframe=this._$dialogContainer.find(".dialog-content-iframe"),this._$loadingLay=this._$dialogContainer.find(".dialog-iframe-loading"),this._$buttonContainer=this._$dialogContainer.find(".dialog-ft"),this._$overlay=i("#cui_overlay_"+t.id),this._$iframecover=i("#cui_overlay_iframe_"+t.id),this._$mousemoveProxyLay=l()},_setContent:function(){var t=this.opt;"object"==typeof t.el?this._$dialogContent.prepend(i(t.el).show()):"object"==typeof t.html&&this._$dialogContent.prepend(i(t.html).show())},_setUpSize:function(){var t=this.opt;t.height&&(this._$iframe.length?this._$iframe.height(t.height):this._$dialogContent.height(t.height)),t.width&&this._$dialogContainer.width(t.width)},_bindEvent:function(){var t=this.opt,e=this;this._$dialogContainer.delegate("a.cui-button,span.dialog-close-btn-span,a.dialog-close-btn","click",function(n){var s=i(n.target),o=s.attr("proxyIndex");return o&&""!==o?(t.buttons[o].disable||(o=parseInt(o,10),t.buttons[o].handler.call(e)),!1):(e.hide(),!1)}),this._$dialogContainer.on("mouseup.dialog",function(t){t.stopPropagation()}),t.outClose&&t.canClose&&(t.modal||i(document).bind("mouseup.dialog",function(){return e.hide(),!1}),this._$overlay.bind("click",function(){return e.hide(),!1})),t.draggable?this._doDrag():this._$dialogContainer.find(".dialog-titlebar").css("cursor","default")},_doDrag:function(){var e=this.opt,n=!1,s=this,o={top:0,left:0},a=function(e){var n=i(t).height(),o=i(t).width(),a=s._dialogContainerOuterWidth,r=s._dialogContainerOuterHeight;e.left+a>=o&&(e.left=o-a),e.top+r>=n&&(e.top=n-r)},r=function(t){t.stopPropagation(),n=!1,s._$mousemoveProxyLay.off(),s._showContent(!0)},l=function(t){if(n){var i={left:t.clientX-o.left,top:t.clientY-o.top,"margin-left":"","margin-top":"",bottom:"",right:""};i.left=i.left<0?0:i.left,i.top=i.top<0?0:i.top,a(i),s._$dialogContainer.css(i),e.left=i.left,e.top=i.top}};i(e.dragClass,this._$dialogContainer).on("mousedown.dialogDrag",function(t){var e=this.getBoundingClientRect();return o.top=t.clientY-e.top,o.left=t.clientX-e.left,n=!0,s._showContent(!1),s._$mousemoveProxyLay.off().on("mousemove.dialogDrag",function(t){l(t)}).on("mouseup.dialogDrag",r),!1}).on("mouseup.dialogDrag",r)},_showContent:function(t){t?(this._$mousemoveProxyLay.hide(),this.opt.hideContent&&(this._$dialogContent.css("visibility","visible"),this._$iframe.css("visibility","visible"))):(this._$mousemoveProxyLay.show(),this.opt.hideContent&&(this._$dialogContent.css("visibility","hidden"),this._$iframe.css("visibility","hidden")))},_buildButtons:function(){for(var t=this.opt,e={hide:!1,disable:!1,handler:function(){},name:"\u6309\u94ae"},n=[],s=0,o=t.buttons.length;o>s;s++){t.buttons[s]=i.extend({},e,t.buttons[s]);var a=t.buttons[s],r="cui-button ";r+=a.disable?" disable-button ":"",r+=a.hide?" btn-normal-hide ":"",n.push('<a href="#" hidefocus="true" onclick="return false;" class="',r,'" proxyIndex="',s,'">',a.name,"</a>")}return n.join("")},_calPosition:function(){var t=this.opt;return{"margin-left":-t.width/2,"margin-top":-this._$dialogContainer.height()/2}},_setPosition:function(){var t=this.opt,e=this._$dialogContainer;"50%"===t.left&&"50%"===t.top?e.css(this._calPosition()):"100%"===t.left&&"100%"===t.top&&e.css({left:"",top:"",right:0,bottom:0})},_showOverLay:function(){0!==this._$overlay.length&&((a||r)&&(this._ieQScrollTop=i(s).scrollTop(),i(s).scrollTop(0),i("html,body").addClass("cui_overlay_dialog_ie6"),this._$iframecover.length&&this._$iframecover.appendTo(s.body).show()),this._$overlay.css("opacity",this.opt.opacity).appendTo(s.body).show())},_hideOverLay:function(){0!==this._$overlay.length&&((a||r)&&(i("html,body").removeClass("cui_overlay_dialog_ie6"),this._$iframecover.length&&this._$iframecover.hide(),i(s).scrollTop(this._ieQScrollTop)),this._$overlay.hide())},_initIframeSrc:function(){this._$iframe.length&&!this._srcSetted&&(this._loadIframe(this.opt.src),this._srcSetted=!0)},_cacheDialogSize:function(){this._dialogContainerOuterWidth=this._$dialogContainer.outerWidth(),this._dialogContainerOuterHeight=this._$dialogContainer.outerHeight()},_loadIframe:function(t){var e=this;this._$loadingLay.height(this._$iframe.height()).show(),this._$iframe.css("visibility","hidden").attr("src",t),setTimeout(function(){e._$iframe.css("visibility","visible"),e._$loadingLay.hide()},500)},show:function(t){return this.opt.page_scroll||i("html").addClass("cui-dialog-noscroll"),this._setPosition(),this._showOverLay(),this._$dialogContainer.appendTo(s.body).show(),t?this.reload(t):this._initIframeSrc(),this._$mousemoveProxyLay&&this._$mousemoveProxyLay.appendTo(s.body),this._cacheDialogSize(),this},reload:function(t){return this._$iframe.length&&t?(this._loadIframe(t),this.opt.src=t,this):this},hide:function(){return"function"==typeof this.opt.beforeClose&&this.opt.beforeClose.call(this)===!1?this:(this._hideOverLay(),this._$dialogContainer.hide(),this.opt.page_scroll||i("html").removeClass("cui-dialog-noscroll"),"function"==typeof this.opt.onClose&&this.opt.onClose.call(this),!this.opt.modal&&this.opt.outClose&&this.opt.canClose&&i(document).unbind("mouseup.dialog"),this)},setTitle:function(t){var e=typeof t;return("number"===e||"string"===e)&&(this.opt.title=t,i("span.dialog-title",this._$dialogContainer).html(t)),this},setButton:function(t,e){var n=arguments.length,s=this.opt,o=this,a=function(){o._$buttonContainer.length&&o._$buttonContainer.html(o._buildButtons())};if(1===n&&"array"===i.type(t))i.extend(s.buttons,t),a();else if(2===n&&"number"==typeof t){if(t>s.buttons.length)return;i.extend(s.buttons[t],e),a()}return this},setSize:function(t){return"object"!==i.type(t)?this:(t.width&&(this.opt.width=t.width),t.height&&(this.opt.height=t.height),this._setUpSize(),this._setPosition(),this._cacheDialogSize(),this)},getIframeMember:function(t){return this._$iframe.length?this._$iframe.get(0).contentWindow[t]:null},getIframe:function(){return this._$iframe.length?this._$iframe.get(0):null},move:function(t,e){var n={};return"number"==typeof t&&(n.top=t,n["margin-top"]="",this.opt.top=t),"number"==typeof e&&(n.left=e,n["margin-left"]="",this.opt.left=e),i.isEmptyObject(n)?this:(n=i.extend({bottom:"",right:""},n),this._$dialogContainer.css(n),this)},destroy:function(){this._$dialogContainer.remove(),this._hideOverLay(),this._$overlay.length&&this._$overlay.remove(),this._$iframecover.length&&this._$iframecover.remove()}},d.prototype.constructor=d,e&&e.UI&&e.cQuery&&(e.UI.Dialog=d,e.cQuery.fn.dialog=function(t){var i=this.data("uitype");return t=t||{},t.html=this.get(0),"object"!=typeof i&&(i=new e.UI.Dialog(t),this.data("uitype",i)),i}),n.dialog=function(t){var i=t.id,n=new d(t);return"object"==typeof e&&i&&e.cQuery("#"+i).data("uitype",n),n}}(window),function(t,e){e.UI.Input=e.UI.Base.extend({options:{uitype:"Input",width:"200px",readonly:!1,maxlength:-1,value:"",emptytext:"",name:"",type:"text",mask:"",maskoptions:{},textmode:!1,align:"left",on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null,on_keypress:null},tipPosition:".cui_inputCMP_wrap",_init:function(){var t=this.options;t.id="cui_inputCMP_"+e.guid(),"password"!==t.type&&"hidden"!==t.type&&(t.type="text"),""===t.name&&(t.name=e.guid()+"_"+t.uitype),t.value=t.value.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},_create:function(){var i,n=this,s=n.options;if(i=this.$input=t("#"+s.id).css("textAlign",s.align),this.$empty=s.el.find(".cui_input_empty").eq(0).css("text-align",s.align).on("mousedown",function(){i.focus()}),""!==s.mask){var o=t.extend({},s.maskoptions,{callback:function(){n._removeEmptyText(!1)}});e.UI.InputMask.doMask(this.$input,s.mask,o)}""===s.value&&this.$empty.html(s.emptytext),s.maxlength>-1&&this.$input.on("input propertychange",function(){n._textCounter()})},setWidth:function(t){"string"==typeof t&&/\d+(\%|px|pt|em)/.test(t)?this.options.el.children("div").css({width:t}):"number"==typeof t&&this.options.el.children("div").css({width:t+"px"})},setValue:function(i,n){var s=this.$input,o=this.options;if(i=null==i||void 0==i?"":i,s.val(i),o.maxlength>0&&this._textCounter(),""!==i){if(this.$empty.html(""),""!==o.mask){var a=t.extend({},o.maskoptions,{callback:function(){this._removeEmptyText(!1)}});e.UI.InputMask.doMask(this.$input,o.mask,a)}}else""!==o.emptytext&&this.$empty.html(o.emptytext);n?this.onValid():(this._triggerHandler("change"),s.change())},getValue:function(){var t=this.$input,i=this.options,n=t.val();return""!==i.mask?e.UI.InputMask.unMaskValue(t,i.mask,i.maskoptions):n},setEmptyText:function(e){{var i=this.options;this.$input}"string"==typeof e&&(i.emptytext=""===t.trim(e)?"":e,""===this.getValue()&&this.$empty.html(i.emptytext))},setMaxLength:function(t){this.options.maxlength=t},setReadOnly:function(t){var e=this.options,i=this.$input;e.readonly=t,i.attr("readonly",t),t?(e.el.children("div").addClass("cui_inputCMP_readonly"),this._removeEmptyText(!0)):(e.el.children("div").removeClass("cui_inputCMP_readonly"),this._removeEmptyText(!1))},setReadonly:function(t){this.setReadOnly(t)},focus:function(){var t=this.options;return t.readonly||t.el.find(":text, :password")[0].focus(),this},_changeHander:function(t){{var e=this.options;this.$input}return e.readonly?!1:(""!==this.getValue()?this.$empty.html(""):""!==e.emptytext&&this.$empty.html(e.emptytext),this._triggerHandler("change"),void this._customHandler("on_change",t))},_focusHandler:function(t){var e=this.options;return e.readonly?!1:(this._removeEmptyText(!0),e.el.addClass("cui_inputCMP_focus"),this.onValid(),void this._customHandler("on_focus",t))},_blurHandler:function(t){var e=this.options;if(e.readonly)return!1;this._removeEmptyText(!1),e.el.removeClass("cui_inputCMP_focus"),this._textCounter();var i=this.getValue();""!==i&&null!=i&&this._triggerHandler("change"),this._customHandler("on_blur",t)},_keyupHandler:function(t){var e=this.options;return e.readonly?!1:(this._textCounter(),void this._customHandler("on_keyup",t))},_keydownHandler:function(t){var e=this.options;return e.readonly?!1:void this._customHandler("on_keydown",t)},_keypressHandler:function(t){var e=this.options;return e.readonly?!1:void this._customHandler("on_keypress",t)},_customHandler:function(e,i){var n=this.options,s=n[e];"string"===t.type(s)?"function"==typeof window[s]&&window[s].call(this,i,this):"function"==typeof s&&s.call(this,i,this)},_removeEmptyText:function(t){var e=this.options.emptytext,i=this.getValue(),n=this.options;""!==e&&0===i.length&&this.$empty.html(t?"":n.emptytext)},_textCounter:function(){var t=this.options,i=this.getValue().toString();if(t.maxlength>-1){var n=e.String.getBytesLength(i);if(!(n>t.maxlength))return!1;this.$input.val(e.String.intercept(i,t.maxlength))}return!1},onInValid:function(e,i){var n=this,s=n.options;s.el.addClass("cui_inputCMP_error"),null==s.tipTxt&&(s.tipTxt=s.el.attr("tip")||""),s.el.attr("tip",i),t(n.tipPosition,s.el).attr("tipType","error")},onValid:function(){var e=this,i=e.options,n=t(e.tipPosition,i.el).attr("tipID");if(i.el.removeClass("cui_inputCMP_error"),null==i.tipTxt&&(i.tipTxt=i.el.attr("tip")||""),void 0!==n){var s=cui.tipList[n];"undefined"!=typeof s&&s.hide()}i.el.attr("tip",i.tipTxt),t(e.tipPosition,i.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(t,e){function i(){var i=(cui.handleMask,t("#"+a.id));if(o=new e.UI.Overlay,0===i.length){var s="z-index:"+(a.zIndex+1)+";";t("body").append('<div id="'+a.id+'" class="handlemask_wrap" style="'+s+'"></div>'),i=t("#"+a.id)}i.html(a.html),i.css({visibility:"hidden",display:"block"}),n(),i.css({visibility:"visible",display:"none"})
}function n(){var e=t("#"+a.id);e.css({margin:"-"+e.height()/2+"px 0 0 -"+e.width()/2+"px"})}function s(){t("#"+a.id).remove(),a.mask&&o.hide(.5),o._dom.remove(),o=void 0}var o=null,a={};cui.handleMask=function(n){return n="object"===t.type(n)?n:{},0!==t("#"+a.id).length&&s(),a=t.extend(!0,{html:'<div class="handlemask_image_1"></div>',mask:!0,zIndex:9999999,id:"handleMask_"+e.guid()},n),i(),cui.handleMask},cui.handleMask.show=function(){0===t("div.handlemask_wrap").length&&cui.handleMask();var e=t("#"+a.id);return"true"!==e.attr("isOpen")&&(a.mask&&(o._dom.css("zIndex",a.zIndex).attr("id","ol_"+a.id),o.show(.5)),e.show().attr("isOpen","true")),cui.handleMask},cui.handleMask.hide=function(){if(0!==t("div.handlemask_wrap").length){var e=t("#"+a.id);return e.hide().attr("isOpen","false"),a.mask&&o.hide(.5),cui.handleMask}}}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.ListBox=e.UI.Base.extend({options:{uitype:"ListBox",width:"200",height:"200",name:"listboxName",value:"",value_field:"id",label_field:"text",multi:!1,textmode:!1,datasource:null,on_dbclick:null,on_click:null,on_select_change:null,on_add:null,on_remove:null,icon_path:null},$el:null,listbox:null,hiddenEl:null,listTemplateName:"cListBox",valueField:null,labelField:null,priorElement:null,rowTemplateName:"cListBoxRow",_init:function(){this.$el=t(this.options.el),this._initParams(),this.$el.addClass("cui")},_create:function(){"function"==typeof this.options.datasource&&this.options.datasource(this,{}),this.listbox=t(".listbox",this.$el),this.hiddenEl=t("[type=hidden]",this.$el),this.valueField=this.options.value_field,this.labelField=this.options.label_field,this._setConfiguration(),this._setDefaultText()},_initParams:function(){this._analysisHtmlTemplate()},_analysisHtmlTemplate:function(){var e=t("a",this.$el);if(!(null==e||"undefine"==typeof e||e.length<1)){var i=this.options.value_field,n=this.options.label_field,s=[];t.each(e,function(){var e={};e[n]=t.trim(t(this).text()),e[i]=t.trim(t(this).attr("value")),s.push(e)}),this.$el.html(""),this.options.datasource=s}},_setConfiguration:function(){this.listbox.width(this.options.width),this.listbox.height(this.options.height)},_selectChangeCallback:function(){var e=this.options.on_select_change;"string"===t.type(e)?window[e](this.getSelectedRows()):t.isFunction(e)&&e(this.getSelectedRows())},setDatasource:function(t){this.options.datasource=t,this._renderElement()},setMulti:function(t){var e=this.options;e.multi!==t&&"boolean"==typeof t&&(e.multi=t,this.cancelSelected())},_renderElement:function(){var e=t(".tr",this.$el);this._buildTemplate(e,this.rowTemplateName,this.options)},_setDefaultText:function(){if(this.options.value){var e=t(".tr",this.$el),i=this.options.multi?this.options.value.split(";"):this.options.value,n=this.options.value_field,s=[],o=this.options.datasource,a=this;t.each(o,function(o,r){a.options.multi?t.each(i,function(i,o){o==r[n]&&(t("li[name="+o+"]",e).addClass("selected"),s.push(r[n]))}):i==r[n]&&(t("li[name="+i+"]",e).addClass("selected"),s.push(r[n]))}),this.hiddenEl.val(s.join(";"))}},setWidth:function(t){this.listbox.width(t)},getRecordData:function(e){var i=this,n=null,s=this.options.datasource;return t.each(s,function(t,s){return s[i.valueField]==e?(n=s,!1):void 0}),n},getLabelValue:function(){if(""==this.options.value||!this.options.textmode)return"";var e=this.options.value.split(";"),i=this.options.value_field,n=this.options.label_field,s=[];return t.each(this.options.datasource,function(o,a){t.each(e,function(t,e){e==a[i]&&s.push(a[n])})}),s.join(";")},deleteRecordData:function(e){var i=this,n=null,s=this.options.datasource,o=[];return""!=this.hiddenEl.val()&&(o=this.hiddenEl.val().split(";")),t.each(s,function(t,a){return a[i.valueField]==e?(n=a,s.splice(t,1),o.pop(e),!1):void 0}),this.hiddenEl.val(o.join(";")),n},getValue:function(){var e=this.options.value_field,i=[],n=this.getSelectedRows();return n=null===n?[]:this.options.multi?n:[n],t.each(n,function(t,n){i.push(n[e])}),i.join(";")},getText:function(){var e=this,i=[],n=this.getSelectedRows();return n=null===n?[]:this.options.multi?n:[n],t.each(n,function(t,n){i.push(n[e.labelField])}),i.join(";")},setValue:function(e){var i=e+"",n=i.split(";");if(this.options.multi||!(n.length>1)){var s=[];this.cancelSelected(),t(".td",this.$el).each(function(){t.inArray(t(this).attr("name"),n)>=0&&(s.push(t(this).attr("name")),t(this).addClass("selected"))}),this.hiddenEl.val(s.join(";"))}},addRows:function(e){var i=[],n=this,s=!0;if(!(null==e||e.length<1)){var o=e;if(t.isPlainObject(e)&&(o=[],o.push(e)),null!=this.options.datasource){if(t.each(o,function(e,o){s=!0,t.each(n.options.datasource,function(t,e){return e[n.valueField]===o[n.valueField]?(s=!1,!1):void 0}),s&&i.push(o)}),i.length<1)return}else i=o,n.options.datasource=[];var a=t.extend({},this.options);a.datasource=i,this.options.datasource=this.options.datasource.concat(i),this._buildTemplate(t(".tr",this.$el),this.rowTemplateName,a,!0);var r=this.options.on_add;"string"===t.type(r)?window[r](i):t.isFunction(r)&&r(i)}},removeRow:function(e){var i=null,n=t("li[name="+e+"]",this.$el);n&&(i=this.deleteRecordData(e),n.remove());var s=this.options.on_remove;return"string"===t.type(s)?window[s]([i]):t.isFunction(s)&&s([i]),i},removeSelectedRows:function(){var e=[],i=this;t(".selected",this.$el).each(function(){e.push(i.deleteRecordData(t(this).attr("name"))),t(this).remove()});var n=this.options.on_remove;return"string"===t.type(n)?window[n](e):t.isFunction(n)&&n(e),e},removeAllRows:function(){var e=[],i=this.options.datasource;t(".td",this.$el).remove(),null!=i&&i.length>0&&(e=i.splice(0,i.length)),this.hiddenEl.val("");var n=this.options.on_remove;return"string"===t.type(n)?window[n](e):t.isFunction(n)&&n(e),e},getRow:function(e){var i=this.getRowSize(),n=null;if(i>e){var s=t(".td",this.$el).eq(e).attr("name");n=this.getRecordData(s)}return n},getSelectedRows:function(){var e=this.options.multi?[]:null,i=this;return t(".selected",this.$el).each(function(){i.options.multi?e.push(i.getRecordData(t(this).attr("name"))):e=i.getRecordData(t(this).attr("name"))}),e},selectRow:function(e){var i=[];""!=this.hiddenEl.val()&&(i=this.hiddenEl.val().split(";")),e>=0&&e<this.getRowSize()&&(t(".td",this.$el).eq(e).addClass("selected"),i.push(t(".td",this.$el).eq(e).attr("name")),this.hiddenEl.val(i.join(";"))),this._selectChangeCallback()},selectAllRows:function(){if(this.options.multi){var e=[];t(".td",this.$el).each(function(){t(this).addClass("selected"),e.push(t(this).attr("name"))}),this.hiddenEl.val(e.join(";")),this._selectChangeCallback()}},cancelSelected:function(){t(".selected",this.$el).each(function(){t(this).removeClass("selected")}),this.hiddenEl.val(""),this._selectChangeCallback()},getAllRows:function(){return this.options.datasource},moveRow:function(e,i){var n=this.getRowSize();if(e>=0&&n>e&&i>=0&&n>i&&e!=i){var s=t(".td",this.$el);i>e?s.eq(i).after(s.eq(e)):s.eq(i).before(s.eq(e)),this.options.datasource.splice(i,0,this.options.datasource.splice(e,1)[0])}},moveUp:function(){for(var t,e=this.getSelectedRows(),i=(this.getRowSize(),0),n=e.length;n>i&&(t=this._getRowIndexByName(e[i][this.valueField]),0!=t);i++)this.moveRow(t,t-1)},moveDown:function(){for(var t,e=this.getSelectedRows(),i=this.getRowSize(),n=e.length-1;n>=0&&(t=this._getRowIndexByName(e[n][this.valueField]),t!=i-1);n--)this.moveRow(t,t+1)},getRowSize:function(){return t(".td",this.$el).length},_getRowDataByKey:function(e){var i=this,n=this.options.datasource,s=null;return t.each(n,function(t,n){return n&&n[i.valueField]==e?(s=n,!1):void 0}),s},_getRowIndexByName:function(e){var i=t("li",this.$el).index(t("li[name="+e+"]",this.$el));return i},_rowClick:function(e,i){var n="selected",s=t(i),o=[];if(""!=this.hiddenEl.val()&&(o=this.hiddenEl.val().split(";")),s.hasClass(n)){this.priorElement=null,s.removeClass(n);for(var a=s.attr("name"),r=0,l=o;l>r;r++)if(o[r]==s.attr("name")){o.splice(r,1);break}}else if(this.options.multi)if(this.options.multi&&e.shiftKey){if(null==this.priorElement)this.priorElement=s.attr("name"),o.push(this.priorElement);else{var d=this._getRowIndexByName(s.attr("name")),h=this._getRowIndexByName(this.priorElement),c=t(".td",this.$el);t(".selected",this.$el).each(function(){t(this).removeClass("selected")}),this.hiddenEl.val("");for(var r=Math.min(d,h),l=Math.max(d,h);l>=r;r++)c.eq(r).addClass(n),o.push(c.eq(r).attr("name"))}s.addClass(n)}else this.priorElement=s.attr("name"),o.push(this.priorElement),s.addClass(n);else t(".selected",this.$el).each(function(){t(this).removeClass("selected")}),this.hiddenEl.val(""),s.addClass(n),o=[],o.push(s.attr("name"));this.hiddenEl.val(o.join(";"));var u=this.options.on_click;if("string"===t.type(u)){var a=t(i).attr("name");window[u](this._getRowDataByKey(a))}else if(t.isFunction(u)){var a=t(i).attr("name");u(this._getRowDataByKey(a))}this._selectChangeCallback()},_rowDblClick:function(e,i){var n=this.options.on_dbclick;if("string"===t.type(n)){var s=t(i).attr("name");window[n](this._getRowDataByKey(s))}else if(t.isFunction(n)){var s=t(i).attr("name");n(this._getRowDataByKey(s))}},_trhoverin:function(e,i){var n="hover";t(i).addClass(n)},_trhoverout:function(e,i){var n="hover";t(i).removeClass(n)},_setCacheData:function(t,e){this.$el.data(t,e)},_getCacheData:function(t){return this.$el.data(t)},_removeCacheData:function(t){this.$el.removeData(t)}})}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.InputMask={Datetimes:"9999-1m-td 2h:59:59",Times:"2h:59:59",Time:"2h:59",Datetime:"9999-1m-td 2h:59",Date:"9999-1m-td",Int:{precision:0,prefix:"",separator:","},Dec:{precision:null,prefix:"",separator:","},Num:{precision:0,prefix:"",separator:""},Money:{precision:2,prefix:"",separator:",",negative:!1},Integer:{precision:0,prefix:""},definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",d:"d",m:"m",h:"h",t:"t",1:"[0-1]",2:"[0-2]",3:"[0-3]",4:"[0-4]",5:"[0-5]",6:"[0-6]",7:"[0-7]",8:"[0-8]"},dataName:"rawMaskFn",doMask:function(e,i,n){var s=i.toLocaleLowerCase(),o=t(e);switch(s){case"int":case"num":case"dec":case"money":var a;a=t.extend(!0,{},this[i],n),("int"===s||"num"===s)&&(a.precision=0),o.data("inputMaskModel",a),o.numberFormat(i,a);break;case"integer":o.scrapNumFormat(this[i].precision,this[i].prefix);break;case"custom":n&&n.model&&o.mask(n.model,n);break;default:this[i]&&o.mask(this[i],n)}},unMaskValue:function(e,i){var n=i.toLocaleLowerCase(),s=t(e);switch(n){case"int":case"num":case"dec":case"money":var o=s.data("inputMaskModel"),a=t.trim(o.prefix+o.separator),r=t.trim(s.val());if(""!==r){if(""===a)return r.replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1");var l=new RegExp("["+a+"]","g");return s.val().replace(l,"").replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1")}return"";case"integer":return t(e).val().replace(/,/g,"");case"custom":return t(e).mask();default:return t(e).val()}}};var i=(e.Browser.isIE?"paste":"input")+".mask",n=void 0!=window.orientation;t.fn.extend({caret:function(e,i){if(0!=this.length){if("number"==typeof e)return i="number"==typeof i?i:e,t("#test").val(e+":"+i),this.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,i);else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",i),t.moveStart("character",e),t.select()}});if(this[0].setSelectionRange)e=this[0].selectionStart,i=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),i=e+n.text.length}return{begin:e,end:i}}},unmask:function(){return this.trigger("unmask")},mask:function(s,o){if(!s&&this.length>0){var a=t(this[0]);return a.data(e.UI.InputMask.dataName)()}o=t.extend({placeholder:"_",completed:null},o);var r=e.UI.InputMask.definitions,l=[],d=s.length,h=null,c=s.length;return t.each(s.split(""),function(t,e){"?"==e?(c--,d=t):r[e]?(l.push(r[e]),null==h&&(h=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function a(t){for(;++t<=c&&!l[t];);return t}function u(t){for(;--t>=0&&!l[t];);return t}function p(t,e,i){switch(t){case"m":var n=x.val().substring(i-1,i),s=parseFloat(e);if("0"===n)return s>0&&9>=s;if("1"===n)return s>=0&&3>s;break;case"d":var o=x.val(),n=o.substring(i-1,i),a=o.substring(0,4),r=o.substring(5,7),l=new Date(a,r,0).getDate(),d=(l+"").split("")[0],h=(l+"").split("")[1],s=parseFloat(e);return d>n?0===n?s>0&&9>=s:s>=0&&9>=s:s>=0&&h>=s;case"h":var n=x.val().substring(i-1,i),s=parseFloat(e);if("0"===n||"1"===n)return s>=0&&9>=s;if("2"===n)return s>=0&&3>=s;break;case"t":var o=x.val(),a=o.substring(0,4),r=o.substring(5,7),l=new Date(a,r,0).getDate(),d=(l+"").split("")[0],s=parseFloat(e);return s>=0&&d>=s;default:return new RegExp(t).test(e)}}function f(t,e){if(!(0>t)){for(var i=t,n=a(e);c>i;i++)if(l[i]){if(!(c>n&&p(l[i],w[n],i)))break;w[i]=w[n],w[n]=o.placeholder,n=a(n)}b();var s=h>t?h:t;x.caret(s)}}function g(t){for(var e=t,i=o.placeholder;c>e;e++)if(l[e]){var n=a(e),s=w[e];if(w[e]=i,!(c>n&&p(l[n],s,n)))break;i=s}}function m(t){var e=t.which;if(8==e||46==e||n&&127==e){var i=x.caret(),s=i.begin,o=i.end;return o-s==0&&(s=46!=e?u(s):o=a(s-1),o=46==e?a(o):o),y(s,o),f(s,o-1),!1}return 27==e?(x.val(C),x.caret(0,_()),!1):void 0}function v(t){var e=t.which,i=x.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>e)return!0;if(e){i.end-i.begin!=0&&(y(i.begin,i.end),f(i.begin,i.end-1));var n=a(i.begin-1);if(c>n){var s=String.fromCharCode(e);if(p(l[n],s,n)){g(n),w[n]=s,b();var r=a(n);x.caret(r),o.completed&&r>=c&&o.completed.call(x)}}return!1}}function y(t,e){for(var i=t;e>i&&c>i;i++)l[i]&&(w[i]=o.placeholder)}function b(){return x.val(w.join("")).val()}function _(t){for(var e=x.val(),i=-1,n=0,s=0;c>n;n++)if(l[n]){for(w[n]=o.placeholder;s++<e.length;){var a=e.charAt(s-1);if(p(l[n],a,n)!==!1){w[n]=a,i=n;break}}if(s>e.length)break}else w[n]==e.charAt(s)&&n!=d&&(s++,i=n);return!t&&d>i+1?(x.val(""),y(0,c)):(t||i+1>=d)&&(b(),t||x.val(x.val().substring(0,i+1))),d?n:h}var x=t(this),w=t.map(s.split(""),function(t){return"?"!=t?r[t]?o.placeholder:t:void 0}),C=x.val();x.data(e.UI.InputMask.dataName,function(){return t.map(w,function(t,e){return l[e]&&t!=o.placeholder?t:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.UI.InputMask.dataName)}).bind("focus.mask",function(){C=x.val();var e=_();b();var i=function(){e==s.length?x.caret(0,e):x.caret(e)};(t.browser.msie?i:function(){setTimeout(i,0)})()}).bind("blur.mask",function(){_(),x.val()!=C&&x.change(),o.callback&&o.callback()}).bind("keydown.mask",m).bind("keypress.mask",v).bind(i,function(){setTimeout(function(){x.caret(_(!0))},0)}),_()})},scrapNumFormat:function(t,e){var n=this,s=n.val(),o=function(t,e,i){var n,s,o=t.toString(),a=o.indexOf(".");0>a?(n=o,s=""):(n=o.substring(0,a),s="undefined"==typeof e?o.substring(a):o.substring(a,a+e+1));for(var r=/(-?\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1,$2");return i?i+n+s:n+s},a=function(){var t=n.val();t.match(/^[\+\-]?\d*?\.?\d*?$/)?s=t:n.val(s)},r=function(){n.val(o(n.val(),t,e))},l=function(){var t=n.val();e&&(t=t.replace(e,"")),t=t.replace(/,/g,""),n.val(t),a()};n.attr("readonly")||n.one("unmask",function(){n.unbind(".mask")}).bind("keyup.mask",a).bind(i,a).bind("blur.mask",r).bind("focus.mask",l)},numberFormat:function(n,s){var o=this,a=o.val();if(!/^[-\d\.]*$/.test(a))return o.val(""),void(a="");var r=function(t,i,s,o){var a,r,l,d=t.toString(),h=/(-?\d+)(\d{3})/;if("Money"===n&&null!==i&&"null"!==i&&(d=e.Number.round(d,i-0)||d),"undefined"==typeof e.Number.round(d))return d;if(a=d.indexOf("."),0>a)r=d,l="";else switch(r=d.substring(0,a),i){case"null":case null:l=d.substring(a);break;case"0":l="";break;default:l=d.substring(a,a+i+1)}if(o||""!==o)for(;h.test(r);)r=r.replace(h,"$1"+o+"$2");if(i>0){/\./.test(l)&&(i-=l.length-1);for(var c=0;i>c;c++)l+="0";/\./.test(l)||(l="."+l)}return s?s+r+l:r+l},l={intReg:/^[\+\-]?([1-9]\d*|0)?$/,numReg:/^\d*$/,decReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/,moneyReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/};s.negative===!1&&"Money"===n&&(l.moneyReg=/^([1-9]\d*\.?\d*?|0\.\d*?|0)?$/);var d=function(){var t=o.val();l[n.toLocaleLowerCase()+"Reg"].test(t)?a=t:o.val(a)},h=function(){var e=o.val();if(o.data("orgValue",e),""!==t.trim(e)){var i=r(e,s.precision,s.prefix,s.separator);/^[\-\+]$/.test(e)&&(i=""),o.val(i)}},c=function(){var i=""===t.trim(o.val())?"":o.data("orgValue")||"";if(s.prefix&&(i=i.replace(s.prefix,"")),i=i.replace(/,/g,""),o.val(""===t.trim(i)?"":i),e.Browser.isIE){var n=o.get(0).createTextRange();n.move("textedit"),n.select()}d()};""!==a&&h(),o.one("unmask",function(){o.unbind(".mask")}).unbind(".mask").bind("keyup.mask",d).bind(i,d).bind("blur.mask",h).bind("focus.mask",c)}}),t.mask={},t.mask.definitions=e.UI.InputMask.definitions}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.Menu=e.UI.Base.extend({options:{uitype:"Menu",trigger:"click",width:"",on_click:null,datasource:null},_init:function(){var t=this;t.objMenu=null,t.objItemMap={},t.hideTimeout=null},_create:function(){var t=this,e=this.options.el,i=t.options.trigger;e.bind(i,function(e){e.stopPropagation(),t.show()}),e.bind("mouseout",function(){t.hideTimeout=setTimeout(function(){t.hide()},100)}),e.bind("mouseover",function(){clearTimeout(t.hideTimeout)})},_loadTemplate:function(e,i){var n=this._buildTemplateStr("menuDom",i);n=this._bindTplEvent(n);var s=t(n);e.append(s);for(var o=s.find("li"),a=0;a<i.length;a++){var r=i[a];if(this.objItemMap[r.id]=r,r.disabled&&this._disable(t("#"+r.id)),r.items){var l=o.eq(a);l.find("a").addClass("menu_item_a_background"),this._loadTemplate(l,r.items)}}return s},_loadMenu:function(){if(null==this.objMenu){var e=this.options;t.isFunction(e.datasource)&&(e.datasource=e.datasource()),this.setDatasource(e.datasource)}},setDatasource:function(e){if(e){{this.options}this.objMenu=this._loadTemplate(t("body"),e);var i=this;this.objMenu.bind("mouseover",function(){i.hideTimeout&&clearTimeout(i.hideTimeout)}),this.objMenu.bind("mouseout",function(){i.hideTimeout=setTimeout(function(){i.objMenu.hide()},100)})}},_mouseoverHandler:function(e,i){if(!t("#"+i.id).attr("disabled")){i.mouseTimeout&&clearTimeout(i.mouseTimeout);var n=t(i).children(".menu_box");t(i).parent().children().css("zIndex",1),t(i).css("zIndex",2),n&&(n.show(),this._setItemPosition(n,i),this._setItemsWidth(n.children(".menu"),this.options.width),this._setIframe(n))}},_mouseoutHandler:function(e,i){if(!t("#"+i.id).attr("disabled")){var n=t(i).children(".menu_box");i.mouseTimeout=setTimeout(function(){n.hide()},100)}},_clickHandler:function(i,n){if(!t("#"+n.id).attr("disabled")){if(i.stopPropagation(),e.Browser.isIE6||e.Browser.isIE&&e.Browser.isQM)for(var s=t("#"+n.id);"BODY"!=s[0].tagName;)"DIV"==s[0].tagName&&s.hide(),s=s.parent();this.hide(),this.options.on_click&&this.options.on_click(this.objItemMap[n.id])}},_setItemPosition:function(e,i){var n=e;e=e.children(".menu");var s={},o=t(i),a=o.offset(),r=o.outerHeight(),l=o.outerWidth(),d=e.outerHeight(),h=e.outerWidth(),c=t(window).height(),u=t(window).width();u-(a.left+l+h)<10&&a.left-l>0?(s.left=0-h+4,s.right="auto"):(s.left="auto",s.right=4),c-(a.top+r+d)<10&&a.top-d>0?(s.bottom=0+d-4,s.top="auto"):(s.bottom="auto",s.top=-1),n.css(s)},_setPosition:function(e){var i,n,s=t(e).offset(),o=t(e).outerHeight(),a=t(e).outerWidth(),r=t(window).height(),l=t(window).width(),d=this.objMenu.children(".menu").outerHeight(),h=this.objMenu.children(".menu").outerWidth();i=r-(s.top+o+d)<0&&s.top-d>0?s.top-d:s.top+o,n=l-(s.left+h)<0&&s.left+a-h>0?s.left+a-h:s.left,this.objMenu.css({left:n,top:i})},_setItemsWidth:function(t,e){for(var i=t.children("li"),n=0,s=0;s<i.length;s++){var o=i.eq(s).children("a").children("span").outerWidth();o>n&&(n=o)}e>n?n=e:n+=10,t.width(n)},_setIframe:function(t){e.Browser.isIE6&&t.children("iframe").css({width:t.find(".menu_item").width(),height:t.find(".menu").height()})},_setWidth:function(e){var i;i=this.options.width?parseInt(this.options.width,10):t(e).outerWidth()-2,this.options.width=i,this._setItemsWidth(this.objMenu.children(".menu"),i)},_disable:function(t){var e=t.children("a");e.attr("cui_href",e.attr("href")).attr("href","javascript:;").css("cursor","default").children("span").addClass("menu_item_disable"),t.attr("disabled",!0)},_enable:function(t){var e=t.children("a");e.attr("href",e.attr("cui_href")).removeAttr("cui_href").css("cursor","pointer").children("span").removeClass("menu_item_disable"),t.attr("disabled",!1)},show:function(t){this._loadMenu(),this.objMenu.show(),t||(t=this.options.el),this._setWidth(t),this._setPosition(t),this._setIframe(this.objMenu)},hide:function(){this.objMenu&&this.objMenu.hide()},disable:function(e,i){this._loadMenu();var n=t("#"+e);1==i?this._disable(n):this._enable(n)},setLabel:function(e,i){this._loadMenu();var n=t("#"+e);n.children("a").children("span").html(i)}})}(window.comtop.cQuery,window.comtop),function(t){"use strict";var e=t.cQuery;t.UI.MultiNav=t.UI.Base.extend({options:{uitype:"MultiNav",unfold:!1,initchecked:[],datasource:[],target:"_self",foldercheckable:!1},_init:function(){this.pos=-1},_create:function(){this.root=this.options.root=this.options.el.children(".multinav").eq(0),this._setDatasource(this.options.datasource)},_initcheck:function(t){for(var e=this.root,i=0,n=t.length;n>i;i++){e=e.children("li").eq(t[i]);var s=e.find("a").eq(0);if(!s.hasClass("multinav-fold")){s.addClass("multinav-checked"),this.pos=s.attr("pos");break}i===n-1&&this.options.foldercheckable&&(s.addClass("multinav-checked"),this.pos=s.attr("pos")),s.addClass("multinav-unfold").data("unfold",!0),e=e.children("ul").eq(0),e.addClass("multinav-ul-unfold")}},_bindEvents:function(){var t=this,i=null;this.root.on("mouseover",function(n){n.stopPropagation();var s=e(n.target),o=s.attr("pos");if(o||(s=s.parent(),o=s.attr("pos"))){i=t._getCheckedData(o);var a=i.bind,r=n.type;if("object"==typeof a){var l=a["on_"+r];"function"==typeof l&&(n.target=s[0],l(n,s[0],i))}}}),this.root.on("mouseout dblclick click",function(t){t.stopPropagation();var n=e(t.target),s=n.attr("pos");if(s||(n=n.parent(),s=n.attr("pos"))){var o=t.type,a=i.bind;if("object"==typeof a){var r=a["on_"+o];return"function"==typeof r&&(t.target=n[0],r(t,n[0],i)),!1}}})},_setDatasource:function(t){this.setDatasource(t,void 0),this._bindEvents(),this._initcheck(this.options.initchecked);var e=this;this.root.on("mousedown",function(t){t.stopPropagation(),e._mousedown(t.target)})},setDatasource:function(t,i){function n(t){return new Function(t)}function s(t,i){for(var a=e(document.createDocumentFragment()),r=0,l=t.length;l>r;r++){var d=t[r],h=e(document.createElement("li")),c=e(document.createElement("a"));if(c.attr("hidefocus","true"),h.append(c),d.onclick&&c.click(n(d.onclick)),d.ondblclick&&c.dblclick(n(d.ondblclick)),d.onmouseover&&c.mouseover(n(d.onmouseover)),d.onmouseout&&c.mouseout(n(d.onmouseout)),d.title&&c.attr("title",d.title),c.attr("pos",i+r),d.bind&&c.attr("ev","1"),"string"==typeof d.href?(c.attr("href",d.href),c.attr("target",d.target||o.target)):c.attr("href","javascript:;"),"object"==typeof d.children){c.addClass("multinav-fold").append('<span class="multinav-fold-icon cui-icon">&#xf0da;</span><span class="multinav-unfold-icon cui-icon">&#xf0d7;</span>'+d.name);var u=e("<ul></ul>");u.append(s(d.children,i+r+"-")),h.append(u)}else c.html(d.name);a.append(h)}return a}this.pos=-1;var o=i?e.extend(this.options,i):this.options;this.options.datasource=t,o.root.html(s(t,"")),o.unfold&&this.allUnfold(),i&&i.initchecked&&this._initcheck(i.initchecked)},allUnfold:function(){this.root.find("ul").addClass("multinav-ul-unfold").show().end().find(".multinav-fold").addClass("multinav-unfold").data("unfold",!0)},allFold:function(){this.root.find("ul").removeClass("multinav-ul-unfold").hide().end().find(".multinav-fold").removeClass("multinav-unfold").data("unfold",!1)},_mousedown:function(t){var i=e(t);i="A"===i.prop("tagName")?i:i.parent();var n=i.attr("pos");if(i.hasClass("multinav-fold")){var s=i.data("unfold");s=void 0===s?this.options.unfold:s,s?i.data("unfold",!1).removeClass("multinav-unfold").next("ul").hide():i.data("unfold",!0).addClass("multinav-unfold").next("ul").show(),this.options.foldercheckable&&(this.root.find(".multinav-checked").removeClass("multinav-checked"),i.addClass("multinav-checked"),this.pos=n)}else this.root.find(".multinav-checked").removeClass("multinav-checked"),i.addClass("multinav-checked"),this.pos=n},_getCheckedData:function(t){if(-1===t)return null;var e=this.options.datasource;t=t.split("-");for(var i=t.length,n=0;i-1>n;n++)e=e[parseInt(t[n],10)].children;return e=e[parseInt(t[n],10)]},getCheckedData:function(){var t=this._getCheckedData(this.pos);return null===t||void 0!==t.children&&!this.options.foldercheckable?null:t}})}(window.comtop),function(t,e){"use strict";e.cui||(e.cui={});var i=function(){},n=e.cui,s=t.browser.msie,o=s&&"6.0"===t.browser.version,a=s&&!t.support.boxModel,r=e.document;i.prototype={_template:function(){var e=this.options,i="message"===e.boxType?e.boxType+"-"+e.messageType:e.boxType,n=['<div class="msg-box cui-msg-extend-',i,'"'];return n.push(' id="'+this.buildId+'" style="'),e.width&&n.push("width:"+e.width+"px;"),e.height&&n.push("height:"+e.height+"px;"),n.push('">'),e.canClose===!0&&n.push('<a href="#" hidefocus="true" title="\u5173\u95ed" class="msgbox-close-btn cui-icon"><span class="msgbox-close-btn-span"></span></a>'),n.push('<div class="msgbox-titlebar">'),n.push('<span class="msgbox-title" title="'+e.title.replace(/<.*?>/g,"").replace('"',"\uff02")+'">'+e.title+"</span>"),n.push("</div>"),n.push('<div class="msgbox-content">'),n.push('<div class="box-icon cui-icon '+e.iconCls+'">',e.fontIcon,"</div>"),n.push('<div class="box-msg">'),n.push(e.msg,"</div>"),t.isArray(e.buttons)&&(n.push('<div class="msgbox-ft">'),this._buildButtons(n),n.push("</div>")),n.push("</div>"),n.push("</div>"),n.join("")},_buildButtons:function(t){for(var e=this.options,i=0,n=e.buttons.length;n>i;i++){var s="",o="btn-normal ";"function"==typeof e.buttons[i].handler&&(s+=i),e.buttons[i].focus===!0&&(e._buttonFocusIndex=i),e.buttons[i]._ok_?o+=" btn-normal-ok":e.buttons[i]._cancel_&&(o+=" btn-normal-cancel"),t.push('<a proxyIndex="'+s+'" class="cui-button '+o+'" href="#">'),t.push('<span class="button-icon">&nbsp;</span>'),t.push(e.buttons[i].name+"</a>")}},_addClass:function(){var i=this.options,n=this.$container;"rb"===i.position?(n.addClass("msg-box-rb"),!o&&a&&n.css({bottom:"",top:t(r).scrollTop()+t(e).height()-n.outerHeight()})):"center"===i.position?n.addClass("msg-box-center").css({"margin-left":-n.width()/2,"margin-top":-n.height()/2}):"custom"===i.position&&n.addClass("msg-box-custom").css(i.customPos)},_showOverlay:function(){(o||a)&&(this._ieQScrollTop=t(r).scrollTop(),t(r).scrollTop(0),t("html,body").addClass("cui_overlay_ie6"),this._$iframecover&&this._$iframecover.show()),this.$overlay.show()},_hideOverlay:function(){(o||a)&&(t("html,body").removeClass("cui_overlay_ie6"),this._$iframecover&&this._$iframecover.hide(),this.options.scrollBack===!0&&t(r).scrollTop(this._ieQScrollTop)),this.$overlay.hide()},_doAnimate:function(){var t=this.$container,e=t.height();t.height(0).animate({height:e,opacity:"show"},350)},_bindEvent:function(){var e=this.options,i=this;return this.$container.delegate("a.btn-normal,span.msgbox-close-btn-span","click",function(n){var s=t(n.target),o=s.attr("proxyIndex");return i.hide(),o&&""!==o&&(o=parseInt(o,10),e.buttons[o].handler.call(null)),!1}),e.dragAble&&this._doDrag(),"number"==typeof e._buttonFocusIndex&&this.$container.find(".btn-normal").eq(e._buttonFocusIndex).focus(),!1},_doDrag:function(){var i=this.options,n=!1,s=this,o={top:0,left:0},a=this.$container.outerWidth(),l=this.$container.outerHeight(),d=function(i){var n=t(e).height(),s=t(e).width();i.left+a>=s&&(i.left=s-a),i.top+l>=n&&(i.top=n-l)},h=function(){n=!1,t(r).off("mousemove.msgBoxdrag").off("mouseup.msgBoxdrag"),s._disableSelect(!1)},c=function(t){if(n){var e={left:t.clientX-o.left,top:t.clientY-o.top};e.left=e.left<0?0:e.left,e.top=e.top<0?0:e.top,d(e),s._setPosition(e)}};t(i.dragClass,this.$container).on("mousedown.msgBoxdrag",function(e){var i=this.getBoundingClientRect();o.top=e.clientY-i.top,o.left=e.clientX-i.left,n=!0,t(r).on("mousemove.msgBoxdrag",function(t){c(t)}).on("mouseup.msgBoxdrag",function(){h()}),s._disableSelect(!0)}).on("mouseup.msgBoxdrag",h)},_disableSelect:function(e){e?(t(r.body).addClass("cui-userselectnone"),t(r).on("selectstart",function(){return!1})):(t(r.body).removeClass("cui-userselectnone"),t(r).off("selectstart"))},_setPosition:function(e){this.options;e=t.extend({top:"",left:"",right:"","margin-left":"","margin-top":"",bottom:""},e),this.$container.css(e)},_commonOptions:{msg:"",modal:!0,canClose:!0,autoClose:!1,animate:!1,position:"center",customPos:{},opacity:.5,title:"",width:330,height:0,onClose:null,dragAble:!0,scrollBack:!1,dragClass:".msgbox-titlebar"},wrapOptions:function(t,e,i){var n=i||{};return n.msg=t,n.onClose=e,n},setOptions:function(e,i){var n=t.extend({},this._commonOptions,e,i||{});return this.options=n,n},show:function(){var t=this.options;if(this._addClass(),t.modal&&this._showOverlay(),t.animate&&!a?this._doAnimate():this.$container.show(),"number"==typeof t.autoClose){var i=this;e.setTimeout(function(){i.hide()},t.autoClose)}this._bindEvent()},hide:function(){var t=this.options;t.modal&&this._hideOverlay(),this.$container.hide(),"function"==typeof t.onClose&&t.onClose.call(null)},buildHtml:function(){var e=(900*Math.random()+100).toString().replace(".",""),i=this.options,n=r.createDocumentFragment();this.buildId=e,i.modal&&(this.$overlay=t(r.createElement("div")).addClass("cui_overlay").css("opacity",i.opacity),o&&(this._$iframecover=t(r.createElement("iframe")).addClass("cui_overlay_iframe"),t(n).append(this._$iframecover)),t(n).append(this.$overlay)),t(n).append(this._template()),"message"===this.options.boxType?t(r.body).prepend(n):t(r.body).append(n),this.$container=t("#"+this.buildId)},reBuildHtml:function(){var e=this.options;this.$container.unbind().replaceWith(this._template()),this.$container=t("#"+this.buildId),"message"!==e.boxType&&(this._$iframecover&&this._$iframecover.appendTo(r.body),this.$overlay&&this.$overlay.appendTo(r.body),this.$container.appendTo(r.body))}};var l=function(t,e){var i={alert:"box-icon-alert",success:"box-icon-success",confirm:"box-icon-confirm",error:"box-icon-error",warn:"box-icon-warn"};e.iconCls=i[t]||"box-icon-alert"},d=function(t,e,s,o,a){var r=null;n[a].builded?(r=n[a].builded,s=r.wrapOptions(t,e,s),s.boxType=a,r.setOptions(o,s),r.reBuildHtml()):(r=new i,s=r.wrapOptions(t,e,s),s.boxType=a,r.setOptions(o,s),r.buildHtml(),n[a].builded=r),r.show()};n.alert=function(t,e,i){var n={title:"\u63d0\u793a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-alert",fontIcon:"&#xf05a;"};d(t,e,i,n,"alert")},n.warn=function(t,e,i){var n={title:"\u8b66\u544a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-warn",fontIcon:"&#xf06a;"};d(t,e,i,n,"warn")},n.success=function(t,e,i){var n={title:"\u63d0\u793a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-success",fontIcon:"&#xf058;"};d(t,e,i,n,"success")},n.error=function(t,e,i){var n={title:"\u9519\u8bef",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-error",fontIcon:"&#xf057;"};d(t,e,i,n,"error")},n.message=function(t,e,i){var n={modal:!1,canClose:!1,autoClose:1500,animate:!0,width:180,position:"rb",title:"\u63d0\u793a",dragAble:!1,buttons:null},s={error:"&#xf057;",success:"&#xf058;",warn:"&#xf06a;",alert:"&#xf05a;"};i=i||{},l(e,i),i.messageType=e?e:"alert",i.fontIcon=s[i.messageType],d(t,null,i,n,"message")},n.confirm=function(t,e){var i={title:"\u786e\u8ba4",iconCls:"box-icon-confirm",fontIcon:"&#xf059;"};e=e||{},e.buttons=e.buttons||[{name:"\u786e\u5b9a",handler:e.onYes,focus:!0,_ok_:!0},{name:"\u53d6\u6d88",handler:e.onNo,_cancel_:!0}],d(t,null,e,i,"confirm")}}(window.comtop?window.comtop.cQuery:window.jQuery,window),function(t){"use strict";var e=t.cQuery,i=t.Browser,n=i.isQM;t.UI.PullDown=t.UI.Base.extend(function(){return{options:{uitype:"PullDown",empty_text:"\u8bf7\u9009\u62e9",value:"",readonly:!1,textmode:!1,width:"200",height:"200",editable:!0,on_select_data:null,mode:"Single",datasource:null,name:"",select:-1,must_exist:!0,auto_complete:!1,value_field:"id",label_field:"text",filter_fields:[],on_filter_data:null,on_change:null,on_filter:null},_init:function(n,s){var o=this.options;
"pulldown"===o.uitype.toLocaleLowerCase()&&this._extendMode(s),this._initWidthAndHeight((n.width||o.width).toString(),(n.height||o.height).toString()),this.$el=o.el.addClass("pulldown-main").css("width",o.width),this.ltIE8=i.isIE6||i.isIE7,i.isQM&&this.ltIE8&&this.$el.addClass("pulldown-main-qm"),this.templateBox=e(document.createElement("div")).html(this.$el.html()),this.guid=t.guid(),this.text="",this.value="",this.valueCache="",this.isHide=!0,this.top=window.location===window.parent.location,this.eqEmptyText=!1,this.rendered=!1,this.oldData=null,this.position={}},_extendMode:function(i){var n,s,o,a=this.options.mode;if(a=a.charAt(0).toUpperCase()+a.slice(1).toLocaleLowerCase()+"PullDown",n=t.UI[a],!n)throw new Error("mode\u5c5e\u6027\u9519\u8bef\u3002");s=n.prototype;for(o in s)s.hasOwnProperty(o)&&!this[o]&&(this[o]=s[o]);this.options=e.extend({},s.options,i)},_initWidthAndHeight:function(t,e){var i=this.options;"string"!=typeof t||/%/.test(t)||(i.width=t.replace(/\D+/g,"")+"px"),e&&(this.height=parseInt(e,10)-2,i.height=this.height+"px")},setTextMode:function(){this._initData()},_create:function(){this.tipPosition=".pulldown-inner",this.tipText=this.$el.attr("tip"),this._createDom(),this._bindFocusBlurEvent(),this._bindMouseEvent(),this._bindKeyEvent(),this._resetLayoutEvent(),this._initData(),this.setReadonly(this.options.readonly)},_createDom:function(){var t,n,s=this.options,o=this.$el,a="";t=['<div class="pulldown-inner pulldown-readonly">','<input class="pulldown-text" readonly="readonly" type="text" autocomplete="off" value="',s.empty_text,'" />','<a href="javascript:;" hidefocus="true" class="pulldown-btn pulldown-loading cui-icon">&#xf107;</a>',"</div>",'<input type="hidden" class="pulldown-hidden" name="',s.name,'" />'],o.html(t.join("")),n=e(document.createElement("div")).addClass("pulldown-box"),i.isIE6&&(a='<iframe scrolling="no" frameborder="no"></iframe>'),n.html(a+'<div class="pulldown-box-inner"></div>'),e("body").append(n),this.$inner=o.find(".pulldown-inner").eq(0),this.$text=o.find(".pulldown-text").eq(0),i.isQM&&this.$text.addClass("pulldown-text-qm"),this.$btn=o.find(".pulldown-btn").eq(0),this.$hide=o.find(".pulldown-hidden").eq(0),this.$box=n,this.$boxInner=n.find(".pulldown-box-inner").eq(0)},_bindFocusBlurEvent:function(){var t=this;this.$text.on("focus",function(){t.inValid&&t.onValid(),t._showBox()}).on("blur",function(){t._hideBox()})},_showBox:function(){var t=this.$el[0].getBoundingClientRect();this.position.top=t.top,this.position.left=t.left,this.isHide!==!1&&(this.isHide=!1,this._setBoxLayout(this._setBoxPosition(t)),this.listenPosition(),this._isEmpty(),this.$inner.addClass("pulldown-inner-focus"),this.rendered?(this.setOldData(),this.__showBoxCallBack&&this.__showBoxCallBack()):this._callDataSource())},destroy:function(){this.$box.remove(),this.$el.remove()},listenPosition:function(){var t=this,e=t.$el[0];clearInterval(this.listenBoxPostion),this.listenBoxPostion=setInterval(function(){var i=e.getBoundingClientRect(),n=t.position;(i.left!==n.left||i.top!==n.top)&&t.$text.blur()},10)},_callDataSource:function(){this.dataCalling||(this.$btn.addClass("pulldown-loading"),this.options.datasource.call(this,this),this.dataCalling=!0)},_isEmpty:function(){var t,e,i,n=this.$text;if(this.rendered&&(this.eqEmptyText||this._isEqEmptyText()))return void n.addClass("pulldown-text-value");switch(t=n.val(),e=this.isHide,i=this.options.empty_text,t){case"":e&&n.val(i).removeClass("pulldown-text-value");break;case i:e||n.val("").addClass("pulldown-text-value");break;default:n.addClass("pulldown-text-value")}},_isEqEmptyText:function(){for(var t=this.data,e=t.length,i=this.options,n=i.empty_text,s=i.label_field,o=0;e>o;o++)if(n===t[o][s])return this.eqEmptyText=!0,!0;return!1},_setBoxPosition:function(t){var i=28,s=n?0:2,o=10,a=t.left+e(window).scrollLeft(),r=this._getRealHeight(),l=r+i+s,d=t.top+e(window).scrollTop()+i;return d>Math.max(e.page.height(),e.client.height())-r-o&&d>r+i&&(d-=l),this.$box.css(this.ltIE8&&this.top?{left:a-2,top:d-2}:{left:a,top:d}),r},_getRealHeight:function(){return Math.min(this.height,this.$boxInner.css("height","auto").outerHeight()||28)},_setBoxLayout:function(t){this.$box.css({height:t,width:this.$el.width()-(n?0:2)})},_hideBox:function(){if(this.isHide!==!0){if(this.hideAble===!1)return void this.$text.focus();this.isHide=!0,this.$box.css("top","-999999px"),clearInterval(this.listenBoxPostion),this.$inner.removeClass("pulldown-inner-focus"),this.rendered?(this.__hideBoxCallBack&&this.__hideBoxCallBack(),this._triggerChange(!1,!1)):this._isEmpty()}},setOldData:function(){var t=this.selectData,i=e.type(t);this.valueCache=this.value,this.oldData="array"===i?e.extend(!0,[],t):"object"===i?e.extend(!0,{},t):null},_triggerChange:function(t,e){var i,n,s;this.valueCache===this.value||t||(s=this.options,i=s.on_select_data,e||(this._triggerHandler("change"),n=s.on_change,"function"==typeof n&&n.call(this,this.selectData,this.oldData)),"function"==typeof i&&i.call(this,this.selectData))},_bindMouseEvent:function(){var t,i=this,n=this.$text,s=function(){i.hideAble=!1};this.$btn.on("mouseup",function(t){i.hideAble=!0,t.stopPropagation(),i.readonly||(i.isHide?n.focus():n.blur())}).on("mousedown",s),this.$box.on("mouseout",function(s){t=s.relatedTarget,i.hideAble!==!1||e(this).find(t).length||this===t||(i.hideAble=!0,n.blur())}).on("mouseup",function(t){t.stopPropagation(),i.hideAble=!0,i.__mouseUpHandler(t)}).on("mousedown",s)},_bindKeyEvent:function(){var t,e=this,i=this.options;this.$text.on("keydown",function(n){switch(t=n.keyCode){case 8:i.editable||n.preventDefault();break;case 38:e.__keyDownUPHandler&&e.__keyDownUPHandler();break;case 40:e.__keyDownDownHandler&&e.__keyDownDownHandler();break;case 37:e.__keyDownLeftHandler&&e.__keyDownLeftHandler();break;case 39:e.__keyDownRightHandler&&e.__keyDownRightHandler();break;case 13:e.__keyDownEnterHandler&&e.__keyDownEnterHandler();break;default:e.__keyDownHandler&&e.__keyDownHandler()}}).on("keyup",function(t){i.editable&&e.__keyUpHandler&&e.__keyUpHandler(t)})},_resetLayoutEvent:function(){var t=this,i=this.$el[0];e(window).on("resize scroll",function(){var e,n;t.isHide||(e=i.getBoundingClientRect(),n=t.position,(e.left!==n.left||e.top!==n.top)&&t.$text.blur())})},_initData:function(){var t,i,n,s,o,a,r=this.options,l=this.templateBox.find("a[value]"),d=l.length;if(d)for(o=r.value_field,a=r.label_field,t=[],n=0;d>n;n++)s=t[n]={},s[o]=l.eq(n).attr("value"),s[a]=e.trim(l.eq(n).html());t=t||r.datasource,i=e.type(t),"function"===i?""!==r.value||-1!==r.select?this._callDataSource():this.$btn.removeClass("pulldown-loading"):this.setDatasource("array"===i?t:[])},setDatasource:function(t){var i,n,s,o=this.options;return this.data=e.extend(!0,[],t),o.textmode?(this.__renderTextMode(),this.$el.addClass("pulldown-textmode")):(this.$btn.removeClass("pulldown-loading"),i=this.rendered,this.__initMode(i),i?this._emptyStat():(this.rendered=!0,s=o.value,n=o.select,s?this.setValue(s,!1,!0):n>-1&&n<t.length&&this.setValue(t[n][o.value_field],!1,!0),o.editable&&this.$text.removeAttr("readonly")),this.isHide||this._setBoxLayout(this._setBoxPosition(this.$el[0].getBoundingClientRect()))),this},setDataSource:function(t){return this.setDatasource(t)},_emptyStat:function(){this.text="",this.value="",this.valueCache="",this.selectData=null,this.$text.val(""),this.$hide.val(""),this.eqEmptyText=!1,this._isEmpty()},resetDataSource:function(t){return this.setDatasource(t),this},_setProp:function(t){var e=t.text,i=t.value||e,n=t.data;this.text=e,this.value=i,this.selectData=n,this.$text.val(e),this.$hide.val(i),this._isEmpty()},open:function(){return this.$text.focus(),this},setWidth:function(t){var e=this.options;return"string"==typeof t&&/%/.test(t)?e.width=t:this._initWidthAndHeight(t+""),this.$text.blur(),this.$el.css("width",e.width),this},setValue:function(t,e,i){return this.rendered?(this.setOldData(),this.__setValue("undefined"==typeof t?this.options.value:t),this._triggerChange(e,i)):(this.options.value=t,this.$hide.val(t),this._callDataSource()),this},getValue:function(){return this.rendered?this.value:this.options.value},getData:function(){var t=this.selectData,i=e.type(t);switch(i){case"array":return e.extend(!0,[],this.selectData);case"object":return e.extend(!0,{},this.selectData);default:return null}},getText:function(){return this.__getText()},setReadonly:function(t){return t===!0?(this.readonly=!0,this.$inner.addClass("pulldown-readonly"),this.$text.attr("disabled","disabled"),this.$text.blur()):t===!1&&(this.readonly=!1,this.$inner.removeClass("pulldown-readonly"),this.$text.removeAttr("disabled")),this},setEditAble:function(t){t=!!t,this.options.editable=t,t?this.$text.removeAttr("readonly"):this.$text.attr("readonly","readonly")},onInValid:function(t,i){this.$inner.addClass("pulldown-error"),this.$el.attr("tip",i),e(this.tipPosition,this.options.el).attr("tipType","error"),this.inValid=!0},onValid:function(){var t,i=this.$el,n=i.find(this.tipPosition).eq(0).attr("tipID");this.$inner.removeClass("pulldown-error"),void 0!==n&&(t=window.cui.tipList[n],"undefined"!=typeof t&&t.hide()),i.attr("tip",this.tipText||""),e(this.tipPosition,this.options.el).attr("tipType","normal"),this.inValid=!1}}}())}(window.comtop),function(t){"use strict";var e=t.cQuery;t.UI.SinglePullDown=t.UI.PullDown.extend({options:{name:"pullDownName",uitype:"SinglePullDown"},__initMode:function(t){this.index=-1,t?this.$hideListBox.html(""):this.$hideListBox=e(document.createElement("div")),this.__createList()},__renderTextMode:function(){var t,e=this.options,i=this.data;this.size=i.length,t=this.__getIndex(e.value),t>-1&&this.$el.html(i[t][e.label_field])},__createList:function(){var t,e,i,n,s,o,a=this.$boxInner,r=this.data,l=this.size=r.length,d=[],h=this.options.label_field;for(t=0;l>t;t++)o=r[t][h],d.push('<a class="pulldown-list" href="javascript:;" index="',t,'" title="',o,'">',o,"</a>");for(a.html(d.join("")),i=a.find(".pulldown-list"),n=this.list=[],s=this.indexList=[],e=0;l>e;e++)n[e]=i.eq(e),s[e]=e},__filterList:function(t){var e,i,n,s,o,a,r,l,d,h,c,u,p,f;if(""===t)return void this.__recoverBox();if(!this.__filterCustom(t)&&!this.__filterCustomData(t)){e=this.options,i=this.data,s=this.$boxInner,o=this.size,a=e.label_field,r=e.filter_fields,d=r.length,h=this.$hideListBox,p=this.list,f=this.indexList=[];t:for(c=0;o>c;c++)if(n=i[c],-1!==n[a].indexOf(t))s.append(p[c]),f.push(c);else{if(d)for(u=0;d>u;u++)if(l=n[r[u]],"string"==typeof l&&-1!==l.indexOf(t)){s.append(p[c]),f.push(c);continue t}h.append(p[c])}}},__filterCustomData:function(t){var i,n,s,o,a,r,l,d,h,c,u,p,f=this.options,g=f.on_filter_data;if("function"==typeof g){if(c=g.call(this,this,t),"array"===e.type(c)){l=this.data,d=this.size,n=this.$boxInner,s=this.indexList=[],o=this.$hideListBox,a=this.list,i=f.value_field;t:for(r=0;d>r;r++){for(h=l[r],u=c.length;u--;)if(p=c[u],h[i]===p[i]){n.append(a[r]),s.push(r);continue t}o.append(a[r])}}return!0}},__filterCustom:function(t){var i,n,s,o,a,r,l=this.options,d=l.on_filter;if("function"==typeof d){if(r=d.call(this,this,t),"array"===e.type(r))for(i=this.$boxInner,n=this.indexList=[],s=this.$hideListBox,o=this.list,a=this.size;a--;)r[a]===!0?(i.append(o[a]),n.push(a)):s.append(o[a]);return!0}},__getIndex:function(t,e){var i,n=this.options,s=t||e,o=n.value_field,a=this.data,r=this.size;for(void 0===t&&(o=n.label_field),i=0;r>i;i++)if(a[i][o]===s+"")return i;return-1},__showBoxCallBack:function(){var t=this.index;-1!==t&&this.__scrollHoverPosition(t)},__hideBoxCallBack:function(){this.options.editable&&!this.selectEvent&&this.__checkSelect(this.__getIndex(void 0,this.$text.val())),this.selectEvent=!1,this.__recoverBox(),this.__clearHover()},__clearHover:function(){var t=this.hoverIndex;"undefined"!=typeof t&&(this.list[this.indexList[t]].removeClass("pulldown-hover"),delete this.hoverIndex)},__recoverBox:function(){var t,e=this.list,i=this.indexList=[],n=this.size,s=this.$boxInner;for(t=0;n>t;t++)s.find(e[t]).length||s.append(e[t]),i.push(t)},__setValue:function(t){this.__checkSelect(this.__getIndex(t))},__checkSelect:function(t){var e,i=this.options,n=i.label_field,s=i.value_field,o=this.list,a=this.index;-1!==a&&o[a].removeClass("pulldown-checked"),-1!==t?(o[t].addClass("pulldown-checked"),e=this.data[t],this._setProp({text:e[n],value:e[s],data:e})):this._setProp({value:"",text:i.must_exist?"":this.$text.val(),data:null}),this.index=t},__mouseUpHandler:function(t){var i,n=e(t.target);this.selectEvent=!0,n.hasClass("pulldown-list")?(i=n.attr("index"),i&&this.__checkSelect(i-0),this.$text.blur()):this.size||this.$text.blur()},__keyDownUPHandler:function(){var t,e,i=this.indexList,n=i.length;n&&(t=this.list,e=this.hoverIndex,"undefined"==typeof e?(e=n-1,t[i[e]].addClass("pulldown-hover")):(t[i[e]||0].removeClass("pulldown-hover"),-1===--e&&(e=n-1),t[i[e]].addClass("pulldown-hover")),this.hoverIndex=e,this.__scrollHoverPosition(e))},__keyDownDownHandler:function(){var t,e,i=this.indexList,n=i.length;n&&(t=this.list,e=this.hoverIndex,"undefined"==typeof e?(e=0,t[i[0]].addClass("pulldown-hover")):(t[i[e]||0].removeClass("pulldown-hover"),n===++e&&(e=0),t[i[e]].addClass("pulldown-hover")),this.hoverIndex=e,this.__scrollHoverPosition(e))},__scrollHoverPosition:function(t){var e=28,i=this.$box,n=t*e,s=n+e-i.height();i.scrollTop()<s?i.scrollTop(s):i.scrollTop()>n&&i.scrollTop(n)},__keyDownEnterHandler:function(){var t=this.hoverIndex;this.selectEvent=!0,"undefined"!=typeof t&&this.__checkSelect(this.indexList[t]),this.$text.blur()},__keyUpHandler:function(t){var e=t.keyCode;this.options.auto_complete&&13!==e&&37!==e&&38!==e&&39!==e&&40!==e&&(this.__clearHover(),this.__filterList(this.$text.val()))},__getText:function(){return this.text}})}(window.comtop),function(t){"use strict";var e=t.cQuery,i=t.UI.SinglePullDown.prototype;t.UI.MultiPullDown=t.UI.PullDown.extend({options:{uitype:"MultiPullDown",name:"MultiPullDownName"},__initMode:function(t){this.index=[],this.checkAll=!1,this.__createList(t)},__renderTextMode:function(){var t,e,i,n=this.options,s=n.value.split(/;|\uff1b/),o=s.length,a=n.label_field,r=n.value_field,l=this.data,d=[],h=l.length;if(o){for(e=0;h>e;e++)for(t=l[e],i=0;o>i;i++)t[r]===s[i]&&d.push(t[a]);this.$el.html(d.join(";"))}},__createList:function(t){var e,i,n,s,o,a,r=this.data,l=this.$box,d=this.size=r.length,h=[],c=this.options.label_field;for(e=0;d>e;e++)a=r[e][c],h.push('<a class="pulldown-list" href="javascript:;" index="',e,'" title="',a,'">',a,"</a>");for(t?this.__setAllCheck(!1):(l.addClass("multi-pulldown-box").append('<div class="pulldown-list-all"><a href="javascript:;" class="pulldown-list">\u5168\u9009</a></div>'),this.allCheckDom=l.find(".pulldown-list-all").eq(0).find(".pulldown-list").eq(0),this.__bindAllAcitveEvent()),d?l.find(".pulldown-list-all").eq(0).show():l.find(".pulldown-list-all").eq(0).hide(),n=this.$boxInner.html(h.join("")).find(".pulldown-list"),s=this.list=[],o=this.indexList=[],i=0;d>i;i++)s[i]=n.eq(i),o[i]=i},__bindAllAcitveEvent:function(){var t,e,i=this;this.allCheckDom.on("click",function(n){if(n.stopPropagation(),i.checkAll)i.index=[];else{for(t=[],e=i.size;e--;)t[e]=!0;i.index=t}i.__setInputProp()})},__setAllCheck:function(t){var e="\u5168\u9009",i="\u53d6\u6d88";this.checkAll=t,t?this.allCheckDom.addClass("pulldown-checked").html(i):this.allCheckDom.removeClass("pulldown-checked").html(e)},__showBoxCallBack:function(){var t=this.index,e=t.length,i=0;if(e){for(;e>i;i++)if(t[i]===!0){this.__scrollHoverPosition(i);break}}else this.__scrollHoverPosition(0)},__hideBoxCallBack:function(){this.__clearHover(),this.options.editable&&this.__setIndex(void 0,this.$text.val())},__setIndex:function(t,e){var i,n,s,o,a,r,l=this.options,d=l.value_field,h=void 0===t?e:t;if("string"==typeof h){for(i=this.index=[],n=this.data,s=this.size,void 0===t&&(d=l.label_field),h=h.split(/;|\uff1b/),r=h.length,o=0;s>o;o++)for(a=0;r>a;a++)n[o][d]===h[a]&&(i[o]=!0);this.__setInputProp()}},__setInputProp:function(){var t,e,i=this.options,n=i.label_field,s=i.value_field,o=this.size,a=this.data,r=this.index,l=this.list,d=0,h=[],c=[],u=[];for(e=0;o>e;e++)t=a[e],r[e]?(d++,l[e].addClass("pulldown-checked"),h.push(t[n]),c.push(t[s]),u.push(t)):l[e].removeClass("pulldown-checked");this.__setAllCheck(d===o&&0!==o),this._setProp({text:h.join(";"),value:c.join(";"),data:u})},__clearHover:i.__clearHover,__setValue:function(t){this.__setIndex(t)},__checkSelect:function(t){var e=this.index;0>t||t>=this.size||(e[t]=!e[t],this.__setInputProp())},__mouseUpHandler:function(t){var i,n=e(t.target);n.hasClass("pulldown-list")&&(i=n.attr("index"),i&&this.__checkSelect(i-0)),this.$text.focus()},__keyDownUPHandler:i.__keyDownUPHandler,__keyDownDownHandler:i.__keyDownDownHandler,__scrollHoverPosition:function(t){var e=23,i=this.$box,n=t*e,s=n+2*e-i.height();i.scrollTop()<s?i.scrollTop(s):i.scrollTop()>n&&i.scrollTop(n)},__keyDownEnterHandler:function(){var t=this.hoverIndex;"undefined"!=typeof t&&this.__checkSelect(this.indexList[t])},__getText:function(){return""===this.text?[]:this.text.split(";")}})}(window.comtop),function(t,e){e.UI.BasePagination=e.UI.Base.extend({_init:function(e){this.options.pagesize_list="string"==typeof e.pagesize_list?this._convertTo(e.pagesize_list,"object",[25,50,100]):this.options.pagesize_list,this.$container=t(this.options.el),this.setInitData(this.options)},_create:function(){return this.totalItems<=0?void this.$container.empty():(this.setInitData(this.options),this._calTotalPage(),this._draw(),void this._bindEvent(this.$container))},_draw:function(){},_bindEvent:function(){},_calTotalPage:function(){this.totalPage=Math.ceil(this.totalItems/this.itemsPerPage),this.currentPage>=this.totalPage&&(this.currentPage=this.totalPage)},reDraw:function(){return this._create(),this},setCount:function(t){return this.options.count=this.totalItems=t,this},setPagesize:function(t){return this.setPageSize(t)},setPageSize:function(e){function i(t,e){return t-e}if("number"!=typeof e||0>=e)return this;for(var n=!1,s=0;s<this.options.pagesize_list.length;s++)if(this.options.pagesize_list[s]===e){n=!0;break}if(this.itemsPerPage=this.options.pagesize=e,!n){var o=t.extend([],this.options.pagesize_list);o.push(e),o.sort(i),o.splice(3,1),this.options.pagesize_list=o}return this.reDraw(),this},setInitData:function(e){this.options=t.extend(!0,this.options,e),e.pagesize_list&&(this.options.pagesize_list=e.pagesize_list),e=this.options,this.totalItems=null!=e.count?e.count:null,this.itemsPerPage=null!=e.pagesize?e.pagesize:null,this.currentPage=null!=e.pageno?e.pageno:null,this.currentPage=e.pageno=e.pageno<1?1:e.pageno,this.itemsPerPage=e.pagesize=e.pagesize<1?e.pagesize_list[1]:e.pagesize;for(var i=!0,n=0;n<e.pagesize_list.length;n++){var s=e.pagesize_list[n];1>s?(e.pagesize_list.splice(n,1),n--):s===this.itemsPerPage&&(i=!1)}return i&&(e.pagesize_list.push(this.itemsPerPage),e.pagesize_list.sort(function(t,e){return t-e})),this},go:function(t){return"number"!=typeof t?this:(t>this.totalPage&&(t=this.totalPage),this.options.pageno=this.currentPage=t,this._click(t,this.itemsPerPage),this)},next:function(){return this.currentPage===this.totalPage?this:(this.currentPage++,this.options.pageno=this.currentPage,this._click(this.currentPage,this.itemsPerPage),this)},prev:function(){return 1===this.currentPage?this:(this.currentPage--,this.options.pageno=this.currentPage,this._click(this.currentPage,this.itemsPerPage),this)},getCurrentPage:function(){return this.currentPage},setPageSizeList:function(e,i){if("array"!==t.type(e))return this;("number"!=typeof i||0>=i)&&(i=this.options.pagesize),this.options.pagesize_list=t.extend(!0,this.options.pagesize_list,e),this.options.pagesize_list.splice(3);for(var n=!1,s=0;s<this.options.pagesize_list.length;s++)if(this.options.pagesize_list[s]===i){n=!0;break}return this.itemsPerPage=this.options.pagesize=n?i:this.options.pagesize_list[1],this.reDraw(),this},_click:function(t,e){this.options.on_page_change&&this.options.on_page_change.call(this,t,e)},_setItemsPerPage:function(t){this.itemsPerPage=t}}),e.UI.Pagination=e.UI.BasePagination.extend({options:{uitype:"Pagination",cls:"pagination",count:0,display_page:4,pagesize:25,pageno:1,pagesize_list:[25,50,100],on_page_change:null},_draw:function(){var t=this.options.display_page;t>this.totalPage&&(t=this.totalPage),3>=t&&(t=3);var i=Math.floor((t-1)/2),n=Math.ceil((t-1)/2);this.currentPage-2<i?n=n+i-(this.currentPage-2):this.totalPage-this.currentPage-1<n&&(i=i+n-(this.totalPage-this.currentPage-1)),i>this.currentPage-1&&(i=this.currentPage-1),n>this.totalPage-this.currentPage&&(n=this.totalPage-this.currentPage);var s=this.currentPage-i,o=this.currentPage+n,a={totalItems:this.totalItems,totalPage:this.totalPage,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,selectList:this.options.pagesize_list,displayPreCount:i,displayNextCount:n,toFirst:s,toLast:o};this.$container.html(this._buildTemplateStr("pagination",a)).addClass(this.options.cls).addClass("cui"),e.Browser.isQM&&e.Browser.isIE&&this.$container.addClass("pagination-qm")},_bindEvent:function(){function e(){var t=parseInt(i.$container.find(".page-skip-num").val(),10);return(isNaN(t)||0>=t)&&(t=1),t>i.totalPage&&(t=i.totalPage),i.go(t),!1}var i=this,n=this.$container;n.find('[act="numPage"]').bind("click",function(){return i.go(parseInt(t(this).text(),10)),!1}),n.find('[act="prevPage"]').bind("click",function(){return i.prev(),!1}),n.find('[act="nextPage"]').bind("click",function(){return i.next(),!1}),n.find('[act="goPage"]').bind("click",e),n.find('[act="cusPage"]').bind("keydown",function(t){13===t.keyCode&&e()}),this.$container.find('[act="sizePage"]').bind("click",function(){return i._setItemsPerPage(parseInt(t(this).text(),10)),i._calTotalPage(),i.go(i.currentPage),!1})}})}(window.comtop.cQuery,window.comtop),function(t,e){var i=0,n=1,s="change",o=function(t){if(!t)return{top:0,bottom:0,left:0,right:0};var e=null;return e=t.currentStyle?t.currentStyle:getComputedStyle(t,!1),{top:parseInt(e.paddingTop),bottom:parseInt(e.paddingBottom),left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)}};comtop.UI.Panel=comtop.UI.Base.extend({options:{uitype:"Panel",header_title:"",width:0,height:0,url:"",html:"",on_change:null,collapsible:!0,status:n,animate:"",containerCls:"cui-panel",titleCls:"cui-panel-title",triggerCls:"cui-panel-trigger",contentCls:"cui-panel-content"},container:null,title:null,trigger:null,content:null,status:null,events:[s],_init:function(i){var n=this.options;i.height=e.Tools.fixedNumber(i.height),i.height&&(n.height=i.height),this.status=n.status,i.html&&window[i.html]&&(n.html=window[i.html]),i.header_title&&window[i.header_title]&&(n.header_title=window[i.header_title]),n.el.css({zoom:1}),"function"==typeof n.on_change&&this.bind("change",n.on_change),""!==t.trim(n.el.html())&&(this._needBuildTemp=!0)},_create:function(){var e,i,n=this.options;this._needBuildTemp&&this._initStructures(),i=n.el,e=t(".cui-panel-content",i).hide(),this._navHeight=t(".cui-panel",i).height()-2,e.show(),this._parseMarkup(),this._initView(!0)},_parseMarkup:function(){var e=this.options;this.container=t("."+e.containerCls,e.el),this.title=t("."+e.titleCls,e.el),this.trigger=t("."+e.triggerCls,e.el).eq(0),this.content=t("."+e.contentCls,e.el)},_initView:function(e){var i=this.options;this._setUpSize(),this._bindTriggers(),i.header_title&&this._setTitle(i.header_title),i.html&&e?"string"==typeof i.html?this.content.find("div").html(i.html):this.content.find("div").append(t(i.html)):i.url&&e&&this._loadFrame(),i.collapsible?this.trigger.show():this.trigger.hide(),i.status===n?this._showView():this._hideView()},_setUpSize:function(){var i,n=this.options,s=n.height,a=n.el.parent(),r=o(n.el.find(".cui-panel-content").get(0)),l=e.Browser.isQM&&e.Browser.isIE&&!e.Browser.isIE9?0:r.top+r.bottom+2;this._contentPadding=r,n.width&&this.container.width(n.width),s?("100%"===s&&("BODY"===a.prop("tagName")?(this.h=t.client.height(),n.el.find(".cui-panel-content").eq(0).css("height",0),this.margin=parseInt(a.css("marginTop"))+parseInt(a.css("marginBottom")),n.height=s=this.h-this.margin,this._resizeHandle()):(this.margin=0,n.height=s=n.el.parent().height())),i=s-this._navHeight-l,i=10>i?10:i,n.content_height=i,n.el.find(".cui-panel-content").height(i),n.el.find(".cui-panel-iframe").height("100%"),e.Browser.isQM&&e.Browser.isIE&&this.content.children("div").height("").css("zoom",1)):this.content.children("div").height("")},_resizeHandle:function(){function i(){var e=t.client.height();n.content.css("height",n.content.height()+e-n.h+o),n.h=e}if(void 0!==this.margin){var n=this,s=(this.options,this._contentPadding),o=e.Browser.isQM&&e.Browser.isIE&&!e.Browser.isIE9?s.top+s.bottom+2:0;t(window).on("resize",i)}},get:function(t){var e=this.options[t];return"width"==t?e=e||this.container.width():"height"==t?(e=e||this.container.height(),this.status==i&&(e=this._navHeight)):e||"header_title"!=t?"status"==t&&(e=this.status):e=this._getTitle(),e},set:function(e,i){var n=!1;return"string"==typeof e?(this.options[e]=i,("url"==e||"html"==e)&&(n=!0)):((e.hasOwnProperty("url")||e.hasOwnProperty("html"))&&(n=!0),t.extend(this.options,e)),this._initView(n),this},expend:function(){return this.options.collapsible&&this.status!=n?(this._showView(),this.status=n,this.options.onchange&&this.options.onchange.call(null,this.status),t(this).triggerHandler(s,this.status),this):this},collapse:function(){return this.options.collapsible&&this.status!=i?(this._hideView(),this.status=i,this.options.onchange&&this.options.onchange.call(null,this.status),t(this).triggerHandler(s,this.status),this):this},addIcon:function(t){if(t&&t.className){var e=t.title||"",i='<a href="#" title="'+e+'" class="cui-panel-trigger-customer '+t.className+'" hidefocus="true"></a>',n=this.title.find(".cui-panel-trigger-content").append(i);return"function"==typeof t.callback&&n.find("a."+t.className).on("click",function(){return t.callback(),!1}),this}},removeIcon:function(t){return t?(this.title.find("a."+t).unbind().remove(),this):void 0},toggle:function(){return this.status==n?this.collapse():this.expend(),this},resize:function(t,i){if(0!=arguments.length){if("number"==typeof t){this.options.height=t;var n=this._contentPadding,s=e.Browser.isQM&&e.Browser.isIE&&!e.Browser.isIE9?0:n.top+n.bottom+2,o=t-this._navHeight-s;this.content.height(o)}"number"==typeof i&&(this.options.width=i,this.container.width(i))}},_initStructures:function(){var e=this.options,i=t(document.createElement("div"));this._buildTemplate(i,"panel",e),t(e.el).before(i).appendTo(t("."+e.contentCls,i).find("div")),e.el.css("height","100%"),this.el=e.el=i},_loadFrame:function(){var i=this.options,n=this.content.find("iframe");n.attr("src",this.options.url),this.loaded=!0,n.one("load",function(){var s=n.get(0).contentWindow.document,o=s.body.scrollHeight,a=s.documentElement.scrollHeight,r=Math.max(o,a);if(i.content_height&&(r=r<i.content_height?i.content_height:r),e.Browser.isIE6&&!e.Browser.isQM){var l=n.height();l&&r>l&&t(s).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}t(s).width()>n.width()&&(r+=17),i.height||n.height(r)})},_bindTriggers:function(){var t=this,e=this.options.status;this.trigger.toggle(function(){e==n?t.collapse():t.expend()},function(){e==n?t.expend():t.collapse()})},_getTitle:function(){return this.title.find(".cui-panel-title-text").html()},_setTitle:function(t){this.title.find(".cui-panel-title-text").html(t)},_showView:function(){var t=this.options.animate;this.trigger.removeClass("collapse").html("&#xf068;"),t&&"slide"===t?this.content.slideDown(100):this.content.show()},_hideView:function(){var t=this.options.animate;this.trigger.addClass("collapse").html("&#xf067;"),t&&"slide"===t?this.content.slideUp(100):this.content.hide()}}),comtop.UI.Panel.EXPAND=n,comtop.UI.Panel.COLLAPSE=i}(window.comtop.cQuery,window.comtop),function(t){"use strict";var e=t.cQuery;t.UI.RadioGroup=t.UI.Base.extend({options:{uitype:"RadioGroup",name:"",radio_list:[],direction:"horizontal",value:"",readonly:!1,color:"#0078ff",br:[],border:!1,textmode:!1,on_change:null},_init:function(){var i=this.options,n=i.value,s=this._setType();this.textmode=i.textmode,this.guid=s+"group-"+t.guid()+"-",this.tipPosition=this.el,this.el=i.el.addClass(this.type+"-group"),this.tip_text=this.el.attr("tip"),this.inputs=null,this.labels=null,this.data=null,this.value="string"==typeof n&&""!==n?[String(n)]:"array"===e.type(n)?n:[],this.first=!0,this.values=[],this.texts=[],this.colors=[],this.size=0,this.readonly_list={},i.textmode&&this._create()},_setType:function(){return this.type="radio","radio"},_create:function(){if(!this.create){var t=this.type,i=this.options[t+"_list"],n=e.type(i),s=this.el,o=document.createElement("div");if(this.inner=e(o).html(s.html()),this.inputs=this.inner.find("input"),this.size=this.inputs.length,o.className=t+"group-inner",this.options.border&&this.inner.addClass(t+"group-border"),s.html(o),"function"===n)i(this);else if("array"!==n||this.size){if(!this.size)throw new Error(t+"_list's type not is a array or a function.");this._setDatasource(this._initData())}else this._setDatasource(i);this.create=!0}},_initData:function(){var t,e,i,n,s,o,a=this.inputs,r=this.size,l=0,d=[];for(t=0;r>t;t++)e=a.eq(t),i=e.attr("value"),o=e[0].nextSibling,i?(n={text:e.attr("text")||(3===o.nodeType?o.nodeValue.replace(/\s*|\n*/g,""):""),value:i},s=e.attr("readonly"),!s||"true"!==s&&"readonly"!==s.toLowerCase()||(n.readonly="readonly"),e.attr("color")&&(n.color=e.attr("color")),d.push(n)):l++;return this.size-=l,d},_setDatasource:function(t){if("array"!==e.type(t))throw new Error("data's type not is a array.");this.data=t,this.size=t.length,this._renderHtml(),this.first=!1},setDatasource:function(t){this.first||(this.value=[]),this.values=[],this.texts=[],this.readonly_list={},this.colors=[],this._setDatasource(t)},setDataSource:function(t){return this.setDatasource(t)},_renderHtml:function(){var t,e,i,n,s=this.options,o=this.data,a=s.name,r=s.readonly,l=this.texts,d=this.values,h=this.colors,c=this.size,u=s.direction,p=s.br,f=p.length,g={},m=this.type,v=this.guid,y=[],b=this.readonly_list;if(f)for(e=f;e--;)g[p[e]]=!0;for(t=0;c>t;t++)(0!==t&&"vertical"===u||g[t])&&y.push("<br />"),i=d[t]=o[t].value,n=l[t]=o[t].text,(r||o[t].readonly)&&(b[i]=t),h[t]=o[t].color,y.push('<label for="',v,t,'">','<input id="',v,t,'" type="',m,'" name="',a,'" value="',i,'" index="',t,'" hidefocus="true" />',n,"</label>");this.inner.html(y.join("")),this.inner=this.el.children().eq(0),this.labels=this.el.find("label"),this.inputs=this.el.find("input"),this._inputsAction()},_renderText:function(){var t=this.getText();this.inner.html(null!==t?t.toString():"")},setTextMode:function(){},_inputsAction:function(){this._initValue(),this._setValue(void 0),this.options.textmode&&this._renderText(),this._clickEventBind(),this._setReadonly(),this._renderComplete&&this._renderComplete()},_initValue:function(t){t=(t||this.value).sort();var i,n,s=t.length,o=this.values,a=this.size,r=[];for(i=0;s>i;i++)for(n=0;a>n;n++)if(o[n]===t[i]+""){r.push(o[n]);break}this.value=e.unique(r)},_changeHander:function(){var t=this.options.on_change;this._triggerHandler("change"),"function"==typeof t&&t(this.getValue())},getValue:function(){return this._getEle(this.values)},getText:function(){return this._getEle(this.texts)},_getEle:function(t){var e,i,n=this.value.sort(function(t,e){return t>e?1:-1}),s=n.length,o=this.size,a=this.type,r=[];for(e=0;s>e;e++)o=this._valueToIndex(n[e]),isNaN(o)||(r.push(t[o]),i=t[o]);return"radio"===a?i||null:r.length?r:null},_clickEventBind:function(){var t=this;this.el.off("click").on("click",function(i){var n,s,o,a=e(i.target),r=t.readonly_list;if("INPUT"===a.prop("tagName"))if(n=a.attr("index")-0,s=a.val(),o=t._valueToIndex(t.value[0]),"undefined"!=typeof r[s]){if(isNaN(o))return t.inputs.eq(n).prop("checked",!1),!1;t.inputs.eq(o).prop("checked",!0)}else{if(o===n)return;t._checked(n),t.value=[s],t.labels.eq(o).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""}),t._changeHander()
}})},_valueToIndex:function(t){if("undefined"==typeof t)return 0/0;for(var e=this.values,i=this.size,n=0;i>n;n++)if(t===e[n])return n;return 0/0},_checked:function(t){var e=this.labels.eq(t),i=this.colors[t];e.addClass(this.type+"-group-checked"),i?e.css("color",i):e.css("color",this.options.color)},show:function(){this.inner.show()},hide:function(){this.inner.hide()},setValue:function(t,i){if(!this.textmode){var n,s,o,a=e.extend([],this.value);if(this._setValue(t),!i)if(n=this.value,s=n.length,s===a.length){for(o=0;s>o;o++)if(a[o]!==n[o]){this._changeHander();break}}else this._changeHander()}},_setValue:function(t){var i=e.type(t);"undefined"!==i&&("array"===i?this._initValue(t):""!==t?this._initValue([String(t)]):this.value=[""]);var n,s,o=this.size,a=this.values,r=this.value,l=r.length,d=this.inputs,h=this.labels,c=this.type;t:for(n=0;o>n;n++){for(s=0;l>s;s++)if(r[s].toString()===a[n]){d.eq(n).prop("checked",!0),this._checked(n);continue t}d.eq(n).prop("checked",!1),h.eq(n).removeClass(c+"-group-checked").css("color","")}},setReadonly:function(t,i){if(!this.textmode){var n,s,o,a,r=e.type(i),l=this.readonly_list,d=this.values,h=this.size;if("boolean"==typeof t&&("array"===r||"undefined"===r))for("undefined"===r&&(i=d),n=i.length,s=n;s--;)for(o=h;o--;)if(a=d[o],i[s].toString()===a){t?l[a]=o:delete l[a],this._setReadonlyAction(o,t);break}}},_setReadonly:function(){var t,e=this.readonly_list;for(t in e)e.hasOwnProperty(t)&&this._setReadonlyAction(e[t],!0)},_setReadonlyAction:function(t,e){var i=this.labels,n=this.inputs,s=this.type;e?(i.eq(t).addClass(s+"-group-readonly"),n.attr("hidefocus","true")):(i.eq(t).removeClass(s+"-group-readonly"),n.removeAttr("hidefocus"))},isReadonly:function(t){var e,i=this.readonly_list,n=0;if("undefined"==typeof t){for(e in i)i.hasOwnProperty(e)&&n++;return this.size===n}return i.hasOwnProperty(t)},onInValid:function(t,e){this.el.addClass(this.type+"-group-error").attr("tip",e),this.el.attr("tipType","error")},onValid:function(){var t,e=this.el,i=e.find(this.tipPosition).eq(0).attr("tipID");e.removeClass(this.type+"-group-error"),void 0!==i&&(t=window.cui.tipList[i],"undefined"!=typeof t&&t.hide()),this.tip_text?e.attr("tip",this.tip_text):e.attr("tip",""),e.attr("tipType","normal")}})}(window.comtop),function(t){"use strict";var e=t.cQuery;t.UI.CheckboxGroup=t.UI.RadioGroup.extend({options:{uitype:"CheckboxGroup",name:"",checkbox_list:[],direction:"horizontal",value:[],color:"#0078ff",textmode:!1,allselect:"",br:[],readonly:!1,border:!1},_setType:function(){return this.type="checkbox","checkbox"},_deleteVal:function(t){for(var e=this.value,i=e.length,n=0;i>n;n++)if(e[n]===t){e.splice(n,1);break}return e},_renderComplete:function(){if(this.options.allselect){var t=this.options,i=this.allId=this.guid+"all",n=this.type,s=this.allLabel=e("<label>");s.attr("for",i),s.html(['<input id="',i,'" type="',n,'" hidefocus="true" />',t.allselect].join("")),(t.br.length||"vertical"===t.direction)&&this.inner.prepend("<br />"),this.inner.prepend(s),this.allInput=e("#"+i),this._checkAllSelect()}},_changeHander:function(){var t=this.options,e=t.on_change;t.allselect&&this._checkAllSelect(),this._triggerHandler("change"),"function"==typeof e&&e(this.getValue())},_checkAllSelect:function(){this.value.length===this.size?(this.allInput.prop("checked",!0),this.allLabel.css("color","#f60")):(this.allInput.prop("checked",!1),this.allLabel.css("color",""))},_clickEventBind:function(){var t=this,i=!!t.options.allselect;this.el.off("click").on("click",function(n){var s,o,a=e(n.target),r=a.prop("checked"),l=t.readonly_list;"INPUT"===a.prop("tagName")&&(s=a.attr("index")-0,o=a.val(),"undefined"!=typeof l[o]?n.preventDefault():i&&t.allId===a.attr("id")?r?t.selectAll():t.unSelectAll():(r?(t._checked(s),t.value.push(o),e.unique(t.value)):(t._deleteVal(o),t.labels.eq(s).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""})),t._changeHander()))})},getValueString:function(t){var e=this.getValue();return e?e.join(t||"\u3001"):""},getTextString:function(t){var e=this.getText();return e?this.getText().join(t||"\u3001"):""},selectAll:function(){this.setValue(this.values)},unSelectAll:function(){this.setValue([])}})}(window.comtop),function(t,e){comtop.UI.Tab=comtop.UI.Base.extend({options:{uitype:"Tab",width:0,height:0,tab_width:65,active_index:0,tabs:[],fill_height:!1,reload_on_active:!0,closeable:!1,trigger_type:"click"},_className:{parentCls:"cui-tab",navCls:"cui-tab-nav",contentCls:"cui-tab-content",titleCls:"cui-tab-title",activeTriggerCls:"cui-active",hoverTriggerCls:"cui-tab-hover",closeTriggerCls:"cui-tab-close"},active_index:0,navs:[],titles:[],contents:[],urls:[],events:["switch"],handles:[],_initUrl:function(){this.urls=t.map(this.options.tabs,function(t){return t.url||!1})},_initHandles:function(){this.handles=t.map(this.options.tabs,function(t){return t.on_switch||!1})},_init:function(){var i=this.options;i.tab_width=e.Tools.fixedNumber(i.tab_width),i.width=e.Tools.fixedNumber(i.width),i.height=e.Tools.fixedNumber(i.height),this.active_index=this.options.active_index||0,t.each(i.tabs,function(i,n){"object"==typeof n.html&&t(n.html).hide(),n.tab_width=e.Tools.fixedNumber(n.tab_width)}),""!=this.options.el.html().replace(/\s+/g,"")&&(this._isHTMLTemplate=!0)},_create:function(){var e=this.options,i=e.el,n=".";if(this._isHTMLTemplate&&this._initStructures(),this._initUrl(),this._initHandles(),this._navHeight=t(n+this._className.parentCls,i).height(),e.fill_height){var s=e.el.parent();if("BODY"===s.prop("tagName")){var o=t.client.height(),a=parseInt(s.css("marginTop"))+parseInt(s.css("marginBottom"));e.height=o-a,this._resizeHandle()}else e.height=s.height()}this._parseMarkup(),this._setUpHeight(),this._initView(!0),this._bindTriggers()},_initStructures:function(){var e=[],i=this.options;t.each(i.el.children(),function(){var i=t(this).attr("data-options");try{i=t.parseJSON(i)}catch(n){i={}}"string"==typeof i.closeable&&(i.closeable="true"===i.closeable),"string"==typeof i.tab_width&&(i.tab_width=parseInt(i.tab_width)),i.url||(i.html=t(this).children()),e.push(i)}),this.options=t.extend({},this.options,{tabs:e}),this.options.el.children().hide(),this._buildTemplate(this.options.el,"tab",this.options,!0)},_resizeHandle:function(){function e(){var e=t.client.height();i.resize(n.el.height()+e-i.h),i.h=e}var i=this,n=this.options;i.h=t.client.height(),t(window).on("resize",e)},_parseMarkup:function(){var e=this._className,i=this.options.el,n=".",s=t(n+e.navCls,i),o=t(n+e.contentCls,i);this.navs=s.children(),this.titles=t(n+e.titleCls,i),this.contents=o.children()},_setUpHeight:function(){var e,i=this.options;return i.height?(e=i.height-this._navHeight,e=10>e?10:e,void(i.content_height=e)):void this.contents.each(function(){var e=t(this).get(0);("DIV"===e.nodeName||"IFRAME"===e.nodeName)&&(e.style.height="")})},attr:function(){var e=arguments;if(0==e.length)return t.extend(!0,{},this.options);if(1==e.length){if("string"==typeof e[0]){var i=this.options[e[0]];return"width"==e[0]&&(i=t(this.options.el).width()),"height"==e[0]&&(i=t(this.options.el).height()),i}if("object"==typeof e[0]){{this.options}return t.extend(this.options,e[0]),this._setUpHeight(),this._initView(!1),this}}},switchTo:function(t){return this._switchTo(t),this},next:function(){return this.switchTo((this.active_index+1)%this.navs.length),this},prev:function(){var t=this.navs.length;return this.switchTo((this.active_index-1+t)%t),this},onClose:function(e){return t(this).bind("close",e),this},resize:function(i,n){var s={};"number"==typeof i&&(s.height=i),"number"==typeof n&&(s.width=n),t.extend(this.options,s),this._setUpHeight();var o=this.options,a=t("."+this._className.contentCls,o.el),r=e.Browser;if(o.width){o.el.width(o.width);var l="number"==typeof o.width?o.width-(r.isIE&&r.isQM?0:6):o.width;a.width(l)}o.content_height&&a.height(o.content_height+(r.isIE&&r.isQM?10:0))},addTab:function(){var e=this.options,i={title:"",closeable:e.closeable,tab_width:e.tab_width},n=arguments,s=this.navs.length;return 2==n.length?(i.title=n[0],i.url=n[1]):1==n.length&&"object"==typeof n[0]&&t.extend(i,n[0]),e.tabs[s]=i,this._add(i),this},removeTab:function(e){if(e<this.navs.length&&this.navs.length>1){this.active_index===e&&this.next(),this.navs.eq(e).remove(),this.contents.eq(e).remove(),this.urls.splice(e,1),this.active_index>0&&e<this.active_index&&this.active_index--;var i=this.options.tabs.splice(e,1);this._parseMarkup(),t(this).triggerHandler("close",i)}return this},getActiveTab:function(){return this.getTab(this.active_index)},getTab:function(t,e){if(!e)return this.navs.get(t);var i;switch(e){case"tab_width":i=this.navs.eq(t).width();break;case"title":i=this.titles.eq(t).html();break;case"html":i=this.options.tabs[t].html;break;case"url":i=this.options.tabs[t].url;break;case"closeable":i=this.navs.eq(t).hasClass(this._className.closeTriggerCls)}return i},getContent:function(t){var t=void 0===t?this.active_index:t;return this.contents[t]},setTab:function(e,i,n){return"string"==typeof i?this.options.tabs[e][i]=n:t.extend(this.options.tabs[e],i),this._initTabs(),this._initUrl(),this.active_index==e&&this._loadFrame(this.active_index,this.active_index),this},index:function(){return this.active_index},_bindTriggers:function(){var e=this;this.navs.hover(function(){e.navs.index(t(this))!==e.active_index&&t(this).addClass(e._className.hoverTriggerCls)},function(){t(this).removeClass(e._className.hoverTriggerCls)}),"click"==this.options.trigger_type?t("."+this._className.navCls,this.options.el).bind("click",t.proxy(this,"_onTrigger")):"mouseover"==this.options.trigger_type&&this.navs.bind("mouseover",t.proxy(this,"_onMouseover"));var i="."+this._className.closeTriggerCls;t("."+this._className.navCls+" > li",this.options.el).delegate(i,"click",function(t){var i=e._findNav(t.target),n=e.navs.index(i);return e.removeTab(n),!1})},_loadFrame:function(i,n){var s=this.options,o=this.urls.length>0&&this.urls[i];if(void 0!=n&&s.reload_on_active){var a=this.contents.eq(n).unbind().removeData("_binded");this.urls[n]&&a.attr("src","about:blank")}if(o){var r=this.contents.eq(i).show();("about:blank"==r.attr("src")||s.reload_on_active)&&(r.attr("src",this.urls[i]),r.data("_binded")||r.bind("load",function(){try{var i=r.get(0).contentWindow.document,n=t(i).height();if(e.Browser.isIE6){var o=parseInt(r.css("height").replace("px",""));o&&n>o&&t(i).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}t(i).width()>r.width()&&(n+=17),s.height||r.height(n)}catch(a){}}).data("_binded",!0))}},_initView:function(i){this.contents.css({position:"absolute",left:-999999}),this.contents.eq(this.active_index).css({position:"static",left:0});var n=this.options,s=t("."+this._className.contentCls,n.el),o=e.Browser;if(n.width){n.el.width(n.width);var a="number"==typeof n.width?n.width-(o.isIE&&o.isQM?0:6):n.width;s.width(a)}n.content_height&&s.height(n.content_height+(o.isIE&&o.isQM?10:0)),i||(n.tab_width&&this.navs.width(n.tab_width),n.tabs.length>0?this._initTabs(i):this._initCloseBtns()),this._initContents()},_initTabs:function(){var e=this,i=e.options;i.tabs.length>0&&t.each(i.tabs,function(t,n){n.tab_width&&e.navs.eq(t).width(n.tab_width);var s=void 0!==n.closeable?n.closeable:i.closeable;s?e._addCloseBtn(t):e._removeCloseBtn(t),n.title&&e.titles.eq(t).html(n.title)})},_initContents:function(e,i){var n=e||this.active_index,s=this.options.tabs[n],o=this.contents.eq(n);s&&(s.html?s.__isLoad_||("string"==typeof s.html?o.html(s.html):o.append(t(s.html).show()),s.__isLoad_=!0):s.url&&this._loadFrame(n,i))},_initCloseBtns:function(){for(var t=this.options,e=this.navs.length,i=0;e>i;i++)t.closeable===!0?this._addCloseBtn(i):this._removeCloseBtn(i)},_onTrigger:function(t){var e=this._findNav(t.target);e&&(idx=this.navs.index(e),this._switchTo(idx,t))},_findNav:function(e){for(;e!=this.options.el&&e!=document.body;){if(t(e).parent().hasClass(this._className.navCls))return e;e=e.parentNode}return null},_onMouseover:function(t){var e=this.navs.index(t.currentTarget);this._switchTo(e,t)},_triggerIsValid:function(t){return this.active_index!=t&&t<this.navs.length},_switchTo:function(e,i,n){if(this._triggerIsValid(e)){var s=this.active_index,o=e,a=this.navs.eq(s),r=this.navs.eq(o),l=this.contents.eq(s),d=this.handles[e],h=this.contents.eq(o);return this.active_index=this.options.active_index=o,this._switchTrigger(a,r)._switchView(l,h),this._initContents(this.active_index,s),n&&n.call(this),t(this).triggerHandler("switch",[{fromTab:s,toTab:o}]),"function"===t.type(d)?d.call(this,{fromTab:s,toTab:o}):"string"===t.type(d)&&window[d]&&window[d]({fromTab:s,toTab:o}),this}},_switchTrigger:function(t,e){return t.removeClass(this._className.activeTriggerCls),e.addClass(this._className.activeTriggerCls),this},_switchView:function(t,e){return t.css({position:"absolute",left:-999999,top:-99999}),e.css({position:"static",left:0,top:0}),this},_add:function(e){var i,n=this.options,s=this.navs.length,o=!!e.closeable,a=this._findClone(o);-1!==a?i=this.navs.eq(a).clone(!0):(i=this.navs.eq(0).clone(!0),o?this._addCloseBtn(s,i):this._removeCloseBtn(i)),i.hasClass(this._className.activeTriggerCls)&&i.removeClass(this._className.activeTriggerCls),i.width(e.tab_width||n.tab_width),t("."+this._className.titleCls,i).html(e.title),this.navs.eq(s-1).after(i);{var r;n.content_height||this._minHeight}e.url?(r=t('<iframe src="about:blank" frameborder="0" style="display:none;width:100%;height:100%"></iframe>'),this.urls[s]=e.url):("object"==typeof e.html&&t(e.html).hide(),r=t('<div style="display: none;width:100%;overflow:auto;height:100%"></div>')),this.contents.eq(s-1).after(r),this._parseMarkup()},_addCloseBtn:function(t,e){e||(e=this.navs.eq(t)),e.addClass("closeable").append(this._generateCloseBtn(t))},_generateCloseBtn:function(){var t="<a href='javascript:;' class='"+this._className.closeTriggerCls+"'></a>";return t},_removeCloseBtn:function(e){var i="number"==typeof e?this.navs.eq(e):e;t("."+this._className.closeTriggerCls,i).remove()},_findClone:function(e){return t.inArray(e,this._getCloseBtns())},_getCloseBtns:function(){for(var t,e=!!this.options.closeable,i=this.navs.length,n=this.options.tabs,s=[],o=0;i>o;o++)t=n[o],s.push(t&&void 0!==t.closeable?t.closeable:e);return s}})}(window.comtop.cQuery,window.comtop),function(t,e){e.UI.Textarea=e.UI.Base.extend({options:{uitype:"Textarea",name:"",relation:"",value:"",width:"300",height:"57",readonly:!1,maxlength:-1,emptytext:"",autoheight:!1,maxheight:"",textmode:!1,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},tipPosition:".textarea_textarea",_init:function(){var t=this.options;t.width=e.Tools.fixedNumber(t.width),t.height=e.Tools.fixedNumber(t.height),t.id=e.guid(),""===t.name&&(t.name=e.guid()+"_"+t.uitype),t.maxheight=/^(\d)+(px|PX)*$/.test(t.maxheight)?t.maxheight.replace("px",""):""},_create:function(){var i,n=this,s=n.options;if(i=this.$textarea=t("#"+s.id),this.$box=s.el.find(".cui_textarea_box"),this.$empty=s.el.find(".cui_textarea_empty").eq(0).on("mousedown",function(){i.focus()}),""!==s.relation&&-1!==s.maxlength){this.$relation=t("#"+s.relation);var o=s.maxlength-e.String.getBytesLength(s.value)<0?0:s.maxlength-e.String.getBytesLength(s.value);this.$relation.text(o)}if(""!==s.emptytext&&""===s.value&&this.$empty.html(s.emptytext),""===s.height&&(s.height="51"),this.setHeight(s.height),""===s.width&&(s.width="300"),this.setWidth(s.width),s.readonly&&this.setReadOnly(!0),s.maxlength>-1&&this.$textarea.on("input propertychange",function(){n._textCounter()}),this.$textarea.on("keypress",function(t){n._keyPressHandler(t)}),s.autoheight){if(this.$textarea.css({overflow:"hidden"}),e.Browser.isIE9)this.$textarea.on("input change",function(){n._autoHeight()}),this.$textarea.on("keydown",function(t){(46===t.keyCode||8===t.keyCode)&&n._autoHeight()});else{var n=this;n.$textarea.bind("input",function(){n._autoHeight()}),n.$textarea.bind("propertychange",function(){"value"===window.event.propertyName&&n._autoHeight()})}s.value&&n._autoHeight()}},setWidth:function(t){t+="",this.$box.css(e.Browser.isQM||-1!=t.indexOf("%")?{width:t}:{width:parseFloat(t)+"px"})},setHeight:function(t){t+="",this.$textarea.css(e.Browser.isQM||-1!=t.indexOf("%")?{height:t}:{height:parseFloat(t)-10+"px"})},setValue:function(t,e){var i=this.$textarea,n=this.options;t=null==t||void 0==t?"":t,i.val(t),""!==t?this.$empty.html(""):""!==n.emptytext&&this.$empty.html(n.emptytext),this.$relation&&this.$relation.text(this._getRemainLength()),e?this.onValid():this._triggerHandler("change");var s=this;n.autoheight&&s._autoHeight()},getValue:function(){var e=this.$textarea.val(),i=this.options.emptytext;return t.trim(e)===i?"":e},setMaxLength:function(t){this.options.maxlength=t,this.$relation&&this.$relation.text(this._getRemainLength())},_getRemainLength:function(){var t=this.options.maxlength-e.String.getBytesLength(this.getValue());return 0>t?0:t},setReadOnly:function(t){this.setReadonly(t)},setReadonly:function(t){var e=this.options;e.readonly=t,this.$textarea.attr("readonly",t),t?e.el.addClass("textarea_garybg"):e.el.removeClass("textarea_garybg")},focus:function(){var t=this.options;return t.readonly||t.el.find("textarea").focus(),this},_changeHander:function(t){var e=this.options;return e.readonly?!1:(""!==this.getValue()?this.$textarea.removeClass("textarea_tipcolor"):""!==e.emptytext&&this.$empty.html(e.emptytext),this.$relation&&this.$relation.text(this._getRemainLength()),this._triggerHandler("change"),void this._customHandler("on_change",t))},_focusHandler:function(t){var e=this.options;return e.readonly?!1:(this._removeEmptyText(!0),this.$box.addClass("textarea_textareafocus"),this.onValid(),void this._customHandler("on_focus",t))},_blurHandler:function(t){var e=this.options;if(e.readonly)return!1;this._removeEmptyText(!1),this.$box.removeClass("textarea_textareafocus"),this._textCounter();var i=this.getValue();""!==i&&null!=i&&this._triggerHandler("change"),this._customHandler("on_blur",t)},_keyPressHandler:function(t){var e=this.options;return e.readonly?!1:void this._customHandler("on_keypress",t)},_keyupHandler:function(t){var e=this.options;return e.readonly?!1:(this._textCounter(),this.$relation&&this.$relation.text(this._getRemainLength()),void this._customHandler("on_keyup",t))},_keydownHandler:function(t){var e=this.options;return e.readonly?!1:(this._textCounter(),void this._customHandler("on_keydown",t))},_customHandler:function(e,i){var n=this.options,s=n[e];"string"===t.type(s)?"function"==typeof window[s]&&window[s].call(this,i,this):"function"==typeof s&&s.call(this,i,this)},_removeEmptyText:function(t){var e=this.options.emptytext,i=this.getValue();""!==e&&0===i.length&&this.$empty.html(t?"":this.options.emptytext)},_textCounter:function(){var t=this.options;if(t.maxlength>-1){var i=e.String.getBytesLength(this.getValue());i>t.maxlength&&(this.setValue(e.String.intercept(this.getValue(),t.maxlength)),this.autoheight&&this._autoHeight())}return!1},_autoHeight:function(){function t(){n=s[0].scrollHeight,i.height-10<=n&&s.height()!==n&&s.height(n)}var e=this,i=e.options,n=0,s=e.$textarea;s.data("origin-height")||s.data("origin-height",s.outerHeight()),s.height(s.data("origin-height")),i.maxheight?i.maxheight-10>=s[0].scrollHeight?(this.$textarea.css({overflow:"hidden"}),t()):(this.$textarea.css({overflow:"auto"}),s.height(i.maxheight-10)):t()},onInValid:function(e,i){var n=this,s=n.options;n.$box.addClass("textarea_invalid"),null==s.tipTxt&&(s.tipTxt=s.el.attr("tip")||""),s.el.attr("tip",i),t(n.tipPosition,s.el).attr("tipType","error")},onValid:function(){var e=this,i=e.options,n=t(e.tipPosition,i.el).attr("tipID");if(e.$box.removeClass("textarea_invalid"),null==i.tipTxt&&(i.tipTxt=i.el.attr("tip")||""),void 0!==n){var s=cui.tipList[n];"undefined"!=typeof s&&s.hide()}i.el.attr("tip",i.tipTxt),t(e.tipPosition,i.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(t){function e(i,n){i.length>0&&t.each(i,function(t,i){void 0===i.icon&&(i.icon=n),i.children&&e(i.children,n)})}comtop.UI.Tree=comtop.UI.Base.extend({options:{uitype:"Tree",children:null,checkbox:!1,select_mode:1,persist:!1,icon:"",checkbox_style:"",on_dbl_click:null,on_expand:null,on_select:null,on_click:null,on_activate:null,on_focus:null,on_blur:null,on_lazy_read:null,auto_focus:!1,keyboard:!1,click_folder_mode:3,min_expand_level:1,theme:"cui",on_post_init:null,reactive:!0},dtree:null,_init:function(){var i=this,n=this.options;"false"!==n.icon&&""!==n.icon&&"cui"===n.theme?e(n.children,n.icon):"classic"===n.theme&&e(n.children,null),"string"==typeof n.checkbox_style&&""!==n.checkbox_style&&(n.classNames={checkbox:"dynatree-radio"}),"function"==typeof n.children&&(n.initDataFn=n.children,n.children=[]),t.each(this.options,function(e,s){var o=e.indexOf("_");if(o&&-1!==o){var a="";t.each(e.split("_"),function(t){a+=0===t?this:this.charAt(0).toUpperCase()+this.substring(1)});var r=s;"function"==typeof r?i._proxyEvent(r,n,a):n[a]=s}})},_proxyEvent:function(t,e,i){var n=this;e[i]=function(){var e=this;if(1===arguments.length)t.call(null,n._wrapNode(arguments[0]));else if(2===arguments.length)if("boolean"==typeof arguments[0])"boolean"==typeof arguments[1]?t.apply(e,arguments):t.call(null,arguments[0],n._wrapNode(arguments[1]));else{if("onClick"===i){var s=arguments[1].target||arguments[1].srcElement;if("span"===s.nodeName.toLowerCase()&&/dynatree-expander/.test(s.className))return}t.call(null,n._wrapNode(arguments[0]),arguments[1])}}},_create:function(){var e=this.options;t.isArray(e.children)?e.children.length&&(e.children[0]._firstNode=!0):e.children&&"object"==typeof e.children?(e.children._firstNode=!0,e.children=[e.children]):e.children=[],this.dtree=t(this.options.el).dynatree(this.options).dynatree("getTree"),e.el.addClass("tree_"+e.theme),e.initDataFn&&e.initDataFn(this,e)},getActiveNode:function(){return this._wrapNode(this.dtree.getActiveNode())},getNode:function(t){return this._wrapNode(this.dtree.getNodeByKey(t))},selectNode:function(t,e){return this.getNode(t).select(e)},enable:function(){return this.dtree.enable(),this},disable:function(){return this.dtree.disable(),this},setDatasource:function(e){return"object"==typeof e&&null!==e?(t.isArray(e)?e.length&&(e[0]._firstNode=!0):(e._firstNode=!0,e=[e]),this.options.children=e,this.getRoot().removeChildren().addChild(e),this):void 0},getDatasource:function(){var t=this.dtree.toDict();return t.children},getDataSource:function(){return this.getDatasource()},getSelectedNodes:function(e){var i=this,n=this.dtree.getSelectedNodes(e);return t.map(n,function(t){return i._wrapNode(t)})},getRoot:function(){return this._wrapNode(this.dtree.getRoot())},bind:function(t,e){if("string"==typeof t&&"function"==typeof e){var t="on"+t.charAt(0).toUpperCase()+t.substring(1),i=this.dtree.options[t];"undefined"!=typeof i&&this._proxyEvent(e,this.dtree.options,t)}},unbind:function(e){if("string"==typeof e){var e="on"+e.charAt(0).toUpperCase()+e.substring(1),i=this.dtree.options[e];if("undefined"==typeof i)return;this.dtree.options[e]=null}else t.extend(this.dtree.options,{onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onCustomRender:null,onCreate:null,onRender:null})},_wrapNode:function(t){return t?new i(t):null}});var i=function(t){this.dNode=t};i.prototype={error:-1,loading:1,ok:0,activate:function(t){"undefined"==typeof t&&(t=!0),this.dNode.activate(t)},deactivate:function(){this.dNode.deactivate()},getData:function(t){return"string"==typeof t?this.dNode.data[t]:this.dNode.data},expand:function(t){return this.dNode.expand(t),this},remove:function(){this.dNode.remove()},removeChildren:function(){return this.dNode.removeChildren(),this},select:function(t){return this.dNode.select(t),this},toggleSelect:function(){return this.dNode.toggleSelect(),this},addChild:function(t,e){var i=this.dNode.addChild(t,e&&e.dNode);return this._wrapNode(i)},setTitle:function(t){return this.dNode.setTitle(t)},setStyle:function(e){return t(this.dNode.span).find("a").attr("style",e),this.dNode.data._customStyle=e,this},removeStyle:function(){return t(this.dNode.span).find("a").removeAttr("style"),this.dNode.data._customStyle=null,this},prev:function(){var t=this.dNode.getPrevSibling();return t&&this._wrapNode(t)},next:function(){var t=this.dNode.getNextSibling();return t&&this._wrapNode(t)},firstChild:function(){var t=this.children();return null==t||void 0==t?t:t.length>0?t[0]:null},lastChild:function(){var t=this.children();return null==t||void 0==t?t:t.length>0?t[t.length-1]:null},children:function(){var e=this,i=this.dNode.getChildren();return null==i||void 0==i?i:t.map(i,function(t){return e._wrapNode(t)})},parent:function(){var t=this.dNode.getParent();return t&&this._wrapNode(t)},setData:function(t){if(1===arguments.length)for(var e in t)this.dNode.data[e]=t[e];else{var i=arguments[0],n=arguments[1];this.dNode.data[i]=n}return this.dNode.render(),this},focus:function(){return this.dNode.focus(),this},hasChild:function(){return this.dNode.hasChildren()},isChildOf:function(t){return this.dNode.isChildOf(t.dNode)},isDescendantOf:function(t){return this.dNode.isDescendantOf(t.dNode)},setLazyNodeStatus:function(){this.dNode.setLazyNodeStatus.apply(this.dNode,arguments)},getEventTargetType:function(t){return this.dNode.getEventTargetType(t)},move:function(t,e){t.dNode&&this.dNode.move(t.dNode,e)},disable:function(){return this.dNode.disable(),this},enable:function(){return this.dNode.enable(),this},_wrapNode:function(t){return t?new i(t):null}},comtop.UI.Tree.Node=i}(window.comtop.cQuery,window.comtop),function(t){"use strict";var e=t.cQuery,i=t.Tools.fixedNumber||function(t){return t};t.UI.Grid=t.UI.Base.extend({options:{uitype:"Grid",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"ID",ellipsis:!0,titleellipsis:!0,adaptive:!0,titlelock:!0,oddevenrow:!1,selectrows:"multi",fixcolumnnumber:0,config:null,datasource:null,titlerender:null,colhidden:!0,colmove:!1,loadtip:!0,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,lazy:!0,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],pagination:!0,pagination_model:"pagination_min_1",adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,rowdblclick_callback:null,onstatuschange:null},formatFn:{date:t.Date.simpleformat,money:t.Number.money},renderMethod:{a:function(t,e,i){var n=["<a"],s=e.params,o="";if(s){s=s.split(";");for(var a=[],r=s.length;r--;){var l=s[r];t.hasOwnProperty(l)&&a.push([l,"=",t[l]].join(""))}o="?"+a.join("&")}return n.push(" href='",(e.url||"")+o,"' class='",e.className||"","' target='",e.targets||"_self","' clickid='",e.click,"'>",i,"</a>"),n.join("")},image:function(t,e,i){var n=["<img"];n.push(" class='",e.className||"");var s=e.url,o=e.compare,a=e.relation,r=e.title,l=i;if("string"==typeof a)if(/\./.test(a)){var d=a.split(".");l=t[d[0]][d[1]]}else l=t[a];return r=r&&r[l]?r[l]:i,o&&(s=o[l]||s),n.push("' src='",s,"' title='",r,"' clickid='",e.click,"' />"),n.join("")},button:function(t,e,i){var n=["<button class='"];return n.push(e.className||"","' clickid='",e.click,"'>",e.value||i,"</button>"),n.join("")}},_init:function(){var i=this.options,n=i.config,s=i.onstatuschange,o=i.datasource,a=i.sortstyle;i.sortname.length=Math.min(i.sortname.length,a),i.sorttype.length=Math.min(i.sorttype.length,a),"string"==typeof n&&"function"==typeof window[n]&&(i.config=window[n]),"string"==typeof s&&"function"==typeof window[s]&&(i.onstatuschange=window[s]),"string"==typeof o&&"function"==typeof window[o]&&(i.datasource=window[o]),this.el=i.el,this.elCache=null,this.gridContainer=null,this.gridBox=null,this.gridStyle=null,this.gridHead=null,this.gridHeadTable=null,this.gridTableHide=null,this.gridBody=null,this.gridTableBox=null,this.gridTbody=null,this.gridScroll=null,this.gridLine=null,this.gridEmpty=null,this.gridTfoot=null,this.loading=null,this.gridOverlay=null,this.gridAllCheck=null,this.createDomBox=document.createElement("div"),this.domTh=[],this.domTr=[],this.domTd=[],this.domFixed=[],this.domHeadCol=[],this.domBodyCol=[],this.theadMap=[],this.extendTh=[],this.trFrag=document.createElement("tbody"),this.data=[],this.backupQuery=null,this.query=null,this.customQuery=null,this.rowSize=0,this.colSize=0,this.sortType={},this.theadText=[],this.renderStyle=[],this.colRender=[],this.bindName=[],this.bindDotName=[],this.numCol=0/0,this.colWidth=[],this.initColWidth=[],this.colWidthBackup=[],this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=0/0,this.disabledIndex=[],this.fixedFnClick=[],this.colHidden=[],this.disabled=[],this.totalSize=0,this.guid="grid-"+t.guid(),this.heightLight=[],this.colIndex=[],this.gridWidth=0,this.gridHeight=0,this.tableWidth=0,this.theadHeight=30,this.boxHeight=0,this.paginationHeight=i.pagination?41:0,this.selectrowsClass="",this.tdsPackage=[],this.endRow=0,this.trStart=0,this.trEnd=0,this.renderComplete=!1,this.odd=!1,this.unRender=!0,this.autoHeight=!1,this.isIttab=!1,this.arrIndex=Array.prototype.indexOf,this.isQm=t.Browser.isQM,this.persistence="function"==typeof s&&"function"==typeof n,this.oddEvenClass="cardinal_row",this.selectedRowClass="selected_row";try{var r=e("head");r.append('<style type="text/css"></style>'),r.find("style").last()[0].innerHTML="",this.writeStyle=!0}catch(l){this.writeStyle=!1}this._backupQuery(),this._setPageSize(),this._setSortTypeObj(),this.__getDomTh(),this.__initWidthAndHeight()},_backupQuery:function(){var t=this.options,i={pageSize:t.pagesize,pageNo:t.pageno,sortName:e.extend([],t.sortname),sortType:e.extend([],t.sorttype)};this.backupQuery=e.extend(!0,{},i),this.query=i},_setPageSize:function(){for(var t=this.options,e=this.query,i=t.pagesize_list,n=e.pageSize,s=i.length;s--;)if(n===i[s])return;e.pageSize=i[1]},_setSortTypeObj:function(){for(var t=this.query,e=t.sortName,i=t.sortType,n=e.length,s=this.sortType={},o=0;n>o;o+=1){var a=i[o].toUpperCase();i[o]=a,s[e[o]]=a}},__getDomTh:function(){var t,i,n,s=this.el,o=this.colIndex,a=this.extendTh;if(t=e(document.createElement("div")).html(["<table><thead>",s.find("thead").html()||s.find("tbody").html()||s.html(),"</thead></table>"].join("")).find("table").eq(0),this.elCache=t,i=t.find("tr"),n=i.length,1===n){for(var r=t[0].getElementsByTagName("th"),l=[],d=0,h=r.length;h>d;d+=1)l.push(r[d]),o[d]=d;this.domTh=l}else{var c,u,p,f,g=this.theadMap=[];for(c=0;n>c;c+=1){var m=i.eq(c)[0],v=m.cells,y=v.length,b=0;for(a[c]=[],g[c]||(g[c]=[]),u=0;y>u;u+=1){var _=v[u],x=_.colSpan;for(p=0;x>p;p+=1)g[c][b+p]=_;b+=x}var w=document.createElement("th");w.className="grid-empty-th",m.insertBefore(w,v[0])}for(c=n;c--;){var C=g[c],k=C.length;for(u=0;k>u;u+=1){var T=C[u],S=T.rowSpan;if(S>1&&!a[c][u])for(S+=c,p=c+1;S>p;p+=1)f=g[p],f&&(a[p][u]=!0,f.splice(u,0,T))}}this.domTh=e.extend([],g[n-1])}this.colSize=this.domTh.length},__initWidthAndHeight:function(){var t=this.options,e="function"==typeof t.resizewidth?t.resizewidth():void 0,n="function"==typeof t.resizeheight?t.resizeheight():void 0,s=t.gridwidth=i(t.gridwidth),o=t.gridheight=i(t.gridheight);this.gridWidth=(e||s)-2,"auto"===o&&(o=500,this.autoHeight=!0),this.gridHeight=(n||o)-2,this.theadHeight=30*this.elCache.find("tr").length,this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight,this.tableWidth=t.adaptive?this.gridWidth-17:i(t.tablewidth)||this.gridWidth},_create:function(){this.__createLayoutDom(),this.__theadClickEventBind(),this.__theadMouseEventBind(),this.__tbodyClickEventBind(),this.__tbodyMouseEventBind(),this.__imitateScroll(),this._resizeEventBind(),this.__boxScrollEventBind(),this._setStyleWidth(),this._setStyleHeight(),this._loading("show");var t=this.options,e=t.datasource,i=t.config;"function"==typeof e&&(this.persistence?i(this):(this._createPropertys(),this._createContent(),e(this,this.getQuery())))
},__createLayoutDom:function(){var t=this.options,i=this.el,n=document.createElement("div");n.className="grid-container";var s=['<div class="grid-style"></div>','<div class="grid-box">','<div class="grid-head">','<table class="grid-head-table"></table>',"</div>",'<div class="grid-body">','<div class="grid-empty">\u672c\u5217\u8868\u6682\u65e0\u8bb0\u5f55</div>','<div class="grid-table-box"><div class="grid-table-hide"></div></div>',"</div>",'<div class="grid-scroll">',"<div></div>","</div>",'<div class="grid-line"></div>','<div class="grid-overlay"></div>',"</div>",'<div class="grid-tfoot"></div>','<div class="grid-loading-bg grid-loading-bg-over"></div>','<div class="grid-loading-box"><span>\u6b63\u5728\u52a0\u8f7d...</span></div>'];n.innerHTML=s.join(""),i[0].parentNode.insertBefore(n,i[0]);var o=this.gridContainer=e(n).addClass(this.guid);this.isQm&&o.addClass("grid-container-qm"),this.gridTableBox=e(".grid-table-box",o);var a=this.gridBox=o.children(".grid-box");this.gridStyle=o.find(".grid-style").eq(0),this.gridHead=a.find(".grid-head").eq(0),this.gridBody=a.children(".grid-body").eq(0),this.gridOverlay=a.children(".grid-overlay").eq(0),this.gridHeadTable=this.gridHead.children(".grid-head-table").eq(0),this.gridLine=a.children(".grid-line").eq(0),this.gridScroll=a.children(".grid-scroll").eq(0),this.gridTfoot=o.children(".grid-tfoot").eq(0),this.gridEmpty=this.gridBody.children(".grid-empty").eq(0),this.loading=o.children(".grid-loading-bg").next().andSelf(),this.gridTableHide=e(".grid-table-hide",o).eq(0).append(i.addClass("grid-body-table")),t.ellipsis&&i.addClass("grid-ellipsis"),t.titleellipsis&&this.gridHeadTable.addClass("grid-ellipsis")},__theadClickEventBind:function(){var t=this.options,i=this.bindName,n=t.primarykey,s=this;this.gridHeadTable.on("click",function(o){o.stopPropagation();var a=e(o.target),r=a.attr("class");if("grid-select"!==r&&"grid-ittab"!==r)if(a.hasClass("grid-all-checkbox")){var l,d=s.domTr,h=s.multiChecked,c=s.selectedRowClass,u="grid-all-checkbox-checked",p=s.endRow,f=s.rowSize,g=a.hasClass(u),m=s.disabledIndex,v=s.data,y=0;if(g){for(var b=p;b--;)h[b]=!1,e(d[b]).removeClass(c);a.removeClass(u);for(var _=p;f>_;_+=1)h[_]=!1;s.multiCheckedNum=0}else{for(var x=p;x--;)l=v[x],l.hasOwnProperty(n)&&m[x]||(y++,h[x]=!0,e(d[x]).addClass(c));for(a.addClass(u),x=p;f>x;x+=1)l=v[x],l.hasOwnProperty(n)&&m[x]||(y++,h[x]=!0);s.multiCheckedNum=y}var w=t.selectall_callback;if("function"==typeof w){var C=!g;w.call(s,C?s.data:[],C)}}else{var k=a.parents(".grid-sort");if(k.length&&"grid-thead-text"===r){var T=s.sortType,S=i[s._thIndex(k[0])],N=T[S],D="DESC"!==N?"DESC":"ASC";s._setOptsSortNameAndSoryType(S,D),s.persistence&&s._triggerStatusChange(),s.loadData()}}})},_thIndex:function(t){var e=this.domTh,i=this.arrIndex;if(i)return i.call(e,t);for(var n=this.colSize;n--;)if(e[n]===t)return n;return-1},_setOptsSortNameAndSoryType:function(t,e){for(var i=this.query,n=this.options.sortstyle,s=i.sortName,o=i.sortType,a=n;a--;)if(t===s[a]){o.splice(a,1),s.splice(a,1);break}s.length===n&&(o.shift(),s.shift()),s.push(t),o.push(e),this._setSortTypeObj()},__theadMouseEventBind:function(){this.gridHeadTable.on("mouseover",function(t){var i=e(t.target),n=i.closest(".grid-fixed-s").eq(0);n.length&&n.parents("th").addClass("grid-thead-mouseover")}).on("mouseout",function(t){var i=e(t.target),n=i.closest(".grid-fixed-s").eq(0);n.length&&n.parents("th").removeClass("grid-thead-mouseover")})},__tbodyClickEventBind:function(){function t(t){return"TD"===t.prop("tagName")||t.hasClass("grid-fixed-s")}function i(t){var e=!1;"multi"===a?e=r.multiChecked[t]:"single"===a&&(e=t===r.singleChecked),"function"==typeof s.rowclick_callback&&s.rowclick_callback.call(r,r.data[t],e,t)}var n,s=this.options,o="function"==typeof s.rowdblclick_callback?s.rowdblclick_callback:null,a=s.selectrows,r=this,l=null,d=null;r.el.on("click",function(s){if(s.stopPropagation(),d=s.target,n=d.tagName,"TBODY"===n||"TABLE"===n)return!1;var a=e(d),h=a.closest("tr").eq(0),c=h.attr("index")||h[0].rowIndex-1+r.trStart,u=d.getAttribute("clickid")||"";return""!==u?r.fixedFnClick[u](r.data[c],c)===!1?!1:!0:void((t(a)||("SPAN"===n||"DIV"===n)&&t(a.parent()))&&(r._selectRows(c,void 0),o?(clearTimeout(l),l=setTimeout(function(){i(c)},300)):i(c)))}),r.el.on("dblclick",function(t){if(t.stopPropagation(),o){if(clearTimeout(l),d=t.target,n=d.tagName,"TBODY"===n||"TABLE"===n)return;var i=e(d).closest("tr").eq(0),s=i.attr("index")-0;o.call(r,r.data[s],s)}})},_selectRows:function(t,i){var n=this.domTr,s=n[t],o=this.options,a=o.selectrows,r=this.selectedRowClass,l=e(s);if(!this.disabledIndex[t])if("multi"===a){var d=this.multiChecked,h=d[t];if(void 0===i)i=h!==!0;else if(i===h)return;if(d[t]=i,!s)return;i===!1?(l.removeClass(r),this.multiCheckedNum--,this.gridAllCheck.removeClass("grid-all-checkbox-checked")):(l.addClass(r),this.multiCheckedNum+=1,this.multiCheckedNum===this.rowSize&&this.gridAllCheck.addClass("grid-all-checkbox-checked"))}else if("single"===a){var c=this.singleChecked;if(this.singleChecked=c===t&&i===!1?0/0:t,!s)return;i===!1?l.removeClass(r):(isNaN(c)||e(n[c]).removeClass(r),l.addClass(r))}},__tbodyMouseEventBind:function(){var t,i,n=this,s=this.bindName,o=this.options.titlerender;n.el.on("mouseover",function(a){var r=a.target,l=r.tagName;if("TR"!==l&&"TBODY"!==l&&"TABLE"!==l){var d=e(r).closest("td");if(d.length){var h,c=d[0].cellIndex,u=d.find(".grid-fixed-s"),p=u.length?u:d,f=s[c];t=d.closest("tr"),h=t.attr("index"),h||(h=t[0].rowIndex-1+n.trStart,t.attr("index",h)),t.addClass("grid-tr-over"),"number"==typeof f||d.attr("title")||("function"==typeof o?(i=o(n.data[h],f),i?d.attr("title",i):(i=e.trim(p.text()),i&&d.attr("title",i))):(i=e.trim(p.text()),i&&d.attr("title",i)))}}}).on("mouseout",function(){t&&t.removeClass("grid-tr-over")})},__imitateScroll:function(){var t,e,i=this,n=i.guid,s=this.gridHeadTable[0],o=this.gridStyle[0],a=this.el[0],r=this.options.fixcolumnnumber;this.writeStyle?this.gridScroll.on("scroll",function(){t=this.scrollLeft,e!==t&&(e=t,o.innerHTML=['<style type="text/css">.',n," .grid-fixed .grid-fixed-s{left:",t,"px}.",n," .grid-body-table, .",n," .grid-head-table{margin-left:-",t,"px}</style>"].join(""))}):this.gridScroll.on("scroll",function(){if(t=this.scrollLeft+"px",e!==t){e=t;var n="-"+t;s.style.marginLeft=n,a.style.marginLeft=n;for(var o=i.domFixed,l=o.length;l--;)for(var d=o[l],h=r;h--;)d[h].style.left=t;for(var c=i.tdsPackage,u=0;r>u;u+=1)c[u].html=c[u].html.replace(/(style="left:)\d*?px/,"$1"+t)}})},_resizeEventBind:function(){var t=this.options,i=this;(t.resizeheight||t.resizewidth)&&e(window).on("resize",function(){i.resize()})},resize:function(){var t=this.options;try{var e=t.resizeheight();"number"==typeof e&&e>0&&!this.autoHeight&&this._setHeight(e)}catch(i){}try{var n=t.resizewidth();"number"==typeof n&&n>0&&this.setWidth(n)}catch(i){}},__boxScrollEventBind:function(){var t=this;this.options.lazy&&!this.autoHeight&&this.gridBody.on("scroll",function(){t._lazyload(!0)})},_lazyload:function(t){var e=this,i=this.options,n=this.gridBody[0].scrollTop,s=e.endRow,o=parseInt(n/28,10),a=parseInt(this.boxHeight/28,10)+o+20+1;i.ellipsis?(clearTimeout(this.renderTimeout),t?this.renderTimeout=setTimeout(function(){e._clearAndLoad(o-20,s,a)},10):e._clearAndLoad(o-20,s,a)):!this.renderComplete&&this.appendRowsComplete&&a>s&&(clearTimeout(this.renderTimeout),t?this.renderTimeout=setTimeout(function(){e.appendRowsComplete=!1,e._appendRows(s,a)},10):(e.appendRowsComplete=!1,e._appendRows(s,a)))},_clearAndLoad:function(t,e,i){var n,s=this.rowSize,o=this.gridTbody[0],a=this.gridTableBox[0].style,r=this.trFrag,l=this.trStart,d=this.trEnd;i=this.trEnd=Math.min(s,i),t=this.trStart=Math.max(t,0);var h,c,u,p;if(i>e){var f=this._dataToDom(this.data,e,i),g=f.domTr;for(this.domTr=this.domTr.concat(g),this.domTd=this.domTd.concat(f.domTd),this.domFixed=this.domFixed.concat(f.domFixed),this.endRow=i,p=g.length;p--;)r.appendChild(g[p])}if(n=this.domTr,t>l||i>d){for(h=l,c=Math.min(d,t);c>h;h++)r.appendChild(n[h]);for(u=Math.max(t,d);i>u;u++)o.appendChild(n[u])}else if(l>t){var m=n[l];for(h=t,c=Math.min(l,i);c>h;h++)o.insertBefore(n[h],m);for(u=Math.max(l,i);d>u;u++)r.appendChild(n[u])}a.paddingTop=28*t+"px",a.paddingBottom=28*(s-i)+"px"},_setStyleWidth:function(){this.gridContainer.css("width",this.gridWidth),this.el.css("width",this.tableWidth),this.gridHeadTable.css("width",this.tableWidth)},_setStyleHeight:function(){this.gridContainer.css("height",this.gridHeight),this.gridHead.css("height",this.theadHeight),this.gridOverlay.css("height",this.theadHeight),this.gridBody.css("height",this.boxHeight)},_loading:function(t){this.options.loadtip&&(this.loading[t](),this.unRender&&"hide"===t&&this.gridContainer.find(".grid-loading-bg").removeClass("grid-loading-bg-over"))},_createPropertys:function(){this.__getTagsPropertys(),this.__initColWidth()},_createContent:function(){this.__renderHead(),this.__renderBody(),this._setColWidthStyle(),this.__packageTds(),this._colHidden(!0),this.ittab._init(this);var t=this.options;t.colhidden&&this.hideCol._init(this),t.colmove&&0===this.theadMap.length&&this.moveCol._init(this)},__getTagsPropertys:function(){for(var t=this.domTh,i=this.options,n=this.colSize,s=this.renderStyle,o=this.bindName,a=this.bindDotName,r=this.sort=[],l=this.theadText,d=this.colWidth,h=this.colRender,c=this.fixedFnClick,u=this.colHidden,p=this.disabled,f=0;n>f;f+=1){var g=t[f];d.push(g.style.width||g.getAttribute("width")||""),u[f]="true"===g.getAttribute("hide")||"none"===e(g).css("display"),p[f]=g.getAttribute("disabled"),g.removeAttribute("disabled");var m=g.getAttribute("renderStyle")||"",v=m.replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";s.push(v);var y=g.getAttribute("bindName")||"";o[f]=y,a[f]=/\./.test(y)?y.split("."):void 0,isNaN(this.numCol)&&y.length&&!isNaN(y-0)&&(this.numCol=f,o[f]=y-0,y=""),r[f]=""===y?!1:"true"===g.getAttribute("sort")||!1,l.push(g.innerHTML);var b=g.getAttribute("format"),_=i.colrender,x=g.getAttribute("render");if(h[f]=[],null!==b&&(/money/.test(b)?h[f][1]={format:Number(b.split("-")[1]||2),callback:this.formatFn.money}:/(dd|MM|yy)/i.test(b)&&(h[f][1]={format:b,callback:this.formatFn.date})),"function"==typeof _&&(h[f][0]={render:"colrenderFn",callback:_}),"string"==typeof x)if(new RegExp(x).test("a;button;image")){var w=g.getAttribute("options");if(null!==w)if(/{/.test(w))try{w=JSON.parse(w)}catch(C){w=new Function("return "+w+";")()}finally{"object"!=typeof w&&(w=void 0)}else w=window[w];if(w){var k=w.click;k="string"==typeof k?window[k]:k,w.click="function"==typeof k?c.push(k)-1:"",h[f][0]={render:"fiexdFn",method:x,options:w}}}else{var T=window[x];if(T){var S={format:b||void 0,render:T,renderStyle:m,text:l[f]};h[f][0]={render:"renderFn",colJson:S,callback:T}}}}var N=i.selectrows;("multi"===N||"single"===N)&&(o[0]=-1)},__initColWidth:function(){for(var t=this.gridWidth,i=this.tableWidth||t,n=this.colWidth,s=this.colWidthBackup,o=0,a=0,r=this.colSize,l=[],d=this.colSize;d--;){var h=n[d];s[d]=-1,""===h?(h=0,n[d]=200,l.push(d)):/%/.test(h)?(h=Math.round(i*parseInt(h,10)/100),n[d]=h):(h=parseInt(h,10),n[d]=h),o+=n[d],a+=h}var c=l.length,u=i-a;if(c>0&&u>c){for(var p=Math.round(u/c),f=0;c>f;f++)n[l[f]]=p;n[l[f-1]]+=u-p*c,this.tableWidth=i}else if(isNaN(this.tableWidth)&&o>=t)this.tableWidth=o;else{this.tableWidth||(this.tableWidth=t);for(var g=[],m=0,v=0,y=r;y--;){var b=Math.round(n[y]*i/o);m+=b,g[y]=b,v=y}g[v]+=i-m,this.colWidth=g}this.initColWidth=e.extend([],this.colWidth)},__renderHead:function(){var t=this.options,i=this.domTh,n=this.theadMap,s=this.theadMap.length,o=this.domHeadCol,a=this.domFixed[0]=[],r=this.theadText,l=this.colSize,d=t.fixcolumnnumber,h=this.options.colhidden,c=this.sort,u=document.createElement("tr"),p=t.titleellipsis;if(u.className="grid-width-norm",s){var f=document.createElement("th");f.className="grid-empty-th",u.appendChild(f);for(var g=s-1;g--;)for(var m=n[g],v=m.length;v--;){var y=m[v];y.removeAttribute("width"),y.style.width=""}}for(var b=0;l>b;b+=1){var _=o[b]=document.createElement("th");u.appendChild(_);var x=i[b];d>b&&e(x).addClass("grid-fixed"),c[b]&&e(x).addClass("grid-sort"),x.removeAttribute("width"),x.style.width="";var w=r[b],C=['<div class="grid-fixed-d">','<span class="grid-fixed-s">'];c[b]&&C.push('<b class="grid-sort-icon-desc cui-icon">&#xf0d7;</b><b class="grid-sort-icon-asc cui-icon">&#xf0d8;</b>'),C.push('<a class="grid-thead-text'),p&&C.push('" title="',e.trim(w.replace(/<.*?>/g,""))),C.push('">',w,"</a>"),h&&C.push('<a class="grid-select cui-icon">&#xf0b0;</a>'),C.push('<em class="grid-ittab"></em>'),C.push("</span>"),d>b&&!p&&C.push(w),C.push("</div>"),x.innerHTML=C.join("")}this.gridHeadTable.html(this.elCache.find("thead").eq(0).prepend(u)),this.elCache.parent().remove(),delete this.elCache;for(var k=0;d>k;k+=1)i[k].getElementsByTagName("div")[0].style.zIndex=d+1-k,a.push(i[k].getElementsByTagName("span")[0]);var T=e(i[0]);if("multi"===t.selectrows){T.find(".grid-select").eq(0).remove(),T.find(".grid-fixed-s").addClass("grid-no-move");var S=e(i[0]).find(".grid-thead-text").addClass("grid-all-checkbox");S.html(S.text()+"<b></b>"),this.gridAllCheck=S}"single"===t.selectrows&&(T.find(".grid-select").eq(0).remove(),T.find(".grid-fixed-s").addClass("grid-no-move"))},__renderBody:function(){var t=this.el,e=this.colSize,i=this.domBodyCol,n=document.createElement("tr");n.className="grid-width-norm";for(var s=0;e>s;s+=1){var o=i[s]=document.createElement("th");n.appendChild(o)}t.html("<thead></thead><tbody></tbody>"),t.find("thead").append(n),this.gridTbody=t.find("tbody").eq(0)},__packageTds:function(){var t=this.options,e=t.fixcolumnnumber,i=this.renderStyle,n=t.selectrows,s=this.selectrowsClass={no:"",multi:"grid-checkbox",single:"grid-radio"}[n],o=this.colSize,a="";this.writeStyle||(a="left:0px;");var r=[],l=0;if(""!==s){l+=1;var d=r[0]={};e>0?(d.html=['<div class="grid-fixed-d" style="z-index:',e+1,';"><span class="grid-fixed-s ',s,'" style="',a,i[0],'/**/">',"</span></div>"].join(""),d.style=""):(d.style=i[0],d.className=s)}for(var h=l;o>h;h+=1){var c=r[h]={};e>h?(c.html=['<div class="grid-fixed-d" style="z-index:',e+1-h,';"><span class="grid-fixed-s" style="',a,i[h],'/**/"><!---->',"</div>"].join(""),c.style=""):c.style=i[h]}this.tdsPackage=r},_setColWidth:function(t){for(var e=this.initColWidth,i=this.colHidden,n=this.tableWidth,s=this.colSize,o=0,a=s;a--;)i[a]===!1&&(o+=e[a]);for(var r=[],l=0,d=0,h=s;h--;)if(i[h]===!1){var c=Math.round(e[h]*n/o);l+=c,r[h]=c,d=h}else r[h]=0;r[d]+=n-l,this.colWidth=r,this._setColWidthStyle(),t&&this._isScrolling(!0)},_setColWidthStyle:function(t){var e,i=this.colWidth,n=this.domHeadCol,s=this.domBodyCol,o=this.colSize,a="";if("number"==typeof t)e=i[t]-1+"px",n[t].style.width=e,s[t].style.width=e;else for(;o--;)a=0===i[o]?0:i[o]-1+"px",n[o].style.width=a,s[o].style.width=a},_colHidden:function(t){for(var e=this.endRow,i=this.domTh,n=this.domTd,s=this.tdsPackage,o=this.domHeadCol,a=this.domBodyCol,r=this.colHidden,l=this.colWidth,d=this.colWidthBackup,h=this.tableWidth,c=this.theadMap,u=this.extendTh,p=null,f=null,g=this.colSize;g--;)if(r[g]===!0){if(-1===d[g]||t){if(o[g].style.display="none",f=i[g],c.length)for(var m=c.length;m--;)u[m][g]||(p=c[m][g],p.colSpan>1?p.colSpan--:p.style.display="none");else f.style.display="none";for(var v=e;v--;)n[v][g].style.display="none";a[g].style.display="none",s[g].style+="display:none;",d[g]=l[g],h-=l[g],l[g]=0}}else if(-1!==d[g]){if(o[g].style.display="",f=i[g],c.length)for(var y=c.length;y--;)u[y][g]||(p=c[y][g],"none"===p.style.display?p.style.display="":p.colSpan+=1);else f.style.display="";for(var b=e;b--;)n[b][g].style.display="";a[g].style.display="",s[g].style=s[g].style.replace(/display.*?($|;)/g,""),l[g]=d[g],h+=d[g],d[g]=-1}this.options.adaptive?this.isIttab=!1:this.tableWidth=h,this._setLayout(),this.persistence&&!t&&this._triggerStatusChange()},_triggerStatusChange:function(){var t,e,i,n=this.options,s=this.query,o=this.colWidth,a=this.colWidthBackup,r=this.colHidden,l=this.colIndex,d=!n.adaptive,h=0===this.theadMap.length&&n.colmove,c=0,u=[];for(e=this.colSize;e--;)r[e]?(o[e]=a[e],u[e]=1):u[e]=0,c+=o[e];i={hide:r,sortName:s.sortName,sortType:s.sortType,overall:c},window.JSON&&JSON.stringify?(h&&(i.index=l),d&&(i.width=o),t=JSON.stringify(i)):t=["{",h?['"index":[',l.join(","),"],"].join(""):"",d?['"width":[',o.join(","),"],"].join(""):"",'"hide":[',u.join(","),"],",'"sortName":["',s.sortName.join('","'),'"],','"sortType":["',s.sortType.join('","'),'"],','"overall":',c,"}"].join(""),this.options.onstatuschange(t)},_isScrolling:function(t){var e=this.el,i=this.gridWidth+2,n=this.tableWidth,s=this.boxHeight,o=e.height(),a=this.gridScroll;this.options.adaptive&&!this.isIttab?(o>s?n=this.tableWidth=i-17:(this.tableWidth=i,n=i+1),e.css("width",n),this.gridHeadTable.css("width",n),a.css("left","-999999px"),t||(this._setColWidth(!0),this._setLayout(!0))):(o>s&&i>=n+17&&(this.gridTableHide.css("marginBottom",0),a.css({left:"-999999px",width:i-17})),n>i&&s>=o+17&&(a.css({width:i,left:0,bottom:""}),a.css("bottom",0),this.gridTableHide.css("marginBottom",17)),(n+17>i&&o>s||n>i&&o+17>s)&&(a.css({width:i-17,left:0,bottom:""}),a.css("bottom",0),this.gridTableHide.css("marginBottom",17)),s>=o&&i>=n&&(this.gridTableHide.css("marginBottom",0),a.css({left:"-999999px",width:i}))),a.find("div").eq(0).css("width",n),clearTimeout(this.sc),this.sc=setTimeout(function(){a.scroll()},10)},_setAutoHeight:function(){var t,e;if(this.autoHeight){t=this.gridTableBox,e=28;var i=parseInt(t.css("marginBottom"),10)||1,n=Math.max(t.height()||this.rowSize*e,50);this._setHeight(n+i+this.theadHeight+(this.options.pagination&&this.rowSize?41:0)+2)}},_setLayout:function(t){this._setStyleWidth(),(this.options.fixcolumnnumber||!this.options.titleellipsis)&&this._setTheadHeight(),this._setStyleHeight(),t||this._isScrolling(),this._setAutoHeight()},_setTheadHeight:function(){this.gridHead.css("height","auto");var t=this.theadHeight=this.gridHead.height(),i=this.domFixed[0],n=this.isQm;this.boxHeight=this.gridHeight-this.paginationHeight-t-1,this.gridOverlay.css("height",t);for(var s=i.length;s--;){var o=i[s],a=e(o).parent(),r=parseInt(a.parent().height(),10),l=parseInt((r-(a.height()||21))/2,10);l=0>l?0:l,o.style.paddingTop=l+"px",o.style.height=r-(n?0:l+1)+"px"}},setConfig:function(t){this.persistence&&this.unRender&&this._setPersistence(t),this.options.datasource(this,this.getQuery())},setDatasource:function(t,i,n){this.persistence&&this.unRender&&"string"==typeof n&&this._setPersistence(n),t=t||[],i=i||0,this.rowSize=t.length,this.data=e.extend(!0,[],t),this.options.pagination&&(this.totalSize=i,this.unRender?this.__createPagination():this._changepages()),this._isEmpty(),this._initProperty(),this._renderTbody(0/0,0/0),this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout(),this._loading("hide"),this._loadComplateCallBack(),this.__setSortStyle(),delete this.unRender},_setPersistence:function(t){var i,n,s,o,a,r,l,d=this.options,h=this.colSize;if("string"==typeof t){try{i=e.parseJSON(t)}catch(c){}if(i){if(i.overall&&(this.tableWidth=i.overall,this.gridHeadTable.css("width",this.tableWidth)),n=i.index,0===this.theadMap.length&&d.colmove&&"object"==typeof n&&h===n.length&&(this.colIndex=n,this._sortPropertys(n)),this._createPropertys(),s=i.sortName,o=i.sortType,"array"===e.type(s)&&"array"===e.type(o)&&this.setQuery({sortName:s,sortType:o}),a=i.hide,"object"==typeof a&&h===a.length){for(l=0;h>l;l++)a[l]=!!a[l];this.colHidden=a}r=i.width,d.adaptive||"object"!=typeof r||h!==r.length||(this.colWidth=r)}else this._createPropertys()}else this._createPropertys();this._createContent()},_sortPropertys:function(t){var e,i,n,s,o=this.colSize;for(i=this.domTh,n=[],e=i[0].parentNode,s=0;o>s;s++)n[s]=i[t[s]],e.appendChild(n[s]);this.domTh=n},_isEmpty:function(){var t=this.options,e=this.rowSize;0===e?(this.gridEmpty.show(),this.gridTfoot.hide(),this.gridTableBox.hide(),this.paginationHeight=0):(this.gridEmpty.hide(),this.gridTableBox.show(),t.pagination&&(this.gridTfoot.show(),this.paginationHeight=41)),this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight},_initProperty:function(){var t,i=this,n=this.domTr.length>0;setTimeout(function(){i.gridBody[0].scrollTop=0},1),this.gridTableBox.removeAttr("style"),this.domTr=[],this.domTd=[],this.domFixed.length=1,this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=0/0,this.disabledIndex=[],this.odd=!1,this.endRow=0,this.renderComplete=!1,this.gridAllCheck&&this.gridAllCheck.removeClass("grid-all-checkbox-checked"),n&&(this.el[0].removeChild(this.gridTbody[0]),t=document.createElement("tbody"),this.el[0].appendChild(t),this.gridTbody=e(t)),this.trStart=0,this.trEnd=0},loadData:function(){this._loading("show"),this.options.datasource(this,this.getQuery())},addData:function(t,i){"object"===e.type(t)&&(t=[t]);var n=t.length,s=this.options,o=this.disabledIndex;if(0!==n){if(t=e.extend(!0,[],t),this.unRender)return void this.setDatasource(t);var a=s.selectrows;"number"==typeof i&&i<this.rowSize?(this._spliceArray(this.data,i,t),s.primarykey&&o.length&&this._spliceArray(o,i,new Array(n)),"multi"===a?this._spliceArray(this.multiChecked,i,new Array(n)):"single"===a&&i<this.singleChecked&&(this.singleChecked+=n)):this.data=this.data.concat(t),this.rowSize+=n,this._isEmpty(),this._renderTbody(n,i),this.paginationObj&&this._changepages(),this.autoHeight&&"function"==typeof s.resizewidth?this.resize():this._setLayout();var r=s.adddata_callback;"function"==typeof r&&r.call(this,t)}},__createPagination:function(){var t=this.options,e=this.query;if(t.pagination){var i=this;window.cui(this.gridTfoot).pagination({count:this.totalSize,pagesize:e.pageSize,pageno:e.pageNo,pagesize_list:t.pagesize_list,tpls:{pagination:t.pagination_model},cls:t.pagination_model,on_page_change:function(t,n){e.pageNo=t,e.pageSize=n,i.loadData(),i._changepages()}}),this.paginationObj=window.cui(this.gridTfoot)}},_changepages:function(){var t=this.query;this.paginationObj.setInitData({count:this.totalSize,pagesize:t.pageSize,pageno:t.pageNo}),this.paginationObj.reDraw()},_spliceArray:function(t,e,i){return Array.prototype.splice.apply(t,[e,0].concat(i)),t},_renderTbody:function(t,e){var i=this.data,n=this.endRow,s=this.rowSize,o=parseInt(this.boxHeight/28,10)+20,a=this.options.ellipsis;if(0===s)return this.renderComplete=!0,void(this.appendRowsComplete=!0);if(this.renderComplete=!1,isNaN(t)){var r=Math.min(s,n+o+1);a&&(this.trEnd=r),this._appendRows(n,r)}else if(this.gridAllCheck&&this.gridAllCheck.removeClass("grid-all-checkbox-checked"),"number"==typeof e&&n>e){for(var l=this.domTr,d=e;n>d;d+=1)l[d].removeAttribute("index");var h=l[e],c=this._dataToDom(i,e,e+t),u=c.domTr;if(this._spliceArray(this.domTr,e,u),this._spliceArray(this.domTd,e,c.domTd),this._spliceArray(this.domFixed,e+1,c.domFixed),e>=this.trStart&&e<this.trEnd||!a){for(var p=this.gridTbody[0],f=0;t>f;f+=1)p.insertBefore(u[f],h);a&&(this.trEnd+=t)}else{e<this.trStart&&a&&(this.trStart+=t,this.trEnd+=t);for(var g=this.trFrag,m=0;t>m;m+=1)g.appendChild(u[m])}this.endRow+=t,this._setAutoHeight(),this._setOddEven(e),this._setNum(e)}else this._lazyload()},_loadComplateCallBack:function(){var t=this.options.loadcomplate_callback;"function"==typeof t&&t.call(this,this)},__setSortStyle:function(){var t,i,n,s,o=this.query,a=o.sortType,r=o.sortName,l=r.length,d=this.bindName,h=this.domTh,c={DESC:"desc",ASC:"asc"};t:for(i=this.colSize;i--;)if(s=d[i],-1!==s)for(n=e(h[i]),t=0;l>t;t++)if(n.find("b").hide(),r[t]===s){n.find(".grid-sort-icon-"+c[a[t]].toLocaleLowerCase()).show();continue t}},_dataToDom:function(t,e,i){for(var n=this.options,s=this.oddEvenClass,o=n.oddevenrow,a=n.ellipsis,r=this.colSize,l=this.domTh,d=this.tdsPackage,h=this.bindName,c=this.bindDotName,u=n.fixcolumnnumber,p=this.numCol,f=this.colRender,g=n.rowstylerender,m=n.colstylerender,v="function"==typeof g,y="function"==typeof m,b=this.renderMethod,_=this.heightLight,x=""!==this.selectrowsClass?1:0,w=this.odd,C=n.primarykey,k="object"==typeof t[0]&&t[0].hasOwnProperty(C),T=this.createDomBox,S=["<table>"],N=e;i>N;N+=1){S.push('<tr class="'),o&&(w&&S.push(s),w=!w),_[N]&&S.push(" grid-highlight"),S.push('"');var D=t[N];if(k&&D.hasOwnProperty(C)&&(S.push(' pkey="'),S.push(String(D[C])),S.push('"')),v){var E=g(D);"string"==typeof E&&S.push(' style="',E,'"')}if(S.push(">"),1===x){var L=d[0];S.push('<td class="grid-select-input '),u>0?(S.push("grid-fixed"),S.push('" style="',L.style,'">',L.html,"</td>")):(S.push(L.className),S.push('" style="',L.style,'"></td>'))}for(var I="",$="",H="",M="",P="",A="",B=null,z=null,j=null,R=null,F=x;u>F;F+=1){H=h[F],M=c[F],p===F?P=N+H:H?"undefined"==typeof M?P=D[H]:(P=D[M[0]],P=P&&"object"==typeof P?P[M[1]]||"":""):P="";var O="",q="";if(B=f[F],z=B[0],j=B[1],j&&(P=j.callback(P,j.format)||P),z)switch(A=z.render,q=z.method,A){case"colrenderFn":P=z.callback(D,H)||P;break;case"renderFn":R=z.colJson,R.el=l[F],R.bindName=H,P=z.callback(D,N,R)||P;break;case"fiexdFn":P=b[q](D,z.options,P)||P}O="button"===q||a?[P,"</span>"].join(""):[P,"</span>",P].join(""),I=d[F];var W=I.html.replace("<!---->",O);S.push('<td class="grid-fixed" style="',I.style,'">'),y&&($=m(D,H),"string"==typeof $&&(W=W.replace("/**/",$))),S.push(W,"</td>")}for(;r>F;F+=1){if(H=h[F],M=c[F],I=d[F],p===F?P=N+H:H?"undefined"==typeof M?P=D[H]:(P=D[M[0]],P=P&&"object"==typeof P?P[M[1]]||"":""):P="",B=f[F],z=B[0],j=B[1],j&&(P=j.callback(P,j.format)||P),z)switch(A=z.render){case"colrenderFn":P=z.callback(D,H)||P;break;case"renderFn":R=z.colJson,R.el=l[F],R.bindName=H,P=z.callback(D,N,R)||P;break;case"fiexdFn":P=b[z.method](D,z.options,P)||P}var V=I.style;y&&($=m(D,H),"string"==typeof $&&(V+=";"+$)),S.push('<td style="',V,'">',P,"</td>")}S.push("</tr>")}this.odd=w,S.push("</table>"),T.innerHTML=S.join("");for(var U=[],Q=[],K=[],Y=" "+this.selectedRowClass,X=this.disabledIndex,J=this.multiChecked,G=this.singleChecked,Z=T.getElementsByTagName("table")[0],te=0,ee=i-e;ee>te;te+=1){var ie=Z.rows[te];U.push(ie);for(var ne=[],se=[],oe=0;r>oe;oe+=1){var ae=ie.cells[oe];ne.push(ae),u>oe&&se.push(ae.getElementsByTagName("span")[0])}X[te+e]?ie.addClass("grid-disable-row"):J[te+e]&&(ie.className+=Y),Q.push(ne),K.push(se)}if(!isNaN(G)&&G>=e&&i>G&&!X[G]){var re=Z.rows[G-e];re.className+=Y}return{domTd:Q,domTr:U,domFixed:K}},_appendRows:function(t,e){var i=this.rowSize;(this.autoHeight||!this.options.lazy)&&(e=i),e=this.endRow=Math.min(i,e);var n=this._dataToDom(this.data,t,e);this.domTr=this.domTr.concat(n.domTr),this.domTd=this.domTd.concat(n.domTd),this.domFixed=this.domFixed.concat(n.domFixed);for(var s=this.domTr,o=this.gridTbody[0],a=t;e>a;a+=1)o.appendChild(s[a]);this.gridTableBox.css("paddingBottom",28*(i-e)),this.renderComplete=e===i,this.appendRowsComplete=!0,this._setAutoHeight()},_setOddEven:function(t){var i=this.options;if(i.oddevenrow)for(var n=this.domTr,s=this.endRow,o=this.oddEvenClass,a=this.odd=t%2===0,r=t;s>r;r+=1)a?e(n[r]).removeClass(o):e(n[r]).addClass(o),a=!a},_setNum:function(t){if(!isNaN(this.numCol)){var e=this.domTd,i=this.domFixed,n=this.numCol,s=this.bindName[n],o=t,a=this.endRow;if(this.options.fixcolumnnumber>n)for(;a>o;o+=1){var r=i[o+1][n],l=o+s;r.innerHTML=l,r.nextSibling.nodeValue=l}else for(;a>o;o+=1)e[o][n].innerHTML=o+s}},hideCols:function(t){if("object"===e.type(t)){for(var i=this.colHidden,n=this.colSize,s=this.bindName,o=0;n>o;o+=1){var a=t[s[o]];"boolean"==typeof a&&(i[o]=a)}this._colHidden(!1)}},getQuery:function(){var t=e.extend(!0,{},this.query),i=this.customQuery;return i?(i.pageSize=t.pageSize,i.pageNo=t.pageNo,i.sortName=e.extend([],t.sortName),i.sortType=e.extend([],t.sortType),i):t},setQuery:function(t){"object"==typeof t&&(this.customQuery=t),t=t||this.backupQuery;var i=this.options.sortstyle,n=this.query;"number"==typeof t.pageSize&&(n.pageSize=t.pageSize),"number"==typeof t.pageNo&&(n.pageNo=t.pageNo),"array"===e.type(t.sortName)&&(n.sortName=e.extend([],t.sortName),n.sortName.length>i&&(n.sortName.length=i)),"array"===e.type(t.sortType)&&(n.sortType=e.extend([],t.sortType),n.sortType.length>i&&(n.sortType.length=i)),this._setPageSize(),this._setSortTypeObj()},_setHeight:function(t){return"number"!=typeof t||t-2===this.gridHeight?!1:(t-=2,this.boxHeight-=this.gridHeight-t,this.gridHeight=t,this._lazyload(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur(),!0)},setHeight:function(t){this.autoHeight=!this._setHeight(t),this._setLayout()},setWidth:function(t){if("number"==typeof t&&t-2!==this.gridWidth){var e=this.ittab;e&&e.ittabActive||(t-=2,this.options.adaptive&&(this.tableWidth=t-17,this.isIttab=!1),this.gridWidth=t,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur())}},setHighLight:function(t,i){var n=this.options.primarykey,s=this.data,o=this.endRow;if(s[0]&&s[0].hasOwnProperty(n))for(var a=this.rowSize;a--;)if(s[a][n]===t){o>a&&(i!==!1?e(this.domTr[a]).addClass("grid-highlight"):e(this.domTr[a]).removeClass("grid-highlight")),this.heightLight[a]=i!==!1;break}},selectRowsByIndex:function(t,e){e=e!==!1;var i,n,s=this.options,o=s.selectrows,a=this.data,r=[],l=this.disabledIndex;if("no"===o||t>=this.rowSize)return[];if(e!==!1&&(e=!0),"number"==typeof t&&(t=[t]),"single"===o)i=t[0],i>-1&&!l[i]&&(this._selectRows(i,e),r.push(a[i]));else for(var d=0,h=t.length;h>d;d+=1)n=t[d],l[d]||(this._selectRows(n,e),r.push(a[n]));return r},_pkToIndex:function(t,i){var n=this.data,s=this.rowSize,o=this.options.primarykey;if(n[0].hasOwnProperty(o)===!1||void 0===t)return[];"array"!==e.type(t)&&(t=[t]);for(var a=t.length,r=[],l=0;a>l;l+=1){for(var d=t[l],h=!1,c=s;c--;)if(n[c][o]===d){r.push(c),h=!0;break}!h&&i&&r.push(-1)}return r},getIndexByPk:function(t){return void 0!==t?this._pkToIndex(t,!0)[0]:void 0},selectRowsByPK:function(t,i){var n=this.options;return-1!=="array string number".indexOf(e.type(t))&&"no"!==n.selectrows&&this.rowSize&&this.data[0].hasOwnProperty(n.primarykey)!==!1?this.selectRowsByIndex(this._pkToIndex(t,!0),i):[]},disableRows:function(t,i){var n,s,o,a,r,l,d=this.options,h=e.type(t),c=this.disabledIndex;if(-1!=="array string number".indexOf(h)&&"no"!==d.selectrows&&this.rowSize&&this.data[0].hasOwnProperty(d.primarykey)!==!1)for(i=void 0===i?!0:i,i&&this.selectRowsByPK(t,!1),n=this._pkToIndex(t,!1),r=this.domTr,o=0,a=n.length;a>o;o++)s=n[o],l=e(r[s]),i?l.addClass("grid-disable-row"):l.removeClass("grid-disable-row"),c[s]=i},_removeRow:function(t){var i=this.data,n=i[t];return this.data.splice(t,1),e(this.domTr[t]).remove(),this.domTr.splice(t,1),this.domTd.splice(t,1),this.multiChecked.splice(t,1),this.disabledIndex.splice(t,1),this.singleChecked>t&&this.singleChecked--,this.domFixed.splice(t+1,1),n},removeData:function(t){if("number"==typeof t||"array"===e.type(t)){"number"==typeof t&&(t=[t]),t.sort(function(t,e){return t-e});for(var i=t.length,n=[],s=this.singleChecked,o=this.multiChecked,a=this.options,r=a.selectrows,l=a.ellipsis,d=this.endRow,h=0;i>h;h+=1){var c=t[h]-h,u=this.rowSize;if(isNaN(c)||c>=u){t[h]=0;break}this.rowSize=u-1,d>c&&(l&&(c<this.trEnd&&this.trEnd--,c<this.trStart&&this.trStart--),this.endRow--),"multi"===r?o[c]===!0&&this.multiCheckedNum--:"single"===r&&s===c&&(this.singleChecked=0/0);var p=this._removeRow(c);p&&n.push(p)}var f=this.rowSize;if(0>=f)this.query.pageNo>1&&(this.query.pageNo-=1),this.rowSize=0,this._isEmpty();else{"multi"===a.selectrows&&(this.multiCheckedNum===f?this.gridAllCheck.addClass("grid-all-checkbox-checked"):this.gridAllCheck.removeClass("grid-all-checkbox-checked"));for(var g=this.domTr,m=this.endRow;m--;)g[m].removeAttribute("index");var v=t[0]-0;this._setOddEven(v),this._setNum(v),this._lazyload()}this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout();var y=a.removedata_callback;"function"==typeof y&&y.call(this,n)}},removeDataByPk:function(t){this.removeData(this._pkToIndex(t,!1))},changeData:function(t,i){if("object"===e.type(t)){var n=this.options,s=n.primarykey,o=t[s];
if("undefined"!=typeof o){var a=this._pkToIndex(o,!1)[0];i=void 0===a?i:a}if(!("number"!=typeof i||0>i||i>=this.rowSize||(this.data[i]=e.extend(!0,this.data[i],t),i>=this.endRow))){var r=this._dataToDom([t],0,1),l=r.domTd[0],d=this.domTd[i],h=this.bindName,c=n.fixcolumnnumber;this.odd=!this.odd;for(var u=this.colSize;u--;){var p=h[u],f=e(d[u]);if(f.removeAttr("title"),c>u){if("number"!=typeof p){var g=f.find(".grid-fixed-s")[0],m=e(l[u]).find(".grid-fixed-s")[0].innerHTML;g.innerHTML=m,g.nextSibling.nodeValue=m}}else"number"!=typeof p&&f.html(l[u].innerHTML)}}}},getData:function(){return e.extend(!0,[],this.data)},getSelectedRowData:function(){var t=this.options.selectrows;if("no"===t)return[];var e=this.data;if("single"===t)return isNaN(this.singleChecked)?[]:[e[this.singleChecked]];if(this.multiCheckedNum===this.rowSize)return this.data;for(var i=this.multiChecked,n=this.rowSize,s=[],o=0;n>o;o+=1)i[o]&&s.push(e[o]);return s},getSelectedPrimaryKey:function(){var t=this.options,e=t.selectrows,i=t.primarykey,n=this.getSelectedRowData(),s=n.length;if("no"===e||!s||n[0].hasOwnProperty(i)===!1)return[];for(var o=[],a=0;s>a;a+=1)o.push(n[a][i]);return o},getSelectedIndex:function(){var t=this.options.selectrows;if("no"===t)return[];if("single"===t)return[this.singleChecked];for(var e=this.multiChecked,i=this.rowSize,n=[],s=0;i>s;s+=1)e[s]&&n.push(s);return n},getRowsDataByIndex:function(t){var i=this.data;if("number"==typeof t)return[i[t]];if("array"===e.type(t)){for(var n=t.length,s=[],o=0;n>o;o+=1){var a=i[t[o]];a&&s.push(a)}return s}},getRowsDataByPK:function(t){var i=this.options.primarykey,n=this.data;if(n[0]&&n[0].hasOwnProperty(i)){"array"!==e.type(t)&&(t=[t]);for(var s=t.length,o=[],a=0;s>a;a+=1)for(var r=t[a],l=this.rowSize;l--;)if(n[l][i]===r){o.push(n[l]);break}return o}return null},_switchCol:function(t,i){var n=this.domHeadCol,s=this.domBodyCol,o=this.domTd,a=this.domTh,r=this.domFixed,l=this.domTr,d=this.options.fixcolumnnumber,h=this.numCol;this._switchArrayValue(this.bindName,t,i),this._switchArrayValue(this.bindDotName,t,i),this._switchArrayValue(this.colIndex,t,i),this._switchArrayValue(this.theadText,t,i),this._switchArrayValue(this.renderStyle,t,i),this._switchArrayValue(this.colRender,t,i),this._switchArrayValue(this.colWidth,t,i),this._switchArrayValue(this.initColWidth,t,i),this._switchArrayValue(this.colWidthBackup,t,i),this._switchArrayValue(this.colHidden,t,i),this._switchArrayValue(this.tdsPackage,t,i),isNaN(h)||(t===h?this.numCol=i-(t>i?0:1):t>h&&h>=i?this.numCol=h+1:h>t&&i>h&&(this.numCol=h-1));var c=null,u=this.endRow,p=this.hideCol,f=p.domA,g=p.gridHidecolList;if(i===this.colSize){var m=e(a[t]);m.appendTo(m.parent());var v=e(s[t]);v.appendTo(v.parent());var y=e(n[t]);for(y.appendTo(y.parent());u--;)c=o[u],l[u].appendChild(c[t]),this._switchArrayValue(c,t,i);g&&g.appendChild(""!==this.selectrowsClass?f[t-1]:f[t])}else{for(e(a[t]).insertBefore(a[i]),e(s[t]).insertBefore(s[i]),e(n[t]).insertBefore(n[i]);u--;)c=o[u],l[u].insertBefore(c[t],c[i]),this._switchArrayValue(c,t,i);g&&(""!==this.selectrowsClass?g.insertBefore(f[t-1],f[i-1]):g.insertBefore(f[t],f[i]))}if(this._switchArrayValue(a,t,i),d>t||d>i){var b=Math.min(t,i),_=Math.max(t,i);d++;for(var x=0,w=this.rowSize+1;w>x;x++){this._switchArrayValue(r[x],t,i);for(var C=b;_>=C;C++)e(r[x][C]).parent().css("zIndex",d-C)}}this._switchArrayValue(s,t,i),this._switchArrayValue(n,t,i),this.persistence&&this._triggerStatusChange()},_switchArrayValue:function(t,e,i){t.length<i&&(t[i]=void 0),e>i?t.splice(i,0,t.splice(e,1)[0]):t.splice(i-1,0,t.splice(e,1)[0])},ittab:{ittabActive:!1,_init:function(t){var i=this,n=t.gridOverlay,s=t.gridLine,o=[],a=0,r=0,l=!0,d=0/0,h=t.options.adaptive;t.gridHeadTable.find(".grid-ittab").show(),t.gridHeadTable.on("mousedown",function(i){var h=i.target;if(r=0,"grid-ittab"===h.className){o=t.colWidth,d=t._thIndex(e(h).parents("th")[0]),n.show().css("cursor","col-resize");var c=n.offset().left;a=i.pageX-c,s.show().css("left",a),l=!1,n.off("mousemove").on("mousemove",function(t){return t.stopPropagation(),r=t.pageX-c,o[d]+r-a<24&&(r=24+a-o[d]),s.css("left",r),!1})}return!1}),n.on("mouseup mouseout",function(){if(!l&&!isNaN(d)&&(l=!0,e(this).hide(),s.hide(),0!==r)){var n=r-a;t.isIttab=!0,t.colWidth[d]=o[d]+n,t.tableWidth=t.tableWidth+n,i.ittabActive=!0,t._setColWidthStyle(h?void 0:d),t.persistence&&t._triggerStatusChange(),t._setLayout(),i.ittabActive=!1,a=r=0,d=0/0}})}},hideCol:{_init:function(t){var i=this.hideCol=document.createElement("div"),n=0;i.className="grid-hidecol";var s=t.theadHeight;i.style.top=s+"px",i.tabIndex="1",t.gridContainer.append(i),i=e(i);var o=t.colSize,a=t.theadText,r="",l=t.disabled,d=0,h="";""!==t.selectrowsClass&&(d+=1);for(var c=['<div class="grid-hidecol-list" hidefocus="true" >'];o>d;d+=1)r=e.trim(a[d].replace(/<.*?>/g,"")),l[d]?(n++,h=' class="grid-hide-disabled"'):h="",c.push('<a href="javascript:;" hidefocus="true"',h," title=",r,">",r,"</a>");c.push("</div>",'<div class="grid-hidecol-button">','<a href="javascript:;" hidefocus="true" class="cui-button blue-button grid-hidecol-confirm">\u786e\u5b9a</a>','<a href="javascript:;" hidefocus="true" class="cui-button red-button grid-hidecol-cancel">\u53d6\u6d88</a>',"</div>"),i.html(c.join("")),this.gridHidecolList=i.find(".grid-hidecol-list")[0],this.domA=this.gridHidecolList.getElementsByTagName("a"),this.bindEvent(t,i),this.ban=n},bindEvent:function(t,i){function n(){for(var t=c;r>t;t+=1)f[t]?e(p[t-c]).addClass("grid-hidecol-nochecked"):e(p[t-c]).removeClass("grid-hidecol-nochecked")}{var s,o,a=this,r=t.colSize,l=t.gridBox,d=null,h=!1,c=0,u=-1,p=this.domA;document.createElement("span")}""!==t.selectrowsClass&&(c+=1),t.gridHeadTable.on("click",function(f){var g=e(f.target);if(s=l.offset().left,o=s+t.gridWidth/2,g.hasClass("grid-select")){d&&i.blur(),d=g.parents("th").addClass("grid-thead-select");var m=g.offset().left,v=m-s+2;m>o&&(v-=126);var y=Math.max(t.boxHeight+t.paginationHeight-50,60);28*(r-a.ban)>y?i.children(".grid-hidecol-list").css("height",y):i.children(".grid-hidecol-list").css("height",""),i.css({left:v,top:t.theadHeight}).show().focus().attr("hidefocus","true"),n();var b=t._thIndex(d[0])-c;e(p[u]).removeClass("grid-hidecol-disabled"),e(p[b]).addClass("grid-hidecol-disabled"),u=b,h=!1}else e(i).blur()}),i.on("blur",function(){return h?void i.focus():(d&&d.removeClass("grid-thead-select"),void e(i).hide())}),i.on("mouseover",function(){h=!0}),i.on("mouseout",function(){h=!1});var f=t.colHidden;i.on("click",function(i){var s=e(i.target);if(s.hasClass("grid-hidecol-confirm")){for(var o=c;r>o;o+=1)f[o]=e(p[o-c]).hasClass("grid-hidecol-nochecked");return h=!1,t._colHidden(!1),e(this).blur(),!1}return s.hasClass("grid-hidecol-cancel")?(n(),h=!1,e(this).blur(),!1):"A"===s.prop("tagName")?(s.hasClass("grid-hidecol-disabled")||s.toggleClass("grid-hidecol-nochecked"),!1):void this.focus()}),setTimeout(n,100)}},moveCol:{_init:function(t){var i=e("<div></div>"),n=e("<div></div>"),s=t.gridHeadTable.addClass("grid-col-move");i.addClass("grid-col-move-insert"),n.addClass("grid-col-move-tag"),t.gridHead.append(n).append(i);var o=t.options,a=t.gridOverlay,r=o.fixcolumnnumber,l=t.selectrowsClass,d=null,h=0,c=[],u=[],p=0/0,f=0/0,g=!1,m=!0;s.on("mousedown",function(v){var y=e(v.target);if(y.hasClass("grid-fixed-s")&&!y.hasClass("grid-no-move")){o.colhidden&&t.hideCol.hideCol.blur(),m=!1,d=t.colHidden;var b=t.colWidth,_=t.colSize,x=t.domTh,w=t.domFixed[0],C=Math.round(s.offset().left),k=t.gridScroll[0].scrollLeft,T=0,S=t.theadHeight,N=y.parent().parent();p=t._thIndex(N[0]),h=0,c=[],u=[];var D=0,E=null,L=0,I=0;if(r>p){for(g=!0;r>D;D+=1)E=b[D],h+=E,L=Math.round(e(w[D]).offset().left)-C-k,d[D]===!0&&(L=-100),c.push(L),u.push(L),d[D]||(u[D]=L+E/2);c.push(h-k),u.push(h-k-1),l&&(c[0]=u[0]=-100),I=c[p]-1}else{for(g=!1,D=r;_>D;D+=1)E=b[D],L=Math.round(e(x[D]).offset().left)-C-k,d[D]===!0&&(L=-100),c.push(L),u.push(L),d[D]||(u[D-r]=L+E/2);c.push(t.tableWidth-k),u.push(t.tableWidth-k-1),0===r&&l&&(c[0]=u[0]=-100),I=c[p-r]-1}n.show().css({left:I,width:N.width(),height:S-1,lineHeight:S-1+"px"}).html(y.find(".grid-thead-text").eq(0).html()),i.show().css("height",S-5),a.show().css("cursor","move");var $=v.pageX;i.css("left",-1e3),a.off("mousemove").on("mousemove",function(t){t.stopPropagation(),T=t.pageX,n.css("left",I-$+T);for(var e=u.length,s=0;e>s;s+=1){var o=u[s];if(!(0>o)&&o>T){i.css("left",c[s]),f=g?s:s+r;break}}return!1})}}),a.on("mouseup",function(){if(!m&&(m=!0,a.hide(),i.hide(),n.hide(),!isNaN(f)&&!isNaN(p)&&f!==p&&f!==p+1)){if(p>f)return t._switchCol(p,f),void(f=p=0/0);for(var e=p+1;f>e;e+=1)if(!d[e]){t._switchCol(p,f),f=p=0/0;break}}}),a.on("mouseout",function(){a.hide(),i.hide(),n.hide(),f=p=0/0})}}})}(window.comtop),function(t){"use strict";function e(t,e,i){var n,s,o=t[i.bindName]||"",r=i.editType,l=r.datasource,d=a.SinglePullDown.prototype.options,h=r.value_field||d.value_field,c=r.label_field||d.label_field;for(n=0,s=l.length;s>n;n++)if(l[n][h]===o)return l[n][c]}function i(t,e,i){var n,s,o,r,l,d,h,c,u,p,f=t[i.bindName]||"";if(""===f)return"";for(f=f.split(";"),l=i.editType,d=l.datasource,h=a.SinglePullDown.prototype.options,c=l.value_field||h.value_field,u=l.label_field||h.label_field,p=[],o=0,r=f.length;r>o;o++)for(n=0,s=d.length;s>n;n++)d[n][c]===f[o]&&p.push(d[n][u]);return p.join(";")}function n(t,e,i){var n,s,o=t[i.bindName]||"",a=i.editType,r=a.radio_list;for(n=0,s=r.length;s>n;n++)if(r[n].value===o)return r[n].text}function s(t,e,i){var n,s,o,a,r,l,d,h=t[i.bindName]||"";if(""===h)return"";for(h=h.split(";"),r=i.editType,l=r.checkbox_list,d=[],o=0,a=h.length;a>o;o++)for(n=0,s=l.length;s>n;n++)l[n].value===h[o]&&d.push(l[n].text);return d.join(";")}var o=t.cQuery,a=t.UI,r=t.Tools.fixedNumber||function(t){return t},l=/^((i|I)nput|(c|C)lickInput|(p|((s|S)ingle|(m|M)ulti)?P)ullDown|(c|C)alender|(t|T)extarea)|((c|C)heckbox|(r|R)adio)Group$/,d=/(ullDown|Group)$/,h=/(nput|textarea)$/,c={required:function(t,e){var i,n,s,a=o.extend({m:"\u4e0d\u80fd\u4e3a\u7a7a!"},e||{}),r=a.emptyVal,l=a.m;if(""===t||null===t||void 0===t)return l;if(r)for(i=0,n=r.length;n>i;i++)if(t===r[i])return l;if("array"===o.type(t)){if(n=t.length,0===n)return l;for(i=0;n>i;i++)if(s=t[i],""===s||null===s||void 0===s)return l}return!0},numeric:function(t,e){if(""===t)return!0;var i,n,s=t;if(t=Number(t),e=e||{},i={notANumberMessage:e.notnm||"\u5fc5\u987b\u4e3a\u6570\u5b57!",notAnIntegerMessage:e.notim||"\u5fc5\u987b\u4e3a\u6574\u6570!",wrongNumberMessage:e.wrongm||"\u5fc5\u987b\u4e3a "+e.is+"!",tooLowMessage:e.minm||"\u5fc5\u987b\u5927\u4e8e "+e.min+"!",tooHighMessage:e.maxm||"\u5fc5\u987b\u5c0f\u4e8e "+e.max+"!",is:e.is||0===e.is?e.is:null,minimum:e.min||0===e.min?e.min:null,maximum:e.max||0===e.max?e.max:null,onlyInteger:e.oi||!1},!isFinite(t))return i.notANumberMessage;if(i.onlyInteger&&!/^\d+$/.test(String(s)))return i.notAnIntegerMessage;switch(!0){case null!==i.is:if(t!==Number(i.is))return i.wrongNumberMessage;break;case null!==i.minimum&&null!==i.maximum:if(n=this.numeric(t,{minm:i.tooLowMessage,min:i.minimum}),n!==!0)return n;if(n=this.numeric(t,{maxm:i.tooHighMessage,max:i.maximum}),n!==!0)return n;break;case null!==i.minimum:if(t<Number(i.minimum))return i.tooLowMessage;break;case null!==i.maximum:if(t>Number(i.maximum))return i.tooHighMessage}return!0},format:function(t,e){if(""===t)return!0;t=String(t);var i=o.extend({m:"\u4e0d\u7b26\u5408\u89c4\u5b9a\u683c\u5f0f!",pattern:/./,negate:!1},e||{});return i.pattern="string"===o.type(i.pattern)?new RegExp(i.pattern):i.pattern,i.negate||i.pattern.test(t)?!0:i.m},email:function(t,e){if(""===t)return!0;var i=o.extend({m:"\u90ae\u7bb1\u683c\u5f0f\u8f93\u5165\u4e0d\u5408\u6cd5!"},e||{}),n=this.format(t,{m:i.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return n!==!0?n:!0},dateFormat:function(t,e){var i=o.extend({m:"\u65e5\u671f\u683c\u5f0f\u5fc5\u987b\u4e3ayyyy-MM-dd\u5f62\u5f0f\uff01"},e||{}),n=this.format(t,{m:i.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i});return n!==!0?n:!0},length:function(t,e){t=String(t),e=e||{};var i,n={wrongLengthMessage:e.wrongm||"\u957f\u5ea6\u5fc5\u987b\u4e3a "+e.is+" \u5b57\u8282!",tooShortMessage:e.minm||"\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e "+e.min+" \u5b57\u8282!",tooLongMessage:e.maxm||"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e "+e.max+" \u5b57\u8282!",is:e.is||0===e.is?e.is:null,minimum:e.min||0===e.min?e.min:null,maximum:e.max||0===e.max?e.max:null};switch(!0){case null!==n.is:if(t.replace(/[^\x00-\xff]/g,"xx").length!==Number(n.is))return n.wrongLengthMessage;break;case null!==n.minimum&&null!==n.maximum:if(i=this.length(t,{minm:n.tooShortMessage,min:n.minimum}),i!==!0)return i;if(i=this.length(t,{maxm:n.tooLongMessage,max:n.maximum}),i!==!0)return i;break;case null!==n.minimum:if(t.replace(/[^\x00-\xff]/g,"xx").length<Number(n.minimum))return n.tooShortMessage;break;case null!==n.maximum:if(t.replace(/[^\x00-\xff]/g,"xx").length>Number(n.maximum))return n.tooLongMessage;break;default:return"\u957f\u5ea6\u9a8c\u8bc1\u5fc5\u987b\u63d0\u4f9b\u957f\u5ea6\u503c!"}return!0},inclusion:function(t,e){var i,n,s,a,r=o.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0,negate:!1},e||{}),l=r.within,d=!1,h=r.m||t+"\u6ca1\u6709\u5305\u542b\u5728\u6570\u7ec4"+r.within.join(",")+"\u4e2d";if(r.allowNull&&!t)return!0;if(!r.allowNull&&!t)return r.m;if(!r.caseSensitive){for(i=[],n=0,s=l;s>n;n++)a=l[n],"string"==typeof a&&(a=a.toLowerCase()),i.push(a);r.within=i,"string"==typeof t&&(t=t.toLowerCase())}for(n=0,s=l;s>n;n++)if(a=l[n],a===t||r.partialMatch&&-1!==t.indexOf(a)){d=!0;break}return r.negate===d?h:!0},exclusion:function(t,e){var i,n=o.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0},e||{});return n.m=n.m||t+"\u4e0d\u5e94\u8be5\u5728\u6570\u7ec4"+n.within.join(",")+"\u4e2d\uff01",n.negate=!0,i=this.inclusion(t,n),i!==!0?i:!0},acceptance:function(t,e){var i=o.extend({m:"\u5fc5\u987b\u9009\u62e9!"},e||{});return t?!0:i.m},custom:function(t,e){var i=o.extend({against:function(){return!0},args:{},m:"\u4e0d\u5408\u6cd5!"},e||{}),n=i.against;return"string"===o.type(n)&&(n=window[n]),n(t,i.args)?!0:i.m}};t.UI.EditableGrid=t.UI.Base.extend({options:{uitype:"EditableGrid",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"",ellipsis:!0,titleellipsis:!0,adaptive:!0,oddevenrow:!1,selectrows:"multi",fixcolumnnumber:0,config:null,onstatuschange:null,datasource:null,titlerender:null,colhidden:!0,colmove:!1,loadtip:!0,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],pagination:!0,pagination_model:"pagination_min_1",rowclick_callback:null,loadcomplete_callback:null,selectall_callback:null,rowdblclick_callback:null,edittype:{},submitdata:null,editbefore:null,editafter:null,deletebefore:null,deleteafter:null},formatFn:{date:t.Date.simpleformat,money:t.Number.money},renderMethod:{a:function(t,e,i){var n=["<a"],s=e.params,o="";if(s){s=s.split(";");for(var a=[],r=s.length;r--;){var l=s[r];t.hasOwnProperty(l)&&a.push([l,"=",t[l]].join(""))}o="?"+a.join("&")}return n.push(" href='",(e.url||"")+o,"' class='",e.className||"","' target='",e.targets||"-self","' clickid='",e.click,"'>",i,"</a>"),n.join("")},image:function(t,e,i){var n=["<img"];n.push(" class='",e.className||"");var s=e.url,o=e.compare,a=e.relation,r=e.title,l=i;if("string"==typeof a)if(/\./.test(a)){var d=a.split(".");l=t[d[0]][d[1]]}else l=t[a];return r=r&&r[l]?r[l]:i,o&&(s=o[l]||s),n.push("' src='",s,"' title='",r,"' clickid='",e.click,"' />"),n.join("")},button:function(t,e,i){var n=["<button class='"];return n.push(e.className||"","' clickid='",e.click,"'>",e.value||i,"</button>"),n.join("")}},_init:function(){var e=this.options,i=e.config,n=e.onstatuschange,s=e.datasource,a=e.sortstyle;e.primarykey||window.alert("EditableGrid need the property: primarykey!"),e.sortname.length=Math.min(e.sortname.length,a),e.sorttype.length=Math.min(e.sorttype.length,a),"string"==typeof i&&"function"==typeof window[i]&&(e.config=window[i]),"string"==typeof n&&"function"==typeof window[n]&&(e.onstatuschange=window[n]),"string"==typeof s&&"function"==typeof window[s]&&(e.datasource=window[s]),this.el=e.el,this.elCache=null,this.gridContainer=null,this.gridBox=null,this.gridStyle=null,this.gridHead=null,this.gridHeadTable=null,this.gridTableHide=null,this.gridBody=null,this.gridTableBox=null,this.gridTbody=null,this.gridScroll=null,this.gridLine=null,this.gridEmpty=null,this.gridTfoot=null,this.loading=null,this.gridOverlay=null,this.gridAllCheck=null,this.createDomBox=document.createElement("div"),this.domTh=[],this.domTr=[],this.domTd=[],this.domFixed=[],this.domHeadCol=[],this.domBodyCol=[],this.theadMap=[],this.extendTh=[],this.trFrag=document.createElement("tbody"),this.data=[],this.backupQuery=null,this.query=null,this.customQuery=null,this.rowSize=0,this.colSize=0,this.sortType={},this.theadText=[],this.renderStyle=[],this.colRender=[],this.bindName=[],this.left=0,this.numCol=0/0,this.colWidth=[],this.initColWidth=[],this.colWidthBackup=[],this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=0/0,this.disabledIndex=[],this.fixedFnClick=[],this.colHidden=[],this.disabled=[],this.totalSize=0,this.guid="eg-"+t.guid(),this.heightLight=[],this.colIndex=[],this.gridWidth=0,this.gridHeight=0,this.tableWidth=0,this.theadHeight=30,this.boxHeight=0,this.paginationHeight=e.pagination?41:0,this.selectrowsClass="",this.tdsPackage=[],this.renderComplete=!1,this.odd=!1,this.unRender=!0,this.autoHeight=!1,this.isIttab=!1,this.arrIndex=Array.prototype.indexOf,this.isQm=t.Browser.isQM,this.persistence="function"==typeof n&&"function"==typeof i,this.oddEvenClass="eg-even-row",this.selectedRowClass="eg-select-row";try{var r=o("head");r.append('<style type="text/css"></style>'),r.find("style").last()[0].innerHTML="",this.writeStyle=!0}catch(l){this.writeStyle=!1}this.editType={},this.editDict={},this.editObj=null,this.changeEditData={insertData:{},updateData:{},deleteData:[]},this.validateState={insert:{},update:{}},this.insertId=0,this.dataBackup={},this.isChanged=!1,this._backupQuery(),this._setPageSize(),this._setSortTypeObj(),this.__getDomTh(),this.__initWidthAndHeight()},_backupQuery:function(){var t=this.options,e={pageSize:t.pagesize,pageNo:t.pageno,sortName:o.extend([],t.sortname),sortType:o.extend([],t.sorttype)};this.backupQuery=o.extend(!0,{},e),this.query=e},_setPageSize:function(){for(var t=this.options,e=this.query,i=t.pagesize_list,n=e.pageSize,s=i.length;s--;)if(n===i[s])return;e.pageSize=i[1]},_setSortTypeObj:function(){for(var t=this.query,e=t.sortName,i=t.sortType,n=e.length,s=this.sortType={},o=0;n>o;o+=1){var a=i[o].toUpperCase();i[o]=a,s[e[o]]=a}},__getDomTh:function(){var t,e,i,n=this.el,s=this.colIndex,a=this.extendTh;if(t=o(document.createElement("div")).html(["<table><thead>",n.find("thead").html()||n.find("tbody").html()||n.html(),"</thead></table>"].join("")).find("table").eq(0),this.elCache=t,e=t.find("tr"),i=e.length,1===i){for(var r=t[0].getElementsByTagName("th"),l=[],d=0,h=r.length;h>d;d+=1)l.push(r[d]),s[d]=d;this.domTh=l}else{var c,u,p,f,g=this.theadMap=[];for(c=0;i>c;c+=1){var m=e.eq(c)[0],v=m.cells,y=v.length,b=0;for(a[c]=[],g[c]||(g[c]=[]),u=0;y>u;u+=1){var _=v[u],x=_.colSpan;for(p=0;x>p;p+=1)g[c][b+p]=_;b+=x}var w=document.createElement("th");w.className="eg-empty-th",m.insertBefore(w,v[0])}for(c=i;c--;){var C=g[c],k=C.length;for(u=0;k>u;u+=1){var T=C[u],S=T.rowSpan;if(S>1&&!a[c][u])for(S+=c,p=c+1;S>p;p+=1)f=g[p],f&&(a[p][u]=!0,f.splice(u,0,T))}}this.domTh=o.extend([],g[i-1])}this.colSize=this.domTh.length},__initWidthAndHeight:function(){var t=this.options,e="function"==typeof t.resizewidth?t.resizewidth():void 0,i="function"==typeof t.resizeheight?t.resizeheight():void 0,n=t.gridwidth=r(t.gridwidth),s=t.gridheight=r(t.gridheight);this.gridWidth=(e||n)-2,"auto"===s&&(s=500,this.autoHeight=!0),this.gridHeight=(i||s)-2,this.theadHeight=30*this.elCache.find("tr").length,this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight,this.tableWidth=t.adaptive?this.gridWidth-17:r(t.tablewidth)||this.gridWidth},_create:function(){this.__createLayoutDom(),this.__theadClickEventBind(),this.__theadMouseEventBind(),this.__tbodyMouseEventBind(),this.__tbodyKeyEventBind(),this.__imitateScroll(),this._resizeEventBind(),this._setStyleWidth(),this._setStyleHeight(),this._loading("show");var t=this.options,e=t.datasource,i=t.config;"function"==typeof e&&(this.persistence?i(this):(this._createPropertys(),this._createContent(),e(this,this.getQuery())))},__createLayoutDom:function(){var t=this.options,e=this.el,i=document.createElement("div");i.className="eg-container";var n=['<div class="eg-style"></div>','<div class="eg-box">','<div class="eg-head">','<table class="eg-head-table"></table>',"</div>",'<div class="eg-body">','<div class="eg-empty">\u672c\u5217\u8868\u6682\u65e0\u8bb0\u5f55</div>','<div class="eg-table-box"><div class="eg-table-hide"></div></div>',"</div>",'<div class="eg-scroll">',"<div></div>","</div>",'<div class="eg-line"></div>','<div class="eg-overlay"></div>',"</div>",'<div class="eg-tfoot"></div>','<div class="eg-loading-bg eg-loading-bg-over"></div>','<div class="eg-loading-box"><span>\u6b63\u5728\u52a0\u8f7d...</span></div>'];i.innerHTML=n.join(""),e[0].parentNode.insertBefore(i,e[0]);var s=this.gridContainer=o(i).addClass(this.guid);this.isQm&&s.addClass("eg-container-qm"),this.gridTableBox=o(".eg-table-box",s);var a=this.gridBox=s.children(".eg-box");this.gridStyle=s.find(".eg-style").eq(0),this.gridHead=a.find(".eg-head").eq(0),this.gridBody=a.children(".eg-body").eq(0),this.gridOverlay=a.children(".eg-overlay").eq(0),this.gridHeadTable=this.gridHead.children(".eg-head-table").eq(0),this.gridLine=a.children(".eg-line").eq(0),this.gridScroll=a.children(".eg-scroll").eq(0),this.gridTfoot=s.children(".eg-tfoot").eq(0),this.gridEmpty=this.gridBody.children(".eg-empty").eq(0),this.loading=s.children(".eg-loading-bg").next().andSelf(),this.gridTableHide=o(".eg-table-hide",s).eq(0).append(e.addClass("eg-body-table")),t.ellipsis&&e.addClass("eg-ellipsis"),t.titleellipsis&&this.gridHeadTable.addClass("eg-ellipsis")},__theadClickEventBind:function(){var t=this.options,e=this.bindName,i=t.primarykey,n=this;this.gridHeadTable.on("click",function(s){s.stopPropagation();var a=o(s.target),r=a.attr("class");if("eg-select"!==r&&"eg-ittab"!==r)if(a.hasClass("eg-all-checkbox")){var l,d=n.domTr,h=n.multiChecked,c=n.selectedRowClass,u="eg-all-checkbox-checked",p=n.rowSize,f=a.hasClass(u),g=n.disabledIndex,m=0,v=n.data;if(f){for(var y=p;y--;)h[y]=!1,o(d[y]).removeClass(c);a.removeClass(u),n.multiCheckedNum=0}else{for(var b=p;b--;)l=v[b],l.hasOwnProperty(i)&&g[b]||(m++,h[b]=!0,o(d[b]).addClass(c));a.addClass(u),n.multiCheckedNum=m}var _=t.selectall_callback;if("function"==typeof _){var x=!f;_.call(n,x?n.data:[],x)}}else{var w=a.parents(".eg-sort");if(w.length&&"eg-thead-text"===r){var C=n.sortType,k=e[n._thIndex(w[0])],T=C[k],S="DESC"!==T?"DESC":"ASC";n._setOptsSortNameAndSoryType(k,S),n.persistence&&n._triggerStatusChange(),"notChange"===n.submit()&&n.loadData()}}})},_thIndex:function(t){var e=this.domTh,i=this.arrIndex;if(i)return i.call(e,t);for(var n=this.colSize;n--;)if(e[n]===t)return n;return-1},_setOptsSortNameAndSoryType:function(t,e){for(var i=this.query,n=this.options.sortstyle,s=i.sortName,o=i.sortType,a=n;a--;)if(t===s[a]){o.splice(a,1),s.splice(a,1);break}s.length===n&&(o.shift(),s.shift()),s.push(t),o.push(e),this._setSortTypeObj()},__theadMouseEventBind:function(){this.gridHeadTable.on("mouseover",function(t){var e=o(t.target),i=e.closest(".eg-fixed-s").eq(0);i.length&&i.parents("th").addClass("eg-thead-mouseover")}).on("mouseout",function(t){var e=o(t.target),i=e.closest(".eg-fixed-s").eq(0);i.length&&i.parents("th").removeClass("eg-thead-mouseover")})},__tbodyMouseEventBind:function(){function t(t){var e=!1;"multi"===f?e=h.multiChecked[t]:"single"===f&&(e=t===h.singleChecked),"function"==typeof c.rowclick_callback&&c.rowclick_callback.call(h,l,e,t)}var e,i,n,s,a,r,l,d,h=this,c=this.options,u=this.editType,p=c.rowdblclick_callback,f=c.selectrows,g="A;BUTTON;IMG";this.el.on("mouseover",function(t){var d,c,p,f;t.stopPropagation(),d=o(t.target).closest("td").eq(0),d.length&&d!==e&&(c=d.closest("tr").eq(0),c.closest("tbody").length&&(e=d,i=c,n=i[0].rowIndex-1,l=h.data[n],p=d[0].cellIndex,a=h.bindName[p],r=u[a],i.addClass("eg-tr-over"),s=e.hasClass("eg-editing"),s||(r&&(f=!0,e.addClass("eg-editable-td")),h._renderTitle(e,a,n,f))))}).on("mouseout",function(t){t.stopPropagation(),e&&(i.removeClass("eg-tr-over"),e.removeClass("eg-editable-td"),i=e=s=n=a=r=void 0)}).on("dblclick",function(t){t.stopPropagation(),"function"==typeof c.rowdblclick_callback&&e&&!r&&(clearTimeout(d),c.rowdblclick_callback.call(h,l,n))}),this.gridBody.on("click",function(i){var c,u,f=o(i.target);if(i.stopPropagation(),e){if(s)return;if(h.editObj&&h._destroyFormEle(),r)return void h.__startEdit(r,e,n,a);if(c=f.prop("tagName"),u=f.attr("clickid")||"",-1!==g.indexOf(c))return void(""!==u&&h.fixedFnClick[u](l,n));if("INPUT"===c)return;f.hasClass("eg-select-input")&&h._selectRows(n,void 0),p?(clearTimeout(d),d=setTimeout(function(){t(n)},300)):t(n)}h.editObj&&h._destroyFormEle()})},__tbodyKeyEventBind:function(){var t=this;o(document).on("keydown",function(e){var i,n=t.editObj;n&&9===e.keyCode&&(e.preventDefault(),t._destroyFormEle(),i=n.index,!t.__createNextEditObj(i,n.bindName)&&i+1<t.rowSize&&t.__createNextEditObj(i+1,t.bindName[0]))})},__createNextEditObj:function(t,e){var i,n,s,a,r,l=this.colSize,d=this.bindName,h=this.editType,c=this.gridTableBox;for(i=0;l>i;i++)if(n=d[i],s=h[n],s&&a){if(r=o(this.domTd[t][i]),this.__startEdit(s,r,t,n,!0))return this.gridScroll.scrollLeft(c.scrollLeft()+this.left),c.scrollLeft(0),!0}else n===e&&(a=!0)},_renderTitle:function(t,e,i,n){var s,a,r=this.options.titlerender;"number"==typeof e||t.attr("title")||(a=t.find(".eg-fixed-s"),a=a.length?a:null,"function"==typeof r?(s=r(this.data[i],e),s?t.attr("title",s):s=o.trim((a||t).text())):s=o.trim((a||t).text())),s&&(n&&(s+=" (\u70b9\u51fb\u7f16\u8f91)"),t.attr("title",s))},__startEdit:function(t,e,i,n,s){var a,r,l=this.options.editbefore;return"function"==typeof l&&(a=l(this.data[i],n),"object"===o.type(a)&&(r=a.uitype,a.uitype=r.charAt(0).toLowerCase()+r.slice(1),t=a)),a!==!1?(e.removeAttr("title"),this._createFormEle(e,t,i,n,s),!0):!1},_selectRows:function(t,e){var i=this.domTr,n=i[t],s=this.options,a=s.selectrows,r=this.selectedRowClass,l=o(n);if(!this.disabledIndex[t])if("multi"===a){var d=this.multiChecked,h=d[t];if(void 0===e)e=h!==!0;else if(e===h)return;if(d[t]=e,!n)return;e===!1?(l.removeClass(r),this.multiCheckedNum--,this.gridAllCheck.removeClass("eg-all-checkbox-checked")):(l.addClass(r),this.multiCheckedNum+=1,this.multiCheckedNum===this.rowSize&&this.gridAllCheck.addClass("eg-all-checkbox-checked"))}else if("single"===a){var c=this.singleChecked;if(this.singleChecked=c===t&&e===!1?0/0:t,!n)return;e===!1?l.removeClass(r):(isNaN(c)||o(i[c]).removeClass(r),l.addClass(r))}},__imitateScroll:function(){var t,e,i=this,n=i.guid,s=this.gridHeadTable[0],o=this.gridStyle[0],a=this.el[0],r=this.options.fixcolumnnumber;this.writeStyle?this.gridScroll.on("scroll",function(){t=i.left=this.scrollLeft,e!==t&&(e=t,o.innerHTML=['<style type="text/css">.',n," .eg-fixed .eg-fixed-s{left:",t,"px}.",n," .eg-body-table, .",n," .eg-head-table{margin-left:-",t,"px}</style>"].join(""))}):this.gridScroll.on("scroll",function(){if(t=i.left=this.scrollLeft,t+="px",e!==t){e=t;var n="-"+t;s.style.marginLeft=n,a.style.marginLeft=n;for(var o=i.domFixed,l=o.length;l--;)for(var d=o[l],h=r;h--;)d[h].style.left=t;for(var c=i.tdsPackage,u=0;r>u;u+=1)c[u].html=c[u].html.replace(/(style="left:)\d*?px/,"$1"+t)}}),this.gridBody.on("scroll",function(){i.editObj&&i._destroyFormEle()})},_resizeEventBind:function(){var t=this.options,e=this;(t.resizeheight||t.resizewidth)&&o(window).on("resize",function(){e.resize()})},resize:function(){var t=this.options;try{var e=t.resizeheight();"number"==typeof e&&e>0&&this._setHeight(e)}catch(i){}try{var n=t.resizewidth();"number"==typeof n&&n>0&&this.setWidth(n)}catch(i){}},_setStyleWidth:function(){this.gridContainer.css("width",this.gridWidth),this.el.css("width",this.tableWidth),this.gridHeadTable.css("width",this.tableWidth)},_setStyleHeight:function(){this.gridContainer.css("height",this.gridHeight),this.gridHead.css("height",this.theadHeight),this.gridOverlay.css("height",this.theadHeight),this.gridBody.css("height",this.boxHeight)},_loading:function(t){this.options.loadtip&&(this.loading[t](),this.unRender&&"hide"===t&&this.gridContainer.find(".eg-loading-bg").removeClass("eg-loading-bg-over"))},_createPropertys:function(){this.__getTagsPropertys(),this._initEditType(),this.__initColWidth()},_createContent:function(){this.__renderHead(),this.__renderBody(),this._setColWidthStyle(),this.__packageTds(),this._colHidden(!0),this.ittab._init(this);var t=this.options;t.colhidden&&this.hideCol._init(this),t.colmove&&0===this.theadMap.length&&this.moveCol._init(this)},__getTagsPropertys:function(){var t,e=this.domTh,i=this.options,n=this.colSize,s=this.renderStyle,a=this.bindName,r=this.sort=[],l=this.theadText,d=this.colWidth,h=this.colRender,c=this.fixedFnClick,u=this.colHidden,p=this.disabled;for(t=0;n>t;t+=1){var f=e[t];d.push(f.style.width||f.getAttribute("width")||""),u[t]="true"===f.getAttribute("hide")||"none"===o(f).css("display"),p[t]=f.getAttribute("disabled"),f.removeAttribute("disabled");var g=f.getAttribute("renderStyle")||"",m=g.replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";s.push(m);var v=f.getAttribute("bindName")||"";a[t]=v,isNaN(this.numCol)&&v.length&&!isNaN(v-0)&&(this.numCol=t,a[t]=v-0,v=""),r[t]=""===v?!1:"true"===f.getAttribute("sort")||!1,l.push(f.innerHTML);var y=f.getAttribute("format"),b=i.colrender,_=f.getAttribute("render");if(h[t]=[],null!==y&&(/money/.test(y)?h[t][1]={format:Number(y.split("-")[1]||2),callback:this.formatFn.money}:/(dd|MM|yy)/i.test(y)&&(h[t][1]={format:y,callback:this.formatFn.date})),"function"==typeof b&&(h[t][0]={render:"colrenderFn",callback:b}),"string"==typeof _)if(new RegExp(_).test("a;button;image")){var x=f.getAttribute("options");if(null!==x)if(/{/.test(x))try{x=JSON.parse(x)}catch(w){x=new Function("return "+x+";")()}finally{"object"!=typeof x&&(x=void 0)}else x=window[x];if(x){var C=x.click;C="string"==typeof C?window[C]:C,x.click="function"==typeof C?c.push(C)-1:"",h[t][0]={render:"fiexdFn",method:_,options:x}}}else{var k=window[_];if(k){var T={format:y||void 0,render:k,renderStyle:g,text:l[t]};h[t][0]={render:"renderFn",colJson:T,callback:k}}}}var S=i.selectrows;("multi"===S||"single"===S)&&(a[0]=-1)},__initColWidth:function(){for(var t=this.gridWidth,e=this.tableWidth||t,i=this.colWidth,n=this.colWidthBackup,s=0,a=0,r=this.colSize,l=[],d=this.colSize;d--;){var h=i[d];n[d]=-1,""===h?(h=0,i[d]=200,l.push(d)):/%/.test(h)?(h=Math.round(e*parseInt(h,10)/100),i[d]=h):(h=parseInt(h,10),i[d]=h),s+=i[d],a+=h}var c=l.length,u=e-a;if(c>0&&u>c){for(var p=Math.round(u/c),f=0;c>f;f++)i[l[f]]=p;i[l[f-1]]+=u-p*c,this.tableWidth=e}else if(isNaN(this.tableWidth)&&s>=t)this.tableWidth=s;else{this.tableWidth||(this.tableWidth=t);for(var g=[],m=0,v=0,y=r;y--;){var b=Math.round(i[y]*e/s);m+=b,g[y]=b,v=y}g[v]+=e-m,this.colWidth=g}this.initColWidth=o.extend([],this.colWidth)},__renderHead:function(){var t,e,i,n,s=this.options,a=this.domTh,r=this.theadMap,l=this.theadMap.length,d=this.domHeadCol,h=this.domFixed[0]=[],c=this.theadText,u=this.colSize,p=s.fixcolumnnumber,f=this.options.colhidden,g=this.sort,m=document.createElement("tr"),v=s.titleellipsis,y=this.bindName,b=this.editType;if(m.className="eg-width-norm",l){var _=document.createElement("th");_.className="eg-empty-th",m.appendChild(_);for(var x=l-1;x--;)for(var w=r[x],C=w.length;C--;){var k=w[C];k.removeAttribute("width"),k.style.width=""}}for(e=0;u>e;e+=1){var T=d[e]=document.createElement("th");m.appendChild(T);var S=a[e];p>e&&o(S).addClass("eg-fixed"),g[e]&&o(S).addClass("eg-sort"),S.removeAttribute("width"),S.style.width="";var N=c[e],D=['<div class="eg-fixed-d">','<span class="eg-fixed-s'];if(t=b[y[e]],t&&(o(S).addClass("eg-editable"),t.validate))for(t=t.validate,i=0,n=t.length;n>i;i++)if("required"===t[i].type){N="<i>*</i>"+N;
break}D.push('">'),g[e]&&D.push('<b class="eg-sort-icon-desc cui-icon">&#xf0d7;</b><b class="eg-sort-icon-asc cui-icon">&#xf0d8;</b>'),D.push('<a class="eg-thead-text'),v&&D.push('" title="',o.trim(N.replace(/<.*?>/g,""))),D.push('">',N,"</a>"),D.push(),f&&D.push('<a class="eg-select cui-icon">&#xf0b0;</a>'),D.push('<em class="eg-ittab"></em>'),D.push("</span>"),p>e&&!v&&D.push(N),D.push("</div>"),S.innerHTML=D.join("")}for(this.gridHeadTable.html(this.elCache.find("thead").eq(0).prepend(m)),this.elCache.parent().remove(),delete this.elCache,i=0;p>i;i+=1)a[i].getElementsByTagName("div")[0].style.zIndex=p+1-i,h.push(a[i].getElementsByTagName("span")[0]);var E=o(a[0]);if("multi"===s.selectrows){E.find(".eg-select").eq(0).remove(),E.find(".eg-fixed-s").addClass("eg-no-move");var L=o(a[0]).find(".eg-thead-text").addClass("eg-all-checkbox");L.html(L.text()+"<b></b>"),this.gridAllCheck=L}"single"===s.selectrows&&(E.find(".eg-select").eq(0).remove(),E.find(".eg-fixed-s").addClass("eg-no-move"))},__renderBody:function(){var t=this.el,e=this.colSize,i=this.domBodyCol,n=document.createElement("tr");n.className="eg-width-norm";for(var s=0;e>s;s+=1){var o=i[s]=document.createElement("th");n.appendChild(o)}t.html("<thead></thead><tbody></tbody>"),t.find("thead").append(n),this.gridTbody=t.find("tbody").eq(0)},__packageTds:function(){var t=this.options,e=t.fixcolumnnumber,i=this.renderStyle,n=t.selectrows,s=this.selectrowsClass={no:"",multi:"eg-checkbox",single:"eg-radio"}[n],o=this.colSize,a="";this.writeStyle||(a="left:0px;");var r=[],l=0;if(""!==s){l+=1;var d=r[0]={};e>0?(d.html=['<div class="eg-fixed-d" style="z-index:',e+1,';"><span class="eg-fixed-s ',s,'" style="',a,i[0],'/**/">',"</span></div>"].join(""),d.style=""):(d.style=i[0],d.className=s)}for(var h=l;o>h;h+=1){var c=r[h]={};e>h?(c.html=['<div class="eg-fixed-d" style="z-index:',e+1-h,';"><span class="eg-fixed-s" style="',a,i[h],'/**/"><!---->',"</div>"].join(""),c.style=""):c.style=i[h]}this.tdsPackage=r},_setColWidth:function(t){for(var e=this.initColWidth,i=this.colHidden,n=this.tableWidth,s=this.colSize,o=0,a=s;a--;)i[a]===!1&&(o+=e[a]);for(var r=[],l=0,d=0,h=s;h--;)if(i[h]===!1){var c=Math.round(e[h]*n/o);l+=c,r[h]=c,d=h}else r[h]=0;r[d]+=n-l,this.colWidth=r,this._setColWidthStyle(),t&&this._isScrolling(!0)},_setColWidthStyle:function(t){var e,i=this.colWidth,n=this.domHeadCol,s=this.domBodyCol,o=this.colSize,a="";if("number"==typeof t)e=i[t]-1+"px",n[t].style.width=e,s[t].style.width=e;else for(;o--;)a=0===i[o]?0:i[o]-1+"px",n[o].style.width=a,s[o].style.width=a},_colHidden:function(t){for(var e=this.rowSize,i=this.domTh,n=this.domTd,s=this.tdsPackage,o=this.domHeadCol,a=this.domBodyCol,r=this.colHidden,l=this.colWidth,d=this.colWidthBackup,h=this.tableWidth,c=this.theadMap,u=this.extendTh,p=null,f=null,g=this.colSize;g--;)if(r[g]===!0){if(-1===d[g]||t){if(o[g].style.display="none",f=i[g],c.length)for(var m=c.length;m--;)u[m][g]||(p=c[m][g],p.colSpan>1?p.colSpan--:p.style.display="none");else f.style.display="none";for(var v=e;v--;)n[v][g].style.display="none";a[g].style.display="none",s[g].style+="display:none;",d[g]=l[g],h-=l[g],l[g]=0}}else if(-1!==d[g]){if(o[g].style.display="",f=i[g],c.length)for(var y=c.length;y--;)u[y][g]||(p=c[y][g],"none"===p.style.display?p.style.display="":p.colSpan+=1);else f.style.display="";for(var b=e;b--;)n[b][g].style.display="";a[g].style.display="",s[g].style=s[g].style.replace(/display.*?($|;)/g,""),l[g]=d[g],h+=d[g],d[g]=-1}this.options.adaptive?this.isIttab=!1:this.tableWidth=h,this._setLayout(),this.persistence&&!t&&this._triggerStatusChange()},_triggerStatusChange:function(){var t,e,i,n=this.options,s=this.query,o=this.colWidth,a=this.colWidthBackup,r=this.colHidden,l=this.colIndex,d=!n.adaptive,h=0===this.theadMap.length&&n.colmove,c=0,u=[];for(e=this.colSize;e--;)r[e]?(o[e]=a[e],u[e]=1):u[e]=0,c+=o[e];i={hide:r,sortName:s.sortName,sortType:s.sortType,overall:c},window.JSON&&JSON.stringify?(h&&(i.index=l),d&&(i.width=o),t=JSON.stringify(i)):t=["{",h?['"index":[',l.join(","),"],"].join(""):"",d?['"width":[',o.join(","),"],"].join(""):"",'"hide":[',u.join(","),"],",'"sortName":["',s.sortName.join('","'),'"],','"sortType":["',s.sortType.join('","'),'"],','"overall":',c,"}"].join(""),this.options.onstatuschange(t)},_isScrolling:function(t){var e=this.el,i=this.gridWidth+2,n=this.tableWidth,s=this.boxHeight,o=e.height(),a=this.gridScroll;this.options.adaptive&&!this.isIttab?(o>s?n=this.tableWidth=i-17:(this.tableWidth=i,n=i+1),e.css("width",n),this.gridHeadTable.css("width",n),a.css("left","-999999px"),t||(this._setColWidth(!0),this._setLayout(!0))):(o>s&&i>=n+17&&(this.gridTableHide.css("marginBottom",0),a.css({left:"-999999px",width:i-17})),n>i&&s>=o+17&&(a.css({width:i,left:0,bottom:""}),a.css("bottom",0),this.gridTableHide.css("marginBottom",17)),(n+17>i&&o>s||n>i&&o+17>s)&&(a.css({width:i-17,left:0,bottom:""}),a.css("bottom",0),this.gridTableHide.css("marginBottom",17)),s>=o&&i>=n&&(this.gridTableHide.css("marginBottom",0),a.css({left:"-999999px",width:i}))),a.find("div").eq(0).css("width",n),clearTimeout(this.sc),this.sc=setTimeout(function(){a.scroll()},10)},_setAutoHeight:function(){var t,e;if(this.autoHeight){t=this.gridTableBox,e=28;var i=parseInt(t.css("marginBottom"),10)||1,n=Math.max(t.height()||this.rowSize*e,50);this._setHeight(n+i+this.theadHeight+(this.options.pagination&&this.rowSize?41:0)+2)}},_setLayout:function(t){this.editObj&&this._destroyFormEle(),this._setStyleWidth(),(this.options.fixcolumnnumber||!this.options.titleellipsis)&&this._setTheadHeight(),this._setStyleHeight(),t||this._isScrolling(),this._setAutoHeight()},_setTheadHeight:function(){this.gridHead.css("height","auto");var t=this.theadHeight=this.gridHead.height(),e=this.domFixed[0],i=this.isQm;this.boxHeight=this.gridHeight-this.paginationHeight-t-1,this.gridOverlay.css("height",t);for(var n=e.length;n--;){var s=e[n],a=o(s).parent(),r=parseInt(a.parent().height(),10),l=parseInt((r-(a.height()||21))/2,10);l=0>l?0:l,s.style.paddingTop=l+"px",s.style.height=r-(i?0:l+1)+"px"}},setConfig:function(t){this.persistence&&this.unRender&&this._setPersistence(t),this.options.datasource(this,this.getQuery())},setDatasource:function(t,e,i){this.persistence&&this.unRender&&"string"==typeof i&&this._setPersistence(i),t=t||[],e=e||0,this.rowSize=t.length,this.data=o.extend(!0,[],t),this.options.pagination&&(this.totalSize=e,this.unRender?this.__createPagination():this._changepages()),this._isEmpty(),this._initProperty(),this._renderTbody(0/0,0/0),this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout(),this._loading("hide"),this._loadCompleteCallBack(),this.__setSortStyle(),delete this.unRender},_setPersistence:function(t){var e,i,n,s,a,r,l,d=this.options,h=this.colSize,c=this.bindName,u=this.editType;if("string"==typeof t){try{e=o.parseJSON(t)}catch(p){}if(e){if(e.overall&&(this.tableWidth=e.overall,this.gridHeadTable.css("width",this.tableWidth)),i=e.index,0===this.theadMap.length&&d.colmove&&"object"==typeof i&&h===i.length&&(this.colIndex=i,this._sortPropertys(i)),this._createPropertys(),n=e.sortName,s=e.sortType,"array"===o.type(n)&&"array"===o.type(s)&&this.setQuery({sortName:n,sortType:s}),a=e.hide,"object"==typeof a&&h===a.length){for(l=0;h>l;l++)a[l]=u[c[l]]?!1:!!a[l];this.colHidden=a}r=e.width,d.adaptive||"object"!=typeof r||h!==r.length||(this.colWidth=r)}else this._createPropertys()}else this._createPropertys();this._createContent()},_sortPropertys:function(t){var e,i,n,s,o=this.colSize;for(i=this.domTh,n=[],e=i[0].parentNode,s=0;o>s;s++)n[s]=i[t[s]],e.appendChild(n[s]);this.domTh=n},_isEmpty:function(){var t=this.options,e=this.rowSize;0===e?(this.gridEmpty.show(),this.gridTfoot.hide(),this.gridTableBox.hide(),this.paginationHeight=0):(this.gridEmpty.hide(),this.gridTableBox.show(),t.pagination&&(this.gridTfoot.show(),this.paginationHeight=41)),this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight},_initProperty:function(){var t=this;setTimeout(function(){t.gridBody[0].scrollTop=0},1),this.gridTableBox.removeAttr("style"),this.domTr=[],this.domTd=[],this.domFixed.length=1,this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=0/0,this.disabledIndex=[],this.odd=!1,this.renderComplete=!1,this.gridAllCheck&&this.gridAllCheck.removeClass("eg-all-checkbox-checked"),this.gridTbody.html(""),this.editObj=null,this.changeEditData={insertData:{},updateData:{},deleteData:[]},this.insertId=0,this.validateState={insert:{},update:{}},this.isChanged=!1,this.dataBackup={}},loadData:function(){this._loading("show"),this.options.datasource(this,this.getQuery())},_addData:function(t,e){"object"===o.type(t)&&(t=[t]);var i=this.options,n=this.disabledIndex,s=t.length;if(0!==s){if(t=o.extend(!0,[],t),this.unRender)return void this.setDatasource(t);var a=i.selectrows;"number"==typeof e&&e<this.rowSize?(this._spliceArray(this.data,e,t),i.primarykey&&n.length&&this._spliceArray(n,e,new Array(s)),"multi"===a?this._spliceArray(this.multiChecked,e,new Array(s)):"single"===a&&e<this.singleChecked&&(this.singleChecked+=s)):this.data=this.data.concat(t),this.rowSize+=s,this._isEmpty(),this._renderTbody(s,e),this.paginationObj&&this._changepages(),this.autoHeight&&"function"==typeof i.resizewidth?this.resize():this._setLayout()}},__createPagination:function(){var t=this.options,e=this.query;if(t.pagination){var i=this;window.cui(this.gridTfoot).pagination({count:this.totalSize,pagesize:e.pageSize,pageno:e.pageNo,pagesize_list:t.pagesize_list,tpls:{pagination:t.pagination_model},cls:t.pagination_model,on_page_change:function(t,n){var s=i.submit();return"ban"===s?(i._changepages(),!1):(e.pageNo=t,e.pageSize=n,"notChange"===s&&i.loadData(),void i._changepages())}}),this.paginationObj=window.cui(this.gridTfoot)}},_changepages:function(){var t=this.query;this.paginationObj.setInitData({count:this.totalSize,pagesize:t.pageSize,pageno:t.pageNo}),this.paginationObj.reDraw()},_spliceArray:function(t,e,i){return Array.prototype.splice.apply(t,[e,0].concat(i)),t},_renderTbody:function(t,e){var i=this.data,n=this.rowSize,s=n-t,o=this.gridTbody[0];if(0===n)return void(this.renderComplete=!0);if(this.renderComplete=!1,isNaN(t))this._appendRows(0,n);else{if(this.gridAllCheck&&this.gridAllCheck.removeClass("eg-all-checkbox-checked"),"number"==typeof e&&s>e){for(var a=this._dataToDom(i,e,e+t),r=a.domTr,l=this.domTr,d=l[e],h=e;s>h;h+=1)l[h].removeAttribute("index");this._spliceArray(this.domTr,e,r),this._spliceArray(this.domTd,e,a.domTd),this._spliceArray(this.domFixed,e+1,a.domFixed);for(var c=0;t>c;c+=1)o.insertBefore(r[c],d);this._setOddEven(e),this._setNum(e)}else this._appendRows(s,n);this._setAutoHeight()}},_loadCompleteCallBack:function(){var t=this.options.loadcomplete_callback;"function"==typeof t&&t.call(this,this)},__setSortStyle:function(){var t,e,i,n,s=this.query,a=s.sortType,r=s.sortName,l=r.length,d=this.bindName,h=this.domTh,c={DESC:"desc",ASC:"asc"};t:for(e=this.colSize;e--;)for(n=d[e],i=o(h[e]),t=0;l>t;t++)if(r[t]===n){i.find("b").hide(),i.find(".eg-sort-icon-"+c[a[t]].toLocaleLowerCase()).show();continue t}},_dataToDom:function(t,e,i){for(var n=this.options,s=this.oddEvenClass,o=n.oddevenrow,a=n.ellipsis,r=this.colSize,l=this.domTh,d=this.tdsPackage,h=this.bindName,c=n.fixcolumnnumber,u=this.numCol,p=this.colRender,f=n.rowstylerender,g=n.colstylerender,m="function"==typeof f,v="function"==typeof g,y=this.renderMethod,b=this.heightLight,_=""!==this.selectrowsClass?1:0,x=this.odd,w=n.primarykey,C=this.createDomBox,k=["<table>"],T=e;i>T;T+=1){k.push('<tr class="'),o&&(x&&k.push(s),x=!x),b[T]&&k.push(" eg-highlight"),k.push('"');var S=t[T];if(S.hasOwnProperty(w)&&(k.push(' pkey="'),k.push(String(S[w])),k.push('"')),m){var N=f(S);"string"==typeof N&&k.push(' style="',N,'"')}if(k.push(">"),1===_){var D=d[0];k.push('<td class="eg-select-input '),c>0?(k.push("eg-fixed"),k.push('" style="',D.style,'">',D.html,"</td>")):(k.push(D.className),k.push('" style="',D.style,'"></td>'))}for(var E="",L="",I="",$="",H="",M=null,P=null,A=null,B=null,z=_;c>z;z+=1){I=h[z],$=u===z?T+I:I?S[I]:"";var j="",R="";if(M=p[z],P=M[0],A=M[1],A&&($=A.callback($,A.format)||$),P)switch(H=P.render,R=P.method,H){case"colrenderFn":$=P.callback(S,I)||$;break;case"renderFn":B=P.colJson,B.el=l[z],B.bindName=I,$=P.callback(S,T,B)||$;break;case"fiexdFn":$=y[R](S,P.options,$)||$}j="button"===R||a?[$,"</span>"].join(""):[$,"</span>",$].join(""),E=d[z];var F=E.html.replace("<!---->",j);k.push('<td class="eg-fixed" style="',E.style,'">'),v&&(L=g(S,I),"string"==typeof L&&(F=F.replace("/**/",L))),k.push(F,"</td>")}for(;r>z;z+=1){if(I=h[z],E=d[z],$=u===z?T+I:I?S[I]:"",M=p[z],P=M[0],A=M[1],A&&($=A.callback($,A.format)||$),P)switch(H=P.render){case"colrenderFn":$=P.callback(S,I)||$;break;case"renderFn":B=P.colJson,B.el=l[z],B.bindName=I,$=P.callback(S,T,B)||$;break;case"fiexdFn":$=y[P.method](S,P.options,$)||$}var O=E.style;v&&(L=g(S,I),"string"==typeof L&&(O+=";"+L)),k.push('<td style="',O,'">',$,"</td>")}k.push("</tr>")}this.odd=x,k.push("</table>"),C.innerHTML=k.join("");for(var q=[],W=[],V=[],U=C.getElementsByTagName("table")[0],Q=0,K=i-e;K>Q;Q+=1){var Y=U.rows[Q];q.push(Y);for(var X=[],J=[],G=0;r>G;G+=1){var Z=Y.cells[G];X.push(Z),c>G&&J.push(Z.getElementsByTagName("span")[0])}W.push(X),V.push(J)}return{domTd:W,domTr:q,domFixed:V}},_appendRows:function(t,e){var i=this._dataToDom(this.data,t,e);this.domTr=this.domTr.concat(i.domTr),this.domTd=this.domTd.concat(i.domTd),this.domFixed=this.domFixed.concat(i.domFixed);for(var n=this.domTr,s=this.gridTbody[0],o=t;e>o;o+=1)s.appendChild(n[o]);this.renderComplete=!0,this._setAutoHeight()},_setOddEven:function(t){var e=this.options;if(e.oddevenrow)for(var i=this.domTr,n=this.rowSize,s=this.oddEvenClass,a=this.odd=t%2===0,r=t;n>r;r+=1)a?o(i[r]).removeClass(s):o(i[r]).addClass(s),a=!a},_setNum:function(t){if(!isNaN(this.numCol)){var e=this.domTd,i=this.domFixed,n=this.numCol,s=this.bindName[n],o=t,a=this.rowSize;if(this.options.fixcolumnnumber>n)for(;a>o;o+=1){var r=i[o+1][n],l=o+s;r.innerHTML=l,r.nextSibling.nodeValue=l}else for(;a>o;o+=1)e[o][n].innerHTML=o+s}},hideCols:function(t){if("object"===o.type(t)){for(var e,i,n=this.colHidden,s=this.colSize,a=this.bindName,r=this.editType,l=0;s>l;l+=1)e=a[l],i=t[e],r[e]?n[l]=!1:"boolean"==typeof i&&(n[l]=i);this._colHidden(!1)}},getQuery:function(){var t=o.extend(!0,{},this.query),e=this.customQuery;return e?(e.pageSize=t.pageSize,e.pageNo=t.pageNo,e.sortName=o.extend([],t.sortName),e.sortType=o.extend([],t.sortType),e):t},setQuery:function(t){"object"==typeof t&&(this.customQuery=t),t=t||this.backupQuery;var e=this.options.sortstyle,i=this.query;"number"==typeof t.pageSize&&(i.pageSize=t.pageSize),"number"==typeof t.pageNo&&(i.pageNo=t.pageNo),"array"===o.type(t.sortName)&&(i.sortName=o.extend([],t.sortName),i.sortName.length>e&&(i.sortName.length=e)),"array"===o.type(t.sortType)&&(i.sortType=o.extend([],t.sortType),i.sortType.length>e&&(i.sortType.length=e)),this._setPageSize(),this._setSortTypeObj()},_setHeight:function(t){return"number"!=typeof t||t-2===this.gridHeight?!1:(t-=2,this.boxHeight-=this.gridHeight-t,this.gridHeight=t,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur(),!0)},setHeight:function(t){this.autoHeight=!this._setHeight(t)},setWidth:function(t){if("number"==typeof t&&t-2!==this.gridWidth){var e=this.ittab;e&&e.ittabActive||(t-=2,this.options.adaptive&&(this.tableWidth=t-17,this.isIttab=!1),this.gridWidth=t,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur())}},setHighLight:function(t,e){var i=this._pkToIndex(t,!1)[0];void 0!==i&&(e!==!1?o(this.domTr[i]).addClass("eg-highlight"):o(this.domTr[i]).removeClass("eg-highlight"),this.heightLight[i]=e!==!1)},_selectRowsByIndex:function(t,e){e=e!==!1;var i,n,s=this.options,o=s.selectrows,a=this.data,r=[],l=this.disabledIndex;if("no"===o||t>=this.rowSize)return[];if(e!==!1&&(e=!0),"number"==typeof t&&(t=[t]),"single"===o)i=t[0],i>-1&&!l[i]&&(this._selectRows(i,e),r.push(a[i]));else for(var d=0,h=t.length;h>d;d+=1)n=t[d],l[d]||(this._selectRows(n,e),r.push(a[n]));return r},_pkToIndex:function(t,e){var i=this.data,n=this.rowSize,s=this.options.primarykey;if(void 0===t)return[];"array"!==o.type(t)&&(t=[t]);for(var a=t.length,r=[],l=0;a>l;l+=1){for(var d=t[l]+"",h=!1,c=n;c--;)if(i[c][s]+""===d){r.push(c),h=!0;break}!h&&e&&r.push(-1)}return r},selectRowsByPK:function(t,e){var i=this.options;return-1!=="array string number".indexOf(o.type(t))&&"no"!==i.selectrows&&this.rowSize?this._selectRowsByIndex(this._pkToIndex(t,!0),e):[]},disableRows:function(t,e){var i,n,s,a,r,l,d=this.options,h=o.type(t),c=this.disabledIndex;if(-1!=="array string number".indexOf(h)&&"no"!==d.selectrows&&this.rowSize)for(e=void 0===e?!0:e,e&&this.selectRowsByPK(t,!1),i=this._pkToIndex(t,!1),r=this.domTr,s=0,a=i.length;a>s;s++)n=i[s],l=o(r[n]),e?l.addClass("eg-disable-row"):l.removeClass("eg-disable-row"),c[n]=e},_removeRow:function(t){var e=this.data,i=e[t];return this.data.splice(t,1),o(this.domTr[t]).remove(),this.domTr.splice(t,1),this.domTd.splice(t,1),this.multiChecked.splice(t,1),this.disabledIndex.splice(t,1),this.singleChecked>t&&this.singleChecked--,this.domFixed.splice(t+1,1),i},_removeData:function(t){if("number"==typeof t||"array"===o.type(t)){"number"==typeof t&&(t=[t]),t.sort(function(t,e){return t-e});for(var e=t.length,i=[],n=this.singleChecked,s=this.multiChecked,a=this.options,r=a.selectrows,l=0;e>l;l+=1){var d=t[l]-l,h=this.rowSize;if(isNaN(d)||d>=h){t[l]=0;break}this.rowSize=h-1,"multi"===r?s[d]===!0&&this.multiCheckedNum--:"single"===r&&n===d&&(this.singleChecked=0/0);var c=this._removeRow(d);c&&i.push(c)}var u=this.rowSize;if(0>=u)this.query.pageNo>1&&(this.query.pageNo-=1),this.rowSize=0,this._isEmpty();else{"multi"===a.selectrows&&(this.multiCheckedNum===u?this.gridAllCheck.addClass("eg-all-checkbox-checked"):this.gridAllCheck.removeClass("eg-all-checkbox-checked"));for(var p=this.domTr,f=this.rowSize;f--;)p[f].removeAttribute("index");var g=t[0]-0;this._setOddEven(g),this._setNum(g)}this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout()}},_changeValue:function(t,e,i){if("object"===o.type(t)){var n,s,a,r,l,d,h,c=this.options,u=c.primarykey,p=t[u],f=this.bindName,g=c.fixcolumnnumber;if(void 0===e&&(e=this._pkToIndex(p,!1)[0]),!(0>e||e>=this.rowSize)){r=this.domTd[e],l=o.extend({},this.data[e]);for(var m in t)n=t[m],l.hasOwnProperty(m)&&void 0!==n&&n!==l[m]&&("object"==typeof n?(l[m]=n.value,t[m]=n.text):l[m]=n);t=o.extend({},l,t),s=this._dataToDom([t],0,1),a=s.domTd[0],this.odd=!this.odd;for(var m=this.colSize;m--;)if(d=f[m],d!==i&&this.data[d]!==t[d])if(h=o(r[m]),h.removeAttr("title"),g>m){if("number"!=typeof d){var v=h.find(".eg-fixed-s")[0],y=o(a[m]).find(".eg-fixed-s")[0].innerHTML;v.innerHTML=y,v.nextSibling.nodeValue=y}}else"number"!=typeof d&&h.html(a[m].innerHTML);this.data[e]=t}}},getData:function(){return o.extend(!0,[],this.data)},getSelectedRowData:function(){var t=this.options.selectrows;if("no"===t)return[];var e=this.data;if("single"===t)return isNaN(this.singleChecked)?[]:[e[this.singleChecked]];if(this.multiCheckedNum===this.rowSize)return this.data;for(var i=this.multiChecked,n=this.rowSize,s=[],o=0;n>o;o+=1)i[o]&&s.push(e[o]);return s},getSelectedPrimaryKey:function(){var t,e=this.options,i=e.selectrows,n=e.primarykey,s=this.getSelectedRowData(),o=s.length;if("no"===i||!o)return[];for(var a=[],r=0;o>r;r+=1)t=s[r][n],void 0!==t&&a.push(s[r][n]);return a},getSelectedIndex:function(){var t=this.options.selectrows;if("no"===t)return[];if("single"===t)return[this.singleChecked];for(var e=this.multiChecked,i=this.rowSize,n=[],s=0;i>s;s+=1)e[s]&&n.push(s);return n},getRowsDataByPK:function(t){var e=this.options.primarykey,i=this.data;"array"!==o.type(t)&&(t=[t]);for(var n=t.length,s=[],a=0;n>a;a+=1)for(var r=t[a],l=this.rowSize;l--;)if(i[l][e]===r){s.push(i[l]);break}return s},_switchCol:function(t,e){var i=this.domHeadCol,n=this.domBodyCol,s=this.domTd,a=this.domTh,r=this.domFixed,l=this.domTr,d=this.options.fixcolumnnumber,h=this.numCol;this._switchArrayValue(this.bindName,t,e),this._switchArrayValue(this.colIndex,t,e),this._switchArrayValue(this.theadText,t,e),this._switchArrayValue(this.renderStyle,t,e),this._switchArrayValue(this.colRender,t,e),this._switchArrayValue(this.colWidth,t,e),this._switchArrayValue(this.initColWidth,t,e),this._switchArrayValue(this.colWidthBackup,t,e),this._switchArrayValue(this.colHidden,t,e),this._switchArrayValue(this.tdsPackage,t,e),isNaN(h)||(t===h?this.numCol=e-(t>e?0:1):t>h&&h>=e?this.numCol=h+1:h>t&&e>h&&(this.numCol=h-1));var c=null,u=this.rowSize,p=this.hideCol,f=p.domA,g=p.gridHidecolList;if(e===this.colSize){var m=o(a[t]);m.appendTo(m.parent());var v=o(n[t]);v.appendTo(v.parent());var y=o(i[t]);for(y.appendTo(y.parent());u--;)c=s[u],l[u].appendChild(c[t]),this._switchArrayValue(c,t,e);g&&g.appendChild(""!==this.selectrowsClass?f[t-1]:f[t])}else{for(o(a[t]).insertBefore(a[e]),o(n[t]).insertBefore(n[e]),o(i[t]).insertBefore(i[e]);u--;)c=s[u],l[u].insertBefore(c[t],c[e]),this._switchArrayValue(c,t,e);g&&(""!==this.selectrowsClass?g.insertBefore(f[t-1],f[e-1]):g.insertBefore(f[t],f[e]))}if(this._switchArrayValue(a,t,e),d>t||d>e){var b=Math.min(t,e),_=Math.max(t,e);d++;for(var x=0,w=this.rowSize+1;w>x;x++){this._switchArrayValue(r[x],t,e);for(var C=b;_>=C;C++)o(r[x][C]).parent().css("zIndex",d-C)}}this._switchArrayValue(n,t,e),this._switchArrayValue(i,t,e),this.persistence&&this._triggerStatusChange()},_switchArrayValue:function(t,e,i){t.length<i&&(t[i]=void 0),e>i?t.splice(i,0,t.splice(e,1)[0]):t.splice(i-1,0,t.splice(e,1)[0])},ittab:{ittabActive:!1,_init:function(t){var e=this,i=t.gridOverlay,n=t.gridLine,s=[],a=0,r=0,l=!0,d=0/0,h=t.options.adaptive;t.gridHeadTable.find(".eg-ittab").show(),t.gridHeadTable.on("mousedown",function(e){var h=e.target;if(r=0,"eg-ittab"===h.className){s=t.colWidth,d=t._thIndex(o(h).parents("th")[0]),i.show().css("cursor","col-resize");var c=i.offset().left;a=e.pageX-c,n.show().css("left",a),l=!1,i.off("mousemove").on("mousemove",function(t){return t.stopPropagation(),r=t.pageX-c,s[d]+r-a<24&&(r=24+a-s[d]),n.css("left",r),!1})}return!1}),i.on("mouseup mouseout",function(){if(!l&&!isNaN(d)&&(l=!0,o(this).hide(),n.hide(),0!==r)){var i=r-a;t.isIttab=!0,t.colWidth[d]=s[d]+i,t.tableWidth=t.tableWidth+i,e.ittabActive=!0,t._setColWidthStyle(h?void 0:d),t.persistence&&t._triggerStatusChange(),t._setLayout(),e.ittabActive=!1,a=r=0,d=0/0}})}},hideCol:{_init:function(t){var e,i=this.hideCol=document.createElement("div"),n=t.theadHeight,s=0;i.className="eg-hidecol",i.style.top=n+"px",i.tabIndex="1",t.gridContainer.append(i),i=o(i);var a=t.colSize,r=t.theadText,l=t.bindName,d=t.editType||{},h="",c=t.disabled,u=0;""!==t.selectrowsClass&&(u+=1);for(var p=['<div class="eg-hidecol-list" hidefocus="true" >'];a>u;u+=1)h=o.trim(r[u].replace(/<.*?>/g,"")),d[l[u]]||c[u]?(e=' class="eg-hidecol-hide" banHide="true">',s++):e=">",p.push('<a href="javascript:;" hidefocus="true" title=',h,e,h,"</a>");p.push("</div>",'<div class="eg-hidecol-button">','<a href="javascript:;" hidefocus="true" class="cui-button blue-button eg-hidecol-confirm">\u786e\u5b9a</a>','<a href="javascript:;" hidefocus="true" class="cui-button red-button eg-hidecol-cancel">\u53d6\u6d88</a>',"</div>"),i.html(p.join("")),this.gridHidecolList=i.find(".eg-hidecol-list")[0],this.domA=this.gridHidecolList.getElementsByTagName("a"),this.bindEvent(t,i),this.ban=s},bindEvent:function(t,e){function i(){for(var t=c;r>t;t+=1)f[t]?o(p[t-c]).addClass("eg-hidecol-nochecked"):o(p[t-c]).removeClass("eg-hidecol-nochecked")}{var n,s,a=this,r=t.colSize,l=t.gridBox,d=null,h=!1,c=0,u=-1,p=this.domA;document.createElement("span")}""!==t.selectrowsClass&&(c+=1),t.gridHeadTable.on("click",function(f){var g=o(f.target);if(n=l.offset().left,s=n+t.gridWidth/2,g.hasClass("eg-select")){d&&e.blur(),d=g.parents("th").addClass("eg-thead-select");var m=g.offset().left,v=m-n+2;m>s&&(v-=126);var y=Math.max(t.boxHeight+t.paginationHeight-50,60);28*(r-a.ban)>y?e.children(".eg-hidecol-list").css("height",y):e.children(".eg-hidecol-list").css("height",""),e.css({left:v,top:t.theadHeight}).show().focus().attr("hidefocus","true"),i();var b=t._thIndex(d[0])-c;o(p[u]).removeClass("eg-hidecol-disabled"),o(p[b]).addClass("eg-hidecol-disabled"),u=p[b].getAttribute("banHide")?-1:b,h=!1}else o(e).blur()}),e.on("blur",function(){return h?void e.focus():(d&&d.removeClass("eg-thead-select"),void o(e).hide())}),e.on("mouseover",function(){h=!0}),e.on("mouseout",function(){h=!1});var f=t.colHidden;e.on("click",function(e){var n=o(e.target);if(n.hasClass("eg-hidecol-confirm")){for(var s=c;r>s;s+=1)f[s]=o(p[s-c]).hasClass("eg-hidecol-nochecked");return h=!1,t._colHidden(!1),o(this).blur(),!1}return n.hasClass("eg-hidecol-cancel")?(i(),h=!1,o(this).blur(),!1):"A"===n.prop("tagName")?(n.hasClass("eg-hidecol-disabled")||n.toggleClass("eg-hidecol-nochecked"),!1):void this.focus()}),setTimeout(i,100)}},moveCol:{_init:function(t){var e=o("<div></div>"),i=o("<div></div>"),n=t.gridHeadTable.addClass("eg-col-move");e.addClass("eg-col-move-insert"),i.addClass("eg-col-move-tag"),t.gridHead.append(i).append(e);var s=t.options,a=t.gridOverlay,r=s.fixcolumnnumber,l=t.selectrowsClass,d=null,h=0,c=[],u=[],p=0/0,f=0/0,g=!1,m=!0;n.on("mousedown",function(v){var y=o(v.target);if(y.hasClass("eg-fixed-s")&&!y.hasClass("eg-no-move")){s.colhidden&&t.hideCol.hideCol.blur(),m=!1,d=t.colHidden;var b=t.colWidth,_=t.colSize,x=t.domTh,w=t.domFixed[0],C=Math.round(n.offset().left),k=t.gridScroll[0].scrollLeft,T=0,S=t.theadHeight,N=y.parent().parent();p=t._thIndex(N[0]),h=0,c=[],u=[];var D=0,E=null,L=0,I=0;if(r>p){for(g=!0;r>D;D+=1)E=b[D],h+=E,L=Math.round(o(w[D]).offset().left)-C-k,d[D]===!0&&(L=-100),c.push(L),u.push(L),d[D]||(u[D]=L+E/2);c.push(h-k),u.push(h-k-1),l&&(c[0]=u[0]=-100),I=c[p]-1}else{for(g=!1,D=r;_>D;D+=1)E=b[D],L=Math.round(o(x[D]).offset().left)-C-k,d[D]===!0&&(L=-100),c.push(L),u.push(L),d[D]||(u[D-r]=L+E/2);c.push(t.tableWidth-k),u.push(t.tableWidth-k-1),0===r&&l&&(c[0]=u[0]=-100),I=c[p-r]-1}i.show().css({left:I,width:N.width(),height:S-1,lineHeight:S-1+"px"}).html(y.find(".eg-thead-text").eq(0).html()),e.show().css("height",S-5),a.show().css("cursor","move");var $=v.pageX;e.css("left",-1e3),a.off("mousemove").on("mousemove",function(t){t.stopPropagation(),T=t.pageX,i.css("left",I-$+T);for(var n=u.length,s=0;n>s;s+=1){var o=u[s];if(!(0>o)&&o>T){e.css("left",c[s]),f=g?s:s+r;break}}return!1})}}),a.on("mouseup",function(){if(!m&&(m=!0,a.hide(),e.hide(),i.hide(),!isNaN(f)&&!isNaN(p)&&f!==p&&f!==p+1)){if(p>f)return t._switchCol(p,f),void(f=p=0/0);for(var n=p+1;f>n;n+=1)if(!d[n]){t._switchCol(p,f),f=p=0/0;break}}}),a.on("mouseout",function(){a.hide(),e.hide(),i.hide(),f=p=0/0})}},_initEditType:function(){var t,o,a,r,h,c,u,p=this.options,f=p.edittype,g=this.editType,m=this.bindName,v=this.colRender,y=this.editDict;for(r=0,h=this.colSize;h>r;r++)if(t=m[r],o=f[t],"string"==typeof t&&o)if(l.test(o.uitype)){if(a=o.uitype,a=a.charAt(0).toLowerCase()+a.slice(1),o.uitype=a,g[t]=o,d.test(a))switch(c=o.datasource,y[t]=c,v[r]=[{render:"renderFn",colJson:{bindName:t,editType:o},callback:e}],a){case"multiPullDown":v[r][0].callback=i;break;case"pullDown":"Multi"===o.mode&&(v[r][0].callback=i);break;case"checkboxGroup":v[r][0].callback=s,y[t]=o.checkbox_list;break;case"radioGroup":v[r][0].callback=n,y[t]=o.radio_list}void 0===u&&(u=r)}else"function"==typeof o.create&&"function"==typeof o.returnValue&&(g[t]=o,delete o.uitype,void 0===u&&(u=r));void 0!==u&&p.fixcolumnnumber>=u&&(p.fixcolumnnumber=u)},_createFormEle:function(t,e,i,n,s){var a=o("<div>").addClass("eg-edit-box"),r=e.uitype,l=this.data[i],d=l[n]+"";t.addClass("eg-editing").html(a),r?(r=r.charAt(0).toLowerCase()+r.slice(1),"checkboxGroup"===r&&(d=d.split(";")),this.editObj={cuiObj:window.cui(a)[r](o.extend({width:"100%",name:Math.random()+"",value:d},e)),editTdObj:t,bindName:n,index:i,editOpts:e},h.test(r)?a.find("input,textarea").select():s&&t.find(":text").eq(0).focus()):(e.create(a[0],l),this.editObj={cuiObj:null,editTdObj:t,bindName:n,index:i,editOpts:e})},_destroyFormEle:function(){var t,a,r,l,h,c,u,p,f,g,m,v,y,b=this.editObj,_=this.bindName,x=b.bindName,w=b.editTdObj,C=w.find(".eg-edit-box").eq(0),k=b.cuiObj,T=b.editOpts,S=T.validate,N=T.uitype,D=this.data[b.index],E=o.extend({},D);if(k){if(r="checkboxGroup"===N?k.getValueString(";"):k.getValue(),D[x]=r,d.test(N)){switch(N){case"singlePullDown":h="single";break;case"multiPullDown":h="multi";break;case"pullDown":h="Multi"===T.mode?"multi":"single";break;case"checkboxGroup":l=s(D,void 0,{bindName:x,editType:T});break;case"radioGroup":l=n(D,void 0,{bindName:x,editType:T})}"single"===h?(l=e(D,void 0,{bindName:x,editType:T}),k.$box.remove()):"multi"===h&&(l=i(D,void 0,{bindName:x,editType:T}),k.$box.remove())}k.destroy()}else if(r=T.returnValue(C[0],E),"object"===o.type(r)&&(l=r.text,r=r.value),D[x]=r,C.remove(),void 0===r)return;if(w.html(l||r).removeClass("eg-editing"),this.editObj=null,!(E[x]===r&&""!==r||S&&!this._validate(x,D,S,w)))if(p=this.options.primarykey,f=E[p],m=this.dataBackup,void 0===f||m[f]||(m[f]=E),c=this.options.editafter,"function"==typeof c&&(u=c(o.extend({},D),x),"object"===o.type(u)&&(D=u,void 0===f?delete D[p]:D[p]=f,this._changeValue(D,void 0!==D[p]?void 0:b.index,x))),void 0===f)this.changeEditData.insertData[E.__insertId__]=D;else{for(v=m[f],a=w.closest("tr").find("td"),g=this.colSize;g--;)t=_[g],v[t]!==D[t]?(a.eq(g).addClass("eg-update"),y=!0):a.eq(g).removeClass("eg-update");y?this.changeEditData.updateData[f]=D:delete this.changeEditData.updateData[f]}},_validate:function(t,e,i,n){var s,o,a,r=i.length,l=e[this.options.primarykey],d=void 0!==l?this.validateState.update:this.validateState.insert,h=l||e.__insertId__;for(s=0;r>s;s++)if(o=i[s].type,c[o]&&(a=c[o](e[t],i[s].rule),a!==!0))return d[h]=d[h]||{},d[h][t]=a,void 0===n.attr("tip")&&window.cui.tip(n),n.attr("tip",a).addClass("eg-error"),!1;return d[h]&&(delete d[h][t],void 0===this._isNullObj(d[h])&&delete d[h]),n.attr("tip","").removeClass("eg-error"),!0},insertRow:function(t,e){var i,n,s,a,r,l,d=this.editType,h=this.bindName,c=this.colSize,u=this.rowSize,p=this.insertId,f=[];if("object"===o.type(t)){for(s in d)void 0===t[s]&&(t[s]="",a=!0),f[s]=!0;for(t.__insertId__=p+"",("number"!=typeof e||e>=u||0>e)&&(e=u),this._addData(t,e),n=this.domTr[e],s=0;c>s;s++)i=h[s],f[i]&&(r=o(n.cells[s]),l=d[i].validate,r.addClass("eg-insert"),l&&this._validate(i,t,l,r));this.insertId=p+1,a||(this.changeEditData.insertData[p]=t)}},_isNullObj:function(t){var e;for(e in t)break;return void 0===e?void 0:[e,t[e]]},deleteRow:function(t){this.deleteRowByIndex(this._pkToIndex(t,!1))},deleteRowByIndex:function(t){var e,i,n,s,a,r=this.data,l=this.options,d=this.changeEditData,h=l.deletebefore,c="function"==typeof h,u=l.deleteafter,p="function"==typeof u,f=l.primarykey,g=o.type(t);if("number"===g)t=[t];else if("array"!==g)return;for(e=t.length;e--;)i=t[e],"number"==typeof i&&(n=r[i],n&&(a=n[f],c&&void 0!==a&&h(n)===!1||(s=n.__insertId__,void 0!==s&&(delete d.insertData[s],delete this.validateState.insert[s]),void 0!==a&&(delete d.updateData[a],d.deleteData.push(n),delete this.validateState.update[a]),this._removeData(i),p&&u(n))))},deleteSelectRow:function(){this.deleteRowByIndex(this.getSelectedIndex())},getInsertedIndex:function(){var t,e=this.data,i=this.rowSize,n=[];for(t=0;i>t;t++)e[t].hasOwnProperty("__insertId__")&&n.push(t);return n},getChangeData:function(){var t,e,i=this.changeEditData,n=i.insertData,s=i.updateData,a=i.deleteData,r=[],l=[],d=null;for(e in n)t=o.extend({},n[e]),delete t.__insertId__,r.push(t);void 0!==e?this.isChanged=!0:r=null;for(e in s)l.push(o.extend({},s[e]));return void 0!==e?this.isChanged=!0:l=null,a.length&&(this.isChanged=!0,d=o.extend(!0,[],a)),{insertData:r,updateData:l,deleteData:d}},submit:function(){this.editObj&&this._destroyFormEle();var t,e,i,n,s,o,a,r,l,d,h=this.getChangeData();
if(t=this.validateState.insert,e=this.validateState.update,i=this.bindName,o=this.theadText,a=this._isNullObj,r=a(t),l=-1,void 0!==r?l=this._insertIdToIndex(r[0]):(r=a(e),void 0!==r&&(l=this._pkToIndex(r[0],!0)[0])),l>-1)for(d=a(r[1]),n=0,s=this.colSize;s>n;n++)if(i[n]===d[0])return cui.error(['\u7b2c"',l+1,'"\u884c\uff0c"',o[n],'" \u5217\u6709\u9519\u8bef\uff1a',d[1]].join(""),null,{title:"\u4e0d\u80fd\u63d0\u4ea4",opacity:.8}),"ban";return this.isChanged?(this.isSaveing=!0,this._loading("show"),this.options.submitdata(this,h),"success"):"notChange"},_insertIdToIndex:function(t){var e,i=this.data,n=this.rowSize;for(e=0;n>e;e++)if(i[e].__insertId__===t)return e;return-1},submitComplete:function(){this.isSaveing&&(this.isSaveing=!1,this._loading("hide"),this.loadData())}})}(window.comtop),function(t,e){function i(i){u=null,p=[],f=[],u=t("[uitype]",i.range),u.each(function(){var i=t(this),s=i.attr("uitype");return i.data("uitype")||!e.UI[s.charAt(0).toUpperCase()+s.substring(1)]?(u=u.not(i),!0):void p.push(n(i,s))});var a=null;if(i.databind&&s(),!e.UI.scan.textmode&&!e.UI.scan.disable)for(var d=0,h=u.length;h>d;d++)a=u.eq(d).data("uitype"),!a||a.options.textmode||a.options.disable||(f.push(r(u.eq(d),p[d])),f.push(l(u.eq(d),p[d],a.tipPosition||a.options.el)));e.UI.scan.debug&&o(i.databind),i=void 0}function n(t,i){if(!i&&""===i)return!1;if("dialog"===i.toLocaleLowerCase())return t.addClass("cui-dialog").css("display","block"),{};var n=d(t[0]),s={validate:n.validate},o={databind:n.databind},a={tip:n.tip,trigger:n.tipTrigger?n.tipTrigger:"hover"};delete n.uitype,delete n.tipTrigger,delete n.tip,delete n.databind,delete n.validate;var r=i.charAt(0).toLowerCase()+i.substring(1);if(e.UI.scan.textmode&&(n.textmode=!0,n.readonly=!1,n.disable=!1),e.UI.scan.disable&&(n.textmode=!1,n.readonly=!1,n.disable=!0),e.UI.scan.readonly&&(n.readonly=!0,n.textmode=!1,n.disable=!1),e.UI.scan.debug)try{t[r](n)}catch(l){f.push("["+i+":"+t.attr("id")+"]:\u7ec4\u4ef6\u521b\u5efa\u5931\u8d25\uff0c\u53ef\u80fd\u53c2\u6570\u914d\u7f6e\u4e0d\u6b63\u786e\u6216\u8005\u7ec4\u4ef6\u5b58\u5728\u95ee\u9898\uff1b\n")}else t[r](n);return t.removeAttr("name"),{opts:n,valiOpts:s,dbOpts:o,tipOpts:a}}function s(){if(u&&0!==u.length)for(var t=0,e=u.length;e>t;t++)u.eq(t).data("uitype")&&f.push(a(u.eq(t),p[t]))}function o(t){if(e.UI.scan.debug){for(var i=[],n=0,s=f.length;s>n;n++)f[n]&&i.push(f[n]);i.length>0&&alert(i.join(""))}f=[],t||(u=void 0,p=[])}function a(t,i){var n=i.dbOpts.databind,s=null,o=e.UI.scan.debug;if(n){var a=n.split(".");if(a.length<2)return o&&(s="["+t.attr("uitype")+":"+t.attr("id")+"]:\u7ed1\u5b9a\u7684\u6570\u636e\u5fc5\u987b\u4e3aJSON\u683c\u5f0f\u91cc\u7684\u6210\u5458\u53d8\u91cf;\n"),!1;for(var r,l,d=[],h=0,c=a.length;c>h;h++)c-1>h?d.push(a[h]):l=a[h];if(r=e.namespace(d.join(".")),r.nodeName)return o&&(s="["+t.attr("uitype")+":"+t.attr("id")+"]:\u6570\u636e"+d+"\u4e0e\u9875\u9762\u7684\u6807\u7b7eID\u540d\u76f8\u540c\uff0c\u8bf7\u66f4\u540d;\n"),!1;var u=cui(r).databind();u.addBind(t,l)}return s}function r(e,i){var n=i.valiOpts.validate,s="";if(n){var o=/^(?:\{.*\}|\[.*\])$/;if(window.validater||(window.validater=cui().validate()),o.test(n))try{n=t.parseJSON(n.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"))}catch(a){s="["+e.attr("uitype")+":"+e.attr("id")+"]:\u6821\u9a8c\u7684JSON\u6570\u636e\u6709\u8bef;\n"}else try{n=h(n)}catch(a){s="["+e.attr("uitype")+":"+e.attr("id")+"]:\u6821\u9a8c\u6570\u636e\u6709\u8bef\u6216\u4e0d\u5b58\u5728;\n"}switch(t.type(n)){case"array":for(var r=0;r<n.length;r++)n[r].rule?window.validater.add(cui(e),n[r].type,n[r].rule):window.validater.add(cui(e),n[r].type);break;case"string":window.validater.add(cui(e),n)}}return s}function l(e,i,n){var s="";if(n=t(n,e),void 0==cui(e).options.textmode||i.tipOpts.tip||(e.attr("tip",""),i.tipOpts.tip=""),void 0!=i.tipOpts.tip)try{cui.tip(n,{trigger:i.tipOpts.trigger,tipEl:e})}catch(o){s="["+e.attr("uitype")+":"+e.attr("id")+"]:\u63d0\u793a\u521b\u5efa\u5931\u8d25;\n"}return s}function d(e){var i=t(e);return{isScanner:!0,databind:i.attr("databind"),validate:i.attr("validate"),tip:i.attr("tip"),tipTrigger:i.attr("tip_trigger")}}function h(t){for(var e=t.split("."),i=window,n=0;n<e.length;n++)i=i[e[n]];return"object"!=typeof i||i.nodeName?t:i}function c(i,n){i="undefined"==typeof i?!0:i,n="undefined"==typeof n?"body":n;var s,o,a=[],r=t(n);if("document"!==n&&"body"!==n&&"html"!==n)for(s=0,o=e.UI.componentList.length;o>s;s++)r.find(e.UI.componentList[s].options.el).length&&a.push(e.UI.componentList[s]);else a=e.UI.componentList;for(s=0,o=a.length;o>s;s++)"function"==typeof a[s].setReadonly&&a[s].setReadonly(i)}e.UI.scan=function(){for(var e={},n=0;n<arguments.length;n++)switch(typeof arguments[n]){case"string":case"object":e.range=t(arguments[n]);break;case"boolean":e.databind=arguments[n]}e=t.extend({range:document,databind:!0},e),i(e)},e.UI.scan.debug=!1,e.UI.scan.textmode=!1,e.UI.scan.disable=!1,e.UI.scan.readonly=!1,e.UI.scan.databind=s,e.UI.scan.setReadonly=c;var u,p=[],f=[]}(window.comtop.cQuery,window.comtop);;comtop.version="V4.2.4-build20140813-01-template"