(function(C){var $=C.cQuery;var action=(webPath||"/web")+"/cip/genNumber.ac";C.UI.AutoGenNumber=C.UI.Input.extend({options:{uitype:"AutoGenNumber",expression:"",showOnNew:false,params:""},getExpression:function(){return this.options.expression;},updateValue:function(){var opts=this.options,self=this;if(!opts.expression){return;}var param={};if(opts.params){param=$.parseJSON(opts.params);}$.ajax({url:action,method:"post",data:{expression:opts.expression,params:param},dataType:"json",async:false,success:function(data){if(data.code==="200"){self.setValue(data.number);return;}else{console.log("自动生成编码出错！");}},error:function(xhr,status,err){console.log("自动生成编码出错！"+err);}});}});})(window.comtop);(function(C,$){var Calender=C.UI.Calender.prototype;Calender._init=function(cusOpts){var self=this,opts=self.options;if(cusOpts.value){var type=$.type(cusOpts.value);switch(type){case"string":if("$current"===cusOpts.value){var format=cusOpts.format;if(!format){format="yyyy-MM-dd";}var now=new Date();var current=C.Date.format(now,format);opts.value=[current];}else{opts.value=/^(?:\{.*\}|\[.*\])$/.test(cusOpts.value)?$.parseJSON(cusOpts.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[cusOpts.value];}break;case"array":opts.value=cusOpts.value;break;default:opts.value=[cusOpts.value];}}if(cusOpts.width){if(typeof cusOpts.width==="string"&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(cusOpts.width)){opts.width=cusOpts.width;}else{opts.width=cusOpts.width+"px";}}opts.value=opts.value===null?[]:opts.value;opts.mindate=[cusOpts.mindate,null];opts.maxdate=[cusOpts.maxdate,null];opts.uuid=C.guid();opts.template="calender.html";opts.curModel=[];opts.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"};opts.inputFocusClass="C_CR_calInput_focus";opts.inputDisClass="C_CR_calInput_rd";opts.inputErrClass="C_CR_calInput_err";opts.selDate=[];opts.cache={yearPop:{},selDate:[]};opts.isBuild=false;opts.inputEl=null;opts.tipTxt=null;opts.pEl=null;opts.datePanel=[];opts.yearPanel=[];opts.monthPanel=[];opts.quarterPanel=[];opts.timePanel=[];opts.weekPanel=[];opts.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]};opts.selIndex=0;opts.activePop=null;opts.isChangeTag=false;opts.tags=[];self.$tmp={};var tags=opts.model.split(";");if(tags.length===1){opts.tags=tags[0]==="all"?["date","year","quarter","month","week"]:tags;}else{opts.tags=tags;opts.model="all";}var curModel=opts.tags[0];opts.curModel=[curModel,"for"+curModel.charAt(0).toUpperCase()+curModel.substring(1),curModel+"Frame",curModel+"Panel"];if(opts.model==="all"&&cusOpts.format){opts.format=$.parseJSON(cusOpts.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));opts.formatList=$.extend(opts.formatList,opts.format);opts.format=opts.formatList[opts.curModel[0]];}else{if(!cusOpts.format){opts.format=opts.formatList[opts.curModel[0]];}else{opts.formatList[opts.curModel[0]]=opts.format;}}opts.okbtn=/[y|M|q|w|d]/.test(opts.format)?opts.okbtn:true;};})(window.comtop,window.comtop.cQuery);