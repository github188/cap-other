window.comtop=window.comtop||{};comtop.version="V4.0.1-beta1-Bulid20130701";(function(c){window.console=window.console||{log:function(){},info:function(){},warn:function(){},error:function(){}};c.namespace=b;c.guid=a;function b(d){var g,f,j=d.split("."),h=window;for(g=0;g<j.length;g=g+1){f=j[g];h[f]=h[f]||{};h=h[f]}return h}function a(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(g){var f=Math.random()*16|0,d=g=="x"?f:(f&3|8);return d.toString(16)}).toUpperCase()}})(window.comtop=window.comtop||{});comtop.namespace("comtop.UI");comtop.namespace("comtop.Dom");comtop.namespace("comtop.String");comtop.namespace("comtop.Date");comtop.namespace("comtop.Browser");comtop.namespace("comtop.Tools");
/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
(function(a2,aB){var w,af,o=a2.document,aI=a2.location,d=a2.navigator,bg=a2.jQuery,I=a2.$,am=Array.prototype.push,a4=Array.prototype.slice,aK=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aO=String.prototype.trim,bG=function(bZ,b0){return new bG.fn.init(bZ,b0,w)},bx=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,aV=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bf=/^[\],:{}\s]*$/,bi=/(?:^|:|,)(?:\s*\[)+/g,bD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bP=/^-ms-/,aU=/-([\da-z])/gi,N=function(bZ,b0){return(b0+"").toUpperCase()},aF=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aF,false);bG.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aF);bG.ready()}}},Z={};bG.fn=bG.prototype={constructor:bG,init:function(bZ,b3,b2){var b1,b4,b0,b5;if(!bZ){return this}if(bZ.nodeType){this.context=this[0]=bZ;this.length=1;return this}if(typeof bZ==="string"){if(bZ.charAt(0)==="<"&&bZ.charAt(bZ.length-1)===">"&&bZ.length>=3){b1=[null,bZ,null]}else{b1=bo.exec(bZ)}if(b1&&(b1[1]||!b3)){if(b1[1]){b3=b3 instanceof bG?b3[0]:b3;b5=(b3&&b3.nodeType?b3.ownerDocument||b3:o);bZ=bG.parseHTML(b1[1],b5,true);if(a.test(b1[1])&&bG.isPlainObject(b3)){this.attr.call(bZ,b3,true)}return bG.merge(this,bZ)}else{b4=o.getElementById(b1[2]);if(b4&&b4.parentNode){if(b4.id!==b1[2]){return b2.find(bZ)}this.length=1;this[0]=b4}this.context=o;this.selector=bZ;return this}}else{if(!b3||b3.jquery){return(b3||b2).find(bZ)}else{return this.constructor(b3).find(bZ)}}}else{if(bG.isFunction(bZ)){return b2.ready(bZ)}}if(bZ.selector!==aB){this.selector=bZ.selector;this.context=bZ.context}return bG.makeArray(bZ,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(bZ){return bZ==null?this.toArray():(bZ<0?this[this.length+bZ]:this[bZ])},pushStack:function(b0,b2,bZ){var b1=bG.merge(this.constructor(),b0);b1.prevObject=this;b1.context=this.context;if(b2==="find"){b1.selector=this.selector+(this.selector?" ":"")+bZ}else{if(b2){b1.selector=this.selector+"."+b2+"("+bZ+")"}}return b1},each:function(b0,bZ){return bG.each(this,b0,bZ)},ready:function(bZ){bG.ready.promise().done(bZ);return this},eq:function(bZ){bZ=+bZ;return bZ===-1?this.slice(bZ):this.slice(bZ,bZ+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a4.apply(this,arguments),"slice",a4.call(arguments).join(","))},map:function(bZ){return this.pushStack(bG.map(this,function(b1,b0){return bZ.call(b1,b0,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bG.fn.init.prototype=bG.fn;bG.extend=bG.fn.extend=function(){var b8,b1,bZ,b0,b5,b6,b4=arguments[0]||{},b3=1,b2=arguments.length,b7=false;if(typeof b4==="boolean"){b7=b4;b4=arguments[1]||{};b3=2}if(typeof b4!=="object"&&!bG.isFunction(b4)){b4={}}if(b2===b3){b4=this;--b3}for(;b3<b2;b3++){if((b8=arguments[b3])!=null){for(b1 in b8){bZ=b4[b1];b0=b8[b1];if(b4===b0){continue}if(b7&&b0&&(bG.isPlainObject(b0)||(b5=bG.isArray(b0)))){if(b5){b5=false;b6=bZ&&bG.isArray(bZ)?bZ:[]}else{b6=bZ&&bG.isPlainObject(bZ)?bZ:{}}b4[b1]=bG.extend(b7,b6,b0)}else{if(b0!==aB){b4[b1]=b0}}}}}return b4};bG.extend({noConflict:function(bZ){if(a2.$===bG){a2.$=I}if(bZ&&a2.jQuery===bG){a2.jQuery=bg}return bG},isReady:false,readyWait:1,holdReady:function(bZ){if(bZ){bG.readyWait++}else{bG.ready(true)}},ready:function(bZ){if(bZ===true?--bG.readyWait:bG.isReady){return}if(!o.body){return setTimeout(bG.ready,1)}bG.isReady=true;if(bZ!==true&&--bG.readyWait>0){return}af.resolveWith(o,[bG]);if(bG.fn.trigger){bG(o).trigger("ready").off("ready")}},isFunction:function(bZ){return bG.type(bZ)==="function"},isArray:Array.isArray||function(bZ){return bG.type(bZ)==="array"},isWindow:function(bZ){return bZ!=null&&bZ==bZ.window},isNumeric:function(bZ){return !isNaN(parseFloat(bZ))&&isFinite(bZ)},type:function(bZ){return bZ==null?String(bZ):Z[z.call(bZ)]||"object"},isPlainObject:function(b1){if(!b1||bG.type(b1)!=="object"||b1.nodeType||bG.isWindow(b1)){return false}try{if(b1.constructor&&!V.call(b1,"constructor")&&!V.call(b1.constructor.prototype,"isPrototypeOf")){return false}}catch(b0){return false}var bZ;for(bZ in b1){}return bZ===aB||V.call(b1,bZ)},isEmptyObject:function(b0){var bZ;for(bZ in b0){return false}return true},error:function(bZ){throw new Error(bZ)},parseHTML:function(b2,b1,bZ){var b0;if(!b2||typeof b2!=="string"){return null}if(typeof b1==="boolean"){bZ=b1;b1=0}b1=b1||o;if((b0=a.exec(b2))){return[b1.createElement(b0[1])]}b0=bG.buildFragment([b2],b1,bZ?null:[]);return bG.merge([],(b0.cacheable?bG.clone(b0.fragment):b0.fragment).childNodes)},parseJSON:function(bZ){if(!bZ||typeof bZ!=="string"){return null}bZ=bG.trim(bZ);if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(bZ)}if(bf.test(bZ.replace(bD,"@").replace(a0,"]").replace(bi,""))){return(new Function("return "+bZ))()}bG.error("Invalid JSON: "+bZ)},parseXML:function(b1){var bZ,b0;if(!b1||typeof b1!=="string"){return null}try{if(a2.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}}catch(b2){bZ=aB}if(!bZ||!bZ.documentElement||bZ.getElementsByTagName("parsererror").length){bG.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(bZ){if(bZ&&aa.test(bZ)){(a2.execScript||function(b0){a2["eval"].call(a2,b0)})(bZ)}},camelCase:function(bZ){return bZ.replace(bP,"ms-").replace(aU,N)},nodeName:function(b0,bZ){return b0.nodeName&&b0.nodeName.toLowerCase()===bZ.toLowerCase()},each:function(b4,b5,b1){var b0,b2=0,b3=b4.length,bZ=b3===aB||bG.isFunction(b4);if(b1){if(bZ){for(b0 in b4){if(b5.apply(b4[b0],b1)===false){break}}}else{for(;b2<b3;){if(b5.apply(b4[b2++],b1)===false){break}}}}else{if(bZ){for(b0 in b4){if(b5.call(b4[b0],b0,b4[b0])===false){break}}}else{for(;b2<b3;){if(b5.call(b4[b2],b2,b4[b2++])===false){break}}}}return b4},trim:aO&&!aO.call("\uFEFF\xA0")?function(bZ){return bZ==null?"":aO.call(bZ)}:function(bZ){return bZ==null?"":(bZ+"").replace(C,"")},makeArray:function(bZ,b1){var b2,b0=b1||[];if(bZ!=null){b2=bG.type(bZ);if(bZ.length==null||b2==="string"||b2==="function"||b2==="regexp"||bG.isWindow(bZ)){am.call(b0,bZ)}else{bG.merge(b0,bZ)}}return b0},inArray:function(b2,b0,b1){var bZ;if(b0){if(aK){return aK.call(b0,b2,b1)}bZ=b0.length;b1=b1?b1<0?Math.max(0,bZ+b1):b1:0;for(;b1<bZ;b1++){if(b1 in b0&&b0[b1]===b2){return b1}}}return -1},merge:function(b3,b1){var bZ=b1.length,b2=b3.length,b0=0;if(typeof bZ==="number"){for(;b0<bZ;b0++){b3[b2++]=b1[b0]}}else{while(b1[b0]!==aB){b3[b2++]=b1[b0++]}}b3.length=b2;return b3},grep:function(b0,b5,bZ){var b4,b1=[],b2=0,b3=b0.length;bZ=!!bZ;for(;b2<b3;b2++){b4=!!b5(b0[b2],b2);if(bZ!==b4){b1.push(b0[b2])}}return b1},map:function(bZ,b6,b7){var b4,b5,b3=[],b1=0,b0=bZ.length,b2=bZ instanceof bG||b0!==aB&&typeof b0==="number"&&((b0>0&&bZ[0]&&bZ[b0-1])||b0===0||bG.isArray(bZ));if(b2){for(;b1<b0;b1++){b4=b6(bZ[b1],b1,b7);if(b4!=null){b3[b3.length]=b4}}}else{for(b5 in bZ){b4=b6(bZ[b5],b5,b7);if(b4!=null){b3[b3.length]=b4}}}return b3.concat.apply([],b3)},guid:1,proxy:function(b3,b2){var b1,bZ,b0;if(typeof b2==="string"){b1=b3[b2];b2=b3;b3=b1}if(!bG.isFunction(b3)){return aB}bZ=a4.call(arguments,2);b0=function(){return b3.apply(b2,bZ.concat(a4.call(arguments)))};b0.guid=b3.guid=b3.guid||bG.guid++;return b0},access:function(bZ,b5,b8,b6,b3,b9,b7){var b1,b4=b8==null,b2=0,b0=bZ.length;if(b8&&typeof b8==="object"){for(b2 in b8){bG.access(bZ,b5,b2,b8[b2],1,b9,b6)}b3=1}else{if(b6!==aB){b1=b7===aB&&bG.isFunction(b6);if(b4){if(b1){b1=b5;b5=function(cb,ca,cc){return b1.call(bG(cb),cc)}}else{b5.call(bZ,b6);b5=null}}if(b5){for(;b2<b0;b2++){b5(bZ[b2],b8,b1?b6.call(bZ[b2],b2,b5(bZ[b2],b8)):b6,b7)}}b3=1}}return b3?bZ:b4?b5.call(bZ):b0?b5(bZ[0],b8):b9},now:function(){return(new Date()).getTime()}});bG.ready.promise=function(b2){if(!af){af=bG.Deferred();if(o.readyState==="complete"){setTimeout(bG.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aF,false);a2.addEventListener("load",bG.ready,false)}else{o.attachEvent("onreadystatechange",aF);a2.attachEvent("onload",bG.ready);var b1=false;try{b1=a2.frameElement==null&&o.documentElement}catch(b0){}if(b1&&b1.doScroll){(function bZ(){if(!bG.isReady){try{b1.doScroll("left")}catch(b3){return setTimeout(bZ,50)}bG.ready()}})()}}}}return af.promise(b2)};bG.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,bZ){Z["[object "+bZ+"]"]=bZ.toLowerCase()});w=bG(o);var bU={};function ac(b0){var bZ=bU[b0]={};bG.each(b0.split(aV),function(b2,b1){bZ[b1]=true});return bZ}bG.Callbacks=function(b9){b9=typeof b9==="string"?(bU[b9]||ac(b9)):bG.extend({},b9);var b2,bZ,b3,b1,b4,b5,b6=[],b7=!b9.once&&[],b0=function(ca){b2=b9.memory&&ca;bZ=true;b5=b1||0;b1=0;b4=b6.length;b3=true;for(;b6&&b5<b4;b5++){if(b6[b5].apply(ca[0],ca[1])===false&&b9.stopOnFalse){b2=false;break}}b3=false;if(b6){if(b7){if(b7.length){b0(b7.shift())}}else{if(b2){b6=[]}else{b8.disable()}}}},b8={add:function(){if(b6){var cb=b6.length;(function ca(cc){bG.each(cc,function(ce,cd){var cf=bG.type(cd);if(cf==="function"&&(!b9.unique||!b8.has(cd))){b6.push(cd)}else{if(cd&&cd.length&&cf!=="string"){ca(cd)}}})})(arguments);if(b3){b4=b6.length}else{if(b2){b1=cb;b0(b2)}}}return this},remove:function(){if(b6){bG.each(arguments,function(cc,ca){var cb;while((cb=bG.inArray(ca,b6,cb))>-1){b6.splice(cb,1);if(b3){if(cb<=b4){b4--}if(cb<=b5){b5--}}}})}return this},has:function(ca){return bG.inArray(ca,b6)>-1},empty:function(){b6=[];return this},disable:function(){b6=b7=b2=aB;return this},disabled:function(){return !b6},lock:function(){b7=aB;if(!b2){b8.disable()}return this},locked:function(){return !b7},fireWith:function(cb,ca){ca=ca||[];ca=[cb,ca.slice?ca.slice():ca];if(b6&&(!bZ||b7)){if(b3){b7.push(ca)}else{b0(ca)}}return this},fire:function(){b8.fireWith(this,arguments);return this},fired:function(){return !!bZ}};return b8};bG.extend({Deferred:function(b1){var b0=[["resolve","done",bG.Callbacks("once memory"),"resolved"],["reject","fail",bG.Callbacks("once memory"),"rejected"],["notify","progress",bG.Callbacks("memory")]],b2="pending",b3={state:function(){return b2},always:function(){bZ.done(arguments).fail(arguments);return this},then:function(){var b4=arguments;return bG.Deferred(function(b5){bG.each(b0,function(b7,b6){var b9=b6[0],b8=b4[b7];bZ[b6[1]](bG.isFunction(b8)?function(){var ca=b8.apply(this,arguments);if(ca&&bG.isFunction(ca.promise)){ca.promise().done(b5.resolve).fail(b5.reject).progress(b5.notify)}else{b5[b9+"With"](this===bZ?b5:this,[ca])}}:b5[b9])});b4=null}).promise()},promise:function(b4){return b4!=null?bG.extend(b4,b3):b3}},bZ={};b3.pipe=b3.then;bG.each(b0,function(b5,b4){var b7=b4[2],b6=b4[3];b3[b4[1]]=b7.add;if(b6){b7.add(function(){b2=b6},b0[b5^1][2].disable,b0[2][2].lock)}bZ[b4[0]]=b7.fire;bZ[b4[0]+"With"]=b7.fireWith});b3.promise(bZ);if(b1){b1.call(bZ,bZ)}return bZ},when:function(b3){var b1=0,b5=a4.call(arguments),bZ=b5.length,b0=bZ!==1||(b3&&bG.isFunction(b3.promise))?bZ:0,b8=b0===1?b3:bG.Deferred(),b2=function(ca,cb,b9){return function(cc){cb[ca]=this;b9[ca]=arguments.length>1?a4.call(arguments):cc;if(b9===b7){b8.notifyWith(cb,b9)}else{if(!(--b0)){b8.resolveWith(cb,b9)}}}},b7,b4,b6;if(bZ>1){b7=new Array(bZ);b4=new Array(bZ);b6=new Array(bZ);for(;b1<bZ;b1++){if(b5[b1]&&bG.isFunction(b5[b1].promise)){b5[b1].promise().done(b2(b1,b6,b5)).fail(b8.reject).progress(b2(b1,b4,b7))}else{--b0}}}if(!b0){b8.resolveWith(b6,b5)}return b8.promise()}});bG.support=(function(){var cb,ca,b8,b9,b2,b7,b6,b4,b3,b1,bZ,b0=o.createElement("div");b0.setAttribute("className","t");b0.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";ca=b0.getElementsByTagName("*");b8=b0.getElementsByTagName("a")[0];b8.style.cssText="top:1px;float:left;opacity:.5";if(!ca||!ca.length){return{}}b9=o.createElement("select");b2=b9.appendChild(o.createElement("option"));b7=b0.getElementsByTagName("input")[0];cb={leadingWhitespace:(b0.firstChild.nodeType===3),tbody:!b0.getElementsByTagName("tbody").length,htmlSerialize:!!b0.getElementsByTagName("link").length,style:/top/.test(b8.getAttribute("style")),hrefNormalized:(b8.getAttribute("href")==="/a"),opacity:/^0.5/.test(b8.style.opacity),cssFloat:!!b8.style.cssFloat,checkOn:(b7.value==="on"),optSelected:b2.selected,getSetAttribute:b0.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b7.checked=true;cb.noCloneChecked=b7.cloneNode(true).checked;b9.disabled=true;cb.optDisabled=!b2.disabled;try{delete b0.test}catch(b5){cb.deleteExpando=false}if(!b0.addEventListener&&b0.attachEvent&&b0.fireEvent){b0.attachEvent("onclick",bZ=function(){cb.noCloneEvent=false});b0.cloneNode(true).fireEvent("onclick");b0.detachEvent("onclick",bZ)}b7=o.createElement("input");b7.value="t";b7.setAttribute("type","radio");cb.radioValue=b7.value==="t";b7.setAttribute("checked","checked");b7.setAttribute("name","t");b0.appendChild(b7);b6=o.createDocumentFragment();b6.appendChild(b0.lastChild);cb.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;cb.appendChecked=b7.checked;b6.removeChild(b7);b6.appendChild(b0);if(b0.attachEvent){for(b3 in {submit:true,change:true,focusin:true}){b4="on"+b3;b1=(b4 in b0);if(!b1){b0.setAttribute(b4,"return;");b1=(typeof b0[b4]==="function")}cb[b3+"Bubbles"]=b1}}bG(function(){var cd,ch,cf,cg,ce="padding:0;margin:0;border:0;display:block;overflow:hidden;",cc=o.getElementsByTagName("body")[0];if(!cc){return}cd=o.createElement("div");cd.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";cc.insertBefore(cd,cc.firstChild);ch=o.createElement("div");cd.appendChild(ch);ch.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cf=ch.getElementsByTagName("td");cf[0].style.cssText="padding:0;margin:0;border:0;display:none";b1=(cf[0].offsetHeight===0);cf[0].style.display="";cf[1].style.display="none";cb.reliableHiddenOffsets=b1&&(cf[0].offsetHeight===0);ch.innerHTML="";ch.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cb.boxSizing=(ch.offsetWidth===4);cb.doesNotIncludeMarginInBodyOffset=(cc.offsetTop!==1);if(a2.getComputedStyle){cb.pixelPosition=(a2.getComputedStyle(ch,null)||{}).top!=="1%";cb.boxSizingReliable=(a2.getComputedStyle(ch,null)||{width:"4px"}).width==="4px";cg=o.createElement("div");cg.style.cssText=ch.style.cssText=ce;cg.style.marginRight=cg.style.width="0";ch.style.width="1px";ch.appendChild(cg);cb.reliableMarginRight=!parseFloat((a2.getComputedStyle(cg,null)||{}).marginRight)}if(typeof ch.style.zoom!=="undefined"){ch.innerHTML="";ch.style.cssText=ce+"width:1px;padding:1px;display:inline;zoom:1";cb.inlineBlockNeedsLayout=(ch.offsetWidth===3);ch.style.display="block";ch.style.overflow="visible";ch.innerHTML="<div></div>";ch.firstChild.style.width="5px";cb.shrinkWrapBlocks=(ch.offsetWidth!==3);cd.style.zoom=1}cc.removeChild(cd);cd=ch=cf=cg=null});b6.removeChild(b0);ca=b8=b9=b2=b7=b6=b0=null;return cb})();var bt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;bG.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bG.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(bZ){bZ=bZ.nodeType?bG.cache[bZ[bG.expando]]:bZ[bG.expando];return !!bZ&&!O(bZ)},data:function(b2,b0,b4,b3){if(!bG.acceptData(b2)){return}var b5,b7,b8=bG.expando,b6=typeof b0==="string",b9=b2.nodeType,bZ=b9?bG.cache:b2,b1=b9?b2[b8]:b2[b8]&&b8;if((!b1||!bZ[b1]||(!b3&&!bZ[b1].data))&&b6&&b4===aB){return}if(!b1){if(b9){b2[b8]=b1=bG.deletedIds.pop()||bG.guid++}else{b1=b8}}if(!bZ[b1]){bZ[b1]={};if(!b9){bZ[b1].toJSON=bG.noop}}if(typeof b0==="object"||typeof b0==="function"){if(b3){bZ[b1]=bG.extend(bZ[b1],b0)}else{bZ[b1].data=bG.extend(bZ[b1].data,b0)}}b5=bZ[b1];if(!b3){if(!b5.data){b5.data={}}b5=b5.data}if(b4!==aB){b5[bG.camelCase(b0)]=b4}if(b6){b7=b5[b0];if(b7==null){b7=b5[bG.camelCase(b0)]}}else{b7=b5}return b7},removeData:function(b2,b0,b3){if(!bG.acceptData(b2)){return}var b6,b5,b4,b7=b2.nodeType,bZ=b7?bG.cache:b2,b1=b7?b2[bG.expando]:bG.expando;if(!bZ[b1]){return}if(b0){b6=b3?bZ[b1]:bZ[b1].data;if(b6){if(!bG.isArray(b0)){if(b0 in b6){b0=[b0]}else{b0=bG.camelCase(b0);if(b0 in b6){b0=[b0]}else{b0=b0.split(" ")}}}for(b5=0,b4=b0.length;b5<b4;b5++){delete b6[b0[b5]]}if(!(b3?O:bG.isEmptyObject)(b6)){return}}}if(!b3){delete bZ[b1].data;if(!O(bZ[b1])){return}}if(b7){bG.cleanData([b2],true)}else{if(bG.support.deleteExpando||bZ!=bZ.window){delete bZ[b1]}else{bZ[b1]=null}}},_data:function(b0,bZ,b1){return bG.data(b0,bZ,b1,true)},acceptData:function(b0){var bZ=b0.nodeName&&bG.noData[b0.nodeName.toLowerCase()];return !bZ||bZ!==true&&b0.getAttribute("classid")===bZ}});bG.fn.extend({data:function(b8,b7){var b3,b0,b6,bZ,b2,b1=this[0],b5=0,b4=null;if(b8===aB){if(this.length){b4=bG.data(b1);if(b1.nodeType===1&&!bG._data(b1,"parsedAttrs")){b6=b1.attributes;for(b2=b6.length;b5<b2;b5++){bZ=b6[b5].name;if(!bZ.indexOf("data-")){bZ=bG.camelCase(bZ.substring(5));bv(b1,bZ,b4[bZ])}}bG._data(b1,"parsedAttrs",true)}}return b4}if(typeof b8==="object"){return this.each(function(){bG.data(this,b8)})}b3=b8.split(".",2);b3[1]=b3[1]?"."+b3[1]:"";b0=b3[1]+"!";return bG.access(this,function(b9){if(b9===aB){b4=this.triggerHandler("getData"+b0,[b3[0]]);if(b4===aB&&b1){b4=bG.data(b1,b8);b4=bv(b1,b8,b4)}return b4===aB&&b3[1]?this.data(b3[0]):b4}b3[1]=b9;this.each(function(){var ca=bG(this);ca.triggerHandler("setData"+b0,b3);bG.data(this,b8,b9);ca.triggerHandler("changeData"+b0,b3)})},null,b7,arguments.length>1,null,false)},removeData:function(bZ){return this.each(function(){bG.removeData(this,bZ)})}});function bv(b1,b0,b2){if(b2===aB&&b1.nodeType===1){var bZ="data-"+b0.replace(aL,"-$1").toLowerCase();b2=b1.getAttribute(bZ);if(typeof b2==="string"){try{b2=b2==="true"?true:b2==="false"?false:b2==="null"?null:+b2+""===b2?+b2:bt.test(b2)?bG.parseJSON(b2):b2}catch(b3){}bG.data(b1,b0,b2)}else{b2=aB}}return b2}function O(b0){var bZ;for(bZ in b0){if(bZ==="data"&&bG.isEmptyObject(b0[bZ])){continue}if(bZ!=="toJSON"){return false}}return true}bG.extend({queue:function(b1,b0,b2){var bZ;if(b1){b0=(b0||"fx")+"queue";bZ=bG._data(b1,b0);if(b2){if(!bZ||bG.isArray(b2)){bZ=bG._data(b1,b0,bG.makeArray(b2))}else{bZ.push(b2)}}return bZ||[]}},dequeue:function(b4,b3){b3=b3||"fx";var b0=bG.queue(b4,b3),b5=b0.length,b2=b0.shift(),bZ=bG._queueHooks(b4,b3),b1=function(){bG.dequeue(b4,b3)};if(b2==="inprogress"){b2=b0.shift();b5--}if(b2){if(b3==="fx"){b0.unshift("inprogress")}delete bZ.stop;b2.call(b4,b1,bZ)}if(!b5&&bZ){bZ.empty.fire()}},_queueHooks:function(b1,b0){var bZ=b0+"queueHooks";return bG._data(b1,bZ)||bG._data(b1,bZ,{empty:bG.Callbacks("once memory").add(function(){bG.removeData(b1,b0+"queue",true);bG.removeData(b1,bZ,true)})})}});bG.fn.extend({queue:function(bZ,b0){var b1=2;if(typeof bZ!=="string"){b0=bZ;bZ="fx";b1--}if(arguments.length<b1){return bG.queue(this[0],bZ)}return b0===aB?this:this.each(function(){var b2=bG.queue(this,bZ,b0);bG._queueHooks(this,bZ);if(bZ==="fx"&&b2[0]!=="inprogress"){bG.dequeue(this,bZ)}})},dequeue:function(bZ){return this.each(function(){bG.dequeue(this,bZ)})},delay:function(b0,bZ){b0=bG.fx?bG.fx.speeds[b0]||b0:b0;bZ=bZ||"fx";return this.queue(bZ,function(b2,b1){var b3=setTimeout(b2,b0);b1.stop=function(){clearTimeout(b3)}})},clearQueue:function(bZ){return this.queue(bZ||"fx",[])},promise:function(b1,b5){var b0,b2=1,b6=bG.Deferred(),b4=this,bZ=this.length,b3=function(){if(!(--b2)){b6.resolveWith(b4,[b4])}};if(typeof b1!=="string"){b5=b1;b1=aB}b1=b1||"fx";while(bZ--){b0=bG._data(b4[bZ],b1+"queueHooks");if(b0&&b0.empty){b2++;b0.empty.add(b3)}}b3();return b6.promise(b5)}});var a7,bV,n,bJ=/[\t\r\n]/g,ai=/\r/g,j=/^(?:button|input)$/i,aA=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bL=bG.support.getSetAttribute;bG.fn.extend({attr:function(bZ,b0){return bG.access(this,bG.attr,bZ,b0,arguments.length>1)},removeAttr:function(bZ){return this.each(function(){bG.removeAttr(this,bZ)})},prop:function(bZ,b0){return bG.access(this,bG.prop,bZ,b0,arguments.length>1)},removeProp:function(bZ){bZ=bG.propFix[bZ]||bZ;return this.each(function(){try{this[bZ]=aB;delete this[bZ]}catch(b0){}})},addClass:function(b3){var b5,b1,b0,b2,b4,b6,bZ;if(bG.isFunction(b3)){return this.each(function(b7){bG(this).addClass(b3.call(this,b7,this.className))})}if(b3&&typeof b3==="string"){b5=b3.split(aV);for(b1=0,b0=this.length;b1<b0;b1++){b2=this[b1];if(b2.nodeType===1){if(!b2.className&&b5.length===1){b2.className=b3}else{b4=" "+b2.className+" ";for(b6=0,bZ=b5.length;b6<bZ;b6++){if(b4.indexOf(" "+b5[b6]+" ")<0){b4+=b5[b6]+" "}}b2.className=bG.trim(b4)}}}}return this},removeClass:function(b5){var b2,b3,b4,b6,b0,b1,bZ;if(bG.isFunction(b5)){return this.each(function(b7){bG(this).removeClass(b5.call(this,b7,this.className))})}if((b5&&typeof b5==="string")||b5===aB){b2=(b5||"").split(aV);for(b1=0,bZ=this.length;b1<bZ;b1++){b4=this[b1];if(b4.nodeType===1&&b4.className){b3=(" "+b4.className+" ").replace(bJ," ");for(b6=0,b0=b2.length;b6<b0;b6++){while(b3.indexOf(" "+b2[b6]+" ")>=0){b3=b3.replace(" "+b2[b6]+" "," ")}}b4.className=b5?bG.trim(b3):""}}}return this},toggleClass:function(b2,b0){var b1=typeof b2,bZ=typeof b0==="boolean";if(bG.isFunction(b2)){return this.each(function(b3){bG(this).toggleClass(b2.call(this,b3,this.className,b0),b0)})}return this.each(function(){if(b1==="string"){var b5,b4=0,b3=bG(this),b6=b0,b7=b2.split(aV);while((b5=b7[b4++])){b6=bZ?b6:!b3.hasClass(b5);b3[b6?"addClass":"removeClass"](b5)}}else{if(b1==="undefined"||b1==="boolean"){if(this.className){bG._data(this,"__className__",this.className)}this.className=this.className||b2===false?"":bG._data(this,"__className__")||""}}})},hasClass:function(bZ){var b2=" "+bZ+" ",b1=0,b0=this.length;for(;b1<b0;b1++){if(this[b1].nodeType===1&&(" "+this[b1].className+" ").replace(bJ," ").indexOf(b2)>=0){return true}}return false},val:function(b2){var bZ,b0,b3,b1=this[0];if(!arguments.length){if(b1){bZ=bG.valHooks[b1.type]||bG.valHooks[b1.nodeName.toLowerCase()];if(bZ&&"get" in bZ&&(b0=bZ.get(b1,"value"))!==aB){return b0}b0=b1.value;return typeof b0==="string"?b0.replace(ai,""):b0==null?"":b0}return}b3=bG.isFunction(b2);return this.each(function(b5){var b6,b4=bG(this);if(this.nodeType!==1){return}if(b3){b6=b2.call(this,b5,b4.val())}else{b6=b2}if(b6==null){b6=""}else{if(typeof b6==="number"){b6+=""}else{if(bG.isArray(b6)){b6=bG.map(b6,function(b7){return b7==null?"":b7+""})}}}bZ=bG.valHooks[this.type]||bG.valHooks[this.nodeName.toLowerCase()];if(!bZ||!("set" in bZ)||bZ.set(this,b6,"value")===aB){this.value=b6}})}});bG.extend({valHooks:{option:{get:function(bZ){var b0=bZ.attributes.value;return !b0||b0.specified?bZ.value:bZ.text}},select:{get:function(bZ){var b5,b0,b4,b2,b3=bZ.selectedIndex,b6=[],b7=bZ.options,b1=bZ.type==="select-one";if(b3<0){return null}b0=b1?b3:0;b4=b1?b3+1:b7.length;for(;b0<b4;b0++){b2=b7[b0];if(b2.selected&&(bG.support.optDisabled?!b2.disabled:b2.getAttribute("disabled")===null)&&(!b2.parentNode.disabled||!bG.nodeName(b2.parentNode,"optgroup"))){b5=bG(b2).val();if(b1){return b5}b6.push(b5)}}if(b1&&!b6.length&&b7.length){return bG(b7[b3]).val()}return b6},set:function(b0,b1){var bZ=bG.makeArray(b1);bG(b0).find("option").each(function(){this.selected=bG.inArray(bG(this).val(),bZ)>=0});if(!bZ.length){b0.selectedIndex=-1}return bZ}}},attrFn:{},attr:function(b5,b2,b6,b4){var b1,bZ,b3,b0=b5.nodeType;if(!b5||b0===3||b0===8||b0===2){return}if(b4&&bG.isFunction(bG.fn[b2])){return bG(b5)[b2](b6)}if(typeof b5.getAttribute==="undefined"){return bG.prop(b5,b2,b6)}b3=b0!==1||!bG.isXMLDoc(b5);if(b3){b2=b2.toLowerCase();bZ=bG.attrHooks[b2]||(M.test(b2)?bV:a7)}if(b6!==aB){if(b6===null){bG.removeAttr(b5,b2);return}else{if(bZ&&"set" in bZ&&b3&&(b1=bZ.set(b5,b6,b2))!==aB){return b1}else{b5.setAttribute(b2,b6+"");return b6}}}else{if(bZ&&"get" in bZ&&b3&&(b1=bZ.get(b5,b2))!==null){return b1}else{b1=b5.getAttribute(b2);return b1===null?aB:b1}}},removeAttr:function(b2,b4){var b3,b5,b0,bZ,b1=0;if(b4&&b2.nodeType===1){b5=b4.split(aV);for(;b1<b5.length;b1++){b0=b5[b1];if(b0){b3=bG.propFix[b0]||b0;bZ=M.test(b0);if(!bZ){bG.attr(b2,b0,"")}b2.removeAttribute(bL?b0:b3);if(bZ&&b3 in b2){b2[b3]=false}}}}},attrHooks:{type:{set:function(bZ,b0){if(j.test(bZ.nodeName)&&bZ.parentNode){bG.error("type property can't be changed")}else{if(!bG.support.radioValue&&b0==="radio"&&bG.nodeName(bZ,"input")){var b1=bZ.value;bZ.setAttribute("type",b0);if(b1){bZ.value=b1}return b0}}}},value:{get:function(b0,bZ){if(a7&&bG.nodeName(b0,"button")){return a7.get(b0,bZ)}return bZ in b0?b0.value:null},set:function(b0,b1,bZ){if(a7&&bG.nodeName(b0,"button")){return a7.set(b0,b1,bZ)}b0.value=b1}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b4,b2,b5){var b1,bZ,b3,b0=b4.nodeType;if(!b4||b0===3||b0===8||b0===2){return}b3=b0!==1||!bG.isXMLDoc(b4);if(b3){b2=bG.propFix[b2]||b2;bZ=bG.propHooks[b2]}if(b5!==aB){if(bZ&&"set" in bZ&&(b1=bZ.set(b4,b5,b2))!==aB){return b1}else{return(b4[b2]=b5)}}else{if(bZ&&"get" in bZ&&(b1=bZ.get(b4,b2))!==null){return b1}else{return b4[b2]}}},propHooks:{tabIndex:{get:function(b0){var bZ=b0.getAttributeNode("tabindex");return bZ&&bZ.specified?parseInt(bZ.value,10):aA.test(b0.nodeName)||D.test(b0.nodeName)&&b0.href?0:aB}}}});bV={get:function(b0,bZ){var b2,b1=bG.prop(b0,bZ);return b1===true||typeof b1!=="boolean"&&(b2=b0.getAttributeNode(bZ))&&b2.nodeValue!==false?bZ.toLowerCase():aB},set:function(b0,b2,bZ){var b1;if(b2===false){bG.removeAttr(b0,bZ)}else{b1=bG.propFix[bZ]||bZ;if(b1 in b0){b0[b1]=true}b0.setAttribute(bZ,bZ.toLowerCase())}return bZ}};if(!bL){n={name:true,id:true,coords:true};a7=bG.valHooks.button={get:function(b1,b0){var bZ;bZ=b1.getAttributeNode(b0);return bZ&&(n[b0]?bZ.value!=="":bZ.specified)?bZ.value:aB},set:function(b1,b2,b0){var bZ=b1.getAttributeNode(b0);if(!bZ){bZ=o.createAttribute(b0);b1.setAttributeNode(bZ)}return(bZ.value=b2+"")}};bG.each(["width","height"],function(b0,bZ){bG.attrHooks[bZ]=bG.extend(bG.attrHooks[bZ],{set:function(b1,b2){if(b2===""){b1.setAttribute(bZ,"auto");return b2}}})});bG.attrHooks.contenteditable={get:a7.get,set:function(b0,b1,bZ){if(b1===""){b1="false"}a7.set(b0,b1,bZ)}}}if(!bG.support.hrefNormalized){bG.each(["href","src","width","height"],function(b0,bZ){bG.attrHooks[bZ]=bG.extend(bG.attrHooks[bZ],{get:function(b2){var b1=b2.getAttribute(bZ,2);return b1===null?aB:b1}})})}if(!bG.support.style){bG.attrHooks.style={get:function(bZ){return bZ.style.cssText.toLowerCase()||aB},set:function(bZ,b0){return(bZ.style.cssText=b0+"")}}}if(!bG.support.optSelected){bG.propHooks.selected=bG.extend(bG.propHooks.selected,{get:function(b0){var bZ=b0.parentNode;if(bZ){bZ.selectedIndex;if(bZ.parentNode){bZ.parentNode.selectedIndex}}return null}})}if(!bG.support.enctype){bG.propFix.enctype="encoding"}if(!bG.support.checkOn){bG.each(["radio","checkbox"],function(){bG.valHooks[this]={get:function(bZ){return bZ.getAttribute("value")===null?"on":bZ.value}}})}bG.each(["radio","checkbox"],function(){bG.valHooks[this]=bG.extend(bG.valHooks[this],{set:function(bZ,b0){if(bG.isArray(b0)){return(bZ.checked=bG.inArray(bG(bZ).val(),b0)>=0)}}})});var bE=/^(?:textarea|input|select)$/i,br=/^([^\.]*|)(?:\.(.+)|)$/,ba=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,bK=/^(?:mouse|contextmenu)|click/,by=/^(?:focusinfocus|focusoutblur)$/,aq=function(bZ){return bG.event.special.hover?bZ:bZ.replace(ba,"mouseenter$1 mouseleave$1")};bG.event={add:function(b2,b6,cd,b4,b3){var b7,b5,ce,cc,cb,b9,bZ,ca,b0,b1,b8;if(b2.nodeType===3||b2.nodeType===8||!b6||!cd||!(b7=bG._data(b2))){return}if(cd.handler){b0=cd;cd=b0.handler;b3=b0.selector}if(!cd.guid){cd.guid=bG.guid++}ce=b7.events;if(!ce){b7.events=ce={}}b5=b7.handle;if(!b5){b7.handle=b5=function(cf){return typeof bG!=="undefined"&&(!cf||bG.event.triggered!==cf.type)?bG.event.dispatch.apply(b5.elem,arguments):aB};b5.elem=b2}b6=bG.trim(aq(b6)).split(" ");for(cc=0;cc<b6.length;cc++){cb=br.exec(b6[cc])||[];b9=cb[1];bZ=(cb[2]||"").split(".").sort();b8=bG.event.special[b9]||{};b9=(b3?b8.delegateType:b8.bindType)||b9;b8=bG.event.special[b9]||{};ca=bG.extend({type:b9,origType:cb[1],data:b4,handler:cd,guid:cd.guid,selector:b3,needsContext:b3&&bG.expr.match.needsContext.test(b3),namespace:bZ.join(".")},b0);b1=ce[b9];if(!b1){b1=ce[b9]=[];b1.delegateCount=0;if(!b8.setup||b8.setup.call(b2,b4,bZ,b5)===false){if(b2.addEventListener){b2.addEventListener(b9,b5,false)}else{if(b2.attachEvent){b2.attachEvent("on"+b9,b5)}}}}if(b8.add){b8.add.call(b2,ca);if(!ca.handler.guid){ca.handler.guid=cd.guid}}if(b3){b1.splice(b1.delegateCount++,0,ca)}else{b1.push(ca)}bG.event.global[b9]=true}b2=null},global:{},remove:function(b2,b7,cd,b3,b6){var ce,cf,ca,b1,b0,b4,b5,cc,b9,bZ,cb,b8=bG.hasData(b2)&&bG._data(b2);if(!b8||!(cc=b8.events)){return}b7=bG.trim(aq(b7||"")).split(" ");for(ce=0;ce<b7.length;ce++){cf=br.exec(b7[ce])||[];ca=b1=cf[1];b0=cf[2];if(!ca){for(ca in cc){bG.event.remove(b2,ca+b7[ce],cd,b3,true)}continue}b9=bG.event.special[ca]||{};ca=(b3?b9.delegateType:b9.bindType)||ca;bZ=cc[ca]||[];b4=bZ.length;b0=b0?new RegExp("(^|\\.)"+b0.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b5=0;b5<bZ.length;b5++){cb=bZ[b5];if((b6||b1===cb.origType)&&(!cd||cd.guid===cb.guid)&&(!b0||b0.test(cb.namespace))&&(!b3||b3===cb.selector||b3==="**"&&cb.selector)){bZ.splice(b5--,1);if(cb.selector){bZ.delegateCount--}if(b9.remove){b9.remove.call(b2,cb)}}}if(bZ.length===0&&b4!==bZ.length){if(!b9.teardown||b9.teardown.call(b2,b0,b8.handle)===false){bG.removeEvent(b2,ca,b8.handle)}delete cc[ca]}}if(bG.isEmptyObject(cc)){delete b8.handle;bG.removeData(b2,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b0,b7,b5,ce){if(b5&&(b5.nodeType===3||b5.nodeType===8)){return}var bZ,b2,b8,cc,b4,b3,ca,b9,b6,cd,cb=b0.type||b0,b1=[];if(by.test(cb+bG.event.triggered)){return}if(cb.indexOf("!")>=0){cb=cb.slice(0,-1);b2=true}if(cb.indexOf(".")>=0){b1=cb.split(".");cb=b1.shift();b1.sort()}if((!b5||bG.event.customEvent[cb])&&!bG.event.global[cb]){return}b0=typeof b0==="object"?b0[bG.expando]?b0:new bG.Event(cb,b0):new bG.Event(cb);b0.type=cb;b0.isTrigger=true;b0.exclusive=b2;b0.namespace=b1.join(".");b0.namespace_re=b0.namespace?new RegExp("(^|\\.)"+b1.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3=cb.indexOf(":")<0?"on"+cb:"";if(!b5){bZ=bG.cache;for(b8 in bZ){if(bZ[b8].events&&bZ[b8].events[cb]){bG.event.trigger(b0,b7,bZ[b8].handle.elem,true)}}return}b0.result=aB;if(!b0.target){b0.target=b5}b7=b7!=null?bG.makeArray(b7):[];b7.unshift(b0);ca=bG.event.special[cb]||{};if(ca.trigger&&ca.trigger.apply(b5,b7)===false){return}b6=[[b5,ca.bindType||cb]];if(!ce&&!ca.noBubble&&!bG.isWindow(b5)){cd=ca.delegateType||cb;cc=by.test(cd+cb)?b5:b5.parentNode;for(b4=b5;cc;cc=cc.parentNode){b6.push([cc,cd]);b4=cc}if(b4===(b5.ownerDocument||o)){b6.push([b4.defaultView||b4.parentWindow||a2,cd])}}for(b8=0;b8<b6.length&&!b0.isPropagationStopped();b8++){cc=b6[b8][0];b0.type=b6[b8][1];b9=(bG._data(cc,"events")||{})[b0.type]&&bG._data(cc,"handle");if(b9){b9.apply(cc,b7)}b9=b3&&cc[b3];if(b9&&bG.acceptData(cc)&&b9.apply&&b9.apply(cc,b7)===false){b0.preventDefault()}}b0.type=cb;if(!ce&&!b0.isDefaultPrevented()){if((!ca._default||ca._default.apply(b5.ownerDocument,b7)===false)&&!(cb==="click"&&bG.nodeName(b5,"a"))&&bG.acceptData(b5)){if(b3&&b5[cb]&&((cb!=="focus"&&cb!=="blur")||b0.target.offsetWidth!==0)&&!bG.isWindow(b5)){b4=b5[b3];if(b4){b5[b3]=null}bG.event.triggered=cb;b5[cb]();bG.event.triggered=aB;if(b4){b5[b3]=b4}}}}return b0.result},dispatch:function(bZ){bZ=bG.event.fix(bZ||a2.event);var b6,b5,cf,b9,b8,b0,b7,cd,b2,ce,b3=((bG._data(this,"events")||{})[bZ.type]||[]),b4=b3.delegateCount,cb=a4.call(arguments),b1=!bZ.exclusive&&!bZ.namespace,ca=bG.event.special[bZ.type]||{},cc=[];cb[0]=bZ;bZ.delegateTarget=this;if(ca.preDispatch&&ca.preDispatch.call(this,bZ)===false){return}if(b4&&!(bZ.button&&bZ.type==="click")){for(cf=bZ.target;cf!=this;cf=cf.parentNode||this){if(cf.disabled!==true||bZ.type!=="click"){b8={};b7=[];for(b6=0;b6<b4;b6++){cd=b3[b6];b2=cd.selector;if(b8[b2]===aB){b8[b2]=cd.needsContext?bG(b2,this).index(cf)>=0:bG.find(b2,this,null,[cf]).length}if(b8[b2]){b7.push(cd)}}if(b7.length){cc.push({elem:cf,matches:b7})}}}}if(b3.length>b4){cc.push({elem:this,matches:b3.slice(b4)})}for(b6=0;b6<cc.length&&!bZ.isPropagationStopped();b6++){b0=cc[b6];bZ.currentTarget=b0.elem;for(b5=0;b5<b0.matches.length&&!bZ.isImmediatePropagationStopped();b5++){cd=b0.matches[b5];if(b1||(!bZ.namespace&&!cd.namespace)||bZ.namespace_re&&bZ.namespace_re.test(cd.namespace)){bZ.data=cd.data;bZ.handleObj=cd;b9=((bG.event.special[cd.origType]||{}).handle||cd.handler).apply(b0.elem,cb);if(b9!==aB){bZ.result=b9;if(b9===false){bZ.preventDefault();bZ.stopPropagation()}}}}}if(ca.postDispatch){ca.postDispatch.call(this,bZ)}return bZ.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b0,bZ){if(b0.which==null){b0.which=bZ.charCode!=null?bZ.charCode:bZ.keyCode}return b0}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b2,b1){var b3,b4,bZ,b0=b1.button,b5=b1.fromElement;if(b2.pageX==null&&b1.clientX!=null){b3=b2.target.ownerDocument||o;b4=b3.documentElement;bZ=b3.body;b2.pageX=b1.clientX+(b4&&b4.scrollLeft||bZ&&bZ.scrollLeft||0)-(b4&&b4.clientLeft||bZ&&bZ.clientLeft||0);b2.pageY=b1.clientY+(b4&&b4.scrollTop||bZ&&bZ.scrollTop||0)-(b4&&b4.clientTop||bZ&&bZ.clientTop||0)}if(!b2.relatedTarget&&b5){b2.relatedTarget=b5===b2.target?b1.toElement:b5}if(!b2.which&&b0!==aB){b2.which=(b0&1?1:(b0&2?3:(b0&4?2:0)))}return b2}},fix:function(b1){if(b1[bG.expando]){return b1}var b0,b4,bZ=b1,b2=bG.event.fixHooks[b1.type]||{},b3=b2.props?this.props.concat(b2.props):this.props;b1=bG.Event(bZ);for(b0=b3.length;b0;){b4=b3[--b0];b1[b4]=bZ[b4]}if(!b1.target){b1.target=bZ.srcElement||o}if(b1.target.nodeType===3){b1.target=b1.target.parentNode}b1.metaKey=!!b1.metaKey;return b2.filter?b2.filter(b1,bZ):b1},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b1,b0,bZ){if(bG.isWindow(this)){this.onbeforeunload=bZ}},teardown:function(b0,bZ){if(this.onbeforeunload===bZ){this.onbeforeunload=null}}}},simulate:function(b0,b2,b1,bZ){var b3=bG.extend(new bG.Event(),b1,{type:b0,isSimulated:true,originalEvent:{}});if(bZ){bG.event.trigger(b3,null,b2)}else{bG.event.dispatch.call(b2,b3)}if(b3.isDefaultPrevented()){b1.preventDefault()}}};bG.event.handle=bG.event.dispatch;bG.removeEvent=o.removeEventListener?function(b0,bZ,b1){if(b0.removeEventListener){b0.removeEventListener(bZ,b1,false)}}:function(b1,b0,b2){var bZ="on"+b0;if(b1.detachEvent){if(typeof b1[bZ]==="undefined"){b1[bZ]=null}b1.detachEvent(bZ,b2)}};bG.Event=function(b0,bZ){if(!(this instanceof bG.Event)){return new bG.Event(b0,bZ)}if(b0&&b0.type){this.originalEvent=b0;this.type=b0.type;this.isDefaultPrevented=(b0.defaultPrevented||b0.returnValue===false||b0.getPreventDefault&&b0.getPreventDefault())?R:X}else{this.type=b0}if(bZ){bG.extend(this,bZ)}this.timeStamp=b0&&b0.timeStamp||bG.now();this[bG.expando]=true};function X(){return false}function R(){return true}bG.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.preventDefault){bZ.preventDefault()}else{bZ.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.stopPropagation){bZ.stopPropagation()}bZ.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};bG.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b0,bZ){bG.event.special[b0]={delegateType:bZ,bindType:bZ,handle:function(b4){var b2,b6=this,b5=b4.relatedTarget,b3=b4.handleObj,b1=b3.selector;if(!b5||(b5!==b6&&!bG.contains(b6,b5))){b4.type=b3.origType;b2=b3.handler.apply(this,arguments);b4.type=bZ}return b2}}});if(!bG.support.submitBubbles){bG.event.special.submit={setup:function(){if(bG.nodeName(this,"form")){return false}bG.event.add(this,"click._submit keypress._submit",function(b1){var b0=b1.target,bZ=bG.nodeName(b0,"input")||bG.nodeName(b0,"button")?b0.form:aB;if(bZ&&!bG._data(bZ,"_submit_attached")){bG.event.add(bZ,"submit._submit",function(b2){b2._submit_bubble=true});bG._data(bZ,"_submit_attached",true)}})},postDispatch:function(bZ){if(bZ._submit_bubble){delete bZ._submit_bubble;if(this.parentNode&&!bZ.isTrigger){bG.event.simulate("submit",this.parentNode,bZ,true)}}},teardown:function(){if(bG.nodeName(this,"form")){return false}bG.event.remove(this,"._submit")}}}if(!bG.support.changeBubbles){bG.event.special.change={setup:function(){if(bE.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bG.event.add(this,"propertychange._change",function(bZ){if(bZ.originalEvent.propertyName==="checked"){this._just_changed=true}});bG.event.add(this,"click._change",function(bZ){if(this._just_changed&&!bZ.isTrigger){this._just_changed=false}bG.event.simulate("change",this,bZ,true)})}return false}bG.event.add(this,"beforeactivate._change",function(b0){var bZ=b0.target;if(bE.test(bZ.nodeName)&&!bG._data(bZ,"_change_attached")){bG.event.add(bZ,"change._change",function(b1){if(this.parentNode&&!b1.isSimulated&&!b1.isTrigger){bG.event.simulate("change",this.parentNode,b1,true)}});bG._data(bZ,"_change_attached",true)}})},handle:function(b0){var bZ=b0.target;if(this!==bZ||b0.isSimulated||b0.isTrigger||(bZ.type!=="radio"&&bZ.type!=="checkbox")){return b0.handleObj.handler.apply(this,arguments)}},teardown:function(){bG.event.remove(this,"._change");return !bE.test(this.nodeName)}}}if(!bG.support.focusinBubbles){bG.each({focus:"focusin",blur:"focusout"},function(b2,bZ){var b0=0,b1=function(b3){bG.event.simulate(bZ,b3.target,bG.event.fix(b3),true)};bG.event.special[bZ]={setup:function(){if(b0++===0){o.addEventListener(b2,b1,true)}},teardown:function(){if(--b0===0){o.removeEventListener(b2,b1,true)}}}})}bG.fn.extend({on:function(b1,bZ,b4,b3,b0){var b5,b2;if(typeof b1==="object"){if(typeof bZ!=="string"){b4=b4||bZ;bZ=aB}for(b2 in b1){this.on(b2,bZ,b4,b1[b2],b0)}return this}if(b4==null&&b3==null){b3=bZ;b4=bZ=aB}else{if(b3==null){if(typeof bZ==="string"){b3=b4;b4=aB}else{b3=b4;b4=bZ;bZ=aB}}}if(b3===false){b3=X}else{if(!b3){return this}}if(b0===1){b5=b3;b3=function(b6){bG().off(b6);return b5.apply(this,arguments)};b3.guid=b5.guid||(b5.guid=bG.guid++)}return this.each(function(){bG.event.add(this,b1,b3,b4,bZ)})},one:function(b0,bZ,b2,b1){return this.on(b0,bZ,b2,b1,1)},off:function(b1,bZ,b3){var b0,b2;if(b1&&b1.preventDefault&&b1.handleObj){b0=b1.handleObj;bG(b1.delegateTarget).off(b0.namespace?b0.origType+"."+b0.namespace:b0.origType,b0.selector,b0.handler);return this}if(typeof b1==="object"){for(b2 in b1){this.off(b2,bZ,b1[b2])}return this}if(bZ===false||typeof bZ==="function"){b3=bZ;bZ=aB}if(b3===false){b3=X}return this.each(function(){bG.event.remove(this,b1,b3,bZ)})},bind:function(bZ,b1,b0){return this.on(bZ,null,b1,b0)},unbind:function(bZ,b0){return this.off(bZ,null,b0)},live:function(bZ,b1,b0){bG(this.context).on(bZ,this.selector,b1,b0);return this},die:function(bZ,b0){bG(this.context).off(bZ,this.selector||"**",b0);return this},delegate:function(bZ,b0,b2,b1){return this.on(b0,bZ,b2,b1)},undelegate:function(bZ,b0,b1){return arguments.length===1?this.off(bZ,"**"):this.off(b0,bZ||"**",b1)},trigger:function(bZ,b0){return this.each(function(){bG.event.trigger(bZ,b0,this)})},triggerHandler:function(bZ,b0){if(this[0]){return bG.event.trigger(bZ,b0,this[0],true)}},toggle:function(b2){var b0=arguments,bZ=b2.guid||bG.guid++,b1=0,b3=function(b4){var b5=(bG._data(this,"lastToggle"+b2.guid)||0)%b1;bG._data(this,"lastToggle"+b2.guid,b5+1);b4.preventDefault();return b0[b5].apply(this,arguments)||false};b3.guid=bZ;while(b1<b0.length){b0[b1++].guid=bZ}return this.click(b3)},hover:function(bZ,b0){return this.mouseenter(bZ).mouseleave(b0||bZ)}});bG.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b0,bZ){bG.fn[bZ]=function(b2,b1){if(b1==null){b1=b2;b2=null}return arguments.length>0?this.on(bZ,null,b2,b1):this.trigger(bZ)};if(a3.test(bZ)){bG.event.fixHooks[bZ]=bG.event.keyHooks}if(bK.test(bZ)){bG.event.fixHooks[bZ]=bG.event.mouseHooks}});
/*!
     * Sizzle CSS Selector Engine
     * Copyright 2012 jQuery Foundation and other contributors
     * Released under the MIT license
     * http://sizzlejs.com/
     */
(function(cS,ch){var cX,ca,cL,b0,cm,cA,cd,cg,cc,cJ,b9=true,cu="undefined",cZ=("sizcache"+Math.random()).replace(".",""),b4=String,b8=cS.document,cb=b8.documentElement,cr=0,cf=0,cE=[].pop,cW=[].push,cl=[].slice,co=[].indexOf||function(c9){var c8=0,c7=this.length;for(;c8<c7;c8++){if(this[c8]===c9){return c8}}return -1},c1=function(c7,c8){c7[cZ]=c8==null||c8;return c7},c5=function(){var c7={},c8=[];return c1(function(c9,da){if(c8.push(c9)>cL.cacheLength){delete c7[c8.shift()]}return(c7[c9]=da)},c7)},cU=c5(),cV=c5(),cn=c5(),cy="[\\x20\\t\\r\\n\\f]",ck="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ci=ck.replace("w","w#"),c4="([*^$|!~]?=)",cP="\\["+cy+"*("+ck+")"+cy+"*(?:"+c4+cy+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ci+")|)|)"+cy+"*\\]",c6=":("+ck+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cP+")|[^:]|\\\\.)*|.*))\\)|)",cz=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cy+"*((?:-\\d)?\\d*)"+cy+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+cy+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cy+"+$","g"),b5=new RegExp("^"+cy+"*,"+cy+"*"),cH=new RegExp("^"+cy+"*([\\x20\\t\\r\\n\\f>+~])"+cy+"*"),cM=new RegExp(c6),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cD=/^:not/,cR=/[\x20\t\r\n\f]*[+~]/,c0=/:not\($/,cs=/h\d/i,cN=/input|select|textarea|button/i,ct=/\\(?!\\)/g,cG={ID:new RegExp("^#("+ck+")"),CLASS:new RegExp("^\\.("+ck+")"),NAME:new RegExp("^\\[name=['\"]?("+ck+")['\"]?\\]"),TAG:new RegExp("^("+ck.replace("w","w*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),POS:new RegExp(cz,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cy+"*(even|odd|(([+-]|)(\\d*)n|)"+cy+"*(?:([+-]|)"+cy+"*(\\d+)|))"+cy+"*\\)|)","i"),needsContext:new RegExp("^"+cy+"*[>+~]|"+cz,"i")},cK=function(c7){var c9=b8.createElement("div");try{return c7(c9)}catch(c8){return false}finally{c9=null}},b7=cK(function(c7){c7.appendChild(b8.createComment(""));return !c7.getElementsByTagName("*").length}),cC=cK(function(c7){c7.innerHTML="<a href='#'></a>";return c7.firstChild&&typeof c7.firstChild.getAttribute!==cu&&c7.firstChild.getAttribute("href")==="#"}),cq=cK(function(c8){c8.innerHTML="<select></select>";var c7=typeof c8.lastChild.getAttribute("multiple");return c7!=="boolean"&&c7!=="string"}),cB=cK(function(c7){c7.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!c7.getElementsByClassName||!c7.getElementsByClassName("e").length){return false}c7.lastChild.className="e";return c7.getElementsByClassName("e").length===2}),bZ=cK(function(c8){c8.id=cZ+0;c8.innerHTML="<a name='"+cZ+"'></a><div name='"+cZ+"'></div>";cb.insertBefore(c8,cb.firstChild);var c7=b8.getElementsByName&&b8.getElementsByName(cZ).length===2+b8.getElementsByName(cZ+0).length;ca=!b8.getElementById(cZ);cb.removeChild(c8);return c7});try{cl.call(cb.childNodes,0)[0].nodeType}catch(c3){cl=function(c8){var c9,c7=[];for(;(c9=this[c8]);c8++){c7.push(c9)}return c7}}function cQ(da,c7,dc,df){dc=dc||[];c7=c7||b8;var dd,c8,de,c9,db=c7.nodeType;if(!da||typeof da!=="string"){return dc}if(db!==1&&db!==9){return[]}de=cm(c7);if(!de&&!df){if((dd=cO.exec(da))){if((c9=dd[1])){if(db===9){c8=c7.getElementById(c9);if(c8&&c8.parentNode){if(c8.id===c9){dc.push(c8);return dc}}else{return dc}}else{if(c7.ownerDocument&&(c8=c7.ownerDocument.getElementById(c9))&&cA(c7,c8)&&c8.id===c9){dc.push(c8);return dc}}}else{if(dd[2]){cW.apply(dc,cl.call(c7.getElementsByTagName(da),0));return dc}else{if((c9=dd[3])&&cB&&c7.getElementsByClassName){cW.apply(dc,cl.call(c7.getElementsByClassName(c9),0));return dc}}}}}return cY(da.replace(cT,"$1"),c7,dc,df,de)}cQ.matches=function(c8,c7){return cQ(c8,null,null,c7)};cQ.matchesSelector=function(c7,c8){return cQ(c8,null,null,[c7]).length>0};function cI(c7){return function(c9){var c8=c9.nodeName.toLowerCase();return c8==="input"&&c9.type===c7}}function b3(c7){return function(c9){var c8=c9.nodeName.toLowerCase();return(c8==="input"||c8==="button")&&c9.type===c7}}function cF(c7){return c1(function(c8){c8=+c8;return c1(function(c9,dd){var db,da=c7([],c9.length,c8),dc=da.length;while(dc--){if(c9[(db=da[dc])]){c9[db]=!(dd[db]=c9[db])}}})})}b0=cQ.getText=function(db){var da,c8="",c9=0,c7=db.nodeType;if(c7){if(c7===1||c7===9||c7===11){if(typeof db.textContent==="string"){return db.textContent}else{for(db=db.firstChild;db;db=db.nextSibling){c8+=b0(db)}}}else{if(c7===3||c7===4){return db.nodeValue}}}else{for(;(da=db[c9]);c9++){c8+=b0(da)}}return c8};cm=cQ.isXML=function(c7){var c8=c7&&(c7.ownerDocument||c7).documentElement;return c8?c8.nodeName!=="HTML":false};cA=cQ.contains=cb.contains?function(c8,c7){var da=c8.nodeType===9?c8.documentElement:c8,c9=c7&&c7.parentNode;return c8===c9||!!(c9&&c9.nodeType===1&&da.contains&&da.contains(c9))}:cb.compareDocumentPosition?function(c8,c7){return c7&&!!(c8.compareDocumentPosition(c7)&16)}:function(c8,c7){while((c7=c7.parentNode)){if(c7===c8){return true}}return false};cQ.attr=function(c9,c8){var da,c7=cm(c9);if(!c7){c8=c8.toLowerCase()}if((da=cL.attrHandle[c8])){return da(c9)}if(c7||cq){return c9.getAttribute(c8)}da=c9.getAttributeNode(c8);return da?typeof c9[c8]==="boolean"?c9[c8]?c8:null:da.specified?da.value:null:null};cL=cQ.selectors={cacheLength:50,createPseudo:c1,match:cG,attrHandle:cC?{}:{href:function(c7){return c7.getAttribute("href",2)},type:function(c7){return c7.getAttribute("type")}},find:{ID:ca?function(da,c9,c8){if(typeof c9.getElementById!==cu&&!c8){var c7=c9.getElementById(da);return c7&&c7.parentNode?[c7]:[]}}:function(da,c9,c8){if(typeof c9.getElementById!==cu&&!c8){var c7=c9.getElementById(da);return c7?c7.id===da||typeof c7.getAttributeNode!==cu&&c7.getAttributeNode("id").value===da?[c7]:ch:[]}},TAG:b7?function(c7,c8){if(typeof c8.getElementsByTagName!==cu){return c8.getElementsByTagName(c7)}}:function(c7,db){var da=db.getElementsByTagName(c7);if(c7==="*"){var dc,c9=[],c8=0;for(;(dc=da[c8]);c8++){if(dc.nodeType===1){c9.push(dc)}}return c9}return da},NAME:bZ&&function(c7,c8){if(typeof c8.getElementsByName!==cu){return c8.getElementsByName(name)}},CLASS:cB&&function(c9,c8,c7){if(typeof c8.getElementsByClassName!==cu&&!c7){return c8.getElementsByClassName(c9)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(c7){c7[1]=c7[1].replace(ct,"");c7[3]=(c7[4]||c7[5]||"").replace(ct,"");if(c7[2]==="~="){c7[3]=" "+c7[3]+" "}return c7.slice(0,4)},CHILD:function(c7){c7[1]=c7[1].toLowerCase();if(c7[1]==="nth"){if(!c7[2]){cQ.error(c7[0])}c7[3]=+(c7[3]?c7[4]+(c7[5]||1):2*(c7[2]==="even"||c7[2]==="odd"));c7[4]=+((c7[6]+c7[7])||c7[2]==="odd")}else{if(c7[2]){cQ.error(c7[0])}}return c7},PSEUDO:function(c8){var c9,c7;if(cG.CHILD.test(c8[0])){return null}if(c8[3]){c8[2]=c8[3]}else{if((c9=c8[4])){if(cM.test(c9)&&(c7=b1(c9,true))&&(c7=c9.indexOf(")",c9.length-c7)-c9.length)){c9=c9.slice(0,c7);c8[0]=c8[0].slice(0,c7)}c8[2]=c9}}return c8.slice(0,3)}},filter:{ID:ca?function(c7){c7=c7.replace(ct,"");return function(c8){return c8.getAttribute("id")===c7}}:function(c7){c7=c7.replace(ct,"");return function(c9){var c8=typeof c9.getAttributeNode!==cu&&c9.getAttributeNode("id");return c8&&c8.value===c7}},TAG:function(c7){if(c7==="*"){return function(){return true}}c7=c7.replace(ct,"").toLowerCase();return function(c8){return c8.nodeName&&c8.nodeName.toLowerCase()===c7}},CLASS:function(c7){var c8=cU[cZ][c7];if(!c8){c8=cU(c7,new RegExp("(^|"+cy+")"+c7+"("+cy+"|$)"))}return function(c9){return c8.test(c9.className||(typeof c9.getAttribute!==cu&&c9.getAttribute("class"))||"")}},ATTR:function(c9,c8,c7){return function(dc,db){var da=cQ.attr(dc,c9);if(da==null){return c8==="!="}if(!c8){return true}da+="";return c8==="="?da===c7:c8==="!="?da!==c7:c8==="^="?c7&&da.indexOf(c7)===0:c8==="*="?c7&&da.indexOf(c7)>-1:c8==="$="?c7&&da.substr(da.length-c7.length)===c7:c8==="~="?(" "+da+" ").indexOf(c7)>-1:c8==="|="?da===c7||da.substr(0,c7.length+1)===c7+"-":false}},CHILD:function(c7,c9,da,c8){if(c7==="nth"){return function(dd){var dc,de,db=dd.parentNode;if(da===1&&c8===0){return true}if(db){de=0;for(dc=db.firstChild;dc;dc=dc.nextSibling){if(dc.nodeType===1){de++;if(dd===dc){break}}}}de-=c8;return de===da||(de%da===0&&de/da>=0)}}return function(dc){var db=dc;switch(c7){case"only":case"first":while((db=db.previousSibling)){if(db.nodeType===1){return false}}if(c7==="first"){return true}db=dc;case"last":while((db=db.nextSibling)){if(db.nodeType===1){return false}}return true}}},PSEUDO:function(da,c9){var c7,c8=cL.pseudos[da]||cL.setFilters[da.toLowerCase()]||cQ.error("unsupported pseudo: "+da);if(c8[cZ]){return c8(c9)}if(c8.length>1){c7=[da,da,"",c9];return cL.setFilters.hasOwnProperty(da.toLowerCase())?c1(function(dd,df){var dc,db=c8(dd,c9),de=db.length;while(de--){dc=co.call(dd,db[de]);dd[dc]=!(df[dc]=db[de])}}):function(db){return c8(db,0,c7)}}return c8}},pseudos:{not:c1(function(c7){var c8=[],c9=[],da=cd(c7.replace(cT,"$1"));return da[cZ]?c1(function(dc,dh,df,dd){var dg,db=da(dc,null,dd,[]),de=dc.length;while(de--){if((dg=db[de])){dc[de]=!(dh[de]=dg)}}}):function(dd,dc,db){c8[0]=dd;da(c8,null,db,c9);return !c9.pop()}}),has:c1(function(c7){return function(c8){return cQ(c7,c8).length>0}}),contains:c1(function(c7){return function(c8){return(c8.textContent||c8.innerText||b0(c8)).indexOf(c7)>-1}}),enabled:function(c7){return c7.disabled===false},disabled:function(c7){return c7.disabled===true},checked:function(c7){var c8=c7.nodeName.toLowerCase();return(c8==="input"&&!!c7.checked)||(c8==="option"&&!!c7.selected)},selected:function(c7){if(c7.parentNode){c7.parentNode.selectedIndex}return c7.selected===true},parent:function(c7){return !cL.pseudos.empty(c7)},empty:function(c8){var c7;c8=c8.firstChild;while(c8){if(c8.nodeName>"@"||(c7=c8.nodeType)===3||c7===4){return false}c8=c8.nextSibling}return true},header:function(c7){return cs.test(c7.nodeName)},text:function(c9){var c8,c7;return c9.nodeName.toLowerCase()==="input"&&(c8=c9.type)==="text"&&((c7=c9.getAttribute("type"))==null||c7.toLowerCase()===c8)},radio:cI("radio"),checkbox:cI("checkbox"),file:cI("file"),password:cI("password"),image:cI("image"),submit:b3("submit"),reset:b3("reset"),button:function(c8){var c7=c8.nodeName.toLowerCase();return c7==="input"&&c8.type==="button"||c7==="button"},input:function(c7){return cN.test(c7.nodeName)},focus:function(c7){var c8=c7.ownerDocument;return c7===c8.activeElement&&(!c8.hasFocus||c8.hasFocus())&&!!(c7.type||c7.href)},active:function(c7){return c7===c7.ownerDocument.activeElement},first:cF(function(c7,c9,c8){return[0]}),last:cF(function(c7,c9,c8){return[c9-1]}),eq:cF(function(c7,c9,c8){return[c8<0?c8+c9:c8]}),even:cF(function(c7,da,c9){for(var c8=0;c8<da;c8+=2){c7.push(c8)}return c7}),odd:cF(function(c7,da,c9){for(var c8=1;c8<da;c8+=2){c7.push(c8)}return c7}),lt:cF(function(c7,da,c9){for(var c8=c9<0?c9+da:c9;--c8>=0;){c7.push(c8)}return c7}),gt:cF(function(c7,da,c9){for(var c8=c9<0?c9+da:c9;++c8<da;){c7.push(c8)}return c7})}};function b2(c8,c7,c9){if(c8===c7){return c9}var da=c8.nextSibling;while(da){if(da===c7){return -1}da=da.nextSibling}return 1}cg=cb.compareDocumentPosition?function(c8,c7){if(c8===c7){cc=true;return 0}return(!c8.compareDocumentPosition||!c7.compareDocumentPosition?c8.compareDocumentPosition:c8.compareDocumentPosition(c7)&4)?-1:1}:function(df,de){if(df===de){cc=true;return 0}else{if(df.sourceIndex&&de.sourceIndex){return df.sourceIndex-de.sourceIndex}}var dc,c8,c9=[],c7=[],db=df.parentNode,dd=de.parentNode,dg=db;if(db===dd){return b2(df,de)}else{if(!db){return -1}else{if(!dd){return 1}}}while(dg){c9.unshift(dg);dg=dg.parentNode}dg=dd;while(dg){c7.unshift(dg);dg=dg.parentNode}dc=c9.length;c8=c7.length;for(var da=0;da<dc&&da<c8;da++){if(c9[da]!==c7[da]){return b2(c9[da],c7[da])}}return da===dc?b2(df,c7[da],-1):b2(c9[da],de,1)};[0,0].sort(cg);b9=!cc;cQ.uniqueSort=function(c8){var c9,c7=1;cc=b9;c8.sort(cg);if(cc){for(;(c9=c8[c7]);c7++){if(c9===c8[c7-1]){c8.splice(c7--,1)}}}return c8};cQ.error=function(c7){throw new Error("Syntax error, unrecognized expression: "+c7)};function b1(db,dg){var c8,dc,de,df,dd,c9,c7,da=cV[cZ][db];if(da){return dg?0:da.slice(0)}dd=db;c9=[];c7=cL.preFilter;while(dd){if(!c8||(dc=b5.exec(dd))){if(dc){dd=dd.slice(dc[0].length)}c9.push(de=[])}c8=false;if((dc=cH.exec(dd))){de.push(c8=new b4(dc.shift()));dd=dd.slice(c8.length);c8.type=dc[0].replace(cT," ")}for(df in cL.filter){if((dc=cG[df].exec(dd))&&(!c7[df]||(dc=c7[df](dc,b8,true)))){de.push(c8=new b4(dc.shift()));dd=dd.slice(c8.length);c8.type=df;c8.matches=dc}}if(!c8){break}}return dg?dd.length:dd?cQ.error(db):cV(db,c9).slice(0)}function cw(db,c9,da){var c7=c9.dir,dc=da&&c9.dir==="parentNode",c8=cf++;return c9.first?function(df,de,dd){while((df=df[c7])){if(dc||df.nodeType===1){return db(df,de,dd)}}}:function(dg,df,de){if(!de){var dd,dh=cr+" "+c8+" ",di=dh+cX;while((dg=dg[c7])){if(dc||dg.nodeType===1){if((dd=dg[cZ])===di){return dg.sizset}else{if(typeof dd==="string"&&dd.indexOf(dh)===0){if(dg.sizset){return dg}}else{dg[cZ]=di;if(db(dg,df,de)){dg.sizset=true;return dg}dg.sizset=false}}}}}else{while((dg=dg[c7])){if(dc||dg.nodeType===1){if(db(dg,df,de)){return dg}}}}}}function ce(c7){return c7.length>1?function(db,da,c8){var c9=c7.length;while(c9--){if(!c7[c9](db,da,c8)){return false}}return true}:c7[0]}function cv(c7,c8,c9,da,dd){var db,dg=[],dc=0,de=c7.length,df=c8!=null;for(;dc<de;dc++){if((db=c7[dc])){if(!c9||c9(db,da,dd)){dg.push(db);if(df){c8.push(dc)}}}}return dg}function c2(c9,c8,db,da,dc,c7){if(da&&!da[cZ]){da=c2(da)}if(dc&&!dc[cZ]){dc=c2(dc,c7)}return c1(function(dp,dl,df,dn){if(dp&&dc){return}var dm,dh,di,dg=[],dq=[],de=dl.length,dd=dp||cp(c8||"*",df.nodeType?[df]:df,[],dp),dj=c9&&(dp||!c8)?cv(dd,dg,c9,df,dn):dd,dk=db?dc||(dp?c9:de||da)?[]:dl:dj;if(db){db(dj,dk,df,dn)}if(da){di=cv(dk,dq);da(di,[],df,dn);dm=di.length;while(dm--){if((dh=di[dm])){dk[dq[dm]]=!(dj[dq[dm]]=dh)}}}if(dp){dm=c9&&dk.length;while(dm--){if((dh=dk[dm])){dp[dg[dm]]=!(dl[dg[dm]]=dh)}}}else{dk=cv(dk===dl?dk.splice(de,dk.length):dk);if(dc){dc(null,dl,dk,dn)}else{cW.apply(dl,dk)}}})}function cx(dd){var c8,db,c9,dc=dd.length,dg=cL.relative[dd[0].type],dh=dg||cL.relative[" "],da=dg?1:0,de=cw(function(di){return di===c8},dh,true),df=cw(function(di){return co.call(c8,di)>-1},dh,true),c7=[function(dk,dj,di){return(!dg&&(di||dj!==cJ))||((c8=dj).nodeType?de(dk,dj,di):df(dk,dj,di))}];for(;da<dc;da++){if((db=cL.relative[dd[da].type])){c7=[cw(ce(c7),db)]}else{db=cL.filter[dd[da].type].apply(null,dd[da].matches);if(db[cZ]){c9=++da;for(;c9<dc;c9++){if(cL.relative[dd[c9].type]){break}}return c2(da>1&&ce(c7),da>1&&dd.slice(0,da-1).join("").replace(cT,"$1"),db,da<c9&&cx(dd.slice(da,c9)),c9<dc&&cx((dd=dd.slice(c9))),c9<dc&&dd.join(""))}c7.push(db)}}return ce(c7)}function b6(da,c9){var c7=c9.length>0,db=da.length>0,c8=function(dl,df,dk,dj,ds){var dg,dh,dm,dr=[],dq=0,di="0",dc=dl&&[],dn=ds!=null,dp=cJ,de=dl||db&&cL.find.TAG("*",ds&&df.parentNode||df),dd=(cr+=dp==null?1:Math.E);if(dn){cJ=df!==b8&&df;cX=c8.el}for(;(dg=de[di])!=null;di++){if(db&&dg){for(dh=0;(dm=da[dh]);dh++){if(dm(dg,df,dk)){dj.push(dg);break}}if(dn){cr=dd;cX=++c8.el}}if(c7){if((dg=!dm&&dg)){dq--}if(dl){dc.push(dg)}}}dq+=di;if(c7&&di!==dq){for(dh=0;(dm=c9[dh]);dh++){dm(dc,dr,df,dk)}if(dl){if(dq>0){while(di--){if(!(dc[di]||dr[di])){dr[di]=cE.call(dj)}}}dr=cv(dr)}cW.apply(dj,dr);if(dn&&!dl&&dr.length>0&&(dq+c9.length)>1){cQ.uniqueSort(dj)}}if(dn){cr=dd;cJ=dp}return dc};c8.el=0;return c7?c1(c8):c8}cd=cQ.compile=function(c7,dc){var c9,c8=[],db=[],da=cn[cZ][c7];if(!da){if(!dc){dc=b1(c7)}c9=dc.length;while(c9--){da=cx(dc[c9]);if(da[cZ]){c8.push(da)}else{db.push(da)}}da=cn(c7,b6(db,c8))}return da};function cp(c8,dc,db,c9){var da=0,c7=dc.length;for(;da<c7;da++){cQ(c8,dc[da],db,c9)}return db}function cY(c9,c7,db,df,de){var dc,di,c8,dh,dg,dd=b1(c9),da=dd.length;if(!df){if(dd.length===1){di=dd[0]=dd[0].slice(0);if(di.length>2&&(c8=di[0]).type==="ID"&&c7.nodeType===9&&!de&&cL.relative[di[1].type]){c7=cL.find.ID(c8.matches[0].replace(ct,""),c7,de)[0];if(!c7){return db}c9=c9.slice(di.shift().length)}for(dc=cG.POS.test(c9)?-1:di.length-1;dc>=0;dc--){c8=di[dc];if(cL.relative[(dh=c8.type)]){break}if((dg=cL.find[dh])){if((df=dg(c8.matches[0].replace(ct,""),cR.test(di[0].type)&&c7.parentNode||c7,de))){di.splice(dc,1);c9=df.length&&di.join("");if(!c9){cW.apply(db,cl.call(df,0));return db}break}}}}}cd(c9,dd)(df,c7,de,db,cR.test(c9));return db}if(b8.querySelectorAll){(function(){var dc,dd=cY,db=/'|\\/g,c9=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c8=[":focus"],c7=[":active",":focus"],da=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;cK(function(de){de.innerHTML="<select><option selected=''></option></select>";if(!de.querySelectorAll("[selected]").length){c8.push("\\["+cy+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!de.querySelectorAll(":checked").length){c8.push(":checked")}});cK(function(de){de.innerHTML="<p test=''></p>";if(de.querySelectorAll("[test^='']").length){c8.push("[*^$]="+cy+"*(?:\"\"|'')")}de.innerHTML="<input type='hidden'/>";if(!de.querySelectorAll(":enabled").length){c8.push(":enabled",":disabled")}});c8=new RegExp(c8.join("|"));cY=function(dk,df,dm,dq,dp){if(!dq&&!dp&&(!c8||!c8.test(dk))){var di,dn,dh=true,de=cZ,dg=df,dl=df.nodeType===9&&dk;if(df.nodeType===1&&df.nodeName.toLowerCase()!=="object"){di=b1(dk);if((dh=df.getAttribute("id"))){de=dh.replace(db,"\\$&")}else{df.setAttribute("id",de)}de="[id='"+de+"'] ";dn=di.length;while(dn--){di[dn]=de+di[dn].join("")}dg=cR.test(dk)&&df.parentNode||df;dl=di.join(",")}if(dl){try{cW.apply(dm,cl.call(dg.querySelectorAll(dl),0));return dm}catch(dj){}finally{if(!dh){df.removeAttribute("id")}}}}return dd(dk,df,dm,dq,dp)};if(da){cK(function(df){dc=da.call(df,"div");try{da.call(df,"[test!='']:sizzle");c7.push("!=",c6)}catch(de){}});c7=new RegExp(c7.join("|"));cQ.matchesSelector=function(df,dh){dh=dh.replace(c9,"='$1']");if(!cm(df)&&!c7.test(dh)&&(!c8||!c8.test(dh))){try{var de=da.call(df,dh);if(de||dc||df.document&&df.document.nodeType!==11){return de}}catch(dg){}}return cQ(dh,null,null,[df]).length>0}}})()}cL.pseudos.nth=cL.pseudos.eq;function cj(){}cL.filters=cj.prototype=cL.pseudos;cL.setFilters=new cj();cQ.attr=bG.attr;bG.find=cQ;bG.expr=cQ.selectors;bG.expr[":"]=bG.expr.pseudos;bG.unique=cQ.uniqueSort;bG.text=cQ.getText;bG.isXMLDoc=cQ.isXML;bG.contains=cQ.contains})(a2);var ag=/Until$/,bq=/^(?:parents|prev(?:Until|All))/,al=/^.[^:#\[\.,]*$/,y=bG.expr.match.needsContext,bu={children:true,contents:true,next:true,prev:true};bG.fn.extend({find:function(bZ){var b3,b0,b5,b6,b4,b2,b1=this;if(typeof bZ!=="string"){return bG(bZ).filter(function(){for(b3=0,b0=b1.length;b3<b0;b3++){if(bG.contains(b1[b3],this)){return true}}})}b2=this.pushStack("","find",bZ);for(b3=0,b0=this.length;b3<b0;b3++){b5=b2.length;bG.find(bZ,this[b3],b2);if(b3>0){for(b6=b5;b6<b2.length;b6++){for(b4=0;b4<b5;b4++){if(b2[b4]===b2[b6]){b2.splice(b6--,1);break}}}}}return b2},has:function(b2){var b1,b0=bG(b2,this),bZ=b0.length;return this.filter(function(){for(b1=0;b1<bZ;b1++){if(bG.contains(this,b0[b1])){return true}}})},not:function(bZ){return this.pushStack(aM(this,bZ,false),"not",bZ)},filter:function(bZ){return this.pushStack(aM(this,bZ,true),"filter",bZ)},is:function(bZ){return !!bZ&&(typeof bZ==="string"?y.test(bZ)?bG(bZ,this.context).index(this[0])>=0:bG.filter(bZ,this).length>0:this.filter(bZ).length>0)},closest:function(b3,b2){var b4,b1=0,bZ=this.length,b0=[],b5=y.test(b3)||typeof b3!=="string"?bG(b3,b2||this.context):0;for(;b1<bZ;b1++){b4=this[b1];while(b4&&b4.ownerDocument&&b4!==b2&&b4.nodeType!==11){if(b5?b5.index(b4)>-1:bG.find.matchesSelector(b4,b3)){b0.push(b4);break}b4=b4.parentNode}}b0=b0.length>1?bG.unique(b0):b0;return this.pushStack(b0,"closest",b3)},index:function(bZ){if(!bZ){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof bZ==="string"){return bG.inArray(this[0],bG(bZ))}return bG.inArray(bZ.jquery?bZ[0]:bZ,this)},add:function(bZ,b0){var b2=typeof bZ==="string"?bG(bZ,b0):bG.makeArray(bZ&&bZ.nodeType?[bZ]:bZ),b1=bG.merge(this.get(),b2);return this.pushStack(aR(b2[0])||aR(b1[0])?b1:bG.unique(b1))},addBack:function(bZ){return this.add(bZ==null?this.prevObject:this.prevObject.filter(bZ))}});bG.fn.andSelf=bG.fn.addBack;function aR(bZ){return !bZ||!bZ.parentNode||bZ.parentNode.nodeType===11}function aY(b0,bZ){do{b0=b0[bZ]}while(b0&&b0.nodeType!==1);return b0}bG.each({parent:function(b0){var bZ=b0.parentNode;return bZ&&bZ.nodeType!==11?bZ:null},parents:function(bZ){return bG.dir(bZ,"parentNode")},parentsUntil:function(b0,bZ,b1){return bG.dir(b0,"parentNode",b1)},next:function(bZ){return aY(bZ,"nextSibling")},prev:function(bZ){return aY(bZ,"previousSibling")},nextAll:function(bZ){return bG.dir(bZ,"nextSibling")},prevAll:function(bZ){return bG.dir(bZ,"previousSibling")},nextUntil:function(b0,bZ,b1){return bG.dir(b0,"nextSibling",b1)},prevUntil:function(b0,bZ,b1){return bG.dir(b0,"previousSibling",b1)},siblings:function(bZ){return bG.sibling((bZ.parentNode||{}).firstChild,bZ)},children:function(bZ){return bG.sibling(bZ.firstChild)},contents:function(bZ){return bG.nodeName(bZ,"iframe")?bZ.contentDocument||bZ.contentWindow.document:bG.merge([],bZ.childNodes)}},function(bZ,b0){bG.fn[bZ]=function(b3,b1){var b2=bG.map(this,b0,b3);if(!ag.test(bZ)){b1=b3}if(b1&&typeof b1==="string"){b2=bG.filter(b1,b2)}b2=this.length>1&&!bu[bZ]?bG.unique(b2):b2;if(this.length>1&&bq.test(bZ)){b2=b2.reverse()}return this.pushStack(b2,bZ,a4.call(arguments).join(","))}});bG.extend({filter:function(b1,bZ,b0){if(b0){b1=":not("+b1+")"}return bZ.length===1?bG.find.matchesSelector(bZ[0],b1)?[bZ[0]]:[]:bG.find.matches(b1,bZ)},dir:function(b1,b0,b3){var bZ=[],b2=b1[b0];while(b2&&b2.nodeType!==9&&(b3===aB||b2.nodeType!==1||!bG(b2).is(b3))){if(b2.nodeType===1){bZ.push(b2)}b2=b2[b0]}return bZ},sibling:function(b1,b0){var bZ=[];for(;b1;b1=b1.nextSibling){if(b1.nodeType===1&&b1!==b0){bZ.push(b1)}}return bZ}});function aM(b2,b1,bZ){b1=b1||0;if(bG.isFunction(b1)){return bG.grep(b2,function(b4,b3){var b5=!!b1.call(b4,b3,b4);return b5===bZ})}else{if(b1.nodeType){return bG.grep(b2,function(b4,b3){return(b4===b1)===bZ})}else{if(typeof b1==="string"){var b0=bG.grep(b2,function(b3){return b3.nodeType===1});if(al.test(b1)){return bG.filter(b1,b0,!bZ)}else{b1=bG.filter(b1,b0)}}}}return bG.grep(b2,function(b4,b3){return(bG.inArray(b4,b1)>=0)===bZ})}function A(bZ){var b1=c.split("|"),b0=bZ.createDocumentFragment();if(b0.createElement){while(b1.length){b0.createElement(b1.pop())}}return b0}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",av=/ jQuery\d+="(?:null|\d+)"/g,bY=/^\s+/,ay=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bT=/<tbody/i,J=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,ap=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aE=/^(?:checkbox|radio)$/,bR=/checked\s*(?:[^=]|=\s*.checked.)/i,bw=/\/(java|ecma)script/i,aH=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aQ=A(o),l=aQ.appendChild(o.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;if(!bG.support.htmlSerialize){T._default=[1,"X<div>","</div>"]}bG.fn.extend({text:function(bZ){return bG.access(this,function(b0){return b0===aB?bG.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(b0))},null,bZ,arguments.length)},wrapAll:function(bZ){if(bG.isFunction(bZ)){return this.each(function(b1){bG(this).wrapAll(bZ.call(this,b1))})}if(this[0]){var b0=bG(bZ,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b0.insertBefore(this[0])}b0.map(function(){var b1=this;while(b1.firstChild&&b1.firstChild.nodeType===1){b1=b1.firstChild}return b1}).append(this)}return this},wrapInner:function(bZ){if(bG.isFunction(bZ)){return this.each(function(b0){bG(this).wrapInner(bZ.call(this,b0))})}return this.each(function(){var b0=bG(this),b1=b0.contents();if(b1.length){b1.wrapAll(bZ)}else{b0.append(bZ)}})},wrap:function(bZ){var b0=bG.isFunction(bZ);return this.each(function(b1){bG(this).wrapAll(b0?bZ.call(this,b1):bZ)})},unwrap:function(){return this.parent().each(function(){if(!bG.nodeName(this,"body")){bG(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(bZ){if(this.nodeType===1||this.nodeType===11){this.appendChild(bZ)}})},prepend:function(){return this.domManip(arguments,true,function(bZ){if(this.nodeType===1||this.nodeType===11){this.insertBefore(bZ,this.firstChild)}})},before:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this)})}if(arguments.length){var bZ=bG.clean(arguments);return this.pushStack(bG.merge(bZ,this),"before",this.selector)}},after:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this.nextSibling)})}if(arguments.length){var bZ=bG.clean(arguments);return this.pushStack(bG.merge(this,bZ),"after",this.selector)}},remove:function(bZ,b2){var b1,b0=0;for(;(b1=this[b0])!=null;b0++){if(!bZ||bG.filter(bZ,[b1]).length){if(!b2&&b1.nodeType===1){bG.cleanData(b1.getElementsByTagName("*"));bG.cleanData([b1])}if(b1.parentNode){b1.parentNode.removeChild(b1)}}}return this},empty:function(){var b0,bZ=0;for(;(b0=this[bZ])!=null;bZ++){if(b0.nodeType===1){bG.cleanData(b0.getElementsByTagName("*"))}while(b0.firstChild){b0.removeChild(b0.firstChild)}}return this},clone:function(b0,bZ){b0=b0==null?false:b0;bZ=bZ==null?b0:bZ;return this.map(function(){return bG.clone(this,b0,bZ)})},html:function(bZ){return bG.access(this,function(b3){var b2=this[0]||{},b1=0,b0=this.length;if(b3===aB){return b2.nodeType===1?b2.innerHTML.replace(av,""):aB}if(typeof b3==="string"&&!aj.test(b3)&&(bG.support.htmlSerialize||!K.test(b3))&&(bG.support.leadingWhitespace||!bY.test(b3))&&!T[(p.exec(b3)||["",""])[1].toLowerCase()]){b3=b3.replace(ay,"<$1></$2>");try{for(;b1<b0;b1++){b2=this[b1]||{};if(b2.nodeType===1){bG.cleanData(b2.getElementsByTagName("*"));b2.innerHTML=b3}}b2=0}catch(b4){}}if(b2){this.empty().append(b3)}},null,bZ,arguments.length)},replaceWith:function(bZ){if(!aR(this[0])){if(bG.isFunction(bZ)){return this.each(function(b2){var b1=bG(this),b0=b1.html();b1.replaceWith(bZ.call(this,b2,b0))})}if(typeof bZ!=="string"){bZ=bG(bZ).detach()}return this.each(function(){var b1=this.nextSibling,b0=this.parentNode;bG(this).remove();if(b1){bG(b1).before(bZ)}else{bG(b0).append(bZ)}})}return this.length?this.pushStack(bG(bG.isFunction(bZ)?bZ():bZ),"replaceWith",bZ):this},detach:function(bZ){return this.remove(bZ,true)},domManip:function(b5,b9,b8){b5=[].concat.apply([],b5);var b1,b3,b4,b7,b2=0,b6=b5[0],b0=[],bZ=this.length;if(!bG.support.checkClone&&bZ>1&&typeof b6==="string"&&bR.test(b6)){return this.each(function(){bG(this).domManip(b5,b9,b8)})}if(bG.isFunction(b6)){return this.each(function(cb){var ca=bG(this);b5[0]=b6.call(this,cb,b9?ca.html():aB);ca.domManip(b5,b9,b8)})}if(this[0]){b1=bG.buildFragment(b5,this,b0);b4=b1.fragment;b3=b4.firstChild;if(b4.childNodes.length===1){b4=b3}if(b3){b9=b9&&bG.nodeName(b3,"tr");for(b7=b1.cacheable||bZ-1;b2<bZ;b2++){b8.call(b9&&bG.nodeName(this[b2],"table")?x(this[b2],"tbody"):this[b2],b2===b7?b4:bG.clone(b4,true,true))}}b4=b3=null;if(b0.length){bG.each(b0,function(ca,cb){if(cb.src){if(bG.ajax){bG.ajax({url:cb.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bG.error("no ajax")}}else{bG.globalEval((cb.text||cb.textContent||cb.innerHTML||"").replace(aH,""))}if(cb.parentNode){cb.parentNode.removeChild(cb)}})}}return this}});function x(b0,bZ){return b0.getElementsByTagName(bZ)[0]||b0.appendChild(b0.ownerDocument.createElement(bZ))}function ao(b6,b0){if(b0.nodeType!==1||!bG.hasData(b6)){return}var b3,b2,bZ,b5=bG._data(b6),b4=bG._data(b0,b5),b1=b5.events;if(b1){delete b4.handle;b4.events={};for(b3 in b1){for(b2=0,bZ=b1[b3].length;b2<bZ;b2++){bG.event.add(b0,b3,b1[b3][b2])}}}if(b4.data){b4.data=bG.extend({},b4.data)}}function F(b0,bZ){var b1;if(bZ.nodeType!==1){return}if(bZ.clearAttributes){bZ.clearAttributes()}if(bZ.mergeAttributes){bZ.mergeAttributes(b0)}b1=bZ.nodeName.toLowerCase();if(b1==="object"){if(bZ.parentNode){bZ.outerHTML=b0.outerHTML}if(bG.support.html5Clone&&(b0.innerHTML&&!bG.trim(bZ.innerHTML))){bZ.innerHTML=b0.innerHTML}}else{if(b1==="input"&&aE.test(b0.type)){bZ.defaultChecked=bZ.checked=b0.checked;if(bZ.value!==b0.value){bZ.value=b0.value}}else{if(b1==="option"){bZ.selected=b0.defaultSelected}else{if(b1==="input"||b1==="textarea"){bZ.defaultValue=b0.defaultValue}else{if(b1==="script"&&bZ.text!==b0.text){bZ.text=b0.text}}}}}bZ.removeAttribute(bG.expando)}bG.buildFragment=function(b2,b3,b0){var b1,bZ,b4,b5=b2[0];b3=b3||o;b3=!b3.nodeType&&b3[0]||b3;b3=b3.ownerDocument||b3;if(b2.length===1&&typeof b5==="string"&&b5.length<512&&b3===o&&b5.charAt(0)==="<"&&!ap.test(b5)&&(bG.support.checkClone||!bR.test(b5))&&(bG.support.html5Clone||!K.test(b5))){bZ=true;b1=bG.fragments[b5];b4=b1!==aB}if(!b1){b1=b3.createDocumentFragment();bG.clean(b2,b3,b1,b0);if(bZ){bG.fragments[b5]=b4&&b1}}return{fragment:b1,cacheable:bZ}};bG.fragments={};bG.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(bZ,b0){bG.fn[bZ]=function(b1){var b3,b5=0,b4=[],b7=bG(b1),b2=b7.length,b6=this.length===1&&this[0].parentNode;if((b6==null||b6&&b6.nodeType===11&&b6.childNodes.length===1)&&b2===1){b7[b0](this[0]);return this}else{for(;b5<b2;b5++){b3=(b5>0?this.clone(true):this).get();bG(b7[b5])[b0](b3);b4=b4.concat(b3)}return this.pushStack(b4,bZ,b7.selector)}}});function m(bZ){if(typeof bZ.getElementsByTagName!=="undefined"){return bZ.getElementsByTagName("*")}else{if(typeof bZ.querySelectorAll!=="undefined"){return bZ.querySelectorAll("*")}else{return[]}}}function bS(bZ){if(aE.test(bZ.type)){bZ.defaultChecked=bZ.checked}}bG.extend({clone:function(b3,b5,b1){var bZ,b0,b2,b4;if(bG.support.html5Clone||bG.isXMLDoc(b3)||!K.test("<"+b3.nodeName+">")){b4=b3.cloneNode(true)}else{l.innerHTML=b3.outerHTML;l.removeChild(b4=l.firstChild)}if((!bG.support.noCloneEvent||!bG.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bG.isXMLDoc(b3)){F(b3,b4);bZ=m(b3);b0=m(b4);for(b2=0;bZ[b2];++b2){if(b0[b2]){F(bZ[b2],b0[b2])}}}if(b5){ao(b3,b4);if(b1){bZ=m(b3);b0=m(b4);for(b2=0;bZ[b2];++b2){ao(bZ[b2],b0[b2])}}}bZ=b0=null;return b4},clean:function(cc,b1,bZ,b2){var b9,b8,cb,cg,b5,cf,b6,b3,b0,ca,ce,b7,b4=b1===o&&aQ,cd=[];if(!b1||typeof b1.createDocumentFragment==="undefined"){b1=o}for(b9=0;(cb=cc[b9])!=null;b9++){if(typeof cb==="number"){cb+=""}if(!cb){continue}if(typeof cb==="string"){if(!J.test(cb)){cb=b1.createTextNode(cb)}else{b4=b4||A(b1);b6=b1.createElement("div");b4.appendChild(b6);cb=cb.replace(ay,"<$1></$2>");cg=(p.exec(cb)||["",""])[1].toLowerCase();b5=T[cg]||T._default;cf=b5[0];b6.innerHTML=b5[1]+cb+b5[2];while(cf--){b6=b6.lastChild}if(!bG.support.tbody){b3=bT.test(cb);b0=cg==="table"&&!b3?b6.firstChild&&b6.firstChild.childNodes:b5[1]==="<table>"&&!b3?b6.childNodes:[];for(b8=b0.length-1;b8>=0;--b8){if(bG.nodeName(b0[b8],"tbody")&&!b0[b8].childNodes.length){b0[b8].parentNode.removeChild(b0[b8])}}}if(!bG.support.leadingWhitespace&&bY.test(cb)){b6.insertBefore(b1.createTextNode(bY.exec(cb)[0]),b6.firstChild)}cb=b6.childNodes;b6.parentNode.removeChild(b6)}}if(cb.nodeType){cd.push(cb)}else{bG.merge(cd,cb)}}if(b6){cb=b6=b4=null}if(!bG.support.appendChecked){for(b9=0;(cb=cd[b9])!=null;b9++){if(bG.nodeName(cb,"input")){bS(cb)}else{if(typeof cb.getElementsByTagName!=="undefined"){bG.grep(cb.getElementsByTagName("input"),bS)}}}}if(bZ){ce=function(ch){if(!ch.type||bw.test(ch.type)){return b2?b2.push(ch.parentNode?ch.parentNode.removeChild(ch):ch):bZ.appendChild(ch)}};for(b9=0;(cb=cd[b9])!=null;b9++){if(!(bG.nodeName(cb,"script")&&ce(cb))){bZ.appendChild(cb);if(typeof cb.getElementsByTagName!=="undefined"){b7=bG.grep(bG.merge([],cb.getElementsByTagName("script")),ce);cd.splice.apply(cd,[b9+1,0].concat(b7));b9+=b7.length}}}}return cd},cleanData:function(b0,b8){var b3,b1,b2,b7,b4=0,b9=bG.expando,bZ=bG.cache,b5=bG.support.deleteExpando,b6=bG.event.special;for(;(b2=b0[b4])!=null;b4++){if(b8||bG.acceptData(b2)){b1=b2[b9];b3=b1&&bZ[b1];if(b3){if(b3.events){for(b7 in b3.events){if(b6[b7]){bG.event.remove(b2,b7)}else{bG.removeEvent(b2,b7,b3.handle)}}}if(bZ[b1]){delete bZ[b1];if(b5){delete b2[b9]}else{if(b2.removeAttribute){b2.removeAttribute(b9)}else{b2[b9]=null}}bG.deletedIds.push(b1)}}}}}});(function(){var bZ,b0;bG.uaMatch=function(b2){b2=b2.toLowerCase();var b1=/(chrome)[ \/]([\w.]+)/.exec(b2)||/(webkit)[ \/]([\w.]+)/.exec(b2)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b2)||/(msie) ([\w.]+)/.exec(b2)||b2.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b2)||[];return{browser:b1[1]||"",version:b1[2]||"0"}};bZ=bG.uaMatch(d.userAgent);b0={};if(bZ.browser){b0[bZ.browser]=true;b0.version=bZ.version}if(b0.chrome){b0.webkit=true}else{if(b0.webkit){b0.safari=true}}bG.browser=b0;bG.sub=function(){function b1(b4,b5){return new b1.fn.init(b4,b5)}bG.extend(true,b1,this);b1.superclass=this;b1.fn=b1.prototype=this();b1.fn.constructor=b1;b1.sub=this.sub;b1.fn.init=function b3(b4,b5){if(b5&&b5 instanceof bG&&!(b5 instanceof b1)){b5=b1(b5)}return bG.fn.init.call(this,b4,b5,b2)};b1.fn.init.prototype=b1.fn;var b2=b1(o);return b1}})();var E,az,aW,be=/alpha\([^)]*\)/i,aS=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,aZ=/^margin/,a8=new RegExp("^("+bx+")(.*)$","i"),W=new RegExp("^("+bx+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+bx+")","i"),bh={},a9={position:"absolute",visibility:"hidden",display:"block"},bA={letterSpacing:0,fontWeight:400},bQ=["Top","Right","Bottom","Left"],ar=["Webkit","O","Moz","ms"],aJ=bG.fn.toggle;function b(b2,b0){if(b0 in b2){return b0}var b3=b0.charAt(0).toUpperCase()+b0.slice(1),bZ=b0,b1=ar.length;while(b1--){b0=ar[b1]+b3;if(b0 in b2){return b0}}return bZ}function Q(b0,bZ){b0=bZ||b0;return bG.css(b0,"display")==="none"||!bG.contains(b0.ownerDocument,b0)}function s(b4,bZ){var b3,b5,b0=[],b1=0,b2=b4.length;for(;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}b0[b1]=bG._data(b3,"olddisplay");if(bZ){if(!b0[b1]&&b3.style.display==="none"){b3.style.display=""}if(b3.style.display===""&&Q(b3)){b0[b1]=bG._data(b3,"olddisplay",bC(b3.nodeName))}}else{b5=E(b3,"display");if(!b0[b1]&&b5!=="none"){bG._data(b3,"olddisplay",b5)}}}for(b1=0;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}if(!bZ||b3.style.display==="none"||b3.style.display===""){b3.style.display=bZ?b0[b1]||"":"none"}}return b4}bG.fn.extend({css:function(bZ,b0){return bG.access(this,function(b2,b1,b3){return b3!==aB?bG.style(b2,b1,b3):bG.css(b2,b1)},bZ,b0,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b1,b0){var bZ=typeof b1==="boolean";if(bG.isFunction(b1)&&bG.isFunction(b0)){return aJ.apply(this,arguments)}return this.each(function(){if(bZ?b1:Q(this)){bG(this).show()}else{bG(this).hide()}})}});bG.extend({cssHooks:{opacity:{get:function(b1,b0){if(b0){var bZ=E(b1,"opacity");return bZ===""?"1":bZ}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bG.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b0,b7,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return}var b5,b6,b8,b3=bG.camelCase(b0),bZ=b1.style;b0=bG.cssProps[b3]||(bG.cssProps[b3]=b(bZ,b3));b8=bG.cssHooks[b0]||bG.cssHooks[b3];if(b7!==aB){b6=typeof b7;if(b6==="string"&&(b5=S.exec(b7))){b7=(b5[1]+1)*b5[2]+parseFloat(bG.css(b1,b0));b6="number"}if(b7==null||b6==="number"&&isNaN(b7)){return}if(b6==="number"&&!bG.cssNumber[b3]){b7+="px"}if(!b8||!("set" in b8)||(b7=b8.set(b1,b7,b2))!==aB){try{bZ[b0]=b7}catch(b4){}}}else{if(b8&&"get" in b8&&(b5=b8.get(b1,false,b2))!==aB){return b5}return bZ[b0]}},css:function(b5,b3,b4,b0){var b6,b2,bZ,b1=bG.camelCase(b3);b3=bG.cssProps[b1]||(bG.cssProps[b1]=b(b5.style,b1));bZ=bG.cssHooks[b3]||bG.cssHooks[b1];if(bZ&&"get" in bZ){b6=bZ.get(b5,true,b0)}if(b6===aB){b6=E(b5,b3)}if(b6==="normal"&&b3 in bA){b6=bA[b3]}if(b4||b0!==aB){b2=parseFloat(b6);return b4||bG.isNumeric(b2)?b2||0:b6}return b6},swap:function(b3,b2,b4){var b1,b0,bZ={};for(b0 in b2){bZ[b0]=b3.style[b0];b3.style[b0]=b2[b0]}b1=b4.call(b3);for(b0 in b2){b3.style[b0]=bZ[b0]}return b1}});if(a2.getComputedStyle){E=function(b6,b0){var bZ,b3,b2,b5,b4=a2.getComputedStyle(b6,null),b1=b6.style;if(b4){bZ=b4[b0];if(bZ===""&&!bG.contains(b6.ownerDocument,b6)){bZ=bG.style(b6,b0)}if(W.test(bZ)&&aZ.test(b0)){b3=b1.width;b2=b1.minWidth;b5=b1.maxWidth;b1.minWidth=b1.maxWidth=b1.width=bZ;bZ=b4.width;b1.width=b3;b1.minWidth=b2;b1.maxWidth=b5}}return bZ}}else{if(o.documentElement.currentStyle){E=function(b3,b1){var b4,bZ,b0=b3.currentStyle&&b3.currentStyle[b1],b2=b3.style;if(b0==null&&b2&&b2[b1]){b0=b2[b1]}if(W.test(b0)&&!bk.test(b1)){b4=b2.left;bZ=b3.runtimeStyle&&b3.runtimeStyle.left;if(bZ){b3.runtimeStyle.left=b3.currentStyle.left}b2.left=b1==="fontSize"?"1em":b0;b0=b2.pixelLeft+"px";b2.left=b4;if(bZ){b3.runtimeStyle.left=bZ}}return b0===""?"auto":b0}}}function aG(bZ,b1,b2){var b0=a8.exec(b1);return b0?Math.max(0,b0[1]-(b2||0))+(b0[2]||"px"):b1}function at(b2,b0,bZ,b4){var b1=bZ===(b4?"border":"content")?4:b0==="width"?1:0,b3=0;for(;b1<4;b1+=2){if(bZ==="margin"){b3+=bG.css(b2,bZ+bQ[b1],true)}if(b4){if(bZ==="content"){b3-=parseFloat(E(b2,"padding"+bQ[b1]))||0}if(bZ!=="margin"){b3-=parseFloat(E(b2,"border"+bQ[b1]+"Width"))||0}}else{b3+=parseFloat(E(b2,"padding"+bQ[b1]))||0;if(bZ!=="padding"){b3+=parseFloat(E(b2,"border"+bQ[b1]+"Width"))||0}}}return b3}function u(b2,b0,bZ){var b3=b0==="width"?b2.offsetWidth:b2.offsetHeight,b1=true,b4=bG.support.boxSizing&&bG.css(b2,"boxSizing")==="border-box";if(b3<=0||b3==null){b3=E(b2,b0);if(b3<0||b3==null){b3=b2.style[b0]}if(W.test(b3)){return b3}b1=b4&&(bG.support.boxSizingReliable||b3===b2.style[b0]);b3=parseFloat(b3)||0}return(b3+at(b2,b0,bZ||(b4?"border":"content"),b1))+"px"}function bC(b1){if(bh[b1]){return bh[b1]}var bZ=bG("<"+b1+">").appendTo(o.body),b0=bZ.css("display");bZ.remove();if(b0==="none"||b0===""){az=o.body.appendChild(az||bG.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aW||!az.createElement){aW=(az.contentWindow||az.contentDocument).document;aW.write("<!doctype html><html><body>");aW.close()}bZ=aW.body.appendChild(aW.createElement(b1));b0=E(bZ,"display");o.body.removeChild(az)}bh[b1]=b0;return b0}bG.each(["height","width"],function(b0,bZ){bG.cssHooks[bZ]={get:function(b3,b2,b1){if(b2){if(b3.offsetWidth===0&&G.test(E(b3,"display"))){return bG.swap(b3,a9,function(){return u(b3,bZ,b1)})}else{return u(b3,bZ,b1)}}},set:function(b2,b3,b1){return aG(b2,b3,b1?at(b2,bZ,b1,bG.support.boxSizing&&bG.css(b2,"boxSizing")==="border-box"):0)}}});if(!bG.support.opacity){bG.cssHooks.opacity={get:function(b0,bZ){return aS.test((bZ&&b0.currentStyle?b0.currentStyle.filter:b0.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":bZ?"1":""},set:function(b3,b4){var b2=b3.style,b0=b3.currentStyle,bZ=bG.isNumeric(b4)?"alpha(opacity="+b4*100+")":"",b1=b0&&b0.filter||b2.filter||"";b2.zoom=1;if(b4>=1&&bG.trim(b1.replace(be,""))===""&&b2.removeAttribute){b2.removeAttribute("filter");if(b0&&!b0.filter){return}}b2.filter=be.test(b1)?b1.replace(be,bZ):b1+" "+bZ}}}bG(function(){if(!bG.support.reliableMarginRight){bG.cssHooks.marginRight={get:function(b0,bZ){return bG.swap(b0,{display:"inline-block"},function(){if(bZ){return E(b0,"marginRight")}})}}}if(!bG.support.pixelPosition&&bG.fn.position){bG.each(["top","left"],function(bZ,b0){bG.cssHooks[b0]={get:function(b3,b2){if(b2){var b1=E(b3,b0);return W.test(b1)?bG(b3).position()[b0]+"px":b1}}}})}});if(bG.expr&&bG.expr.filters){bG.expr.filters.hidden=function(bZ){return(bZ.offsetWidth===0&&bZ.offsetHeight===0)||(!bG.support.reliableHiddenOffsets&&((bZ.style&&bZ.style.display)||E(bZ,"display"))==="none")};bG.expr.filters.visible=function(bZ){return !bG.expr.filters.hidden(bZ)}}bG.each({margin:"",padding:"",border:"Width"},function(bZ,b0){bG.cssHooks[bZ+b0]={expand:function(b3){var b2,b4=typeof b3==="string"?b3.split(" "):[b3],b1={};for(b2=0;b2<4;b2++){b1[bZ+bQ[b2]+b0]=b4[b2]||b4[b2-2]||b4[0]}return b1}};if(!aZ.test(bZ)){bG.cssHooks[bZ+b0].set=aG}});var bs=/%20/g,aP=/\[\]$/,U=/\r?\n/g,bz=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aD=/^(?:select|textarea)/i;bG.fn.extend({serialize:function(){return bG.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bG.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aD.test(this.nodeName)||bz.test(this.type))}).map(function(bZ,b0){var b1=bG(this).val();return b1==null?null:bG.isArray(b1)?bG.map(b1,function(b3,b2){return{name:b0.name,value:b3.replace(U,"\r\n")}}):{name:b0.name,value:b1.replace(U,"\r\n")}}).get()}});bG.param=function(bZ,b1){var b2,b0=[],b3=function(b4,b5){b5=bG.isFunction(b5)?b5():(b5==null?"":b5);b0[b0.length]=encodeURIComponent(b4)+"="+encodeURIComponent(b5)};if(b1===aB){b1=bG.ajaxSettings&&bG.ajaxSettings.traditional}if(bG.isArray(bZ)||(bZ.jquery&&!bG.isPlainObject(bZ))){bG.each(bZ,function(){b3(this.name,this.value)})}else{for(b2 in bZ){k(b2,bZ[b2],b1,b3)}}return b0.join("&").replace(bs,"+")};function k(b1,b3,b0,b2){var bZ;if(bG.isArray(b3)){bG.each(b3,function(b5,b4){if(b0||aP.test(b1)){b2(b1,b4)}else{k(b1+"["+(typeof b4==="object"?b5:"")+"]",b4,b0,b2)}})}else{if(!b0&&bG.type(b3)==="object"){for(bZ in b3){k(b1+"["+bZ+"]",b3[bZ],b0,b2)}}else{b2(b1,b3)}}}var bX,Y,an=/#.*$/,ad=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aC=/^\/\//,bN=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bW=bG.fn.load,v={},a6={},aX=["*/"]+["*"];try{Y=aI.href}catch(bd){Y=o.createElement("a");Y.href="";Y=Y.href}bX=aT.exec(Y.toLowerCase())||[];function bI(bZ){return function(b3,b5){if(typeof b3!=="string"){b5=b3;b3="*"}var b0,b6,b7,b2=b3.toLowerCase().split(aV),b1=0,b4=b2.length;if(bG.isFunction(b5)){for(;b1<b4;b1++){b0=b2[b1];b7=/^\+/.test(b0);if(b7){b0=b0.substr(1)||"*"}b6=bZ[b0]=bZ[b0]||[];b6[b7?"unshift":"push"](b5)}}}}function q(b0,b9,b4,b7,b6,b2){b6=b6||b9.dataTypes[0];b2=b2||{};b2[b6]=true;var b8,b5=b0[b6],b1=0,bZ=b5?b5.length:0,b3=(b0===v);for(;b1<bZ&&(b3||!b8);b1++){b8=b5[b1](b9,b4,b7);if(typeof b8==="string"){if(!b3||b2[b8]){b8=aB}else{b9.dataTypes.unshift(b8);b8=q(b0,b9,b4,b7,b8,b2)}}}if((b3||!b8)&&!b2["*"]){b8=q(b0,b9,b4,b7,"*",b2)}return b8}function t(b1,b2){var b0,bZ,b3=bG.ajaxSettings.flatOptions||{};for(b0 in b2){if(b2[b0]!==aB){(b3[b0]?b1:(bZ||(bZ={})))[b0]=b2[b0]}}if(bZ){bG.extend(true,b1,bZ)}}bG.fn.load=function(b2,b5,b6){if(typeof b2!=="string"&&bW){return bW.apply(this,arguments)}if(!this.length){return this}var bZ,b3,b1,b0=this,b4=b2.indexOf(" ");if(b4>=0){bZ=b2.slice(b4,b2.length);b2=b2.slice(0,b4)}if(bG.isFunction(b5)){b6=b5;b5=aB}else{if(b5&&typeof b5==="object"){b3="POST"}}bG.ajax({url:b2,type:b3,dataType:"html",data:b5,complete:function(b8,b7){if(b6){b0.each(b6,b1||[b8.responseText,b7,b8])}}}).done(function(b7){b1=arguments;b0.html(bZ?bG("<div>").append(b7.replace(g,"")).find(bZ):b7)});return this};bG.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(bZ,b0){bG.fn[b0]=function(b1){return this.on(b0,b1)}});bG.each(["get","post"],function(bZ,b0){bG[b0]=function(b1,b3,b4,b2){if(bG.isFunction(b3)){b2=b2||b4;b4=b3;b3=aB}return bG.ajax({type:b0,url:b1,data:b3,success:b4,dataType:b2})}});bG.extend({getScript:function(bZ,b0){return bG.get(bZ,aB,b0,"script")},getJSON:function(bZ,b0,b1){return bG.get(bZ,b0,b1,"json")},ajaxSetup:function(b0,bZ){if(bZ){t(b0,bG.ajaxSettings)}else{bZ=b0;b0=bG.ajaxSettings}t(b0,bZ);return b0},ajaxSettings:{url:Y,isLocal:B.test(bX[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bG.parseJSON,"text xml":bG.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bI(v),ajaxTransport:bI(a6),ajax:function(b4,b1){if(typeof b4==="object"){b1=b4;b4=aB}b1=b1||{};var b7,cl,b2,cg,b9,cd,b0,cf,b8=bG.ajaxSetup({},b1),cn=b8.context||b8,cb=cn!==b8&&(cn.nodeType||cn instanceof bG)?bG(cn):bG.event,cm=bG.Deferred(),ci=bG.Callbacks("once memory"),b5=b8.statusCode||{},cc={},cj={},b3=0,b6="canceled",ce={readyState:0,setRequestHeader:function(cp,cq){if(!b3){var co=cp.toLowerCase();cp=cj[co]=cj[co]||cp;cc[cp]=cq}return this},getAllResponseHeaders:function(){return b3===2?cl:null},getResponseHeader:function(cp){var co;if(b3===2){if(!b2){b2={};while((co=ad.exec(cl))){b2[co[1].toLowerCase()]=co[2]}}co=b2[cp.toLowerCase()]}return co===aB?null:co},overrideMimeType:function(co){if(!b3){b8.mimeType=co}return this},abort:function(co){co=co||b6;if(cg){cg.abort(co)}ca(0,co);return this}};function ca(ct,cp,cu,cr){var co,cx,cv,cs,cw,cq=cp;if(b3===2){return}b3=2;if(b9){clearTimeout(b9)}cg=aB;cl=cr||"";ce.readyState=ct>0?4:0;if(cu){cs=h(b8,ce,cu)}if(ct>=200&&ct<300||ct===304){if(b8.ifModified){cw=ce.getResponseHeader("Last-Modified");if(cw){bG.lastModified[b7]=cw}cw=ce.getResponseHeader("Etag");if(cw){bG.etag[b7]=cw}}if(ct===304){cq="notmodified";co=true}else{co=ae(b8,cs);cq=co.state;cx=co.data;cv=co.error;co=!cv}}else{cv=cq;if(!cq||ct){cq="error";if(ct<0){ct=0}}}ce.status=ct;ce.statusText=(cp||cq)+"";if(co){cm.resolveWith(cn,[cx,cq,ce])}else{cm.rejectWith(cn,[ce,cq,cv])}ce.statusCode(b5);b5=aB;if(b0){cb.trigger("ajax"+(co?"Success":"Error"),[ce,b8,co?cx:cv])}ci.fireWith(cn,[ce,cq]);if(b0){cb.trigger("ajaxComplete",[ce,b8]);if(!(--bG.active)){bG.event.trigger("ajaxStop")}}}cm.promise(ce);ce.success=ce.done;ce.error=ce.fail;ce.complete=ci.add;ce.statusCode=function(cp){if(cp){var co;if(b3<2){for(co in cp){b5[co]=[b5[co],cp[co]]}}else{co=cp[ce.status];ce.always(co)}}return this};b8.url=((b4||b8.url)+"").replace(an,"").replace(aC,bX[1]+"//");b8.dataTypes=bG.trim(b8.dataType||"*").toLowerCase().split(aV);if(b8.crossDomain==null){cd=aT.exec(b8.url.toLowerCase())||false;b8.crossDomain=cd&&(cd.join(":")+(cd[3]?"":cd[1]==="http:"?80:443))!==(bX.join(":")+(bX[3]?"":bX[1]==="http:"?80:443))}if(b8.data&&b8.processData&&typeof b8.data!=="string"){b8.data=bG.param(b8.data,b8.traditional)}q(v,b8,b1,ce);if(b3===2){return ce}b0=b8.global;b8.type=b8.type.toUpperCase();b8.hasContent=!r.test(b8.type);if(b0&&bG.active++===0){bG.event.trigger("ajaxStart")}if(!b8.hasContent){if(b8.data){b8.url+=(bN.test(b8.url)?"&":"?")+b8.data;delete b8.data}b7=b8.url;if(b8.cache===false){var bZ=bG.now(),ck=b8.url.replace(P,"$1_="+bZ);b8.url=ck+((ck===b8.url)?(bN.test(b8.url)?"&":"?")+"_="+bZ:"")}}if(b8.data&&b8.hasContent&&b8.contentType!==false||b1.contentType){ce.setRequestHeader("Content-Type",b8.contentType)}if(b8.ifModified){b7=b7||b8.url;if(bG.lastModified[b7]){ce.setRequestHeader("If-Modified-Since",bG.lastModified[b7])}if(bG.etag[b7]){ce.setRequestHeader("If-None-Match",bG.etag[b7])}}ce.setRequestHeader("Accept",b8.dataTypes[0]&&b8.accepts[b8.dataTypes[0]]?b8.accepts[b8.dataTypes[0]]+(b8.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):b8.accepts["*"]);for(cf in b8.headers){ce.setRequestHeader(cf,b8.headers[cf])}if(b8.beforeSend&&(b8.beforeSend.call(cn,ce,b8)===false||b3===2)){return ce.abort()}b6="abort";for(cf in {success:1,error:1,complete:1}){ce[cf](b8[cf])}cg=q(a6,b8,b1,ce);if(!cg){ca(-1,"No Transport")}else{ce.readyState=1;if(b0){cb.trigger("ajaxSend",[ce,b8])}if(b8.async&&b8.timeout>0){b9=setTimeout(function(){ce.abort("timeout")},b8.timeout)}try{b3=1;cg.send(cc,ca)}catch(ch){if(b3<2){ca(-1,ch)}else{throw ch}}}return ce},active:0,lastModified:{},etag:{}});function h(b8,b7,b4){var b3,b5,b2,bZ,b0=b8.contents,b6=b8.dataTypes,b1=b8.responseFields;for(b5 in b1){if(b5 in b4){b7[b1[b5]]=b4[b5]}}while(b6[0]==="*"){b6.shift();if(b3===aB){b3=b8.mimeType||b7.getResponseHeader("content-type")}}if(b3){for(b5 in b0){if(b0[b5]&&b0[b5].test(b3)){b6.unshift(b5);break}}}if(b6[0] in b4){b2=b6[0]}else{for(b5 in b4){if(!b6[0]||b8.converters[b5+" "+b6[0]]){b2=b5;break}if(!bZ){bZ=b5}}b2=b2||bZ}if(b2){if(b2!==b6[0]){b6.unshift(b2)}return b4[b2]}}function ae(b9,b1){var b7,bZ,b5,b3,b6=b9.dataTypes.slice(),b0=b6[0],b8={},b2=0;if(b9.dataFilter){b1=b9.dataFilter(b1,b9.dataType)}if(b6[1]){for(b7 in b9.converters){b8[b7.toLowerCase()]=b9.converters[b7]}}for(;(b5=b6[++b2]);){if(b5!=="*"){if(b0!=="*"&&b0!==b5){b7=b8[b0+" "+b5]||b8["* "+b5];if(!b7){for(bZ in b8){b3=bZ.split(" ");if(b3[1]===b5){b7=b8[b0+" "+b3[0]]||b8["* "+b3[0]];if(b7){if(b7===true){b7=b8[bZ]}else{if(b8[bZ]!==true){b5=b3[0];b6.splice(b2--,0,b5)}}break}}}}if(b7!==true){if(b7&&b9["throws"]){b1=b7(b1)}else{try{b1=b7(b1)}catch(b4){return{state:"parsererror",error:b7?b4:"No conversion from "+b0+" to "+b5}}}}}b0=b5}}return{state:"success",data:b1}}var bp=[],aw=/\?/,a5=/(=)\?(?=&|$)|\?\?/,bl=bG.now();bG.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var bZ=bp.pop()||(bG.expando+"_"+(bl++));this[bZ]=true;return bZ}});bG.ajaxPrefilter("json jsonp",function(b9,b4,b8){var b7,bZ,b6,b2=b9.data,b0=b9.url,b1=b9.jsonp!==false,b5=b1&&a5.test(b0),b3=b1&&!b5&&typeof b2==="string"&&!(b9.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b2);if(b9.dataTypes[0]==="jsonp"||b5||b3){b7=b9.jsonpCallback=bG.isFunction(b9.jsonpCallback)?b9.jsonpCallback():b9.jsonpCallback;bZ=a2[b7];if(b5){b9.url=b0.replace(a5,"$1"+b7)}else{if(b3){b9.data=b2.replace(a5,"$1"+b7)}else{if(b1){b9.url+=(aw.test(b0)?"&":"?")+b9.jsonp+"="+b7}}}b9.converters["script json"]=function(){if(!b6){bG.error(b7+" was not called")}return b6[0]};b9.dataTypes[0]="json";a2[b7]=function(){b6=arguments};b8.always(function(){a2[b7]=bZ;if(b9[b7]){b9.jsonpCallback=b4.jsonpCallback;bp.push(b7)}if(b6&&bG.isFunction(bZ)){bZ(b6[0])}b6=bZ=aB});return"script"}});bG.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(bZ){bG.globalEval(bZ);return bZ}}});bG.ajaxPrefilter("script",function(bZ){if(bZ.cache===aB){bZ.cache=false}if(bZ.crossDomain){bZ.type="GET";bZ.global=false}});bG.ajaxTransport("script",function(b1){if(b1.crossDomain){var bZ,b0=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b2,b3){bZ=o.createElement("script");bZ.async="async";if(b1.scriptCharset){bZ.charset=b1.scriptCharset}bZ.src=b1.url;bZ.onload=bZ.onreadystatechange=function(b5,b4){if(b4||!bZ.readyState||/loaded|complete/.test(bZ.readyState)){bZ.onload=bZ.onreadystatechange=null;if(b0&&bZ.parentNode){b0.removeChild(bZ)}bZ=aB;if(!b4){b3(200,"success")}}};b0.insertBefore(bZ,b0.firstChild)},abort:function(){if(bZ){bZ.onload(0,1)}}}}});var ah,aN=a2.ActiveXObject?function(){for(var bZ in ah){ah[bZ](0,1)}}:false,au=0;function bB(){try{return new a2.XMLHttpRequest()}catch(bZ){}}function bb(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(bZ){}}bG.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bB()||bb()}:bB;(function(bZ){bG.extend(bG.support,{ajax:!!bZ,cors:!!bZ&&("withCredentials" in bZ)})})(bG.ajaxSettings.xhr());if(bG.support.ajax){bG.ajaxTransport(function(bZ){if(!bZ.crossDomain||bG.support.cors){var b0;return{send:function(b6,b1){var b4,b3,b5=bZ.xhr();if(bZ.username){b5.open(bZ.type,bZ.url,bZ.async,bZ.username,bZ.password)}else{b5.open(bZ.type,bZ.url,bZ.async)}if(bZ.xhrFields){for(b3 in bZ.xhrFields){b5[b3]=bZ.xhrFields[b3]}}if(bZ.mimeType&&b5.overrideMimeType){b5.overrideMimeType(bZ.mimeType)}if(!bZ.crossDomain&&!b6["X-Requested-With"]){b6["X-Requested-With"]="XMLHttpRequest"}try{for(b3 in b6){b5.setRequestHeader(b3,b6[b3])}}catch(b2){}b5.send((bZ.hasContent&&bZ.data)||null);b0=function(cf,b9){var ca,b8,b7,cd,cc;try{if(b0&&(b9||b5.readyState===4)){b0=aB;if(b4){b5.onreadystatechange=bG.noop;if(aN){delete ah[b4]}}if(b9){if(b5.readyState!==4){b5.abort()}}else{ca=b5.status;b7=b5.getAllResponseHeaders();cd={};cc=b5.responseXML;if(cc&&cc.documentElement){cd.xml=cc}try{cd.text=b5.responseText}catch(cf){}try{b8=b5.statusText}catch(ce){b8=""}if(!ca&&bZ.isLocal&&!bZ.crossDomain){ca=cd.text?200:404}else{if(ca===1223){ca=204}}}}}catch(cb){if(!b9){b1(-1,cb)}}if(cd){b1(ca,b8,cd,b7)}};if(!bZ.async){b0()}else{if(b5.readyState===4){setTimeout(b0,0)}else{b4=++au;if(aN){if(!ah){ah={};bG(a2).unload(aN)}ah[b4]=b0}b5.onreadystatechange=b0}}},abort:function(){if(b0){b0(0,1)}}}}})}var L,ab,bO=/^(?:toggle|show|hide)$/,bH=new RegExp("^(?:([-+])=|)("+bx+")([a-z%]*)$","i"),bM=/queueHooks$/,ax=[i],a1={"*":[function(bZ,b6){var b2,b7,b8=this.createTween(bZ,b6),b3=bH.exec(b6),b4=b8.cur(),b0=+b4||0,b1=1,b5=20;if(b3){b2=+b3[2];b7=b3[3]||(bG.cssNumber[bZ]?"":"px");if(b7!=="px"&&b0){b0=bG.css(b8.elem,bZ,true)||b2||1;do{b1=b1||".5";b0=b0/b1;bG.style(b8.elem,bZ,b0+b7)}while(b1!==(b1=b8.cur()/b4)&&b1!==1&&--b5)}b8.unit=b7;b8.start=b0;b8.end=b3[1]?b0+(b3[1]+1)*b2:b2}return b8}]};function bj(){setTimeout(function(){L=aB},0);return(L=bG.now())}function bc(b0,bZ){bG.each(bZ,function(b5,b3){var b4=(a1[b5]||[]).concat(a1["*"]),b1=0,b2=b4.length;for(;b1<b2;b1++){if(b4[b1].call(b0,b5,b3)){return}}})}function f(b1,b5,b8){var b9,b4=0,bZ=0,b0=ax.length,b7=bG.Deferred().always(function(){delete b3.elem}),b3=function(){var ce=L||bj(),cb=Math.max(0,b2.startTime+b2.duration-ce),cd=1-(cb/b2.duration||0),ca=0,cc=b2.tweens.length;for(;ca<cc;ca++){b2.tweens[ca].run(cd)}b7.notifyWith(b1,[b2,cd,cb]);if(cd<1&&cc){return cb}else{b7.resolveWith(b1,[b2]);return false}},b2=b7.promise({elem:b1,props:bG.extend({},b5),opts:bG.extend(true,{specialEasing:{}},b8),originalProperties:b5,originalOptions:b8,startTime:L||bj(),duration:b8.duration,tweens:[],createTween:function(cd,ca,cc){var cb=bG.Tween(b1,b2.opts,cd,ca,b2.opts.specialEasing[cd]||b2.opts.easing);b2.tweens.push(cb);return cb},stop:function(cb){var ca=0,cc=cb?b2.tweens.length:0;for(;ca<cc;ca++){b2.tweens[ca].run(1)}if(cb){b7.resolveWith(b1,[b2,cb])}else{b7.rejectWith(b1,[b2,cb])}return this}}),b6=b2.props;ak(b6,b2.opts.specialEasing);for(;b4<b0;b4++){b9=ax[b4].call(b2,b1,b6,b2.opts);if(b9){return b9}}bc(b2,b6);if(bG.isFunction(b2.opts.start)){b2.opts.start.call(b1,b2)}bG.fx.timer(bG.extend(b3,{anim:b2,queue:b2.opts.queue,elem:b1}));return b2.progress(b2.opts.progress).done(b2.opts.done,b2.opts.complete).fail(b2.opts.fail).always(b2.opts.always)}function ak(b2,b4){var b1,b0,b5,b3,bZ;for(b1 in b2){b0=bG.camelCase(b1);b5=b4[b0];b3=b2[b1];if(bG.isArray(b3)){b5=b3[1];b3=b2[b1]=b3[0]}if(b1!==b0){b2[b0]=b3;delete b2[b1]}bZ=bG.cssHooks[b0];if(bZ&&"expand" in bZ){b3=bZ.expand(b3);delete b2[b0];for(b1 in b3){if(!(b1 in b2)){b2[b1]=b3[b1];b4[b1]=b5}}}else{b4[b0]=b5}}}bG.Animation=bG.extend(f,{tweener:function(b0,b3){if(bG.isFunction(b0)){b3=b0;b0=["*"]}else{b0=b0.split(" ")}var b2,bZ=0,b1=b0.length;for(;bZ<b1;bZ++){b2=b0[bZ];a1[b2]=a1[b2]||[];a1[b2].unshift(b3)}},prefilter:function(b0,bZ){if(bZ){ax.unshift(b0)}else{ax.push(b0)}}});function i(b3,b8,bZ){var b7,b1,ca,b2,ce,cd,cc,cb,b4=this,b0=b3.style,b9={},b6=[],b5=b3.nodeType&&Q(b3);if(!bZ.queue){cc=bG._queueHooks(b3,"fx");if(cc.unqueued==null){cc.unqueued=0;cb=cc.empty.fire;cc.empty.fire=function(){if(!cc.unqueued){cb()}}}cc.unqueued++;b4.always(function(){b4.always(function(){cc.unqueued--;if(!bG.queue(b3,"fx").length){cc.empty.fire()}})})}if(b3.nodeType===1&&("height" in b8||"width" in b8)){bZ.overflow=[b0.overflow,b0.overflowX,b0.overflowY];if(bG.css(b3,"display")==="inline"&&bG.css(b3,"float")==="none"){if(!bG.support.inlineBlockNeedsLayout||bC(b3.nodeName)==="inline"){b0.display="inline-block"}else{b0.zoom=1}}}if(bZ.overflow){b0.overflow="hidden";if(!bG.support.shrinkWrapBlocks){b4.done(function(){b0.overflow=bZ.overflow[0];b0.overflowX=bZ.overflow[1];b0.overflowY=bZ.overflow[2]})}}for(b7 in b8){ca=b8[b7];if(bO.exec(ca)){delete b8[b7];if(ca===(b5?"hide":"show")){continue}b6.push(b7)}}b2=b6.length;if(b2){ce=bG._data(b3,"fxshow")||bG._data(b3,"fxshow",{});if(b5){bG(b3).show()}else{b4.done(function(){bG(b3).hide()})}b4.done(function(){var cf;bG.removeData(b3,"fxshow",true);for(cf in b9){bG.style(b3,cf,b9[cf])}});for(b7=0;b7<b2;b7++){b1=b6[b7];cd=b4.createTween(b1,b5?ce[b1]:0);b9[b1]=ce[b1]||bG.style(b3,b1);if(!(b1 in ce)){ce[b1]=cd.start;if(b5){cd.end=cd.start;cd.start=b1==="width"||b1==="height"?1:0}}}}}function H(b1,b0,b3,bZ,b2){return new H.prototype.init(b1,b0,b3,bZ,b2)}bG.Tween=H;H.prototype={constructor:H,init:function(b2,b0,b4,bZ,b3,b1){this.elem=b2;this.prop=b4;this.easing=b3||"swing";this.options=b0;this.start=this.now=this.cur();this.end=bZ;this.unit=b1||(bG.cssNumber[b4]?"":"px")},cur:function(){var bZ=H.propHooks[this.prop];return bZ&&bZ.get?bZ.get(this):H.propHooks._default.get(this)},run:function(b1){var b0,bZ=H.propHooks[this.prop];if(this.options.duration){this.pos=b0=bG.easing[this.easing](b1,this.options.duration*b1,0,1,this.options.duration)}else{this.pos=b0=b1}this.now=(this.end-this.start)*b0+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(bZ&&bZ.set){bZ.set(this)}else{H.propHooks._default.set(this)}return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(b0){var bZ;if(b0.elem[b0.prop]!=null&&(!b0.elem.style||b0.elem.style[b0.prop]==null)){return b0.elem[b0.prop]}bZ=bG.css(b0.elem,b0.prop,false,"");return !bZ||bZ==="auto"?0:bZ},set:function(bZ){if(bG.fx.step[bZ.prop]){bG.fx.step[bZ.prop](bZ)}else{if(bZ.elem.style&&(bZ.elem.style[bG.cssProps[bZ.prop]]!=null||bG.cssHooks[bZ.prop])){bG.style(bZ.elem,bZ.prop,bZ.now+bZ.unit)}else{bZ.elem[bZ.prop]=bZ.now}}}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(bZ){if(bZ.elem.nodeType&&bZ.elem.parentNode){bZ.elem[bZ.prop]=bZ.now}}};bG.each(["toggle","show","hide"],function(b0,bZ){var b1=bG.fn[bZ];bG.fn[bZ]=function(b2,b4,b3){return b2==null||typeof b2==="boolean"||(!b0&&bG.isFunction(b2)&&bG.isFunction(b4))?b1.apply(this,arguments):this.animate(bF(bZ,true),b2,b4,b3)}});bG.fn.extend({fadeTo:function(bZ,b2,b1,b0){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b2},bZ,b1,b0)},animate:function(b5,b2,b4,b3){var b1=bG.isEmptyObject(b5),bZ=bG.speed(b2,b4,b3),b0=function(){var b6=f(this,bG.extend({},b5),bZ);if(b1){b6.stop(true)}};return b1||bZ.queue===false?this.each(b0):this.queue(bZ.queue,b0)},stop:function(b1,b0,bZ){var b2=function(b3){var b4=b3.stop;delete b3.stop;b4(bZ)};if(typeof b1!=="string"){bZ=b0;b0=b1;b1=aB}if(b0&&b1!==false){this.queue(b1||"fx",[])}return this.each(function(){var b6=true,b3=b1!=null&&b1+"queueHooks",b5=bG.timers,b4=bG._data(this);if(b3){if(b4[b3]&&b4[b3].stop){b2(b4[b3])}}else{for(b3 in b4){if(b4[b3]&&b4[b3].stop&&bM.test(b3)){b2(b4[b3])}}}for(b3=b5.length;b3--;){if(b5[b3].elem===this&&(b1==null||b5[b3].queue===b1)){b5[b3].anim.stop(bZ);b6=false;b5.splice(b3,1)}}if(b6||!bZ){bG.dequeue(this,b1)}})}});function bF(b1,b3){var b2,bZ={height:b1},b0=0;b3=b3?1:0;for(;b0<4;b0+=2-b3){b2=bQ[b0];bZ["margin"+b2]=bZ["padding"+b2]=b1}if(b3){bZ.opacity=bZ.width=b1}return bZ}bG.each({slideDown:bF("show"),slideUp:bF("hide"),slideToggle:bF("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(bZ,b0){bG.fn[bZ]=function(b1,b3,b2){return this.animate(b0,b1,b3,b2)}});bG.speed=function(b1,b2,b0){var bZ=b1&&typeof b1==="object"?bG.extend({},b1):{complete:b0||!b0&&b2||bG.isFunction(b1)&&b1,duration:b1,easing:b0&&b2||b2&&!bG.isFunction(b2)&&b2};bZ.duration=bG.fx.off?0:typeof bZ.duration==="number"?bZ.duration:bZ.duration in bG.fx.speeds?bG.fx.speeds[bZ.duration]:bG.fx.speeds._default;if(bZ.queue==null||bZ.queue===true){bZ.queue="fx"}bZ.old=bZ.complete;bZ.complete=function(){if(bG.isFunction(bZ.old)){bZ.old.call(this)}if(bZ.queue){bG.dequeue(this,bZ.queue)}};return bZ};bG.easing={linear:function(bZ){return bZ},swing:function(bZ){return 0.5-Math.cos(bZ*Math.PI)/2}};bG.timers=[];bG.fx=H.prototype.init;bG.fx.tick=function(){var b1,b0=bG.timers,bZ=0;for(;bZ<b0.length;bZ++){b1=b0[bZ];if(!b1()&&b0[bZ]===b1){b0.splice(bZ--,1)}}if(!b0.length){bG.fx.stop()}};bG.fx.timer=function(bZ){if(bZ()&&bG.timers.push(bZ)&&!ab){ab=setInterval(bG.fx.tick,bG.fx.interval)}};bG.fx.interval=13;bG.fx.stop=function(){clearInterval(ab);ab=null};bG.fx.speeds={slow:600,fast:200,_default:400};bG.fx.step={};if(bG.expr&&bG.expr.filters){bG.expr.filters.animated=function(bZ){return bG.grep(bG.timers,function(b0){return bZ===b0.elem}).length}}var bm=/^(?:body|html)$/i;bG.fn.offset=function(ca){if(arguments.length){return ca===aB?this:this.each(function(cb){bG.offset.setOffset(this,ca,cb)})}var b0,b5,b6,b3,b7,bZ,b2,b4={top:0,left:0},b1=this[0],b8=b1&&b1.ownerDocument;if(!b8){return}if((b5=b8.body)===b1){return bG.offset.bodyOffset(b1)}b0=b8.documentElement;if(!bG.contains(b0,b1)){return b4}if(typeof b1.getBoundingClientRect!=="undefined"){b4=b1.getBoundingClientRect()}b6=bn(b8);b3=b0.clientTop||b5.clientTop||0;b7=b0.clientLeft||b5.clientLeft||0;bZ=b6.pageYOffset||b0.scrollTop;b2=b6.pageXOffset||b0.scrollLeft;var b9=a2.document.compatMode;if(b9=="BackCompat"&&!!a2.ActiveXObject){return{top:b4.top+Math.max(a2.document.documentElement.scrollTop,a2.document.body.scrollTop)-b3,left:b4.left+Math.max(a2.document.documentElement.scrollLeft,a2.document.body.scrollLeft)-b7}}return{top:b4.top+bZ-b3,left:b4.left+b2-b7}};bG.offset={bodyOffset:function(bZ){var b1=bZ.offsetTop,b0=bZ.offsetLeft;if(bG.support.doesNotIncludeMarginInBodyOffset){b1+=parseFloat(bG.css(bZ,"marginTop"))||0;b0+=parseFloat(bG.css(bZ,"marginLeft"))||0}return{top:b1,left:b0}},setOffset:function(b2,cb,b5){var b6=bG.css(b2,"position");if(b6==="static"){b2.style.position="relative"}var b4=bG(b2),b0=b4.offset(),bZ=bG.css(b2,"top"),b9=bG.css(b2,"left"),ca=(b6==="absolute"||b6==="fixed")&&bG.inArray("auto",[bZ,b9])>-1,b8={},b7={},b1,b3;if(ca){b7=b4.position();b1=b7.top;b3=b7.left}else{b1=parseFloat(bZ)||0;b3=parseFloat(b9)||0}if(bG.isFunction(cb)){cb=cb.call(b2,b5,b0)}if(cb.top!=null){b8.top=(cb.top-b0.top)+b1}if(cb.left!=null){b8.left=(cb.left-b0.left)+b3}if("using" in cb){cb.using.call(b2,b8)}else{b4.css(b8)}}};bG.fn.extend({position:function(){if(!this[0]){return}var b1=this[0],b0=this.offsetParent(),b2=this.offset(),bZ=bm.test(b0[0].nodeName)?{top:0,left:0}:b0.offset();b2.top-=parseFloat(bG.css(b1,"marginTop"))||0;b2.left-=parseFloat(bG.css(b1,"marginLeft"))||0;bZ.top+=parseFloat(bG.css(b0[0],"borderTopWidth"))||0;bZ.left+=parseFloat(bG.css(b0[0],"borderLeftWidth"))||0;return{top:b2.top-bZ.top,left:b2.left-bZ.left}},offsetParent:function(){return this.map(function(){var bZ=this.offsetParent||o.body;while(bZ&&(!bm.test(bZ.nodeName)&&bG.css(bZ,"position")==="static")){bZ=bZ.offsetParent}return bZ||o.body})}});bG.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b1,b0){var bZ=/Y/.test(b0);bG.fn[b1]=function(b2){return bG.access(this,function(b4,b7,b6){var b5=bn(b4);if(b6===aB){var b3=a2.document.compatMode;if(b3=="BackCompat"&&!!a2.ActiveXObject){return b5?(b0 in b5)?b5[b0]:Math.max(a2.document.documentElement[b7],a2.document.body[b7]):b4[b7]}return b5?(b0 in b5)?b5[b0]:b5.document.documentElement[b7]:b4[b7]}if(b5){b5.scrollTo(!bZ?b6:bG(b5).scrollLeft(),bZ?b6:bG(b5).scrollTop())}else{b4[b7]=b6}},b1,b2,arguments.length,null)}});function bn(bZ){return bG.isWindow(bZ)?bZ:bZ.nodeType===9?bZ.defaultView||bZ.parentWindow:false}bG.each({Height:"height",Width:"width"},function(bZ,b0){bG.each({padding:"inner"+bZ,content:b0,"":"outer"+bZ},function(b1,b2){bG.fn[b2]=function(b6,b5){var b4=arguments.length&&(b1||typeof b6!=="boolean"),b3=b1||(b6===true||b5===true?"margin":"border");return bG.access(this,function(b9,b8,ca){var cb;if(bG.isWindow(b9)){var b7=a2.document.compatMode;if(b7=="BackCompat"){return b9.document.body["client"+bZ]}return b9.document.documentElement["client"+bZ]}if(b9.nodeType===9){cb=b9.documentElement;return Math.max(b9.body["scroll"+bZ],cb["scroll"+bZ],b9.body["offset"+bZ],cb["offset"+bZ],cb["client"+bZ])}return ca===aB?bG.css(b9,b8,ca,b3):bG.style(b9,b8,ca,b3)},b0,b4?b6:aB,b4,null)}})});a2.comtop.cQuery=bG;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bG})}})(window);(function(c,d){var a=c("html");a.attr("style","font-family:isIE\\0; border:none; *font-family:isIE7; _font-family:isIE6;-moz-border-radius-topleft:0");d.Browser={isIE:false,isIE6:false,isIE7:false,isIE8:false,isIE9:false,notIE:true,isQM:document.compatMode!=="CSS1Compat"};var b=a.css("font-family");if(/isIE(?!\\|0)/.test(b)){d.Browser[b]=true;d.Browser.notIE=false;if(b!=="isIE"){d.Browser.isIE=true}else{if(a.css("border")===undefined){d.Browser.isIE8=true}else{d.Browser.isIE9=true}}}a.removeAttr("style")})(window.comtop.cQuery,window.comtop);if(comtop.Browser.isIE6){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}(function(b){var a=b.cQuery;a.page={height:function(){if(b.Browser.isIE6||b.Browser.isIE7||b.Browser.isIE8){var d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(d<f){return a(window).height()}else{if(b.Browser.isQM){return d-4}return d}}else{if(b.Browser.isQM){return a(document).height()-4}return a(document).height()}},width:function(){var f=a("<div></div>");f.css({height:1});var d=parseInt(a("body").css("paddingLeft"))+parseInt(a("body").css("paddingRight"))+parseInt(a("body").css("marginLeft"))+parseInt(a("body").css("marginRight"));a("body").append(f);var c=f.width();f.remove();return c+d},scrollTop:function(){return a("html").scrollTop()||a("body").scrollTop()},scrollLeft:function(){return a("html").scrollLeft()||a("body").scrollLeft()}};a.client={width:function(){if(b.Browser.isQM){return document.documentElement.clientWidth||document.documentElement.offsetWidth-21}return a(window).width()},height:function(){if(b.Browser.isQM){return window.innerHeight||document.documentElement.offsetHeight-4}return a(window).height()}}})(window.comtop);(function(a){a.JCT=b;function b(c,f){if(b.clearWhiteSpace){c=c.replace(/[\f\n\r\t\v]+/g,"")}this.Fn=new b.Instance(c,f);for(var d in this){this.Fn.Reserve+=d+","}}b.prototype={Extend:function(f,c){for(var d in f){if(this[d]&&this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].Extend){this[d].Extend(f[d])}else{if(this.Fn.Reserve.indexOf(","+d+",")==-1){this[d]=f[d]}}}if(typeof f.ERun=="function"){f.ERun.apply(this,c||[])}return this},ExtendTo:function(f,c){for(var d in this){if(this.Fn.Reserve.indexOf(","+d+",")>0&&f[d]){continue}if(f[d]==null){f[d]=this[d]}else{if(this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].ExtendTo){this[d].ExtendTo(f[d])}}}if(typeof f.ERun=="function"){f.ERun.apply(f,c||[])}return this},ExecChilds:function(f,d){if(typeof f=="string"){d=f;f=0}d=d||"Exec";if(!f){f={};for(var g in this){if(this[g].Fn&&this[g].Fn.JavaScriptCommonTemplates){f[g]=[]}}}for(var g in f){if(this[g]&&(typeof this[g][d]=="function")){this[g][d].apply(this[g],f[g])}}return this},BuildChilds:function(g){var d={},f=false;if(undefined==g){g=[]}else{if(typeof g=="string"){g=g.split(",")}else{d=g;f=true}}if(g instanceof Array){for(var c=0;c<g.length;c++){d[g[c]]=true}}for(var c in this){if(this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&(g.length==0||d[c])){this[c].Build(f?g[c]:[])}}return this},GetView:function(){this.Fn.V=[];this.GetViewContinue.apply(this,arguments);return this.Fn.V.join("")},GetViewContinue:function(){this.Build.apply(this,[arguments])},Build:function(c){this.Fn.Build(this,c,arguments.callee.caller===this.GetViewContinue);return this},PushView:function(c){this.Fn.V.push(c)}};b.Instance=function(c,d){this.Init(c,d)};b.clearWhiteSpace=true;b.Instance.prototype={JavaScriptCommonTemplates:3,Reserve:",",args:[],Tags:{comment:{block:{begin:"<!---",end:"-->"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},script:{block:{begin:'<script type="text/jct">',end:"<\/script>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},code:{block:{begin:'<code class="jct">',end:"</code>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}}},Init:function(f,i){this.Src=f||"";this.Path=i||"";for(var d in this.Tags){if(this.Src.indexOf(this.Tags[d].block.begin)>=0){break}}this.Tag=this.Tags[d];this.A=[];this.V=[];this.EXEC=[];var g=[];var h=[0,0,0,0,0];var c=this.Src.length;while(this.Slice(this.Tag.clean,h[4],h,c)){g.push(this.Src.slice(h[0],h[1]))}if(g.length){g.push(this.Src.slice(h[4]));this.Src=g.join("")}},Build:function(c,d,h){this.EXEC=[];this.Parse(c);try{var g=this.EXEC.join("\n");c.GetViewContinue=new Function(this.args,g);this.Src=""}catch(f){this.V=["jCT Parse Error"];c.ERROR={message:f.message+"\n"+(f.lineNumber||f.number),code:g}}if(c.BRun){c.BRun.apply(c,d||[])}if(h){this.V=[];c.GetViewContinue.apply(c,d||[])}},Parse:function(r){var t=this.Tag,f=this.A,s=this.EXEC,n=this.Src.length,c=[0,0,0,0,0],q=[0,0,0,0,0];while(this.Slice(t.block,c[4],c,n)){q=[0,0,0,0,c[0]];while(this.Slice(t.exp,q[4],q,c[1])){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[0],q[1]));s.push("this.Fn.V.push("+this.Src.slice(q[2],q[3])+");")}if(q[4]!=c[1]){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[4],c[1]))}if(this.Src.slice(c[2],c[2]+2)=="//"){var m=this.Src.slice(c[2]+2,c[2]+3);if(m=="/"){m=this.Src.slice(c[2]+3,c[3]);var g=m.indexOf(" ");var l=[];if(g>0){l=m.slice(g+1).split(",");m=m.slice(0,g)}var d=t.block.begin+"///"+m+t.block.end;var k=this.Src.indexOf(d,c[4]);if(k>0){var o=new b(this.Src.slice(c[4],k),this.Path);o.Fn.args=l;if(!r[m]){r[m]={}}for(var h in o){r[m][h]=o[h]}c[4]=k+d.length}}else{if(m=="."){m=this.Src.slice(c[2]+3,c[3]);var g=m.indexOf(" ")+1;if(m.slice(g,g+8)=="function"){var i=m.slice(0,g-1);r[i]=new Function("return "+m.slice(g,m.length))()}else{var i=new Function("return "+m.slice(g));r[m.slice(0,g)]=i.call(r)}}else{if(m==" "){this.args=this.Src.slice(c[2]+2,c[3]).slice(1).split(",")}}}}else{s.push(this.Src.slice(c[2],c[3]))}}q=[0,0,0,0,c[4]];c[1]=n;while(this.Slice(t.exp,q[4],q,c[1])){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[0],q[1]));s.push("this.Fn.V.push("+this.Src.slice(q[2],q[3])+");")}if(q[4]!=c[1]){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[4],c[1]))}},Slice:function(l,k,c,j){var d=l.begin;var f=l.end;var h,i,g;h=this.Src.indexOf(d,k);if(h<0||h>=j){return false}i=h+d.length;if(i<0||i>=j){return false}g=this.Src.indexOf(f,i);if(g<0||g>=j){return false}c[0]=k;c[1]=h;c[2]=i;c[3]=g;c[4]=g+f.length;return true}}})(window.comtop);(function(d,f){window.cui=function(i){var h=d(i);var g=h.data("uitype");var j=g||h;if(!j.cuiCreated){j.cuiCreated=function(m,k){if(this[m]){this[m].apply(this,Array.prototype.slice.call(arguments,1))}else{var l=this.data("cuiCreated")||[];l.push({method:m,arg:Array.prototype.slice.call(arguments,1)});this.data("cuiCreated",l)}delete this.cuiCreated;return this}}return j};function b(h,i){h.options=d.extend(true,{},i.options,h.options);if(i.options&&i.options.uitype){var k=i.options.uitype;h._superUITypes=d.extend(true,[],i._superUITypes);h._superUITypes.push(k)}var g=h.options?h.options.uitype:null;if(!g){return}var j=g.charAt(0).toLowerCase()+g.substring(1);if(d.fn[j]==null){d.fn[j]=function(l){var n=d(this).eq(0);var o=f.UI[g].prototype.options.scope;n.selector=n.selector.replace(".slice(0,1)","");if(!n.selector&&o!="uitype"){var m="e-"+f.guid(),q=this.nodeName||"";n.attr("eventID",m);n.selector=q+"[eventID="+m+"]:eq(0)"}var p=null;if(o==null){p=n.data("uitype")}else{if(o=="uitype"){p=n.data(g)}}if(p==null){l=l||{};l.el=n;p=new f.UI[g](l);f.UI.componentList.push(p);if(n.size()){if(o==null){n.data("uitype",p)}else{if(o=="uitype"){n.data(g,p)}}}}return p}}h[j]=function(){return this}}var a=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;f.Class=function(){};f.Class.extend=function(k){var j=this.prototype;b(k,j);a=true;var i=new this();a=false;for(var h in k){i[h]=typeof k[h]=="function"&&typeof j[h]=="function"&&c.test(k[h])?(function(l,m){return function(){var o=this._super;this._super=j[l];var n=m.apply(this,arguments);this._super=o;return n}})(h,k[h]):k[h]}function g(){if(!a&&this.__init){this.__init.apply(this,arguments)}}g.prototype=i;g.prototype.constructor=g;g.extend=arguments.callee;return g}})(window.comtop.cQuery,window.comtop);(function(b,f){var a=a||{};f.UI.templatePath=null;f.UI.componentList=[];f.UI.Base=f.Class.extend({options:{},tpls:{},autoTpls:{},isInit:false,__load:function(g,i,h){typeof h==="undefined"&&(h=false);typeof i!=="function"&&(i=function(){});b.ajax({url:g,async:h,dataType:"text",success:i,error:function(){}})},__loadTemplate:function(p){p=p||"template.html";var u=this,o=u.options.uitype,g="",r,s=a[o],m=b("body"),t=m.attr("cuitmplmark")||"",h=new RegExp(p);o=o.charAt(0).toUpperCase()+o.substring(1);if(!s){if(!h.test(t)){if(!f.UI.templatePath){f.UI.scanTemplateUrl(p)}r=d(p);g=r.path+"template/"+p;m.attr("cuitmplmark",t+"["+r.mark+"#"+p+"]");u.__load(g,function(B){B=B.match(/<cmptpl[^>]*>(\s|\r|\t|.)*?<\/cmptpl>/g);for(var x=0,v=B.length;x<v;x++){var w=B[x].match(/uiType="([\w-]*)"/)[1],C=B[x].match(/var="([\w-]*)"/)[1],A=B[x].match(/parse="([\w-]*)"/)[1]!="false",y=B[x].replace(/<cmptpl[^>]*>/,"").replace(/<\/cmptpl>/,"");var z=a[w]||{tpls:{},autoTpls:{}};z.tpls[C]=y;A&&(z.autoTpls[C]=true);a[w]=z}})}s=a[o]||{tpls:{},autoTpls:{}}}u.tpls=b.extend(true,{},s.tpls);u.autoTpls=b.extend(true,{},s.autoTpls);if(u._superUITypes){for(var n=u._superUITypes.length-1;n>=0;n--){o=u._superUITypes[n];var k=a[o];if(k){var j=a[o].tpls;for(var l in j){if(!u.tpls[l]){u.tpls[l]=j[l]}}var q=a[o].autoTpls;for(l in q){if(!u.autoTpls[l]){u.autoTpls[l]=q[l]}}}}}m=null},_buildTemplate:function(l,k,q,n){var o=this,p=b(l);q=q||o.options;if(typeof o.tpls[k]=="object"){o.tpls[k].el=p;o.__createTargetCmp(o.tpls[k])}else{var m=b.trim(o._buildTemplateStr(k,q))||"";var g=m.match(/\#ref\=[\w\.]*\#/g)||[];var h="";for(var j=0;j<g.length;j++){h=b.trim(g[j].replace(/#/g,"").replace("ref=",""));m=m.replace(g[j],o._buildTemplateStr(h,q)||"")}m=o._bindTplEvent(m);n?p.append(m):p.html(m);return m}},_buildTemplateStr:function(j,i){var h=this;var g=new f.JCT(h.tpls[j]);g.Build();return g.GetView(i)},__createTargetCmp:function(g){new f.UI[g.uitype](g)},__init:function(s){var r=this,g={target:{eventName:"change",source:"getValue",target:"setValue"},scope:null},q=s.isScanner,j={},m="",h="";r.options.tpls=r.options.tpls||{};for(var i in r.options){if(q){switch(i){case"readonly":case"width":case"height":m=c(s.el[0],i);break;default:m=s.el.attr(i)}}else{m=s[i];j[i]=m;continue}if(typeof m!=="string"){continue}j[i]=m;if(m=="null"){s[i]=null;continue}h=r.options[i]==null?"function":typeof r.options[i];s[i]=r._convertTo(m,h,r.options[i])}if(r.options.textmode==undefined){delete s.textmode}g=r.options=b.extend(true,{},g,r.options,s);r._init(j);if(g.textmode){r.setTextMode();return}r.__loadTemplate(g.template);for(var o in g.tpls){r.tpls["super."+o]=r.tpls[o];if(typeof g.tpls[o]==="string"){r.tpls[o]=r.tpls[g.tpls[o]]||g.tpls[o]}else{r.tpls[o]=g.tpls[o]}}for(o in r.tpls){if(r.autoTpls[o]==true){var k=b(g.el);var l=k.get(0).tagName;if(/[DIV|SPAN]/.test(l)&&b.trim(k.html())==""){r._buildTemplate(k,o,g)}else{r._bindTplEvent()}}}r._create();if(k){var n=k.data("cuiCreated");if(n){b.each(n,function(){if(r[this.method]){r[this.method].apply(r,this.arg)}});k.removeData("cuiCreated")}}},_bindTplEvent:function(s){var t=this,g=t.options;if(typeof s==="string"){var l=g.el.selector,n=s.match(/events=\"[\w-\s\;\=\,\.]*\"/g)||[],r=[],h=null,q=null,j=null;for(var o=0;o<n.length;o++){r=[];h=n[o].replace(/\"/g,"").replace(/events\=/,"").split(";");for(var m=0,p=h.length;m<p;m++){q=h[m].split("=");if(!b.trim(q[0])){continue}r.push("on",q[0],"=\"comtop.proxyHandler(event, '",l,"', this, '",q[1],"');\" ")}var j=new RegExp(n[o],"g");r.push(n[o].replace("events","etsBak"));s=s.replace(j,r.join(""))}return s}s=s||b(g.el);b("[etsBak]",s).each(function(){var w=b(this),v=w.attr("etsBak").split(";"),k;for(var u=0;u<v.length;u++){k=v[u].split("=");w.bind(k[0]+".comtopBase",{self:t,func:k[1]},comtop.proxyHandler)}w=null});return s},_unbindTplEvent:function(h){var g=this,i=g.options;h=h||i.el;b("[etsBak]",h).each(function(){var l=b(this),k=l.attr("etsBak").split(";");for(var j=0;j<k.length;j++){l.removeAttr("on"+k[j].split("=")[0])}l.unbind(".comtopBase")})},_triggerHandler:function(g,h){b(this).triggerHandler(g,h)},_init:function(g){},_create:function(){},bind:function(g,i,h){b(this).bind(g,i,h);return this},unbind:function(g,h){b(this).unbind(g,h);return this},setValue:function(){},getValue:function(){},show:function(){this.options.el.show();return this},hide:function(){this.options.el.hide();return this},setReadonly:function(){},setTextMode:function(){var h=this,i=h.options,j=i.el[0].nodeName,g=h.getLabelValue();if(j=="SPAN"||j=="DIV"){i.el.html(g)}else{if(j=="INPUT"||j=="BUTTON"||j=="TEXTAREA"){i.el=i.el.replaceWith("<span>"+g+"</span>")}}},getLabelValue:function(){return this.options.value||""},disable:function(g){g=typeof g==="undefined"?false:g;b("input, select, textarea, button",this.options.el).attr("disabled",g);return this},destroy:function(){var g=this,h=g.options;g._unbindTplEvent(h.el);h.el.removeData();if(g.tpls){h.el.empty()}},_convertTo:function(l,j,h){if(b.trim(l)===""){return j==="string"?"":h}var i={},k=/^(?:\{.*\}|\[.*\])$/;l=l.replace(/[\n\r\t]/g,"");switch(j){case"string":l=""+l;break;case"boolean":l=!!(l==="true");break;case"number":l=+l;break;case"object":l=k.test(l)?b.parseJSON(l.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):g(l);break;case"function":l=g(l);break;default:l=h}function g(p){var m=p.split("."),o=window;for(var n=0;n<m.length;n++){o=o[m[n]]}return(typeof o==="object"||typeof o==="function")&&!o.nodeName?o:h}return l}});f.proxyHandler=function(q,l,g,j){var r=null,p=null,h=null,o=null,n=0,m=0;if(l){if(!q){q=b.Event()}q=b.event.fix(q);for(n=0;n<f.UI.componentList.length;n++){o=f.UI.componentList[n];if(o.options.el.selector===l){r=o;break}}if(r==null){return}}else{r=q.data.self;j=q.data.func;g=this;q.data=null}j=j.split(",");for(n=0;n<j.length;n++){if(b.isFunction(r[j[n]])){r[j[n]](q,g,q.target||q.srcElement)}else{p=window;h=j[n].split(".");for(m=0;m<h.length;m++){p=p[h[m]]}p(q,g,q.target||q.srcElement)}}};f.UI.scanTemplateUrl=function(n){var l,h,k=0,m=0,q,r,j,o=new RegExp(n),p=[],g=[];l=b('script[src*="cui/js/comtop.ui"]');h=b("script[cuiTemplate]");q=l.eq(0).attr("src");r=q.substr(0,q.lastIndexOf("/"));r=q.substr(0,r.lastIndexOf("/")+1);p.push({path:r,attrTmpl:""});for(m=h.length;k<m;k++){q=h.eq(k).attr("src");if(!q){continue}r=q.substr(0,q.lastIndexOf("/"));r=q.substr(0,r.lastIndexOf("/")+1);g.push({path:r,attrTmpl:h.eq(k).attr("cuiTemplate")})}f.UI.templatePath={scriptTP:g,scriptOP:p}};function d(k){var j=f.UI.templatePath,h=new RegExp(k);for(var g=0;g<j.scriptTP.length;g++){if(h.test(j.scriptTP[g].attrTmpl)){return{path:j.scriptTP[g].path,mark:"extend"}}}return{path:j.scriptOP[0].path,mark:"cui"}}function c(j,g){var h=j.outerHTML.match(/<[^>]*>/)[0].replace(/[\r\n\t]/g,"");var i=new RegExp("\\s"+g+"=[\"']*([\\w-\\%]*)[\"']*");var k=h.match(i);return k?k[1]:null}b(window).bind("unload",function(){if(comtop.Browser.isIE&&window.CollectGarbage){window.CollectGarbage()}window.comtop=undefined;window.cui=undefined})})(window.comtop.cQuery,window.comtop);(function(a,b){b.Dom.minWidth=function(d,f,g,c){if(b.Browser.isIE){if(d.width()<f){if(b.Browser.isQM){g=g||0;c=c||0;d.width(f+g+c)}else{d.width(f)}}}else{d.css({minWidth:f})}};b.Dom.maxWidth=function(d,f,g,c){if(b.Browser.isIE){if(d.width()>f){if(b.Browser.isQM){g=g||0;c=c||0;d.width(f+g+c)}else{d.width(f)}}}else{d.css({maxWidth:f})}};b.Dom.minHeight=function(d,f,g,c){if(b.Browser.isIE){if(d.height()<f){if(b.Browser.isQM){g=g||0;c=c||0;d.height(f+g+c)}else{d.height(f)}}}else{d.css({minHeight:f})}};b.Dom.maxHeight=function(d,f,g,c){if(b.Browser.isIE){if(d.height()>f){if(b.Browser.isQM){g=g||0;c=c||0;d.height(f+g+c)}else{d.height(f)}}}else{d.css({maxHeight:f})}};b.Dom.windowSize=function(){var c=a(window);return{width:c.width(),height:c.height()}};b.Dom.DocumentSize=function(j){j=j||document;var f=0,d=0;if(!b.Browser.isIE){f=a(j).width();d=a(j).height()}else{if(j.documentElement&&(j.documentElement.scrollWidth||j.documentElement.scrollHeight)){var i=j.documentElement.scrollHeight;var c=j.documentElement.offsetHeight;var g=j.documentElement.scrollWidth;var h=j.documentElement.offsetWidth;f=Math.max(g,h);d=Math.max(i,c)}else{if(j.body&&(j.body.scrollHeight||j.body.scrollWidth)){var i=j.body.scrollHeight;var c=j.body.offsetHeight;var g=j.body.scrollWidth;var h=j.body.offsetWidth;f=Math.max(g,h);d=Math.max(i,c)}}}return{width:f,height:d}};b.MQ={topicList:{},sub:function(c,d){this.topicList[c]=this.topicList[c]||[];this.topicList[c].push(d)},unsub:function(c,f){var g=this.topicList[c];if(!g){return}for(var d=0;d<g.length;d++){if(g==f){g.splice(d,1);break}}},pub:function(c,f){var d=this.topicList[c];if(!d||d.length==0){console.warn("no widget has subscribe this topic "+c);return}for(handler in d){handler(f)}}};b.String.getBytesLength=function(g){var d=0;for(var f=0;f<g.length;f++){var h=g.charCodeAt(f);if((h>=1&&h<=126)||(65376<=h&&h<=65439)){d++}else{d+=2}}return d};b.String.intercept=function(j,h){var f="";var d=0;for(var g=0;g<j.length;g++){var k=j.charCodeAt(g);if((k>=0&&k<=126)||(65376<=k&&k<=65439)){d++}else{d+=2}if(d<=h){f+=j.charAt(g)}else{break}}return f};b.Date.format=function(f,d){var g={"M+":f.getMonth()+1,"d+":f.getDate(),"h+":f.getHours(),"H+":f.getHours(),"m+":f.getMinutes(),"s+":f.getSeconds(),"q+":Math.floor((f.getMonth()+3)/3),S:f.getMilliseconds(),"w+":b.Date.getOnWeek(f).week};if(/(y+)/.test(d)){d=d.replace(RegExp.$1,(f.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in g){if(new RegExp("("+c+")").test(d)){d=d.replace(RegExp.$1,RegExp.$1.length==1?g[c]:("00"+g[c]).substr((""+g[c]).length))}}return d};b.Date.getOnWeek=function(d,f,h){if(!d){return null}var g,c=f?4:1,i=new Date(d.getTime());i.setDate(i.getDate()+c-(h?i.getDay():i.getDay()||7));g=i.getTime();i.setMonth(0);i.setDate(1);return{year:i.getFullYear(),week:Math.floor(Math.round((g-i)/86400000)/7)+1}};b.Date.getWeekRange=function(i,f,k,h){h=k?false:h;var c=new Date(i,0,1),l=b.Date.getOnWeek(c,k,h).week,d,g,j;j=l!=1?h?7-c.getDay():8-(c.getDay()||7):0;d=(f-1)*7+j;g=d+6;return[new Date(d*86400000+c.getTime()),new Date(g*86400000+c.getTime())]};b.Date.parse=function(t,z){t=a.trim(t);if(t===""){return null}var C,l,j,B,A,u,o,r,n;l=[-1,"([0-9]{4})","([0-9]{2})"];j=[-1,"(0[1-9]|1[0-2])","([1-9]|1[0-2])"];B=[-1,"(0[1-9]|[1-2][0-9]|30|31)","([1-9]|[1-2][0-9]|30|31)"];A=[-1,"([0-1][0-9]|20|21|22|23)","([0-9]|1[0-9]|20|21|22|23)"];u=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];o=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];r=[-1,"([0-0][1-4])","([1-4])"];n=[-1,"([0-5][0-3])","([0-9]|[1-4][0-9]|5[0-3])"];if(k(t,z)){var c=new Date(),D=C.exec(t),g=v(z),f=[c.getFullYear(),1,1,0,0,0,1,1];D.shift();for(var x=0;x<8;x++){f[x]=g[x]>=0?+(D[g[x]]):f[x]}if(g[6]>=0&&g[1]<0){f[1]=(f[6]-1)*3;f[2]=1;f[3]=0;f[4]=0;f[5]=0}else{if(g[7]>=0&&g[1]){var p=b.Date.getWeekRange(f[0],f[7]);f[1]=p[0].getMonth();f[2]=p[0].getDate()}else{f[1]=f[1]-1}}return new Date(f[0],f[1],f[2],f[3],f[4],f[5],0)}else{return null}function k(h,d){d=d.replace(/yyyy/,l[1]).replace(/yy/,l[2]).replace(/MM/,j[1]).replace(/M/,j[2]).replace(/dd/,B[1]).replace(/d/,B[2]).replace(/hh/,A[1]).replace(/h/,A[2]).replace(/mm/,u[1]).replace(/m/,u[2]).replace(/ss/,o[1]).replace(/s/,o[2]).replace(/qq/,r[1]).replace(/q/,r[2]).replace(/ww/,n[1]).replace(/w/,n[2]);C=new RegExp("^"+d+"$");return C.test(h)}function v(s){var h=[],q=0,m,w;l[0]=s.indexOf("yyyy");l[0]<0&&(l[0]=s.indexOf("yy"));l[0]>=0&&(h[q]=l[0],q++);j[0]=s.indexOf("MM");j[0]<0&&(j[0]=s.indexOf("M"));j[0]>=0&&(h[q]=j[0],q++);B[0]=s.indexOf("dd");B[0]<0&&(B[0]=s.indexOf("d"));B[0]>=0&&(h[q]=B[0],q++);A[0]=s.indexOf("hh");A[0]<0&&(A[0]=s.indexOf("h"));A[0]>=0&&(h[q]=A[0],q++);u[0]=s.indexOf("mm");u[0]<0&&(u[0]=s.indexOf("m"));u[0]>=0&&(h[q]=u[0],q++);o[0]=s.indexOf("ss");o[0]<0&&(o[0]=s.indexOf("s"));o[0]>=0&&(h[q]=o[0],q++);r[0]=s.indexOf("qq");r[0]<0&&(r[0]=s.indexOf("q"));r[0]>=0&&(h[q]=r[0],q++);n[0]=s.indexOf("ww");n[0]<0&&(n[0]=s.indexOf("w"));n[0]>=0&&(h[q]=n[0],q++);w=[l[0],j[0],B[0],A[0],u[0],o[0],r[0],n[0]];for(q=0;q<h.length-1;q++){for(m=0;m<h.length-1-q;m++){if(h[m]>h[m+1]){var d=h[m];h[m]=h[m+1];h[m+1]=d}}}for(q=0;q<h.length;q++){for(m=0;m<w.length;m++){if(h[q]==w[m]){w[m]=q}}}return w}};b.Tools.formatSizeUnit=function(f,d){var g=typeof f,c;d=d||"string";switch(g){case"string":var h=f.match(/^(\d)+(px|pt|em|PX|PT|EM|%)$/);c=h?[h[0],+h[1],h[2]]:["",0,""];break;case"number":c=[f+"px",f,"px"];break}return d==="string"?c[0]:c[1]};cui.ajax=function(c){var h=c.type||"GET",d=c.dataType||"json",j=c.success||i.noop,f=c.error,g=c.scope||window;var i=window.comtop.cQuery;i.ajax({url:c.url,type:h,data:c.data,dataType:d,success:function(k){if(d=="json"){if(k.success===false){if(f&&f.call){f.call(g,k)}else{cui.error(k.exMessage)}}else{j.call(g,k)}}else{j.call(g,k)}},error:function(k,l){if(f&&f.call){f.call(g)}else{if(l=="parsererror"){cui.error("???????????????????")}else{if(l=="timeout"){cui.error("?????????????????????")}else{if(k.status==404){cui.error("????????????????????????????????")}else{if(k.status==0){}else{cui.error("??????")}}}}}}})}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Databind=b.UI.Base.extend({options:{uitype:"Databind",scope:"uitype",data:{}},data:{},initData:{},bindMapping:{},_init:function(){this.data=this.options.el.get(0);this.initData=a.extend(true,{},this.data);this.bindMapping={}},setValue:function(d,f){for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){continue}this.set(c,d[c],f)}},getValue:function(){var d=a.extend({},this.data);for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){delete d[c]}}return d},_change:function(f){var g=f.data.propName;var d=f.data.el;var h=cui(d).getValue();var c=this.data[g];if(h!=c){this.data[g]=h;this._triggerHandler("change",[g,c,h])}},addBind:function(d,f){this.bindMapping[f]=d;var c=cui(d);c.bind("change",{propName:f,el:d},a.proxy(this._change,this));if(!c.options.textmode){c.setValue(this.data[f],true)}else{c.options.value=this.data[f];c.setTextMode()}return this},reset:function(){for(var c in this.initData){this.set(c,this.initData[c],true)}},setEmpty:function(){var f,d="",c;for(c in this.bindMapping){cui(this.bindMapping[c]).onValid()}for(c in this.data){if(c.toLowerCase().indexOf("jquery")>=0){continue}f=Object.prototype.toString.call(this.data[c]).match(/\[object\s([A-Za-z]{1,})\]/)[1].toLocaleLowerCase();f=this.data[c]===null?"null":f;switch(f){case"number":d="";break;case"string":d="";break;case"array":d=[];break;case"object":d={};break;case"null":d=null;break;case"undefined":d=undefined}this.set(c,d,true)}},set:function(h,g,i){var c=this.data[h];if(g!=c||i){this.data[h]=g;var f=this.bindMapping[h];var d=cui(f);if(f){if(!d.options.textmode){d.setValue(g,!!i)}else{d.options.value=g;d.setTextMode()}}this._triggerHandler("change",[h,c,g])}},get:function(c){return this.data[c]},destroy:function(){this._super();for(var c in this.bindMapping){if(c){cui(this.bindMapping[c]).unbind("change",null,this._change)}}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Validate=b.UI.Base.extend({options:{uitype:"Validate"},invalidClass:"validate_invalid",messageClass:"validate_validation_message",invalidFieldClass:"validate_invalid_field",_create:function(){a.extend(this,this.options)},destroy:function(){var f=this;var d=a.data(this.options.el,"validateEl")||[];a.each(d,function(g,i){var j=cui("#"+i.id);var h=j.options.el;j.unbind("change",f._validateEvent);h.removeData("validateRule")});a.removeData(this.options.el,"validateEl")},add:function(i,k,j){var l=a.type(i)=="string"?cui("#"+i):i;if(!l.options){return}var h=l.options.el;var g=h.data("validateRule")||[];var f=null;if(!j&&!c[k]){f={type:"required",params:{m:k}}}else{f={type:k,params:j||{}}}g.push(f);h.data("validateRule",g);var d=a.data(this.options.el,"validateEl")||[];if(!this._contains(h[0],d)){l.bind("change",this,this._validateEvent);d.push(h[0])}a.data(this.options.el,"validateEl",d)},disValid:function(g,d){var h=a.type(g)=="string"?cui("#"+g):g;if(!h.options){return}var f=h.options.el;if(d){f.data("disValid","true")}else{f.removeData("disValid")}},_contains:function(f,g){var d=false;a.each(g,function(h,i){if(f===i){d=true;return}});return d},remove:function(j,k){var l=a.type(j)=="string"?cui("#"+j):j;if(!l.options){return}var i=l.options.el;var h=[];if(k){h=i.data("validateRule")||[];var d=-1;a.each(h,function(m,n){if(n.type==k){d=m}});if(d>=0){h.splice(d,1)}}if(h.length<1){i.removeData("validateRule");l.unbind("change",this,this._validateEvent);var f=a.data(this.options.el,"validateEl")||[];var g=-1;a.each(f,function(m,n){if(n.id==i[0].id){g=m}});if(g>=0){f.splice(g,1)}if(f.length<1){a.removeData(this.options.el,"validateEl")}else{a.data(this.options.el,"validateEl",f)}}else{i.data("validateRule",h)}},_validateEvent:function(g,f){var d=g.data;d._validate(this,!!f)},validAllElement:function(){var f=a.data(this.options.el,"validateEl")||[];var k=[];var j=[];var l=true;for(var h=0;h<f.length;h++){var g=f[h];var m=cui(g);if(typeof m.options==="undefined"){continue}var d=this._validate(m);d=a.extend(d,{id:g.id});if(d.valid){k.push(d)}else{l=false;j.push(d)}}return[j,k,l]},validOneElement:function(d){var f=a.type(d)=="string"?cui("#"+d):d;if(!f.options){return false}return this._validate(f)},_validate:function(j,i){var f=j.options.el;if(i){j.onValid(j);return false}if(!f[0].disabled){var d=null;var g=j.options.el.data("disValid");if(g&&g=="true"){d={valid:true,message:""}}else{d=this._doValidate(j)}var h=d.valid;if(h){if(j.onValid){j.onValid(j)}else{this.onValid(f)}}else{if(j.onInValid){j.onInValid(j,d.message)}else{this.onInValid(f,d.message)}}return d}},_doValidate:function(l){var j=l.options.el;var k=false;var h=j.data("validateRule")||[];for(var g=0;g<h.length;g++){var f=h[g];var d=this._validateElement(l,f);k=!d.valid;if(k){return{valid:false,message:d.message}}}return{valid:true,message:""}},_validateElement:function(l,d){var i=d.type;var g=d.params;var j=l.getValue();var k=true;var h="";try{c[i](j,g)}catch(f){h=f.message;k=false}finally{return{valid:k,message:h}}},onInValid:function(d,f){this._insertMessage(d,this._createMessageSpan(f));this._addFieldClass(d)},onValid:function(d){this._removeMessageAndFieldClass(d)},_createMessageSpan:function(d){return a("<span></span>").html(d)},_insertMessage:function(d,f){this._removeMessage(d);a(f).addClass(this.messageClass+(" "+this.invalidClass));a(f).insertAfter(d)},_addFieldClass:function(d){this._removeFieldClass(d);a(d).addClass(this.invalidFieldClass)},_removeMessage:function(d){if(nextEl=a(d).next("."+this.messageClass)){a(nextEl).remove()}},_removeFieldClass:function(d){a(d).removeClass(this.invalidFieldClass)},_removeMessageAndFieldClass:function(d){this._removeMessage(d);this._removeFieldClass(d)}});var c={required:function(f,g){var h=a.extend({m:"???????!"},g||{});if(f===""||f===null||f===undefined){c.fail(h.m)}if(h.emptyVal){a.each(h.emptyVal,function(j,k){if(f==k){c.fail(h.m)}})}if(a.type(f)=="array"&&f.length==0){c.fail(h.m)}else{if(a.type(f)=="array"){for(var d=0;d<f.length;d++){if(f[d]===""||f[d]===null||f[d]===undefined){c.fail(h.m);break}}}}return true},numeric:function(f,g){var d=f;if(""==f){return true}var f=Number(f);var g=g||{};var h={notANumberMessage:g.notnm||"?????????!",notAnIntegerMessage:g.notim||"?????????!",wrongNumberMessage:g.wrongm||"????? "+g.is+"!",tooLowMessage:g.minm||"??????? "+g.min+"!",tooHighMessage:g.maxm||"?????? "+g.max+"!",is:((g.is)||(g.is==0))?g.is:null,minimum:((g.min)||(g.min==0))?g.min:null,maximum:((g.max)||(g.max==0))?g.max:null,onlyInteger:g.oi||false};if(!isFinite(f)){c.fail(h.notANumberMessage)}if(h.onlyInteger&&((/\.0+$|\.$/.test(String(d)))||(f!=parseInt(f)))){c.fail(h.notAnIntegerMessage)}switch(true){case (h.is!==null):if(f!=Number(h.is)){c.fail(h.wrongNumberMessage)}break;case (h.minimum!==null&&h.maximum!==null):c.numeric(f,{minm:h.tooLowMessage,min:h.minimum});c.numeric(f,{maxm:h.tooHighMessage,max:h.maximum});break;case (h.minimum!==null):if(f<Number(h.minimum)){c.fail(h.tooLowMessage)}break;case (h.maximum!==null):if(f>Number(h.maximum)){c.fail(h.tooHighMessage)}break}return true},format:function(d,f){var d=String(d);if(""==d){return true}var g=a.extend({m:"????????!",pattern:/./,negate:false},f||{});g.pattern=a.type(g.pattern)=="string"?new RegExp(g.pattern):g.pattern;if(!g.negate){if(!g.pattern.test(d)){c.fail(g.m)}}return true},email:function(d,f){if(""==d){return true}var g=a.extend({m:"?????????????!"},f||{});c.format(d,{m:g.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return true},dateFormat:function(d,f){var g=a.extend({m:"???????????yyyy-MM-dd?????"},f||{});c.format(d,{m:g.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i});return true},length:function(d,f){var d=String(d);var f=f||{};var g={wrongLengthMessage:f.wrongm||"???????? "+f.is+" ???!",tooShortMessage:f.minm||"?????????? "+f.min+" ???!",tooLongMessage:f.maxm||"????????? "+f.max+" ???!",is:((f.is)||(f.is==0))?f.is:null,minimum:((f.min)||(f.min==0))?f.min:null,maximum:((f.max)||(f.max==0))?f.max:null};switch(true){case (g.is!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length!=Number(g.is)){c.fail(g.wrongLengthMessage)}break;case (g.minimum!==null&&g.maximum!==null):c.length(d,{minm:g.tooShortMessage,min:g.minimum});c.length(d,{maxm:g.tooLongMessage,max:g.maximum});break;case (g.minimum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length<Number(g.minimum)){c.fail(g.tooShortMessage)}break;case (g.maximum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length>Number(g.maximum)){c.fail(g.tooLongMessage)}break;default:throw new c.error("Validate::Length - ??????????????????!")}return true},inclusion:function(g,h){var i=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true,negate:false},h||{});i.m=i.m||g+"?????????"+i.within.join(",")+"??";if(i.allowNull&&!g){return true}if(!i.allowNull&&!g){c.fail(i.m)}if(!i.caseSensitive){var d=[];a.each(i.within,function(j,k){if(typeof k=="string"){k=k.toLowerCase()}d.push(k)});i.within=d;if(typeof g=="string"){g=g.toLowerCase()}}var f=false;a.each(i.within,function(j,k){if(k==g){f=true}if(i.partialMatch){if(g.indexOf(k)!=-1){f=true}}});if((!i.negate&&!f)||(i.negate&&f)){c.fail(i.m)}return true},exclusion:function(d,f){var g=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true},f||{});g.m=g.m||d+"???????????"+g.within.join(",")+"??";g.negate=true;c.inclusion(d,g);return true},confirmation:function(d,f){if(!f.match){throw new Error("Validate::Confirmation - ??????????????????id??????!")}var g=a.extend({m:"????????!",match:null},f||{});g.match=a.type(g.match)=="string"?cui("#"+g.match):g.match;if(!g.match||g.match.length==0){throw new Error("Validate::Confirmation - ???????????????????????!")}if(d!=g.match.getValue()){c.fail(g.m)}return true},acceptance:function(d,f){var g=a.extend({m:"???????!"},f||{});if(!d){c.fail(g.m)}return true},custom:function(f,g){var h=a.extend({against:function(){return true},args:{},m:"?????!"},g||{});var d=h.against;if(a.type(d)=="string"){d=window[d]}if(!d(f,h.args)){c.fail(h.m)}return true},error:function(d){this.message=d;this.name="ValidationError"},fail:function(d){throw new c.error(d)}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Tip=b.UI.Base.extend({options:{uitype:"Tip",pointee:true,position:"auto",live:false,trigger:"hover",x:false,maxWidth:150,fade:false,opacity:1,tipEl:null,content_cls:".ctip-msg",close_cls:".ctip-x"},_init:function(){this.options.uid="tip_"+comtop.guid();var c=this.options;this.$el=a(c.el);this.$tipEl=c.tipEl?a(c.tipEl):this.$el;this._bindElEvent();this._fixTitle()},_create:function(){if(this.options.trigger=="onload"){this.show()}},_bindElEvent:function(){var c=this,h=this.options;var d=(h.live=="true"||h.live===true)?"live":"bind",g=h.trigger=="hover"?"mouseenter":h.trigger=="click"?"click":"focus",f=h.trigger=="hover"?"mouseleave":h.trigger=="click"?"":"blur";this.$el[d](g,function(){c.show();return false})[d](f,function(){c.hide();return false})},_lazyCreate:function(){if(!this.created){var c=this.options;a(document.body).append(this._getView());this.$tip=a("#"+c.uid);this._bindEvent();this.created=true}},_setMaxWidth:function(){var f=this.$tip,d=this.options;if(b.Browser.isIE6){var c=f.find(".ctip-msg").width()>d.maxWidth?d.maxWidth:"auto";if(b.Browser.isQM&&c!="auto"){c=c+16}f.children(".ctip-content").css("width",c)}else{f.children(".ctip-content").css("maxWidth",d.maxWidth)}},_getView:function(){return this._buildTemplateStr("tip",this.options)},_bindEvent:function(){var c=this,d=this.options;if(d.x===true){this.$tip.find(d.close_cls).bind("click",function(){c.hide();return false})}},_fixTitle:function(){this.$el.removeAttr("title")},_setPosition:function(){var i=this.$tip,h=this.$el,g=this.options;var k=a.extend({},h.offset(),{width:h[0].offsetWidth,height:h[0].offsetHeight});var d=i[0].offsetWidth,f=i[0].offsetHeight,c=g.position;if(b.Browser.isIE&&d>g.maxWidth){i.width(g.maxWidth);d=i[0].offsetWidth;f=i[0].offsetHeight}if(c=="auto"){c=this._calAutoPosition(k)}var j={};switch(c){case"t":j={left:k.left+k.width/2-d/2,top:k.top-f-5};break;case"b":j={left:k.left+k.width/2-d/2,top:k.top+k.height+5};break;case"l":j={left:k.left-d-5,top:k.top+k.height/2-f/2};break;case"r":j={left:k.left+k.width+5,top:k.top+k.height/2-f/2};break;case"rt":j={left:k.left+k.width/2-25,top:k.top-f-5};break;case"rb":j={left:k.left+k.width/2-25,top:k.top+k.height+5};break;case"lt":j={left:k.left+k.width/2-d+25,top:k.top-f-5};break;case"lb":j={left:k.left+k.width/2-d+25,top:k.top+k.height+5};break}i.css(j).addClass("ctip-"+c)},_calAutoPosition:function(j){var h=b.Dom.windowSize();var c=j.top>(a(document).scrollTop()+h.height/2)?"t":"b";var g="",i=this.options.maxWidth/2,f=j.left+j.width/2-a(document).scrollLeft(),d=h.width-f;if(f<i){g="r"}else{if(d<i){g="l"}}return g+c},getContent:function(){var c=this.options;return c.content?c.content:this.$tipEl.attr("tip")},setContent:function(){var c=this.getContent();this.$tip.find(this.options.content_cls).html(c)},show:function(){this._lazyCreate();if(a.trim(this.getContent())==""){return}this.setContent();this.$tip[0].className="ctip";this.$tip.css({top:0,left:0,display:"block"});this._setMaxWidth();this._setPosition()},hide:function(){if(this.$tip){this.$tip.hide()}}});cui.tipList={};cui.tip=function(d,c){c=c||{};c.el=a(d);var f=new b.UI.Tip(c);cui.tipList[f.options.uid]=f;c.el.attr("tipID",f.options.uid);return f}})(window.comtop.cQuery,window.comtop);(function(d,c){(function(k,a){var l=0,b=/^ui-id-\d+$/;k.ui=k.ui||{};if(k.ui.version){return}k.extend(k.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});k.fn.extend({_focus:k.fn.focus,focus:function(g,f){return typeof g==="number"?this.each(function(){var h=this;setTimeout(function(){k(h).focus();if(f){f.call(h)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var f;if((k.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){f=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(k.css(this,"position"))&&(/(auto|scroll)/).test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0)}else{f=this.parents().filter(function(){return(/(auto|scroll)/).test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!f.length?k(document):f},zIndex:function(f){if(f!==a){return this.css("zIndex",f)}if(this.length){var h=k(this[0]),m,g;while(h.length&&h[0]!==document){m=h.css("position");if(m==="absolute"||m==="relative"||m==="fixed"){g=parseInt(h.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++l)}})},removeUniqueId:function(){return this.each(function(){if(b.test(this.id)){k(this).removeAttr("id")}})}});if(!k("<a>").outerWidth(1).jquery){k.each(["Width","Height"],function(g,p){var h=p==="Width"?["Left","Right"]:["Top","Bottom"],f=p.toLowerCase(),q={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};function r(o,s,m,n){k.each(h,function(){s-=parseFloat(k.css(o,"padding"+this))||0;if(m){s-=parseFloat(k.css(o,"border"+this+"Width"))||0}if(n){s-=parseFloat(k.css(o,"margin"+this))||0}});return s}k.fn["inner"+p]=function(m){if(m===a){return q["inner"+p].call(this)}return this.each(function(){k(this).css(f,r(this,m)+"px")})};k.fn["outer"+p]=function(m,n){if(typeof m!=="number"){return q["outer"+p].call(this,m)}return this.each(function(){k(this).css(f,r(this,m,true,n)+"px")})}})}function i(h,p){var f,g,o,q=h.nodeName.toLowerCase();if("area"===q){f=h.parentNode;g=f.name;if(!h.href||!g||f.nodeName.toLowerCase()!=="map"){return false}o=k("img[usemap=#"+g+"]")[0];return !!o&&j(o)}return(/input|select|textarea|button|object/.test(q)?!h.disabled:"a"===q?h.href||p:p)&&j(h)}function j(f){return k.expr.filters.visible(f)&&!k(f).parents().andSelf().filter(function(){return k.css(this,"visibility")==="hidden"}).length}k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(f){return function(g){return !!k.data(g,f)}}):function(f,g,h){return !!k.data(f,h[3])},focusable:function(f){return i(f,!isNaN(k.attr(f,"tabindex")))},tabbable:function(f){var h=k.attr(f,"tabindex"),g=isNaN(h);return(g||h>=0)&&i(f,!g)}});k(function(){var g=document.body,f=g.appendChild(f=document.createElement("div"));f.offsetHeight;k.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});k.support.minHeight=f.offsetHeight===100;k.support.selectstart="onselectstart" in f;g.removeChild(f).style.display="none"});(function(){var f=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];k.ui.ie=f.length?true:false;k.ui.ie6=parseFloat(f[1],10)===6})();k.fn.extend({disableSelection:function(){return this.bind((k.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(f){f.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});k.extend(k.ui,{plugin:{add:function(h,g,p){var o,f=k.ui[h].prototype;for(o in p){f.plugins[o]=f.plugins[o]||[];f.plugins[o].push([g,p[o]])}},call:function(o,g,h){var f,p=o.plugins[g];if(!p||!o.element[0].parentNode||o.element[0].parentNode.nodeType===11){return}for(f=0;f<p.length;f++){if(o.options[p[f][0]]){p[f][1].apply(o.element,h)}}}},contains:k.contains,hasScroll:function(f,h){if(k(f).css("overflow")==="hidden"){return false}var m=(h&&h==="left")?"scrollLeft":"scrollTop",g=false;if(f[m]>0){return true}f[m]=1;g=(f[m]>0);f[m]=0;return g},isOverAxis:function(g,h,f){return(g>h)&&(g<(h+f))},isOver:function(q,o,f,g,p,h){return k.ui.isOverAxis(q,f,p)&&k.ui.isOverAxis(o,g,h)}})})(d);(function(i,a){var j=0,b=Array.prototype.slice,h=i.cleanData;i.cleanData=function(n){for(var m=0,g;(g=n[m])!=null;m++){try{i(g).triggerHandler("remove")}catch(f){}}h(n)};i.widget=function(r,g,s){var t,u,p,f,q=r.split(".")[0];r=r.split(".")[1];t=q+"-"+r;if(!s){s=g;g=i.Widget}i.expr[":"][t.toLowerCase()]=function(k){return !!i.data(k,t)};i[q]=i[q]||{};u=i[q][r];p=i[q][r]=function(l,k){if(!this._createWidget){return new p(l,k)}if(arguments.length){this._createWidget(l,k)}};i.extend(p,u,{version:s.version,_proto:i.extend({},s),_childConstructors:[]});f=new g();f.options=i.widget.extend({},f.options);i.each(s,function(k,l){if(i.isFunction(l)){s[k]=(function(){var n=function(){return g.prototype[k].apply(this,arguments)},m=function(o){return g.prototype[k].apply(this,o)};return function(){var o=this._super,x=this._superApply,w;this._super=n;this._superApply=m;w=l.apply(this,arguments);this._super=o;this._superApply=x;return w}})()}});p.prototype=i.widget.extend(f,{widgetEventPrefix:f.widgetEventPrefix||r},s,{constructor:p,namespace:q,widgetName:r,widgetBaseClass:t,widgetFullName:t});if(u){i.each(u._childConstructors,function(l,k){var m=k.prototype;i.widget(m.namespace+"."+m.widgetName,p,k._proto)});delete u._childConstructors}else{g._childConstructors.push(p)}i.widget.bridge(r,p)};i.widget.extend=function(f){var p=b.call(arguments,1),g=0,q=p.length,o,n;for(;g<q;g++){for(o in p[g]){n=p[g][o];if(p[g].hasOwnProperty(o)&&n!==a){if(i.isPlainObject(n)){f[o]=i.isPlainObject(f[o])?i.widget.extend({},f[o],n):i.widget.extend({},n)}else{f[o]=n}}}}return f};i.widget.bridge=function(g,k){var f=k.prototype.widgetFullName;i.fn[g]=function(o){var q=typeof o==="string",p=b.call(arguments,1),r=this;o=!q&&p.length?i.widget.extend.apply(null,[o].concat(p)):o;if(q){this.each(function(){var l,m=i.data(this,f);if(!m){return i.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+o+"'")}if(!i.isFunction(m[o])||o.charAt(0)==="_"){return i.error("no such method '"+o+"' for "+g+" widget instance")}l=m[o].apply(m,p);if(l!==m&&l!==a){r=l&&l.jquery?r.pushStack(l.get()):l;return false}})}else{this.each(function(){var l=i.data(this,f);if(l){l.option(o||{})._init()}else{new k(o,this)}})}return r}};i.Widget=function(){};i.Widget._childConstructors=[];i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,f){f=i(f||this.defaultElement||this)[0];this.element=i(f);this.uuid=j++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=i.widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=i();this.hoverable=i();this.focusable=i();if(f!==this){i.data(f,this.widgetName,this);i.data(f,this.widgetFullName,this);this._on(this.element,{remove:function(k){if(k.target===f){this.destroy()}}});this.document=i(f.style?f.ownerDocument:f.document||f);this.window=i(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(g,f){var q=g,r,o,p;if(arguments.length===0){return i.widget.extend({},this.options)}if(typeof g==="string"){q={};r=g.split(".");g=r.shift();if(r.length){o=q[g]=i.widget.extend({},this.options[g]);for(p=0;p<r.length-1;p++){o[r[p]]=o[r[p]]||{};o=o[r[p]]}g=r.pop();if(f===a){return o[g]===a?null:o[g]}o[g]=f}else{if(f===a){return this.options[g]===a?null:this.options[g]}q[g]=f}}this._setOptions(q);return this},_setOptions:function(g){var f;for(f in g){this._setOption(f,g[f])}return this},_setOption:function(g,f){this.options[g]=f;if(g==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!f).attr("aria-disabled",f);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(g,l){var f,m=this;if(!l){l=g;g=this.element;f=this.widget()}else{g=f=i(g);this.bindings=this.bindings.add(g)}i.each(l,function(s,t){function v(){if(m.options.disabled===true||i(this).hasClass("ui-state-disabled")){return}return(typeof t==="string"?m[t]:t).apply(m,arguments)}if(typeof t!=="string"){v.guid=t.guid=t.guid||v.guid||i.guid++}var u=s.match(/^(\w+)\s*(.*)$/),k=u[1]+m.eventNamespace,r=u[2];if(r){f.delegate(r,k,v)}else{g.bind(k,v)}})},_off:function(f,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(g).undelegate(g)},_delay:function(f,g){function l(){return(typeof f==="string"?m[f]:f).apply(m,arguments)}var m=this;return setTimeout(l,g||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){i(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){i(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){i(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){i(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(q,p,o){var f,g,n=this.options[q];o=o||{};p=i.Event(p);p.type=(q===this.widgetEventPrefix?q:this.widgetEventPrefix+q).toLowerCase();p.target=this.element[0];g=p.originalEvent;if(g){for(f in g){if(!(f in p)){p[f]=g[f]}}}this.element.trigger(p,o);return !(i.isFunction(n)&&n.apply(this.element[0],[p].concat(o))===false||p.isDefaultPrevented())}};i.each({show:"fadeIn",hide:"fadeOut"},function(f,g){i.Widget.prototype["_"+f]=function(p,q,s){if(typeof q==="string"){q={effect:q}}var o,r=!q?f:q===true||typeof q==="number"?g:q.effect||g;q=q||{};if(typeof q==="number"){q={duration:q}}o=!i.isEmptyObject(q);q.complete=s;if(q.delay){p.delay(q.delay)}if(o&&i.effects&&(i.effects.effect[r]||i.uiBackCompat!==false&&i.effects[r])){p[f](q)}else{if(r!==f&&p[r]){p[r](q.duration,q.easing,s)}else{p.queue(function(k){i(this)[f]();if(s){s.call(p[0])}k()})}}}});if(i.uiBackCompat!==false){i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}}})(d);(function(b,a){var f=false;b(document).mouseup(function(g){f=false});b.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var g=this;this.element.bind("mousedown."+this.widgetName,function(h){return g._mouseDown(h)}).bind("click."+this.widgetName,function(h){if(true===b.data(h.target,g.widgetName+".preventClickEvent")){b.removeData(h.target,g.widgetName+".preventClickEvent");h.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(k){if(f){return}(this._mouseStarted&&this._mouseUp(k));this._mouseDownEvent=k;var l=this,j=(k.which===1),m=(typeof this.options.cancel==="string"&&k.target.nodeName?b(k.target).closest(this.options.cancel).length:false);if(!j||m||!this._mouseCapture(k)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)){this._mouseStarted=(this._mouseStart(k)!==false);if(!this._mouseStarted){k.preventDefault();return true}}if(true===b.data(k.target,this.widgetName+".preventClickEvent")){b.removeData(k.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(g){return l._mouseMove(g)};this._mouseUpDelegate=function(g){return l._mouseUp(g)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);k.preventDefault();f=true;return true},_mouseMove:function(g){if(b.ui.ie&&!(document.documentMode>=9)&&!g.button){return this._mouseUp(g)}if(this._mouseStarted){this._mouseDrag(g);return g.preventDefault()}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,g)!==false);(this._mouseStarted?this._mouseDrag(g):this._mouseUp(g))}return !this._mouseStarted},_mouseUp:function(g){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(g.target===this._mouseDownEvent.target){b.data(g.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(g)}return false},_mouseDistanceMet:function(g){return(Math.max(Math.abs(this._mouseDownEvent.pageX-g.pageX),Math.abs(this._mouseDownEvent.pageY-g.pageY))>=this.options.distance)},_mouseDelayMet:function(g){return this.mouseDelayMet},_mouseStart:function(g){},_mouseDrag:function(g){},_mouseStop:function(g){},_mouseCapture:function(g){return true}})})(d);(function(x,z){x.ui=x.ui||{};var t,s=Math.max,a=Math.abs,q=Math.round,y=/left|center|right/,v=/top|center|bottom/,B=/[\+\-]\d+%?/,r=/^\w+/,A=/%$/,w=x.fn.position;function b(f,g,h){return[parseInt(f[0],10)*(A.test(f[0])?g/100:1),parseInt(f[1],10)*(A.test(f[1])?h/100:1)]}function u(g,f){return parseInt(x.css(g,f),10)||0}x.position={scrollbarWidth:function(){if(t!==z){return t}var h,i,f=x("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];x("body").append(f);h=g.offsetWidth;f.css("overflow","scroll");i=g.offsetWidth;if(h===i){i=f[0].clientWidth}f.remove();return(t=h-i)},getScrollInfo:function(f){var g=f.isWindow?"":f.element.css("overflow-x"),h=f.isWindow?"":f.element.css("overflow-y"),i=g==="scroll"||(g==="auto"&&f.width<f.element[0].scrollWidth),j=h==="scroll"||(h==="auto"&&f.height<f.element[0].scrollHeight);return{width:i?x.position.scrollbarWidth():0,height:j?x.position.scrollbarWidth():0}},getWithinInfo:function(g){var f=x(g||window),h=x.isWindow(f[0]);return{element:f,isWindow:h,offset:f.offset()||{left:0,top:0},scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop(),width:h?f.width():f.outerWidth(),height:h?f.height():f.outerHeight()}}};x.fn.position=function(i){if(!i||!i.of){return w.apply(this,arguments)}i=x.extend({},i);var h,l,o,j,p,m=x(i.of),C=x.position.getWithinInfo(i.within),g=x.position.getScrollInfo(C),n=m[0],k=(i.collision||"flip").split(" "),f={};if(n.nodeType===9){l=m.width();o=m.height();j={top:0,left:0}}else{if(x.isWindow(n)){l=m.width();o=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(n.preventDefault){i.at="left top";l=o=0;j={top:n.pageY,left:n.pageX}}else{l=m.outerWidth();o=m.outerHeight();j=m.offset()}}}p=x.extend({},j);x.each(["my","at"],function(){var F=(i[this]||"").split(" "),G,H;if(F.length===1){F=y.test(F[0])?F.concat(["center"]):v.test(F[0])?["center"].concat(F):["center","center"]}F[0]=y.test(F[0])?F[0]:"center";F[1]=v.test(F[1])?F[1]:"center";G=B.exec(F[0]);H=B.exec(F[1]);f[this]=[G?G[0]:0,H?H[0]:0];i[this]=[r.exec(F[0])[0],r.exec(F[1])[0]]});if(k.length===1){k[1]=k[0]}if(i.at[0]==="right"){p.left+=l}else{if(i.at[0]==="center"){p.left+=l/2}}if(i.at[1]==="bottom"){p.top+=o}else{if(i.at[1]==="center"){p.top+=o/2}}h=b(f.at,l,o);p.left+=h[0];p.top+=h[1];return this.each(function(){var N,P,W=x(this),U=W.outerWidth(),X=W.outerHeight(),V=u(this,"marginLeft"),O=u(this,"marginTop"),Q=U+V+u(this,"marginRight")+g.width,R=X+O+u(this,"marginBottom")+g.height,T=x.extend({},p),S=b(f.my,W.outerWidth(),W.outerHeight());if(i.my[0]==="right"){T.left-=U}else{if(i.my[0]==="center"){T.left-=U/2}}if(i.my[1]==="bottom"){T.top-=X}else{if(i.my[1]==="center"){T.top-=X/2}}T.left+=S[0];T.top+=S[1];if(!x.support.offsetFractions){T.left=q(T.left);T.top=q(T.top)}N={marginLeft:V,marginTop:O};x.each(["left","top"],function(D,E){if(x.ui.position[k[D]]){x.ui.position[k[D]][E](T,{targetWidth:l,targetHeight:o,elemWidth:U,elemHeight:X,collisionPosition:N,collisionWidth:Q,collisionHeight:R,offset:[h[0]+S[0],h[1]+S[1]],my:i.my,at:i.at,within:C,elem:W})}});if(x.fn.bgiframe){W.bgiframe()}if(i.using){P=function(F){var D=j.left-T.left,G=D+l-U,E=j.top-T.top,H=E+o-X,I={target:{element:m,left:j.left,top:j.top,width:l,height:o},element:{element:W,left:T.left,top:T.top,width:U,height:X},horizontal:G<0?"left":D>0?"right":"center",vertical:H<0?"top":E>0?"bottom":"middle"};if(l<U&&a(D+G)<l){I.horizontal="center"}if(o<X&&a(E+H)<o){I.vertical="middle"}if(s(a(D),a(G))>s(a(E),a(H))){I.important="horizontal"}else{I.important="vertical"}i.using.call(this,F,I)}}W.offset(x.extend(T,{using:P}))})};x.ui.position={fit:{left:function(l,m){var n=m.within,j=n.isWindow?n.scrollLeft:n.offset.left,h=n.width,k=l.left-m.collisionPosition.marginLeft,i=j-k,f=k+m.collisionWidth-h-j,g;if(m.collisionWidth>h){if(i>0&&f<=0){g=l.left+i+m.collisionWidth-h-j;l.left+=i-g}else{if(f>0&&i<=0){l.left=j}else{if(i>f){l.left=j+h-m.collisionWidth}else{l.left=j}}}}else{if(i>0){l.left+=i}else{if(f>0){l.left-=f}else{l.left=s(l.left-k,l.left)}}}},top:function(m,n){var f=n.within,i=f.isWindow?f.scrollTop:f.offset.top,h=n.within.height,k=m.top-n.collisionPosition.marginTop,j=i-k,l=k+n.collisionHeight-h-i,g;if(n.collisionHeight>h){if(j>0&&l<=0){g=m.top+j+n.collisionHeight-h-i;m.top+=j-g}else{if(l>0&&j<=0){m.top=i}else{if(j>l){m.top=i+h-n.collisionHeight}else{m.top=i}}}}else{if(j>0){m.top+=j}else{if(l>0){m.top-=l}else{m.top=s(m.top-k,m.top)}}}}},flip:{left:function(o,p){var E=p.within,k=E.offset.left+E.scrollLeft,g=E.width,G=E.isWindow?E.scrollLeft:E.offset.left,n=o.left-p.collisionPosition.marginLeft,j=n-G,f=n+p.collisionWidth-g-G,l=p.my[0]==="left"?-p.elemWidth:p.my[0]==="right"?p.elemWidth:0,i=p.at[0]==="left"?p.targetWidth:p.at[0]==="right"?-p.targetWidth:0,F=-2*p.offset[0],h,m;if(j<0){h=o.left+l+i+F+p.collisionWidth-g-k;if(h<0||h<a(j)){o.left+=l+i+F}}else{if(f>0){m=o.left-p.collisionPosition.marginLeft+l+i+F-G;if(m>0||a(m)<f){o.left+=l+i+F}}}},top:function(p,F){var G=F.within,h=G.offset.top+G.scrollTop,g=G.height,i=G.isWindow?G.scrollTop:G.offset.top,n=p.top-F.collisionPosition.marginTop,l=n-i,o=n+F.collisionHeight-g-i,k=F.my[1]==="top",m=k?-F.elemHeight:F.my[1]==="bottom"?F.elemHeight:0,I=F.at[1]==="top"?F.targetHeight:F.at[1]==="bottom"?-F.targetHeight:0,H=-2*F.offset[1],j,f;if(l<0){f=p.top+m+I+H+F.collisionHeight-g-h;if((p.top+m+I+H)>l&&(f<0||f<a(l))){p.top+=m+I+H}}else{if(o>0){j=p.top-F.collisionPosition.marginTop+m+I+H-i;if((p.top+m+I+H)>o&&(j>0||a(j)<o)){p.top+=m+I+H}}}}},flipfit:{left:function(){x.ui.position.flip.left.apply(this,arguments);x.ui.position.fit.left.apply(this,arguments)},top:function(){x.ui.position.flip.top.apply(this,arguments);x.ui.position.fit.top.apply(this,arguments)}}};(function(){var h,f,k,i,j,l=document.getElementsByTagName("body")[0],g=document.createElement("div");h=document.createElement(l?"div":"body");k={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(l){x.extend(k,{position:"absolute",left:"-1000px",top:"-1000px"})}for(j in k){h.style[j]=k[j]}h.appendChild(g);f=l||document.documentElement;f.insertBefore(h,f.firstChild);g.style.cssText="position: absolute; left: 10.7432222px;";i=x(g).offset().left;x.support.offsetFractions=i>10&&i<11;h.innerHTML="";f.removeChild(h)})();if(x.uiBackCompat!==false){(function(f){var g=f.fn.position;f.fn.position=function(i){if(!i||!i.offset){return g.call(this,i)}var h=i.offset.split(" "),j=i.at.split(" ");if(h.length===1){h[1]=h[0]}if(/^\d/.test(h[0])){h[0]="+"+h[0]}if(/^\d/.test(h[1])){h[1]="+"+h[1]}if(j.length===1){if(/left|center|right/.test(j[0])){j[1]="center"}else{j[1]=j[0];j[0]="center"}}return g.call(this,f.extend(i,{at:j[0]+h[0]+" "+j[1]+h[1],offset:z}))}}(d))}}(d));(function(b,a){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(h){var g=this.options;if(this.helper||g.disabled||b(h.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(h);if(!this.handle){return false}b(g.iframeFix===true?"iframe":g.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")});return true},_mouseStart:function(h){var g=this.options;this.helper=this._createHelper(h);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;(g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt));if(g.containment){this._setContainment()}if(this._trigger("start",h)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!g.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,h)}this._mouseDrag(h,true);if(b.ui.ddmanager){b.ui.ddmanager.dragStart(this,h)}return true},_mouseDrag:function(j,h){this.position=this._generatePosition(j);this.positionAbs=this._convertPositionTo("absolute");if(!h){var i=this._uiHash();if(this._trigger("drag",j,i)===false){this._mouseUp({});return false}this.position=i.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(b.ui.ddmanager){b.ui.ddmanager.drag(this,j)}return false},_mouseStop:function(l){var j=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){j=b.ui.ddmanager.drop(this,l)}if(this.dropped){j=this.dropped;this.dropped=false}var n=this.element[0],k=false;while(n&&(n=n.parentNode)){if(n==document){k=true}}if(!k&&this.options.helper==="original"){return false}if((this.options.revert=="invalid"&&!j)||(this.options.revert=="valid"&&j)||this.options.revert===true||(b.isFunction(this.options.revert)&&this.options.revert.call(this.element,j))){var m=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(m._trigger("stop",l)!==false){m._clear()}})}else{if(this._trigger("stop",l)!==false){this._clear()}}return false},_mouseUp:function(f){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(b.ui.ddmanager){b.ui.ddmanager.dragStop(this,f)}return b.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(h){var g=!this.options.handle||!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==h.target){g=true}});return g},_createHelper:function(i){var h=this.options;var j=b.isFunction(h.helper)?b(h.helper.apply(this.element[0],[i])):(h.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!j.parents("body").length){j.appendTo((h.appendTo=="parent"?this.element[0].parentNode:h.appendTo))}if(j[0]!=this.element[0]&&!(/(fixed|absolute)/).test(j.css("position"))){j.css("position","absolute")}return j},_adjustOffsetFromHelper:function(f){if(typeof f=="string"){f=f.split(" ")}if(b.isArray(f)){f={left:+f[0],top:+f[1]||0}}if("left" in f){this.offset.click.left=f.left+this.margins.left}if("right" in f){this.offset.click.left=this.helperProportions.width-f.right+this.margins.left}if("top" in f){this.offset.click.top=f.top+this.margins.top}if("bottom" in f){this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])){f.left+=this.scrollParent.scrollLeft();f.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie)){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var f=this.element.position();return{top:f.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:f.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var k=this.options;if(k.containment=="parent"){k.containment=this.helper[0].parentNode}if(k.containment=="document"||k.containment=="window"){this.containment=[k.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(k.containment=="document"?0:b(window).scrollLeft())+b(k.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(k.containment=="document"?0:b(window).scrollTop())+(b(k.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(k.containment)&&k.containment.constructor!=Array){var j=b(k.containment);var m=j[0];if(!m){return}var l=j.offset();var n=(b(m).css("overflow")!="hidden");this.containment=[(parseInt(b(m).css("borderLeftWidth"),10)||0)+(parseInt(b(m).css("paddingLeft"),10)||0),(parseInt(b(m).css("borderTopWidth"),10)||0)+(parseInt(b(m).css("paddingTop"),10)||0),(n?Math.max(m.scrollWidth,m.offsetWidth):m.offsetWidth)-(parseInt(b(m).css("borderLeftWidth"),10)||0)-(parseInt(b(m).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(m.scrollHeight,m.offsetHeight):m.offsetHeight)-(parseInt(b(m).css("borderTopWidth"),10)||0)-(parseInt(b(m).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=j}else{if(k.containment.constructor==Array){this.containment=k.containment}}},_convertPositionTo:function(m,k){if(!k){k=this.position}var o=m=="absolute"?1:-1;var n=this.options,p=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(p[0].tagName);return{top:(k.top+this.offset.relative.top*o+this.offset.parent.top*o-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(l?0:p.scrollTop()))*o)),left:(k.left+this.offset.relative.left*o+this.offset.parent.left*o-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:p.scrollLeft())*o))}},_generatePosition:function(w){var v=this.options,o=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=(/(html|body)/i).test(o[0].tagName);var s=w.pageX;var t=w.pageY;if(this.originalPosition){var x;if(this.containment){if(this.relative_container){var p=this.relative_container.offset();x=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]}else{x=this.containment}if(w.pageX-this.offset.click.left<x[0]){s=x[0]+this.offset.click.left}if(w.pageY-this.offset.click.top<x[1]){t=x[1]+this.offset.click.top}if(w.pageX-this.offset.click.left>x[2]){s=x[2]+this.offset.click.left}if(w.pageY-this.offset.click.top>x[3]){t=x[3]+this.offset.click.top}}if(v.grid){var q=v.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/v.grid[1])*v.grid[1]:this.originalPageY;t=x?(!(q-this.offset.click.top<x[1]||q-this.offset.click.top>x[3])?q:(!(q-this.offset.click.top<x[1])?q-v.grid[1]:q+v.grid[1])):q;var u=v.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/v.grid[0])*v.grid[0]:this.originalPageX;s=x?(!(u-this.offset.click.left<x[0]||u-this.offset.click.left>x[2])?u:(!(u-this.offset.click.left<x[0])?u-v.grid[0]:u+v.grid[0])):u}}return{top:(t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(r?0:o.scrollTop())))),left:(s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(j,i,h){h=h||this._uiHash();b.ui.plugin.call(this,j,[i,h]);if(j=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return b.Widget.prototype._trigger.call(this,j,i,h)},plugins:{},_uiHash:function(f){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(m,k){var l=b(this).data("draggable"),j=l.options,n=b.extend({},k,{item:l.element});l.sortables=[];b(j.connectToSortable).each(function(){var f=b.data(this,"sortable");if(f&&!f.options.disabled){l.sortables.push({instance:f,shouldRevert:f.options.revert});f.refreshPositions();f._trigger("activate",m,n)}})},stop:function(k,i){var j=b(this).data("draggable"),l=b.extend({},i,{item:j.element});b.each(j.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;j.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(k);this.instance.options.helper=this.instance.options._helper;if(j.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",k,l)}})},drag:function(m,j){var k=b(this).data("draggable"),n=this;var l=function(t){var f=this.offset.click.top,g=this.offset.click.left;var v=this.positionAbs.top,i=this.positionAbs.left;var o=t.height,h=t.width;var w=t.top,u=t.left;return b.ui.isOver(v+f,i+g,w,u,o,h)};b.each(k.sortables,function(g){var h=false;var f=this;this.instance.positionAbs=k.positionAbs;this.instance.helperProportions=k.helperProportions;this.instance.offset.click=k.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){h=true;b.each(k.sortables,function(){this.instance.positionAbs=k.positionAbs;this.instance.helperProportions=k.helperProportions;this.instance.offset.click=k.offset.click;if(this!=f&&this.instance._intersectsWith(this.instance.containerCache)&&b.ui.contains(f.instance.element[0],this.instance.element[0])){h=false}return h})}if(h){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return j.helper[0]};m.target=this.instance.currentItem[0];this.instance._mouseCapture(m,true);this.instance._mouseStart(m,true,true);this.instance.offset.click.top=k.offset.click.top;this.instance.offset.click.left=k.offset.click.left;this.instance.offset.parent.left-=k.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=k.offset.parent.top-this.instance.offset.parent.top;k._trigger("toSortable",m);k.dropped=this.instance.element;k.currentItem=k.element;this.instance.fromOutside=k}if(this.instance.currentItem){this.instance._mouseDrag(m)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",m,this.instance._uiHash(this.instance));this.instance._mouseStop(m,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}k._trigger("fromSortable",m);k.dropped=false}}})}});b.ui.plugin.add("draggable","cursor",{start:function(k,j){var l=b("body"),i=b(this).data("draggable").options;if(l.css("cursor")){i._cursor=l.css("cursor")}l.css("cursor",i.cursor)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._cursor){b("body").css("cursor",h._cursor)}}});b.ui.plugin.add("draggable","opacity",{start:function(k,j){var l=b(j.helper),i=b(this).data("draggable").options;if(l.css("opacity")){i._opacity=l.css("opacity")}l.css("opacity",i.opacity)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._opacity){b(i.helper).css("opacity",h._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(i,h){var j=b(this).data("draggable");if(j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"){j.overflowOffset=j.scrollParent.offset()}},drag:function(l,k){var m=b(this).data("draggable"),i=m.options,n=false;if(m.scrollParent[0]!=document&&m.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x"){if((m.overflowOffset.top+m.scrollParent[0].offsetHeight)-l.pageY<i.scrollSensitivity){m.scrollParent[0].scrollTop=n=m.scrollParent[0].scrollTop+i.scrollSpeed}else{if(l.pageY-m.overflowOffset.top<i.scrollSensitivity){m.scrollParent[0].scrollTop=n=m.scrollParent[0].scrollTop-i.scrollSpeed}}}if(!i.axis||i.axis!="y"){if((m.overflowOffset.left+m.scrollParent[0].offsetWidth)-l.pageX<i.scrollSensitivity){m.scrollParent[0].scrollLeft=n=m.scrollParent[0].scrollLeft+i.scrollSpeed}else{if(l.pageX-m.overflowOffset.left<i.scrollSensitivity){m.scrollParent[0].scrollLeft=n=m.scrollParent[0].scrollLeft-i.scrollSpeed}}}}else{if(!i.axis||i.axis!="x"){if(l.pageY-b(document).scrollTop()<i.scrollSensitivity){n=b(document).scrollTop(b(document).scrollTop()-i.scrollSpeed)}else{if(b(window).height()-(l.pageY-b(document).scrollTop())<i.scrollSensitivity){n=b(document).scrollTop(b(document).scrollTop()+i.scrollSpeed)}}}if(!i.axis||i.axis!="y"){if(l.pageX-b(document).scrollLeft()<i.scrollSensitivity){n=b(document).scrollLeft(b(document).scrollLeft()-i.scrollSpeed)}else{if(b(window).width()-(l.pageX-b(document).scrollLeft())<i.scrollSensitivity){n=b(document).scrollLeft(b(document).scrollLeft()+i.scrollSpeed)}}}}if(n!==false&&b.ui.ddmanager&&!i.dropBehaviour){b.ui.ddmanager.prepareOffsets(m,l)}}});b.ui.plugin.add("draggable","snap",{start:function(k,j){var l=b(this).data("draggable"),i=l.options;l.snapElements=[];b(i.snap.constructor!=String?(i.snap.items||":data(draggable)"):i.snap).each(function(){var f=b(this);var g=f.offset();if(this!=l.element[0]){l.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})}})},drag:function(t,F){var M=b(this).data("draggable"),D=M.options;var i=D.snapTolerance;var l=F.offset.left,o=l+M.helperProportions.width,N=F.offset.top,O=N+M.helperProportions.height;for(var r=M.snapElements.length-1;r>=0;r--){var C=M.snapElements[r].left,H=C+M.snapElements[r].width,I=M.snapElements[r].top,E=I+M.snapElements[r].height;if(!((C-i<l&&l<H+i&&I-i<N&&N<E+i)||(C-i<l&&l<H+i&&I-i<O&&O<E+i)||(C-i<o&&o<H+i&&I-i<N&&N<E+i)||(C-i<o&&o<H+i&&I-i<O&&O<E+i))){if(M.snapElements[r].snapping){(M.options.snap.release&&M.options.snap.release.call(M.element,t,b.extend(M._uiHash(),{snapItem:M.snapElements[r].item})))}M.snapElements[r].snapping=false;continue}if(D.snapMode!="inner"){var P=Math.abs(I-O)<=i;var G=Math.abs(E-N)<=i;var K=Math.abs(C-o)<=i;var J=Math.abs(H-l)<=i;if(P){F.position.top=M._convertPositionTo("relative",{top:I-M.helperProportions.height,left:0}).top-M.margins.top}if(G){F.position.top=M._convertPositionTo("relative",{top:E,left:0}).top-M.margins.top}if(K){F.position.left=M._convertPositionTo("relative",{top:0,left:C-M.helperProportions.width}).left-M.margins.left}if(J){F.position.left=M._convertPositionTo("relative",{top:0,left:H}).left-M.margins.left}}var L=(P||G||K||J);if(D.snapMode!="outer"){var P=Math.abs(I-N)<=i;var G=Math.abs(E-O)<=i;var K=Math.abs(C-l)<=i;var J=Math.abs(H-o)<=i;if(P){F.position.top=M._convertPositionTo("relative",{top:I,left:0}).top-M.margins.top}if(G){F.position.top=M._convertPositionTo("relative",{top:E-M.helperProportions.height,left:0}).top-M.margins.top}if(K){F.position.left=M._convertPositionTo("relative",{top:0,left:C}).left-M.margins.left}if(J){F.position.left=M._convertPositionTo("relative",{top:0,left:H-M.helperProportions.width}).left-M.margins.left}}if(!M.snapElements[r].snapping&&(P||G||K||J||L)){(M.options.snap.snap&&M.options.snap.snap.call(M.element,t,b.extend(M._uiHash(),{snapItem:M.snapElements[r].item})))}M.snapElements[r].snapping=(P||G||K||J||L)}}});b.ui.plugin.add("draggable","stack",{start:function(m,l){var j=b(this).data("draggable").options;var k=b.makeArray(b(j.stack)).sort(function(f,g){return(parseInt(b(f).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(!k.length){return}var n=parseInt(k[0].style.zIndex)||0;b(k).each(function(f){this.style.zIndex=n+f});this[0].style.zIndex=n+k.length}});b.ui.plugin.add("draggable","zIndex",{start:function(k,j){var l=b(j.helper),i=b(this).data("draggable").options;if(l.css("zIndex")){i._zIndex=l.css("zIndex")}l.css("zIndex",i.zIndex)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._zIndex){b(i.helper).css("zIndex",h._zIndex)}}})})(d);(function(b,a){b.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var g=this.options,h=g.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(h)?h:function(f){return f.is(h)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[g.scope]=b.ui.ddmanager.droppables[g.scope]||[];b.ui.ddmanager.droppables[g.scope].push(this);(g.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var h=b.ui.ddmanager.droppables[this.options.scope];for(var g=0;g<h.length;g++){if(h[g]==this){h.splice(g,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(h,g){if(h=="accept"){this.accept=b.isFunction(g)?g:function(f){return f.is(g)}}b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(g){var h=b.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(h&&this._trigger("activate",g,this.ui(h)))},_deactivate:function(g){var h=b.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(h&&this._trigger("deactivate",g,this.ui(h)))},_over:function(g){var h=b.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(h.currentItem||h.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",g,this.ui(h))}},_out:function(g){var h=b.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(h.currentItem||h.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",g,this.ui(h))}},_drop:function(k,j){var l=j||b.ui.ddmanager.current;if(!l||(l.currentItem||l.element)[0]==this.element[0]){return false}var i=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=b.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==l.options.scope&&f.accept.call(f.element[0],(l.currentItem||l.element))&&b.ui.intersect(l,b.extend(f,{offset:f.element.offset()}),f.options.tolerance)){i=true;return false}});if(i){return false}if(this.accept.call(this.element[0],(l.currentItem||l.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",k,this.ui(l));return this.element}return false},ui:function(f){return{draggable:(f.currentItem||f.element),helper:f.helper,position:f.position,offset:f.positionAbs}}});b.ui.intersect=function(E,w,l){if(!w.offset){return false}var B=(E.positionAbs||E.position.absolute).left,C=B+E.helperProportions.width,r=(E.positionAbs||E.position.absolute).top,t=r+E.helperProportions.height;var z=w.offset.left,D=z+w.proportions.width,F=w.offset.top,v=F+w.proportions.height;switch(l){case"fit":return(z<=B&&C<=D&&F<=r&&t<=v);break;case"intersect":return(z<B+(E.helperProportions.width/2)&&C-(E.helperProportions.width/2)<D&&F<r+(E.helperProportions.height/2)&&t-(E.helperProportions.height/2)<v);break;case"pointer":var y=((E.positionAbs||E.position.absolute).left+(E.clickOffset||E.offset.click).left),x=((E.positionAbs||E.position.absolute).top+(E.clickOffset||E.offset.click).top),A=b.ui.isOver(x,y,F,z,w.proportions.height,w.proportions.width);return A;break;case"touch":return((r>=F&&r<=v)||(t>=F&&t<=v)||(r<F&&t>v))&&((B>=z&&B<=D)||(C>=z&&C<=D)||(B<z&&C>D));break;default:return false;break}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,i){var q=b.ui.ddmanager.droppables[m.options.scope]||[];var j=i?i.type:null;var r=(m.currentItem||m.element).find(":data(droppable)").andSelf();droppablesLoop:for(var o=0;o<q.length;o++){if(q[o].options.disabled||(m&&!q[o].accept.call(q[o].element[0],(m.currentItem||m.element)))){continue}for(var p=0;p<r.length;p++){if(r[p]==q[o].element[0]){q[o].proportions.height=0;continue droppablesLoop}}q[o].visible=q[o].element.css("display")!="none";if(!q[o].visible){continue}if(j=="mousedown"){q[o]._activate.call(q[o],i)}q[o].offset=q[o].element.offset();q[o].proportions={width:q[o].element[0].offsetWidth,height:q[o].element[0].offsetHeight}}},drop:function(j,i){var h=false;b.each(b.ui.ddmanager.droppables[j.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.ui.intersect(j,this,this.options.tolerance)){h=this._drop.call(this,i)||h}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(j.currentItem||j.element))){this.isout=1;this.isover=0;this._deactivate.call(this,i)}});return h},dragStart:function(h,g){h.element.parentsUntil("body").bind("scroll.droppable",function(){if(!h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}})},drag:function(h,g){if(h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}b.each(b.ui.ddmanager.droppables[h.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var m=b.ui.intersect(h,this,this.options.tolerance);var f=!m&&this.isover==1?"isout":(m&&this.isover==0?"isover":null);if(!f){return}var l;if(this.options.greedy){var n=this.options.scope;var o=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===n});if(o.length){l=b.data(o[0],"droppable");l.greedyChild=(f=="isover"?1:0)}}if(l&&f=="isover"){l.isover=0;l.isout=1;l._out.call(l,g)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,g);if(l&&f=="isout"){l.isout=0;l.isover=1;l._over.call(l,g)}})},dragStop:function(h,g){h.element.parentsUntil("body").unbind("scroll.droppable");if(!h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}}}})(d)})(window.comtop.cQuery);(function(a){a.cookie=function(c,l,o){if(typeof l!="undefined"){o=o||{};if(l===null){l="";o=$.extend({},o);o.expires=-1}var g="";if(o.expires&&(typeof o.expires=="number"||o.expires.toUTCString)){var h;if(typeof o.expires=="number"){h=new Date();h.setTime(h.getTime()+(o.expires*24*60*60*1000))}else{h=o.expires}g="; expires="+h.toUTCString()}var n=o.path?"; path="+(o.path):"";var j=o.domain?"; domain="+(o.domain):"";var b=o.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(l),g,n,j,b].join("")}else{var f=null;if(document.cookie&&document.cookie!=""){var m=document.cookie.split(";");for(var k=0;k<m.length;k++){var d=a.trim(m[k]);if(d.substring(0,c.length+1)==(c+"=")){f=decodeURIComponent(d.substring(c.length+1));break}}}return f}}})(window.comtop.cQuery);var _canLog=true;function _log(j,k){if(!_canLog){return}var h=Array.prototype.slice.apply(arguments,[1]);var m=new Date();var i=m.getHours()+":"+m.getMinutes()+":"+m.getSeconds()+"."+m.getMilliseconds();h[0]=i+" - "+h[0];try{switch(j){case"info":window.console.info.apply(window.console,h);break;case"warn":window.console.warn.apply(window.console,h);break;default:window.console.log.apply(window.console,h);break}}catch(l){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){alert("getDtNodeFromElement is deprecated");return $.ui.dynatree.getNode(el)}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this._isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},disable:function(){this.data.disable=true;var li=$(this.li);this.expand(false);li.children().removeClass("dynatree-active").addClass("dynatree-node-disable");li.find(".dynatree-checkbox").removeClass("dynatree-checkbox").addClass("dynatree-checkbox-disable");li.find(".dynatree-radio").removeClass("dynatree-radio").addClass("dynatree-radio-disable")},enable:function(){this.data.disable=false;var li=$(this.li);li.children().removeClass("dynatree-node-disable");li.find(".dynatree-checkbox-disable").removeClass("dynatree-checkbox-disable").addClass("dynatree-checkbox");li.find(".dynatree-radio-disable").removeClass("dynatree-radio-disable").addClass("dynatree-radio")},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="",imageSrc;if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){if(data.icon.charAt(0)==="/"){imageSrc=data.icon}else{imageSrc=opts.imagePath+data.icon}res+="<img src='"+imageSrc+"' alt='' />"}else{if(data.icon===false){}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?' title="'+data.tooltip.replace(/\"/g,"&quot;")+'"':"",href=data.href||"#";if(opts.noLink||data.noLink){nodeTitle='<span style="display:inline-block;" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</span>"}else{nodeTitle='<a hidefocus="true" onclick="return false;"  href="'+href+'" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling(),firstTime=false;if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){firstTime=true;this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(data.disable){this.disable()}if(data._customStyle){$(this.span).find("a").attr("style",data._customStyle)}if(firstTime&&opts.onCreate){opts.onCreate.call(tree,this,this.span)}if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if(this.li){$(this.li).data("nodeData",this.data)}if((this.bExpanded||includeInvisible===true)&&$.isArray(this.childList)){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){if(this.hasChildren()===undefined){return undefined}return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},isLoading:function(){return !!this._isLoading},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){var x=a.data.title.toLowerCase(),y=b.data.title.toLowerCase();return x===y?0:x>y?1:-1};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li);firstChild.li=null}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null,info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this._isLoading=false;if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this._isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this._isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"",cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents,reActive){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this&&!reActive){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(reActive){this._activate(true,true,reActive)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand()}if(activate){this.activate(this.tree.options.reactive)}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_updatePartSelectionState:function(){var sel;var initBSelected=this.bSelected;if(!this.hasChildren()){sel=(this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode);this._setSubSel(false);return sel}var i,l,cl=this.childList,allSelected=true,allDeselected=true;for(i=0,l=cl.length;i<l;i++){var n=cl[i],s=n._updatePartSelectionState();if(s!==false){allDeselected=false}if(s!==true){allSelected=false}}if(allSelected){sel=true}else{if(allDeselected){sel=false}else{sel=undefined}}this._setSubSel(sel===undefined);this.bSelected=(sel===true);if(this.tree.options.selectMode==4){this.bSelected=initBSelected}return sel},_fixSelectionState:function(flag){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);if(!node.data.unselectable){node._select(true,false,false)}});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){allChildsSelected=false;break}}if(allChildsSelected&&!flag){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(deep&&opts.selectMode===3){this._fixSelectionState()}if(deep&&opts.selectMode===4){this._fixSelectionState(true)}if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return !!this.data.isLazy},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this._isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this._isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},isExpanded:function(){return this.bExpanded},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand()}else{if(targetType==="checkbox"){this.toggleSelect()}else{this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){}else{return true}}}},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}if(handled){event.preventDefault()}},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}this.parent.removeChild(this);this.parent.render()},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}this.removeChildren();$(this.ul).addClass("tree-hide-ul");return}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){$("li",$(this.ul)).remove()}}this.childList=null}if(!isRecursiveCall){this._isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logDebug("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}}callback.call(tree,undefined,"notfound",seg,segList.length===0);tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree,opts=tree.options,pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){if(this.childList.length>0){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey===dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey===dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){$(this.ul).removeClass("tree-hide-ul");if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success,orgError=ajaxOptions.error,eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus,jqXHR){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}else{if(data&&data.hasOwnProperty("d")){data=(typeof data.d)=="string"?$.parseJSON(data.d):data.d}}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self,data,textStatus)}self.tree.logDebug("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(jqXHR,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",jqXHR,"\n",errorThrown);if(orgError){orgError.call(options,self,jqXHR,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=this.parent.data.isLazy?[]:null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}if(this.parent.ul){this.parent.ul.removeChild(this.li)}this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this]}if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}if(this.li){targetParent.ul.appendChild(this.li)}if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}if(!prevParent.isDescendantOf(targetParent)){prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version:$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options,self=this;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){this.logWarning("Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){this.logWarning("Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}var $ulInitialize=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot,isReloading=(opts.persist&&this.persistence.isReloading()),isLazy=false,prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{this._createFromTag(root,$ulInitialize);$ulInitialize.remove()}}}this._checkConsistency();if(!isLazy&&(opts.selectMode==3||opts.selectMode==4)){root._updatePartSelectionState()}this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy){if(opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}if(callback){callback.call(this,"ok")}}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored; use onPostInit instead.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored; use onPostInit instead.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode,data,textStatus){if(opts.selectMode==3){dtnode.tree.tnRoot._updatePartSelectionState()}if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,false)}if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode,XMLHttpRequest,textStatus,errorThrown){if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,true,XMLHttpRequest,textStatus,errorThrown)}if(callback){callback.call(dtnode.tree,"error",XMLHttpRequest,textStatus,errorThrown)}};this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length){title=$liSpan.html()}else{if($liA.length){title=$liA.html();href=$liA.attr("href");target=$liA.attr("target");tooltip=$liA.attr("title")}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href){data.href=href;data.target=target}if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null,$target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var markerOffset="0 0";switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");markerOffset="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");markerOffset="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");markerOffset="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:$target,offset:markerOffset})}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options,dnd=this.options.dnd,res=null,nodeTag=$(node.span),hitMode,enterResponse;switch(eventName){case"helper":var $helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());$("ul.dynatree-container",node.tree.divTree).append($helper);$helper.data("dtSourceNode",node);res=$helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;if(!res){res=false}else{res={over:((res===true)||(res==="over")||$.inArray("over",res)>=0),before:((res===true)||(res==="before")||$.inArray("before",res)>=0),after:((res===true)||(res==="after")||$.inArray("after",res)>=0)}}ui.helper.data("enterResponse",res);break;case"over":enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode);if(res==="over"||res==="before"||res==="after"){hitMode=res}}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false&&hitMode!==null);break;case"drop":var isForbidden=ui.helper.hasClass("dynatree-drop-reject");hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop&&!isForbidden){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){if(this.options.debugLevel>=0){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.")}return this._create()}if(this.options.debugLevel>=2){_log("debug","ui.dynatree._init() was called; no current default functionality.")}},_create:function(){var opts=this.options;if(opts.debugLevel>=1){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel)}this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";var timer=null;if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=$.ui.dynatree.getNode(event.target);if(!dtnode){return true}if(dtnode.data.disable){return}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":if(typeof o.onDblClick==="function"&&(dtnode.data.isFolder===true||dtnode.data.isFolder==="true")){if(dtnode._timer_){clearTimeout(dtnode._timer_);dtnode._timer_=null}else{dtnode._timer_=setTimeout(function(){dtnode._onClick(event);dtnode._timer_=null},200)}}else{dtnode._onClick(event)}if(typeof o.onClick==="function"){o.onClick.call(tree,dtnode,event)}break;case"dblclick":if(typeof o.onDblClick==="function"){o.onDblClick.call(tree,dtnode,event)}dtnode._onDblClick(event);break;case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){event=$.event.fix(event||window.event);var dtnode=$.ui.dynatree.getNode(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.version="$Version:$";$.ui.dynatree.getNode=function(el){if(el instanceof DynaTreeNode){return el}if(el.selector!==undefined){el=el[0]}while(el){if(el.dtnode){return el.dtnode}el=el.parentNode}return null};$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData;$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:"",children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,reactive:true,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:0,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,href:null,icon:false,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,scroll:true,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:true,helper:function(event){var sourceNode=$.ui.dynatree.getNode(event.target);if(!sourceNode){return"<div></div>"}return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},start:function(event,ui){var sourceNode=ui.helper.data("dtSourceNode");return !!sourceNode},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,prevTargetNode=ui.helper.data("dtTargetNode")||null,targetNode=$.ui.dynatree.getNode(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,targetNode=ui.helper.data("dtTargetNode")||null,mouseDownEvent=draggable._mouseDownEvent,eventType=event.type,dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}}(window.comtop.cQuery));
/*!
 * jquery.event.drag - v 2.0.0
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(j,f,i){var h=typeof j=="string"?j:"",g=d.isFunction(j)?j:d.isFunction(f)?f:null;if(h.indexOf("drag")!==0){h="drag"+h}i=(j==g?f:i)||{};return g?this.bind(h,i,g):this.trigger(h)};var b=d.event,a=b.special,c=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(h){var g=d.data(this,c.datakey),f=h.data||{};g.related+=1;if(!g.live&&h.selector){g.live=true;b.add(this,"draginit."+c.livekey,c.delegate)}d.each(c.defaults,function(i,j){if(f[i]!==undefined){g[i]=f[i]}})},remove:function(){d.data(this,c.datakey).related-=1},setup:function(){if(d.data(this,c.datakey)){return}var f=d.extend({related:0},c.defaults);d.data(this,c.datakey,f);b.add(this,"mousedown",c.init,f);if(this.attachEvent){this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){if(d.data(this,c.datakey).related){return}d.removeData(this,c.datakey);b.remove(this,"mousedown",c.init);b.remove(this,"draginit",c.delegate);c.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",c.dontstart)}},init:function(h){var f=h.data,g;if(f.which>0&&h.which!=f.which){return}if(d(h.target).is(f.not)){return}if(f.handle&&!d(h.target).closest(f.handle,h.currentTarget).length){return}f.propagates=1;f.interactions=[c.interaction(this,f)];f.target=h.target;f.pageX=h.pageX;f.pageY=h.pageY;f.dragging=null;g=c.hijack(h,"draginit",f);if(!f.propagates){return}g=c.flatten(g);if(g&&g.length){f.interactions=[];d.each(g,function(){f.interactions.push(c.interaction(this,f))})}f.propagates=f.interactions.length;if(f.drop!==false&&a.drop){a.drop.handler(h,f)}c.textselect(false);b.add(document,"mousemove mouseup mouseleave",c.handler,f);return false},interaction:function(g,f){return{drag:g,callback:new c.callback(),droppable:[],offset:d(g)[f.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(g){var f=g.data;switch(g.type){case !f.dragging&&"mousemove":if(Math.pow(g.pageX-f.pageX,2)+Math.pow(g.pageY-f.pageY,2)<Math.pow(f.distance,2)){break}g.target=f.target;c.hijack(g,"dragstart",f);if(f.propagates){f.dragging=true}case"mousemove":if(f.dragging){c.hijack(g,"drag",f);if(f.propagates){if(f.drop!==false&&a.drop){a.drop.handler(g,f)}break}g.type="mouseup"}case"mouseup":case"mouseleave":b.remove(document,"mousemove mouseup mouseleave",c.handler);if(f.dragging){if(f.drop!==false&&a.drop){a.drop.handler(g,f)}c.hijack(g,"dragend",f)}c.textselect(true);if(f.click===false&&f.dragging){d.event.triggered=true;setTimeout(function(){d.event.triggered=false},20);f.dragging=false}break}return false},delegate:function(h){var f=[],i,g=d.data(this,"events")||{};d.each(g.live||[],function(j,k){if(k.preType.indexOf("drag")!==0){return}i=d(h.target).closest(k.selector,h.currentTarget)[0];if(!i){return}b.add(i,k.origType+"."+c.livekey,k.origHandler,k.data);if(d.inArray(i,f)<0){f.push(i)}});if(!f.length){return false}return d(f).bind("dragend."+c.livekey,function(){b.remove(this,"."+c.livekey)})},hijack:function(g,n,q,o,j){if(!q){return}var p={event:g.originalEvent,type:g.type},l=n.indexOf("drop")?"drag":"drop",s,k=o||0,h,f,r,m=!isNaN(o)?o:q.interactions.length;g.type=n;g.originalEvent=null;q.results=[];do{if(h=q.interactions[k]){if(n!=="dragend"&&h.cancelled){continue}r=c.properties(g,q,h);h.results=[];d(j||h[l]||q.droppable).each(function(t,i){r.target=i;s=i?b.handle.call(i,g,r):null;if(s===false){if(l=="drag"){h.cancelled=true;q.propagates-=1}if(n=="drop"){h[l][t]=null}}else{if(n=="dropinit"){h.droppable.push(c.element(s)||i)}}if(n=="dragstart"){h.proxy=d(c.element(s)||h.drag)[0]}h.results.push(s);delete g.result;if(n!=="dropinit"){return s}});q.results[k]=c.flatten(h.results);if(n=="dropinit"){h.droppable=c.flatten(h.droppable)}if(n=="dragstart"&&!h.cancelled){r.update()}}}while(++k<m);g.type=p.type;g.originalEvent=p.event;return c.flatten(q.results)},properties:function(h,f,g){var i=g.callback;i.drag=g.drag;i.proxy=g.proxy||g.drag;i.startX=f.pageX;i.startY=f.pageY;i.deltaX=h.pageX-f.pageX;i.deltaY=h.pageY-f.pageY;i.originalX=g.offset.left;i.originalY=g.offset.top;i.offsetX=h.pageX-(f.pageX-i.originalX);i.offsetY=h.pageY-(f.pageY-i.originalY);i.drop=c.flatten((g.drop||[]).slice());i.available=c.flatten((g.droppable||[]).slice());return i},element:function(f){if(f&&(f.jquery||f.nodeType==1)){return f}},flatten:function(f){return d.map(f,function(g){return g&&g.jquery?d.makeArray(g):g&&g.length?c.flatten(g):g})},textselect:function(f){d(document)[f?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",f?"off":"on").css("MozUserSelect",f?"":"none")},dontstart:function(){return false},callback:function(){}};c.callback.prototype={update:function(){if(a.drop&&this.available.length){d.each(this.available,function(f){a.drop.locate(this,f)})}}};a.draginit=a.dragstart=a.dragend=c})(window.comtop.cQuery);(function(a,b){b.UI.getBytesLength=function(g){var d=0;for(var f=0;f<g.length;f++){var h=g.charCodeAt(f);if((h>=1&&h<=126)||(65376<=h&&h<=65439)){d++}else{d+=2}}return d};b.UI.intercept=function(j,h){var f="";var d=0;for(var g=0;g<j.length;g++){var k=j.charCodeAt(g);if((k>=0&&k<=126)||(65376<=k&&k<=65439)){d++}else{d+=2}if(d<=h){f+=j.charAt(g)}else{break}}return f}})(window.comtop.cQuery,window.comtop);(function(f){var d=f.cQuery;f.UI.Overlay=a;var b="overLay_"+comtop.guid();function a(){var h,g=a.fx;if(g._dom&&!this[b]){return g}h=d("<div></div>");h.addClass("cui_overlay").css({width:g._page_width(),height:g._page_height()});d(document.body).append(h);if(!this[b]){g._dom=h;return g}else{this._dom=h}}var c;a.fx=a.prototype={_page_height:d.page.height,_page_width:d.page.width,_timeout:null,_resize:function(){if(this._dom===undefined){return}this._dom.css({width:0,height:0}).delay(10).css({width:this._page_width(),height:this._page_height()})},show:function(h){this._resize();d(window).on("resize",this._resize);var g=this._dom.data("opa")||0;h=g+parseInt(h*100);this._dom.data("opa",h).css("opacity",h/100).show()},hide:function(h){var g=this._dom.data("opa");h=g-parseInt(h*100);this._dom.data("opa",h);this._dom.css("opacity",h/100);if(h<=0){d(window).off("resize",this._resize);this._dom.hide()}}};a.fx[b]=true})(window.comtop);(function(a,b){b.UI.Float=b.UI.Base.extend({options:{uitype:"Float",target:null,mode:"right",offset:{x:0,y:0},outer:true,tolerance:null,lock:""},_create:function(){var d=this.options;this.$element=d.el;var c=this;if(d.target){this._move();this._bindTarget()}if(d.lock=="fixed"){this._fixElement()}else{if(d.lock=="top"){this.y=this.$element.offset().top;if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){this._setGlobal()}}}this._bindEvent()},_bindEvent:function(){var d=this;var f=this.options;var c=this.$element;if(f.target){a(window).bind("resize.float",function(){d._bindTarget();if(f.lock=="fixed"){d._fixElement()}})}if(f.lock=="top"){a(window).bind("scroll",function(){d._bindToTop()});a(window).bind("resize.float",function(){this.y=c.offset().top;var g=setTimeout(function(){var h=c.data("clone");if(h){c.removeData("clone");a(h).remove();c.css("visibility","visible")}d._bindToTop()},10)})}},_bindTarget:function(){var f=this.options;var d=this.$element;var c=f.tolerance?f.tolerance(d[0],f):this._getLocation();d.css({position:"absolute",top:c.y,left:c.x,zIndex:5000})},_fixElement:function(){var c=this.$element;var f=this.options;var i=f.offset.y;var h=f.offset.x;if(f.target){i=c.offset().top;h=c.offset().left}if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){this._move();this._setGlobal();var g="document."+(b.Browser.isQM?"body":"documentElement")+".scrollTop";var d="document."+(b.Browser.isQM?"body":"documentElement")+".clientHeight";var k="document."+(b.Browser.isQM?"body":"documentElement")+".scrollLeft";var j="document."+(b.Browser.isQM?"body":"documentElement")+".clientWidth";c.css({position:"absolute"});if(isNaN(i)&&i.indexOf("%")!=-1){c[0].style.setExpression("top","eval("+g+" +"+parseFloat(i)+" * "+d+' / 100) + "px"')}else{c[0].style.setExpression("top","eval("+g+" +"+parseFloat(i)+') + "px"')}if(isNaN(h)&&h.indexOf("%")!=-1){c[0].style.setExpression("left","eval("+k+" +"+parseFloat(h)+" * "+j+' / 100) + "px"')}else{c[0].style.setExpression("left","eval("+k+" +"+parseFloat(h)+') + "px"')}}else{c.css({position:"fixed",top:i,left:h})}},_bindToTop:function(){var c=this.$element;var d=a(window).scrollTop();var f=c.data("clone");if(d>this.y){if(!f){f=this._copyElement();c.css("visibility","hidden");if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){if(b.Browser.isQM){a(f)[0].style.setExpression("top",'eval(document.body.scrollTop) + "px"')}else{a(f)[0].style.setExpression("top",'eval(document.documentElement.scrollTop) + "px"')}}else{a(f).css({position:"fixed",top:"0px"})}}}else{c.removeData("clone");a(f).remove();c.css("visibility","visible")}},_copyElement:function(){var c=this.$element;var d=c.clone();a(d).css({position:"absolute",width:this._getWidth(),left:c.offset().left});c.data("clone",d);a(d).appendTo(document.body);return d},_getLocation:function(){var n=this.options;var x=n.target;var d=this.$element;var q=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?0:a(x).offset().left;var k=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?0:a(x).offset().top;var t=document.documentElement.clientWidth;var h=document.documentElement.clientHeight;if(b.Browser.isQM){t=document.body.clientWidth;h=document.body.clientHeight}var g=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?t:a(x).outerWidth();var i=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?h:a(x).outerHeight();var p=parseFloat(a(x).css("borderTopWidth"));p=isNaN(p)?0:p;var l=parseFloat(a(x).css("borderRightWidth"));l=isNaN(l)?0:l;var v=parseFloat(a(x).css("borderBottomWidth"));v=isNaN(v)?0:v;var m=parseFloat(a(x).css("borderLeftWidth"));m=isNaN(m)?0:m;var c=d.outerWidth();var j=d.outerHeight();var w=parseFloat(n.offset.x);w=isNaN(w)?0:w;var u=parseFloat(n.offset.y);u=isNaN(u)?0:u;switch(n.mode){case"top":var f=q+(g-c)/2;var o=n.outer?k-j-u:k+u+p;return{x:f,y:o};case"right":var s=n.outer?q+g+w:q+g-c-w-l;var r=k+(i-j)/2;return{x:s,y:r};case"bottom":var f=q+(g-c)/2;var o=n.outer?k+i+u:k+i-j-u-v;return{x:f,y:o};case"left":var f=n.outer?q-c-w:q+w+m;var o=k+(i-j)/2;return{x:f,y:o}}},_getWidth:function(){var c=this.$element.width();if(!a.browser.msie&&(this.$element[0].tagName=="TABLE"||this.$element[0].tagName=="table")){c=this.$element.outerWidth()}return c},_move:function(){var d=this.$element;var c=d.parent()[0].tagName;if(c!="BODY"&&c!="body"){d.appendTo(document.body)}},_addCSSRule:function(d,f){if(document.styleSheets.length<1){document.write("<style type='text/css'></style>")}var c=document.styleSheets[document.styleSheets.length-1];c.cssRules?c.insertRule(d+"{"+f+"}",c.cssRules.length):c.addRule(d,f)},_setGlobal:function(){var c=a.data(document,"initCss");if(!c){this._addCSSRule("body","background-image: url(about:blank);background-attachment: fixed;");a.data(document,"initCss",true)}},_isIE6:function(){return a.browser.msie&&(a.browser.version=="6.0")&&!a.support.style||(!!window.ActiveXObject&&document.compatMode!="CSS1Compat")}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Button=b.UI.Base.extend({options:{uitype:"Button",label:"?? ?",hide:false,disable:false,icon:"",on_click:null,menu:null},_init:function(){this.options.menuId="button_"+b.guid()},_create:function(){var c=this.options;if(c.hide){this.hide()}if(c.disable){this.disable(true)}if(c.icon){this._setIcon(c.icon)}if(c.menu){if(a.isFunction(c.menu)){c.menu=c.menu()}c.menu=cui("#"+c.menuId).menu(c.menu);c.el.children("div").unbind("click")}},_mouseoverHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_visited")},_mouseoutHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_visited").removeClass("button_box_hover")},_mouseupHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_hover");a(c).addClass("button_box_visited")},_mousedownHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_hover")},_clickHandler:function(g,c,f){if(this.options.disable){return}g.stopPropagation();var d=this.options.menu;d&&d.show();this.options.on_click&&this.options.on_click(g,this)},_setIcon:function(c){var d;if(c.indexOf("/")!=-1){d="url("+c+")"}else{d="url("+this._getIconPath("comtop.ui")+"themes/default/images/button/"+c+")"}this.options.el.find(".button_icon_container").css("backgroundImage",d)},_getIconPath:function(h){var f=a("script");var g;var d=new RegExp(h);for(var c=0;c<f.length;c++){g=f.eq(c).attr("src");if(d.test(g)){break}}g=g.substr(0,g.lastIndexOf("/"));g=g.substr(0,g.lastIndexOf("/")+1);return g},disable:function(c){if(c==true){this.options.disable=true;this.options.el.children("div").addClass("button_box_disable").removeClass("button_box_visited").removeClass("button_box_hover");if(this.options.menu){this.options.menu.hide&&this.options.menu.hide()}}else{this.options.disable=false;this.options.el.children("div").removeClass("button_box_disable")}},hide:function(){this.options.el.hide();this.options.menu&&this.options.menu.hide&&this.options.menu.hide()},setLabel:function(c){var d=typeof c;if(d==="number"||d==="string"){this.options.label=c;a(".button_text_container",this.options.el).html(c)}}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.Borderlayout=b.UI.Base.extend({options:{uitype:"Borderlayout",id:"",is_root:true,gap:"0px 0px 0px 0px",fixed:{top:true,middle:false,left:true,center:false,right:true,bottom:true},items:[],on_sizechange:null},_init:function(){},_create:function(){var c=this.options;this.id=b.guid();this.el=c.el;if(this.el.parent().prop("tagName")==="BODY"){this.body=true;this.el.parent().css({margin:0,overflow:"hidden"})}this._setItems();this._createDom();this._bindHandler()},_setItems:function(){var c=this.options.items,f=this.el;var d=this.items_default={position:"left",width:-1,height:-1,gap:"0px 0px 0px 0px",resizable:false,min_size:30,max_size:200,split_size:2,is_header:false,header_content:"",header_height:30,collapsable:false,url:".",show_expand_icon:false};if(c.length){return}var g={string:String,number:parseInt,"boolean":function(h){return h==="true"}};this.setattr=true;f.children("[position]").each(function(){var i={};c.push(i);for(var h in d){i[h]=a(this).attr(h)===undefined?d[h]:g[typeof(d[h])](a(this).attr(h))}})},_isCols:function(c){if(c==="left"||c=="center"||c=="right"){return true}},_createDom:function(){var p=this.options.items,d=this.el,w=this.setattr,n={},m={},y={},h=this.options.fixed,j={top:"bottom",bottom:"top",left:"right",right:"left"},k={},z=this.min_size={},g=this.max_size={},r=this.collapsable={},l=this.show_expand_icon={},q=this.items_default,v={};for(var x=p.length;x--;){var A=p[x],C=A.position;A=w?p[x]:a.extend(q,p[x]);this._isCols(C)&&(m[C]=A.width!==-1?A.width:"auto");y[(this._isCols(C)?"middle":C)]=A.height!==-1?A.height:"auto";var s=A.gap.split(" "),o=s.length;o===1&&(s[1]=s[2]=s[3]=s[0]);o===2&&(s[2]=s[0],s[3]=s[1]);o===3&&(s[3]=s[1]);k[C]={"margin-top":parseInt(s[0]),"margin-right":parseInt(s[1]),"margin-bottom":parseInt(s[2]),"margin-left":parseInt(s[3])};h[C]&&(z[C]=A.min_size,g[C]=A.max_size);var c='<div class="bl_'+C+" bl_"+C+this.id+'">',u=header="",f=0;if(C!=="center"){var t=this._isCols(C)?"width":"height";u='<div class="'+(A.resizable?"bl_move":"bl_border")+'" style="'+t+":"+A.split_size+'px;">'+((h[C]&&A.collapsable&&A.show_expand_icon)?'<div class="bl_fold bl_unfold"></div>':"")+"</div>";k[C]["margin-"+j[C]]+=A.split_size}if(h[C]&&A.collapsable){r[C]=A.collapsable}if(A.id){v[C]=A.id}if(A.is_header){header='<div class="bl_header" style="height:'+A.header_height+"px;line-height:"+A.header_height+'px;">'+A.header_content+"</div>"}c+='<div class="bl_inner" header="'+(A.is_header?A.header_height:0)+'">'+header+'<div class="bl_box_'+C+" bl_box"+this.id+'">'+(A.url!=="."?'<iframe url="'+A.url+'" frameborder="0" class="bl_iframe_page"></iframe>':"")+"</div></div>";n[C]=(c+=u+"</div>")}var B=a("<div class='bl_middle bl_middle"+this.id+"'></div>").append(n.left).append(n.center).append(n.right);d.append(n.top).append(B.html()?B:"").append(n.bottom).append("<div class='bl_overlay'></div>");d.find(".bl_box"+this.id).each(function(){var i=this.className.match(/top|left|center|bottom|right/)[0];if(v[i]){var D=a("#"+v[i],d).css({height:"100%"}).append(a(this).html());a(this).append(D)}else{var D=d.children("[position="+i+"]").css({height:"100%"}).append(a(this).html());a(this).html(D)}});d.find(".bl_iframe_page").each(function(){a(this).attr("src",a(this).attr("url")).removeAttr("url")});this._setLayout(m,y);this._setBoxLayout(k)},_setLayout:function(i,j){var c=this,k=this.options.gap,g=this.el;c.auto_lays={width:[],height:[]};var k=k.split(" ");this.margin_v=parseInt(k[0])+(k[2]===undefined?parseInt(k[0]):parseInt(k[2])),margin_right=k[1]===undefined?parseInt(k[0]):parseInt(k[1]),this.margin_r=margin_right+(k[3]===undefined?margin_right:parseInt(k[3]));this.scope={};var f=this.scope=this._getParentLayout(b.Browser.isIE8);i=this._separateAutoLayout(i,f.width,"width");j=this._separateAutoLayout(j,f.height,"height");var h=this.layout=a.extend(i,j);for(var d in h){g.find(".bl_"+d+this.id).eq(0).css((this._isCols(d)?"width":"height"),h[d])}a(window).on("resize",function(){c._resizeHandle(true)});g.addClass("bl_main").css("padding",k)},_resizeHandle:function(d){var c=this._getParentLayout();this._resetLayout(c,this.scope,d);this.scope.width=c.width;this.scope.height=c.height},_separateAutoLayout:function(l,h,d){var g=[],k={},j=this.options.fixed;for(var c in l){if(!j[c]){this.auto_lays[d].push(c);g.push(c);continue}l[c]=typeof l[c]!=="number"?(d==="width"?500:300):l[c];h-=l[c];k[c]=l[c]}for(var f=g.length;f--;){k[g[f]]=h/g.length}return k},_getParentLayout:function(){var h=this.el.parent().css({positon:"relative",overflow:"hidden"}),g=this.el,j=b.Browser,f=this.scope;var i=document.createElement("div");i.style.width="100%";i.style.height="100%";i.style.positon="absolute";i.style.left=0;i.style.top=0;h.append(i);var d=a(i).width();if(this.body){var c=j.isQM?(window.innerHeight||document.documentElement.offsetHeight-4):a(window).height()}else{var c=a(i).height()}a(i).remove();h.css("positon","");if(!this.body){h.css("overflow","")}return{width:f.fix_width||(d-this.margin_r-1),height:f.fix_height||(c-this.margin_v)}},_setBoxLayout:function(f){var g=this.el,i=this.box_height={};for(var d in f){var h=g.find(".bl_box_"+d).eq(0),c=h.parent();i[d]=c.parent().css("overflow","hidden").height()-c.attr("header")-0-f[d]["margin-top"]-f[d]["margin-bottom"];c.parent().css("overflow","");c.css(f[d]);h.css("height",i[d])}},_resetLayout:function(f,d,g){var h=f.width-d.width;var c=f.height-d.height;if(h){this._setWidthAndHeight(h,"width",g)}if(c){this._setWidthAndHeight(c,"height",g)}},setWidth:function(d){var c=b.Browser.isQM?(d+this.margin_r):d;this.el.css("width",c);this.scope.fix_width=d;this._resizeHandle(false)},setHeight:function(d){var c=b.Browser.isQM?(d+this.margin_v):d;this.el.css("height",c);this.scope.fix_height=d;this._resizeHandle(false)},_setWidthAndHeight:function(q,g,f){var d=this.el,j=this.auto_lays[g],p=j.length,m=this.layout,c=q,o=0;for(var h=p;h--;){o+=m[j[h]]}for(var h=p;h--;){var n=Math.round(q*m[j[h]]/o),k=d.find(".bl_"+j[h]+this.id);var l=(h===0?c:n);c-=n;k.css(g,m[j[h]]+=l);g==="height"&&this._setBoxHeight(k,l)}if(!f){this._childrenHanlder()}},_setBoxHeight:function(c,f){var d=this.box_height;c.find(".bl_box"+this.id).each(function(h,i){var g=a(i).attr("class").match(/top|left|center|bottom|right/)[0];a(i).css("height",d[g]+=f)})},_bindHandler:function(){var c=this,d=this.el;d.find(".bl_top>.bl_move, .bl_bottom>.bl_move").on("mousedown",function(f){c._drag(f,this,"height")});d.find(".bl_left>.bl_move, .bl_center>.bl_move, .bl_right>.bl_move").on("mousedown",function(f){c._drag(f,this,"width")});d.find(".bl_top .bl_fold, .bl_bottom .bl_fold").on("mousedown",function(f){c._fold(f,this,"height")});d.find(".bl_middle .bl_fold").on("mousedown",function(f){c._fold(f,this,"width")})},_drag:function(A,l,r){A.stopPropagation(),A.preventDefault();var k=A.pageX,j=A.pageY,s;var f=this,z=this.layout,i=this.box_height,w=this.min_size,c=this.max_size;var d=a(l).parent(),o=d.prev(),q=d.next(),B=d.parent().not(".bl_main:eq(0)");if(o.length){q=d}else{o=d}var p=o.attr("class").match(/top|left|center|bottom|middle|right/)[0],t=q.attr("class").match(/top|left|center|bottom|middle|right/)[0];var m=z[p],n=z[t];var u=w[p],v=w[t];var g=c[p],h=c[t];this.el.children(".bl_overlay").show().css("height",this.scope.height).css("cursor",r==="width"?"col-resize":"row-resize").on("mousemove",function(C){C.stopPropagation();C.preventDefault();var x=C.pageX,y=C.pageY;var D=B.length?x-k:y-j;if(D===0||D*s>0){return}s=0;if(g!==undefined&&(m+D>g||m+D<u)){D=D>0?g-m:u-m;s=D}if(h!==undefined&&(n-D>h||n-D<v)){D=D<0?n-h:n-v;s=D}o.css(r,m+=D);q.css(r,n-=D);r==="height"&&(f._setBoxHeight(o,D),f._setBoxHeight(q,-D));j=y;k=x;f._childrenHanlder()}).on("mouseup mouseout",function(x){x.stopPropagation();a(this).hide().off("mousemove");(z[p]=z[p]===m?z[p]:m);(z[t]=z[t]===n?z[t]:n)})},_fold:function(d,f,c){d.stopPropagation();if(d.button>1){return}this._foldAction(a(f).parent().parent(),c)},_foldAction:function(j,f,d){var i=this.layout,c=j.attr("class").match(/top|left|center|bottom|right/)[0],h=j.data("fold"),g=j.children(".bl_move,.bl_border").eq(0).children().eq(0);if(this.collapsable[c]){if(d===true&&h!==undefined||d===false&&h===undefined){return}if(h===undefined){this._setWidthAndHeight(i[c],f);j.children(".bl_inner").hide();j.data("fold",i[c]).css(f,i[c]=0);g.removeClass("bl_unfold");return}this._setWidthAndHeight(-h,f);g.addClass("bl_unfold");j.children(".bl_inner").show();j.removeData("fold").css(f,i[c]=h).children(".bl_inner")}},_childrenHanlder:function(){if(!this.child_bl){var d=this.child_bl=this.el.find("[uitype=Borderlayout]");d=d.length===0?null:d}var d=this.child_bl;if(d){d.each(function(){cui(this)._resizeHandle()})}var c=this.options.on_sizechange;if(c&&typeof c==="function"){c()}},setContentURL:function(c,d){var g=this.el.find(".bl_"+c+this.id).eq(0).find(".bl_box"+this.id).eq(0).children().eq(0);var f=g.find(".bl_iframe_page");if(f.length){f.eq(0).attr("src",d)}else{g.append('<iframe class="bl_iframe_page" src="'+d+'" frameborder="0"></iframe>')}},setCollapse:function(c,d){if(this.options.fixed[c]){this._foldAction(a(".bl_"+c+this.id),(this._isCols(c)?"width":"height"),d)}},getCollapseState:function(c){return{collapsed:!!this.el.find(".bl_"+c+this.id).eq(0).data("fold"),contentHeight:this.box_height[c],contentWidth:this.el.find(".bl_"+c+this.id).eq(0).width()}},setGap:function(c){var d=this.options.gap;this.el.css("padding",d=c);var d=c.split(" ");this.margin_v=parseInt(d[0])+(d[2]===undefined?parseInt(d[0]):parseInt(d[2]));this._resizeHandle()},setTittle:function(c,d){a(".bl_"+c+this.id).find(".bl_header").eq(0).html(d)},setCollapsable:function(c,d){if(this.options.fixed[c]){this.collapsable[c]=d;var f=a(".bl_"+c).children(".bl_move").eq(0).children(".bl_fold").eq(0);if(d){f.show();return}f.hide()}}})})(window.comtop);(function(f,o){var h=null;o.UI.Calender=o.UI.Base.extend({options:{uitype:"Calender",name:"",model:"date",isrange:false,trigger:"click",value:[],format:"",entering:false,emptytext:"",readonly:false,disable:false,icon:true,textmode:false,panel:1,zindex:9999,width:"200px",okbtn:false,mindate:null,maxdate:null,nocurrent:false,iso8601:false,on_change:null,sunday_first:false},tipPosition:".C_CR_calInput_bd",_init:function(v){var w=this,y=w.options;if(v.value){y.value=!y.value?[v.value]:y.value}y.value=y.value===null?[]:y.value;y.mindate=[v.mindate,null];y.maxdate=[v.maxdate,null];y.uuid=o.guid();y.template="calender.html";y.curModel=[];y.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"};y.inputFocusClass="C_CR_calInput_focus";y.inputDisClass="C_CR_calInput_rd";y.inputErrClass="C_CR_calInput_err";y.selDate=[];y.cache={yearPop:{},selDate:[]};y.isBuild=false;y.inputEl=null;y.tipTxt=null;y.pEl=null;y.datePanel=[];y.yearPanel=[];y.monthPanel=[];y.quarterPanel=[];y.timePanel=[];y.weekPanel=[];y.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]};y.selIndex=0;y.activePop=null;var x=y.model==="all"?"date":y.model;y.curModel=[x,"for"+x.charAt(0).toUpperCase()+x.substring(1),x+"Frame",x+"Panel"];if(y.model==="all"&&v.format){y.format=f.parseJSON(v.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));y.formatList=f.extend(y.formatList,y.format);y.format=y.formatList[y.curModel[0]]}else{if(!v.format){y.format=y.formatList[y.curModel[0]]}else{y.formatList[y.curModel[0]]=y.format}}y.okbtn=/[y|M|q|w|d]/.test(y.format)?y.okbtn:true},_create:function(){var v=this,x=v.options;x.inputEl=x.el.find(":text");v._getDefault();v.setValue(f.extend(true,[],x.selDate),true);for(var w=0;w<x.cache.selDate.length;w++){if(x.cache.selDate[w]===null){x.selIndex=w;break}else{x.selIndex++}}if(x.disable||x.readonly){x.el.children(".C_CR_calInput_bd").addClass(x.inputDisClass)}if(!x.entering||x.disable||x.readonly){x.disable&&x.inputEl.attr("disabled",true);(x.readonly||!x.entering)&&x.inputEl.attr("readonly",true)}},_getDefault:function(){var v=this,w=v.options,x=[];if(w.value.length!=0){x=w.value}else{if(w.isrange){x=f.trim(w.inputEl.eq(0).val()).split("~");x=!x.join("")?[null,null]:x}else{f.each(w.inputEl,function(y,z){x.push(f.trim(f(this).val()))})}}w.selDate=s(k(x,w.format))},_buildData:function(v,D){var G=this,w=G.options,z,A,y,B,E,x;if(w.isBuild){if(D===undefined){w[w.curModel[3]]=[];w.yearPop[w.curModel[1]]=[]}else{x=!G._isReady("yearPop",D);w[w.curModel[3]][D]=[];x&&(w.yearPop[w.curModel[1]][D]=[])}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="date"){if(D===undefined){for(B=0;B<w.panel;B++){z=v[B]?new Date(v[B][0],v[B][1],1):new Date(z.getFullYear(),z.getMonth()+1,1);w.yearPop.forDate.push(u(z.getFullYear()-4,12));w.datePanel.push(j.call(G,z))}}else{z=new Date(v[0][0],v[0][1],1);x&&(w.yearPop.forDate[D]=u(z.getFullYear()-4,12));w.datePanel[D]=j.call(G,z)}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="year"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.yearPanel[B-1].data[11]+14;w.yearPop.forYear.push(u(E-4,12));w.yearPanel.push({year:E,month:null,data:u(E-7,18)})}}else{E=v[0][0];x&&(w.yearPop.forYear[D]=u(E-4,12));w.yearPanel[D]={year:E,month:null,data:u(E-7,18)}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="month"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.monthPanel[B-1].year+1;w.yearPop.forMonth.push(u(E-4,12));w.monthPanel.push({year:E,month:null,data:c()})}}else{E=v[0][0];x&&(w.yearPop.forMonth[D]=u(E-4,12));w.monthPanel[D]={year:E,month:null,data:c()}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="quarter"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.quarterPanel[B-1].year+1;w.yearPop.forQuarter.push(u(E-4,12));w.quarterPanel.push({year:E,month:null,quarter:[1,2,3,4]})}}else{E=v[0][0];x&&(w.yearPop.forQuarter[D]=u(E-4,12));w.quarterPanel[D]={year:E,month:null,quarter:[1,2,3,4]}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="date"){var C;w.timePanel=[];C=w.isrange?2:1;for(A=0;A<C;A++){y=w.cache.selDate[A]?w.cache.selDate[A]:b(new Date(),w.format);w.timePanel.push([y[5],y[6],y[7]])}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="week"){var F;if(D===undefined){for(B=0;B<w.panel;B++){if(v[B]){F=o.Date.getOnWeek(new Date(v[B][0],v[B][1]>0?v[B][1]:1,v[B][2]||1),w.iso8601,w.sunday_first)}E=v[B]?F.year:w.weekPanel[B-1].year+1;w.yearPop.forWeek.push(u(E-4,12));w.weekPanel.push({year:E,month:null,data:d(E,w.iso8601,w.sunday_first)})}}else{E=v[0][0];x&&(w.yearPop.forWeek[D]=u(E-4,12));w.weekPanel[D]={year:E,month:null,data:d(E,w.iso8601,w.sunday_first)}}}w.cache.yearPop=f.extend(true,{},w.yearPop)},_buildUpdateDate:function(){var w=this,z=w.options,v,y=[],x,A=[];v=b(new Date(),z.format);for(x=0;x<z.cache.selDate.length;x++){if(x===0){A.push(z.cache.selDate[x]?z.cache.selDate[x]:v);y.push([A[x][2],A[x][3],A[x][4]])}else{if(z.cache.selDate[x]){A.push(z.cache.selDate[x]);y.push([A[x][2],A[x][3],A[x][4]])}}}return y},_draw:function(){var v=this,w=v.options;v._buildData(v._buildUpdateDate());v._buildTemplate("body","calFrame",f.extend(true,{},w),true);w.pEl=f("#C_CR_"+w.uuid)},_drawYearPop:function(x,w){var v=this,z=v.options,B,A=z.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y");B=z.yearPop[x]||[];if(w!=undefined){v._buildTemplate(A.eq(w),"yearPopFrame",B[w])}else{for(var y=0;y<B.length;y++){v._buildTemplate(A.eq(y),"yearPopFrame",B[y])}}},_tagEventHandle:function(B,v,A){B.stopPropagation();var w=this,z=w.options,C=A.nodeName;l.call(w);if(C==="A"){var y=f(A),x=y.attr("val");y.parents("ul").find("a").removeClass("C_CR_Tag_cur");y.addClass("C_CR_Tag_cur");z.curModel=[x,"for"+x.charAt(0).toUpperCase()+x.substring(1),x+"Frame",x+"Panel"];z.cache.selDate=[];w._selectTag(z.curModel)}},_binderHandler:function(z,v,y){z.stopPropagation();var w=this,x=w.options,A=y.nodeName;if(x.readonly||x.disable){return}if(x.el.attr("isShow")==="true"){return}x.el.attr("isShow","true");if(A==="INPUT"){x.entering||f(y).blur()}x.inputEl.parents(".C_CR_calInput_bd").addClass(x.inputFocusClass);w.show();if(f.trim(x.inputEl.val())===x.emptytext){x.inputEl.val("").removeClass("C_CR_calInput_empty")}},_mainEventHandle:function(z,w,A){z.stopPropagation();var C=this,v=C.options,D=f(A),B=D[0].nodeName;l.call(C);if(B!=="A"){return}var x=D.attr("val").split("|");for(var y=0;y<x.length;y++){x[y]=+x[y]}C._cachingDate(x,D)},_ymEventHandle:function(y,w,z){y.stopPropagation();var C=this,v=C.options,D=f(z),A=D[0].nodeName,x,B;if(A==="A"){x=D.attr("val");B=+D.parents(".C_CR_YMer_item:eq(0)").attr("popIndex");switch(x){case"prevMonth":l.call(C);v.curModel[0]==="date"?C._selectMonthYear("month",null,null,-1):v.curModel[0]==="year"?C._selectMonthYear("year",null,null,-18):C._selectMonthYear("year",null,null,-1);break;case"nextMonth":l.call(C);v.curModel[0]==="date"?C._selectMonthYear("month",null,null,1):v.curModel[0]==="year"?C._selectMonthYear("year",null,null,18):C._selectMonthYear("year",null,null,1);break;case"prevPop":C._changeYear(-12,B);break;case"nextPop":C._changeYear(12,B);break;case"closePop":l.call(C);break;default:C._closeYMerPop(true);x=Number(x);if(D.attr("panel")==="y"){C._selectMonthYear("year",x,B)}else{C._selectMonthYear("month",x,B)}}}else{if(A==="INPUT"||A==="SPAN"){D=D.children("input").size()?D.children("input"):D;C._closeYMerPop(false,D);D.blur()}else{l.call(C)}}},_timerEventHandle:function(z,v,y){z.stopPropagation();var w=this,x=f(y),C=x[0].nodeName,A;if(C==="SPAN"){A=x.attr("val");switch(A){case"up":w._selectTime(x,1);break;case"down":w._selectTime(x,-1);break}l.call(w)}else{if(C==="INPUT"){x.blur();l.call(w,x.next())}else{if(C==="A"){var B=x.parents("div.C_CR_Timer_pop").prev();A=+x.attr("val");B.val(A<10?"0"+A:A);l.call(w)}}}},_btnEventHandle:function(B,x,C){B.stopPropagation();var D=this,w=D.options,E=f(C),z=E.attr("val"),A;l.call(D);switch(z){case"close":D.hide();break;case"cur":var y=new Date(),v=b(y,w.format);if(w.curModel[0]==="quarter"){D._cachingDate([v[2],Math.floor(v[3]/3)+1,1])}else{if(w.curModel[0]==="week"){D._cachingDate([v[2],o.Date.getOnWeek(new Date(v[0]),w.iso8601,w.sunday_first).week])}else{D._cachingDate([v[2],v[3],v[4]])}}break;case"clear":r.call(D,null,"clear",null);w.selIndex=0;D.setValue(w.isrange?["",""]:[""]);break;case"ok":if(w.curModel[0]==="date"){A=b(new Date,w.format);w.cache.selDate=/[y|M|q|w|d]/.test(w.format)?w.cache.selDate:w.isrange?[A,A]:[A]}D._export()}},_selectTag:function(z){var w=this,B=w.options,C=B.pEl.children(".C_CR_main_wrap"),y=C.children(".C_CR_main_loading"),x=C.children(".C_CR_main_panel[val="+z[0]+"]"),A=x.siblings(),v=x.attr("isBuild")==="true";B.cache.selDate=f.extend(true,[],B.selDate);B.format=B.formatList[z[0]];A.hide();y.show();if(z[0]!="all"&&z[0]!="date"){g(B.pEl,"disMonth")}else{g(B.pEl,"undo")}if((!v)){w._buildTemplate(x,z[2],B);x.attr("isBuild","true")}else{if(v&&!w._isReady("mainPanel")){w._update(w._buildUpdateDate())}else{r.call(w,null,"clear",null)}}y.hide();x.show();i.call(w);if(!B.isBuild){if(B.model==="all"||(z[0]==="date"&&/[h|m|s]/.test(B.format))){w._buildTemplate(B.pEl.children(".C_CR_Timer_box"),"timeFrame",B)}}m.call(w);if(B.model==="all"){p(B);q(B)}w._setYM(z[0]);w._scanFocus();B.isBuild&&l.call(w)},_selectMonthYear:function(F,v,D,x){var G=this,w=G.options,C,z,E=[],A=F==="month"?1:0;z=f("table.C_CR_YMer",w.pEl);if(D!=undefined&&D!=null){y(D)}else{for(var B=0;B<z.length;B++){y(B)}}G._update(E,D);function y(H){C=z.eq(H).attr("val").split("|");C[A]=x!=undefined?Number(C[A])+x:v;E.push([Number(C[0]),Number(C[1])])}},_selectTime:function(w,v){var y,x,A,z;x=w.parents(".C_CR_Timer_op").eq(0);A=x.prev().children("input");y=+f.trim(A.val());z=y+v;if(A.attr("name")==="timer_h"){x.children("a").removeClass("C_CR_Timer_disable");if(z>23||z<0){w.parent().addClass("C_CR_Timer_disable");return}}else{x.children("a").removeClass("C_CR_Timer_disable");if(z>59||z<0){w.parent().addClass("C_CR_Timer_disable");return}}z=String(z);A.val(z.length===1?(0+z):z)},_cachingDate:function(C,A){var v=this,z=v.options,B=null,w=null,y=null;if(!z.isrange){v._clear(z.okbtn)}else{z.selIndex===2&&v._clear(z.okbtn)}switch(z.curModel[0]){case"date":B=v._getTime(z.selIndex);w=new Date(C[0],C[1],C[2],B[0],B[1],B[2]);break;case"year":w=new Date(C[0],0,1);break;case"month":w=new Date(C[0],C[1],1);break;case"quarter":w=new Date(C[0],(C[1]-1)*3,1);break;case"week":w=o.Date.getWeekRange(C[0],C[1],z.iso8601,z.sunday_first)[0]}y=b(w,z.format);z.cache.selDate[z.selIndex]=y;if(z.isrange){z.selIndex=0;for(var x=0;x<z.cache.selDate.length;x++){if(z.cache.selDate[x]===null){z.selIndex=x;break}else{z.selIndex++}}}else{z.selIndex++}v._focus([w],"SEL",A);z.okbtn||v._export()},_changeYear:function(w,x){var v=this,z=v.options,A=z.yearPop[z.curModel[1]],y;if(w>0){y=u(A[x][A[x].length-1]+1,w)}else{if(w<0){y=u(A[x][0]-1,w)}}z.yearPop[z.curModel[1]][x]=y;v._drawYearPop(z.curModel[1],x)},_getTime:function(w){var v=this,z=v.options,A=[],y=null,x=f("table.C_CR_Timer",z.pEl).eq(w);y=x.find(":text");A.push(+y.eq(0).val()||0,+y.eq(1).val()||0,+y.eq(2).val()||0);return A},_update:function(z,w){var v=this,y=v.options,x;x=y.pEl.children(".C_CR_main_wrap").children(".C_CR_main_panel[val="+y.curModel[0]+"]");if(w!=undefined){v._buildData(z,w)}else{v._buildData(z)}v._buildTemplate(x,y.curModel[2],y);v._setYM(y.curModel[0]);v._scanFocus()},_setYM:function(x){var w=this,z=w.options,A;A=z[x+"Panel"];for(var y=0,v=A.length;y<v;y++){a(z.pEl,{year:A[y].year,month:A[y].month!=null?A[y].month+1:""},y)}},_setTime:function(w){var B=this,v=B.options,C,y,A,x,D;C=f("table.C_CR_Timer",v.pEl);for(var z=0;z<C.length;z++){y=C.eq(z).find(":text");if(!w[z]){continue}A=w[z][5];x=w[z][6];D=w[z][7];y.eq(0).val(A<10?"0"+A:A);y.eq(1).val(x<10?"0"+x:x);y.eq(2).val(D<10?"0"+D:D)}},_closeYMerPop:function(A,z){var w=this,y=w.options,v=null,x=null,B=z?z.parents(".C_CR_YMer_item"):null;l.call(w,A?null:B.children(".C_CR_YMer_pop"),"ym");if(B){v=B.attr("pop");x=B.attr("popIndex")}if(v==="year"){if(x!=""&&!w._isReady("yearPop",x)){y.yearPop=f.extend(true,{},y.cache.yearPop);setTimeout(function(){w._drawYearPop(y.curModel[1],x)},50)}}},_scanFocus:function(){var v=this,y=v.options,w=y.inputEl.index(v.eventEl),z=[];for(var x=0;x<y.cache.selDate.length;x++){y.cache.selDate[x]&&z.push(y.cache.selDate[x][0])}v._focus(z,"SEL");v._focus([new Date()],"CUR")},_focus:function(B,y,A){var v=this,z=v.options,x=[];for(var w=0;w<B.length;w++){switch(z.curModel[0]){case"date":B[w]=[B[w].getFullYear(),B[w].getMonth(),B[w].getDate()];break;case"year":B[w]=[B[w].getFullYear()];break;case"month":B[w]=[B[w].getFullYear(),B[w].getMonth()];break;case"quarter":B[w]=[B[w].getFullYear(),Math.floor(B[w].getMonth()/3)+1];break;case"week":B[w]=[B[w].getFullYear(),o.Date.getOnWeek(B[w]).week]}x.push(B[w])}r.call(v,A,y,x)},_clear:function(x){var v=this,w=v.options;if(!x){w.inputEl.val("");w.value=w.isrange?["",""]:[""];w.selDate=w.isrange?[null,null]:[null]}w.cache.selDate=w.isrange?[null,null]:[null];w.selIndex=0;r.call(v,null,"clear",null)},_export:function(){var w=this,A=w.options,C,B=null,x,v=true;if(A.isrange){A.cache.selDate=s(A.cache.selDate);z();C=[A.cache.selDate[0]?A.cache.selDate[0][1]:"",A.cache.selDate[1]?A.cache.selDate[1][1]:""];for(var y=0;y<A.cache.selDate.length;y++){if(!A.cache.selDate[y]){v=false}}v=A.okbtn?true:v}else{z();C=A.cache.selDate[0]?A.cache.selDate[0][1]:""}w.setValue(C);if(v){w.hide()}function z(){var D=A.cache.selDate.length;for(var E=0;E<D;E++){if(!A.cache.selDate[E]){continue}B=w._getTime(E);x=A.cache.selDate[E];x=new Date(x[2],x[3],x[4],B[0],B[1],B[2]);x=b(x,A.format);A.cache.selDate[E]=x}}},_isReady:function(E,C){var H=this,w=H.options,I=w.curModel[0],D,B,y,v;if(E==="mainPanel"){y=w.cache.selDate;v=w[w.curModel[3]];D=G(w.mindate[1],n.call(H,"mindate"))||G(w.maxdate[1],n.call(H,"maxdate"));for(var x=0;x<y.length;x++){if(y[x]===null){B=true;continue}for(var A=0;A<v.length;A++){switch(I){case"date":B=y[x][2]===v[A].year&&y[x][3]===v[A].month;break;case"year":for(var z=0;z<v[A].data.length;z++){if(y[x][2]===v[A].data[z]){B=true;break}else{B=false}}break;case"week":var F=o.Date.getOnWeek(y[x][0],w.iso8601,w.sunday_first);B=F.year===v[A].year;break;default:B=y[x][2]===v[A].year}if(B){break}}if(!B){break}}B=B&&!D}else{if(E==="yearPop"){y=w[w.curModel[3]][C].year;v=w.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y:eq("+C+")>table").attr("val")||"none";B=f.trim(v).indexOf(y+"")>=0}}return B;function G(K,J){K=K?K.getTime():K;J=J?J.getTime():J;return K!=J}},show:function(){var v=this,w=v.options;if(w.disable){return false}h&&h.hide();if(w.isBuild){w.selDate=k(f.extend([],w.selDate),w.format);w.cache.selDate=f.extend([],w.selDate);if(!v._isReady("mainPanel")){v._update(v._buildUpdateDate())}else{v._scanFocus()}w.pEl.show()}else{v._draw();w.pEl.show();v._selectTag(w.curModel)}if(!w.isBuild||w.model==="all"){p(w)}q(w);h=v;f(document).unbind("click.calender").one("click.calender",function(x){x.stopPropagation();h&&h.hide();h=null});return v},hide:function(){var v=this,w=v.options;if(w.disable||!w.pEl){return v}w.el.attr("isShow","false");l.call(v);w.pEl.hide();w.inputEl.parents(".C_CR_calInput_bd").removeClass(w.inputFocusClass);if(w.inputEl.val()===""){w.inputEl.val(w.emptytext).addClass("C_CR_calInput_empty")}r.call(v,null,"clear",null);h=null;return v},setValue:function(z,C){var v=this,x=v.options,y=null,A=[],B=f.extend({},x.formatList);if(x.disable){return v}z=f.type(z)==="number"?z+"":z;z=z||null;z=f.type(z)!=="array"?[z]:z;x.value=[];if(z.length!=0){y=k(f.extend(true,[],z),x.format);x.selDate=f.extend(true,[],y);x.cache.selDate=f.extend(true,[],y)}B.quarter="yyyy???q????";B.week="yyyy???w??";for(var w=0;w<y.length;w++){x.value.push(y[w]?y[w][1]:"");A.push(y[w]?o.Date.format(y[w][0],B[x.curModel[0]]):"")}A=A.join("~");x.inputEl.eq(0).val(/^.*~$/.test(A)?(A=A.replace("~","")):A);if(A===""){x.inputEl.val(x.emptytext).addClass("C_CR_calInput_empty")}else{x.inputEl.removeClass("C_CR_calInput_empty")}if(typeof x.on_change==="function"&&x.isBuild){x.on_change.apply(v,f.extend(true,[],y))}C||v._triggerHandler("change");return v},getValue:function(w){var x=this,z=x.options,A=[];if(z.disable){return""}w=w?w:"string";var v=z.isrange?2:1;for(var y=0;y<v;y++){if(!z.value[y]){A[y]=w==="string"?"":null;z.value[y]=w==="string"?"":null;continue}if(w==="date"){A[y]=o.Date.parse(z.value[y],z.format)}else{A[y]=z.value[y]}}return z.isrange?A:A[0]},getDateRange:function(w){var D=this,v=D.options,A=f.extend(true,[],v.selDate),B=[],y,C;w=w?w:"date";C=w==="date"?null:"";for(var z=0;z<A.length;z++){if(!(y=A[z])){B.push([C,C]);continue}switch(v.curModel[0]){case"month":B.push([x(new Date(y[2],y[3],1,0,0,0,0)),x(new Date(y[2],y[3],new Date(y[2],y[3]+1,0).getDate(),23,59,59,0))]);break;case"year":B.push([x(new Date(y[2],0,1,0,0,0,0)),x(new Date(y[2],11,31,23,59,59,0))]);break;case"quarter":B.push([x(new Date(y[2],y[3],1,0,0,0,0)),x(new Date(y[2],y[3]+2,new Date(y[2],y[3]+3,0).getDate(),23,59,59,0))]);break;case"week":B.push([x(new Date(y[2],y[3],y[4],0,0,0,0)),x(new Date(y[2],y[3],y[4]+6,23,59,59,0))]);break;default:B.push([x(new Date(y[0].getTime())),x(new Date(y[2],y[3],y[4],23,59,59,0))])}}if(B.length===1){return v.curModel[0]==="date"?B[0][0]:B[0]}else{return[B[0][0],B[1][1]]}function x(E){if(w==="date"){return E}else{return o.Date.format(E,"yyyy-MM-dd hh:mm:ss")}}},setWidth:function(x){var v=this.options.el.children("div"),w=this.options.width;if(x==null||x===undefined||x===""||typeof x==="object"){return}if(typeof x==="string"&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(x)){w=x}else{w=x+"px"}v.css({width:x})},setReadonly:function(v){v=typeof v==="undefined"?true:v;var w=this,x=w.options,y=v?"addClass":"removeClass";if(v===x.readonly){return}x.el.children(".C_CR_calInput_bd")[y](x.inputDisClass);x.readonly=v},destroy:function(){var v=this,w=v.options;v._super();w.el.unbind().empty();w.pEl&&w.pEl.remove()},setTextMode:function(){var w=this,x=w.options,v=w.getLabelValue();if(x.isrange){x.el.eq(0).html(v[0]+"~"+v[1])}else{x.el.eq(0).html(v[0])}},getLabelValue:function(){var x=this,z=x.options,w=[],v,A=/^(?:\{.*\}|\[.*\])$/;v=f.type(z.value);if(v==="string"){z.value=A.test(z.value)?f.parseJSON(z.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[z.value]}for(var y=0;y<z.value.length;y++){v=f.type(z.value[y]);if(v==="string"){w.push(z.value[y])}else{if(v==="date"){w.push(b(z.value[y],z.format)[1])}}}return w},onInValid:function(y,z){var v=this,x=v.options;x.tipTxt=x.tipTxt===null?x.el.attr("tip"):x.tipTxt;x.el.attr("tip",z);for(var w=0;w<x.value.length;w++){if(!x.value[w]){x.el.children(".C_CR_calInput_bd").addClass(x.inputErrClass)}}},onValid:function(x){var v=this,w=v.options;w.tipTxt=w.tipTxt===null?w.el.attr("tip"):w.tipTxt;w.el.attr("tip",w.tipTxt||"");w.el.children(".C_CR_calInput_bd").removeClass(w.inputErrClass)}});function k(z,x){var y=null;for(var w=0,v=z.length;w<v;w++){y=f.type(z[w]);if(y==="string"){z[w]=b(o.Date.parse(z[w],x),x)||null}else{if(y==="date"){z[w]=b(z[w],x)||null}}}return z}function t(w,z,B){var y=[],A,C=new Date(w.getTime()),v=B?C.getDay()-1:(C.getDay()||7)-1;for(var x=0;x<6;x++){y.push([o.Date.getOnWeek(new Date(C.getTime()),z,B).week,0]);C.setDate(C.getDate()+(7-v));v=0}return y}function j(N){var G=this,E=G.options,z=[],K=0,x=0,D=[],M,I,w,C,A,J,B,F=N.getFullYear(),v=N.getMonth();E.mindate[1]=n.call(G,"mindate");E.maxdate[1]=n.call(G,"maxdate");C=new Date(F,v,1).getDay();A=new Date(F,v,0).getDate();J=new Date(F,v+1,0).getDate();E.sunday_first||C--;if(C<0){C=6}var y=v-1<0?true:false,L=v+1>11?true:false;for(M=0;M<C;M++){w=new Date(y?F-1:F,y?11:v-1,A,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([A,I,w.getFullYear(),w.getMonth()]);A--}z.reverse();for(M=1;M<=J;M++){w=new Date(F,v,M,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([M,I,F,v])}for(M=1;M<=42-J-C;M++){w=new Date(L?F+1:F,L?0:v+1,M,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([M,I,w.getFullYear(),w.getMonth()])}B=t(N,E.iso8601,E.sunday_first);for(M=0;M<48;M++){if(M!=0&&M%8!=0){D.push(z[K]);K++}else{D.push(B[x]);x++}}return{year:F,month:v,date:D};function H(Q,O,P){if(!O){return false}if(P==="mindate"){return Q.getTime()<O.getTime()}else{return Q.getTime()>O.getTime()}}}function u(y,w){var v=[];if(w>0){for(var x=0;x<w;x++){v.push(y);y++}}else{for(var x=0;x<-w;x++){v.push(y);y--}v.reverse()}return v}function c(v){var x=["1","2","3","4","5","6","7","8","9","10","11","12"],w=[];v=v||[0,11];for(var y=v[0];y<=v[1];y++){w.push([y,x[y]])}return w}function d(z,y,A){var w=[],x;for(var v=31;v>0;v--){x=o.Date.getOnWeek(new Date(z,11,v),y,A).week;if(x!=1){break}}for(v=1;v<=x;v++){w.push([v,1])}return w}function b(v,w){if(!v){return null}var x=[];x.push(v);x.push(o.Date.format(v,w));x.push(v.getFullYear(),v.getMonth(),v.getDate());x.push(v.getHours(),v.getMinutes(),v.getSeconds());return x}function s(w){if(!w||w.length<2||!w[0]||!w[1]){return w}var v;if(w[0][0]>w[1][0]){v=w[1];w[1]=w[0];w[0]=v}return w}function n(B){var I=this,v=I.options,G,y=v[B][0],F=v.nocurrent;if(!y){return null}var x=/^([\+\-]{1})([0-9]{1,})([yMd]{1})$/,z=[null,null,null];if(typeof y==="string"){if(/[\+\-]{1}[0-9]{1,}[yMd]{1}/.test(y)){var H=y.split(","),D,C,E=[0,0,0],w=[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()];for(var A=0;A<H.length;A++){D=H[A].match(x);C="yMd".indexOf(D[3]);z[C]+=(D[1]==="+"?1:-1)*(+D[2])+w[C]}for(A=0;A<z.length;A++){E[A]=z[A]===null?0:1}switch(E.join("-")){case"1-0-0":y=B==="mindate"?new Date(z[0],0,1):new Date(z[0],11,31);break;case"1-1-0":y=B==="mindate"?new Date(z[0],z[1],1):new Date(z[0],z[1],new Date(z[0],z[1]+1,0).getDate());break;case"1-1-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(z[0],z[1],z[2]);break;case"0-1-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(w[0],z[1],z[2]);break;case"0-0-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(w[0],w[1],z[2]);break;case"0-1-0":y=B==="mindate"?new Date(w[0],z[1],1):new Date(w[0],z[1],new Date(z[0],z[1]+1,0).getDate());break;case"1-0-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(z[0],w[1],z[2]);break}}else{if(G=f(y).data("uitype")){if(!(y=G.getValue("date"))){return null}F&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}else{if(!/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}|[0-9]{4}\-[0-9]{2}|[0-9]{4}$/.test(y)){return null}y=o.Date.parse(y,"yyyy-MM-dd");F&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}}}else{y=f.type(y)==="date"?y:null;F&&y&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}return new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0,0)}function g(v,z){var x=v.children(".C_CR_YM_wrap");var y="C_CR_tx_wrap_disable";if(z==="hide"){x.hide()}else{switch(z){case"disYear":x.find("span.C_CR_YMer_tx_y").addClass(y).parent().children(".C_CR_DisMark").show();break;case"disMonth":var w=x.find("span.C_CR_YMer_tx_m").addClass(y).parent().children(".C_CR_DisMark").show();break;case"dis":x.find("span.C_CR_YMer_tx_wrap").addClass(y).parent().children(".C_CR_DisMark").show();break;case"unDis":x.find("span.C_CR_YMer_tx_wrap").removeClass(y).parent().children(".C_CR_DisMark").hide();break;default:x.find("span.C_CR_YMer_tx_wrap").removeClass(y).parent().children(".C_CR_DisMark").hide()}x.show()}}function a(v,w,y){var x=f("table.C_CR_YMer:eq("+y+")",v).attr("val",w.year+"|"+(w.month-1)).find("input.C_CR_tx");x.eq(0).val(w.year);x.eq(1).val(w.month)}function l(z,x){var v=this,y=v.options,w;if(!y.activePop&&!z){return}if(y.activePop){y.activePop.hide();y.activePop.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)").removeClass("C_CR_tx_wrap_focus");y.activePop.parent(".C_CR_Timer_tx_wrap").removeClass("C_CR_tx_wrap_focus")}if(z){z.show();if(x==="ym"){w=z.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)")}else{w=z.parent(".C_CR_Timer_tx_wrap")}w.addClass("C_CR_tx_wrap_focus");y.activePop=z}}function i(){var v=this,A=v.options,z=A.pEl.children(".C_CR_OPBar_wrap").children("a").show(),x=z.filter('[val^="ok"]'),y=z.filter('[val^="cur"]'),w={date:"??&nbsp;??",month:"??&nbsp;??",year:"??&nbsp;??",quarter:"??????",week:"??&nbsp;??"};y.html(w[A.curModel[0]]);A.okbtn||x.hide()}function m(){var v=this,x=v.options;var w=x.pEl.children(".C_CR_Timer_box");if(x.curModel[0]==="date"&&/[h|s|m]/.test(x.format)){w.show()}else{w.hide()}}function r(B,z,C){var v=this,A=v.options,x=A.curModel[0],w;switch(z){case"CUR":w="C_CR_main_cur";break;case"SEL":w="C_CR_main_cur_d";break;case"clear":f("td.C_CR_main_cur_d",A.pEl).removeClass("C_CR_main_cur_d");return}if(B){B.parent("td").addClass(w)}else{for(var y=0;y<C.length;y++){f("#C_CR_"+x+"_"+C[y].join("_")+"_"+A.uuid).parent("td").addClass(w)}}}function p(y){var v=y.panel;var x=209*v;y.pEl.css("width",x+3*(y.panel-1));var w=y.pEl.outerWidth();var z=y.pEl.outerHeight();if(o.Browser.isIE6||o.Browser.isQM){y.pEl.find("iframe").css({width:w,height:z})}}function q(v){var y=f(window),x=v.el.children(".C_CR_calInput_bd"),w=x.offset(),E=x.outerHeight(),z=x.outerWidth(),A=y.width(),B=y.height(),H=y.scrollLeft(),G=y.scrollTop(),F=v.pEl.outerWidth(),C=v.pEl.outerHeight(),D={};if(w.left+F>A+H){if(w.left+z>F){D.left=z+w.left-F}else{if(A>F||A<F){D.left=0}}}else{D.left=w.left}if(w.top+E+C>B+G){if(w.top-C>0&&w.top-G){D.top=w.top-C}else{if(w.top<B+G-w.top-E){D.top=w.top+E}}}else{D.top=w.top+E}v.pEl.css(D);if(!v.isBuild){v.isBuild=true}}})(window.comtop.cQuery,window.comtop);(function(a,b){cui.calculate=cui.calculate||{};cui.calculate.setAutoCalculate=function(d,f,g){for(var c=0;c<g.length;c++){var h=g[c];cui(h).bind("change",function(){var i=f();cui(d).setValue(i)})}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.CheckboxGroup=b.UI.Base.extend({options:{uitype:"CheckboxGroup",cls:"checkbox-group",name:"",value:[],checkbox_list:[],readonly:false,border:false,color:"#FF7D21",direction:"horizontal",textmode:false,br:[],on_change:null},_init:function(){this.$container=a(this.options.el).addClass(this.options.cls).addClass("cui");this.readonly=this.options.readonly;this._getCheckboxList()},_create:function(){var d=this.options,c=this;this.$container.html(this._buildTemplateStr("checkboxGroup",d));this.$checkboxList=this.$container.find("input[type=checkbox]");c.$checkboxList.on("change",c,c._onChange);if(d.readonly===true){this.setReadonly(true)}else{var f=d.readonly_value_list;if(f.length){this.setReadonly(true,f)}}if(d.value!=null&&d.value.length>0&&d.value!=undefined&&d.value!="null"&&d.value!="undefined"){this.setValue(d.value,true)}if(d.border===true){this.$container.addClass("hasborder")}this.$container.data("input_tip",this.$container.attr("tip"))},setDatasource:function(c){this.options.checkbox_list=c;this._getCheckboxList()},_getCheckboxList:function(){var f=this.options;var t=f.readonly_value_list=[];var l=f.checkbox_list;var s=a.type(l);if(s==="array"&&l.length>0){for(var p=0,n=l.length;p<n;p++){if(l[p].readonly!==undefined){t.push(l[p].value)}}return}else{if(s==="function"){l(this);return}}var r=a.trim(this.$container.text()).split(/\s+/g);var h=this.$container.find("input[type=checkbox]");var m=[];for(var p=0;p<h.length;p++){var d=h.eq(p);var c=d.attr("name");if(c&&c!=""){f.name=c}var q=d.attr("readonly");var g=d.val();var k={text:r[p],value:g,color:d.attr("color")};if(q!==undefined){t.push(g);k.readonly=q}m.push(k)}f.checkbox_list=m},_onChange:function(d){var c=d.data;var f=c.options;c._setHightlight();c._triggerHandler("change");if(f.on_change!=null){f.on_change.call(c,c.getValue())}},setValue:function(c,g){if(!c||c.length<=0){this.unSelectAll()}else{this.$checkboxList.attr("checked",false);for(var d=0;d<c.length;d++){var f=c[d];this.$checkboxList.filter("[value="+f+"]").attr("checked",true)}}this._setHightlight();g||this._onChange({data:this})},getValue:function(){var c=[];this.$checkboxList.filter(":checked").each(function(){c.push(a(this).val())});return c.length==0?null:c},getValueString:function(c){var d=this.getValue();return this._listToString(d,c)},getText:function(){var c=[];this.$checkboxList.filter(":checked").each(function(){c.push(a.trim(a(this).parent().text()))});return c.length==0?null:c},getTextString:function(c){var d=this.getText();return this._listToString(d,c)},_listToString:function(g,f){if(g==null||g.length==0){return""}f=f||"??";var c="";for(var d=0;d<g.length;d++){c+=g[d];if(d!=g.length-1){c+=f}}return c},selectAll:function(){this.$checkboxList.attr("checked",true);this._setHightlight()},unSelectAll:function(){this.$checkboxList.attr("checked",false);this._setHightlight()},setReadonly:function(d,c){if(c===undefined){this.readonly=d}if(d===true){this._addReadOnly(c)}else{this._removeReadOnly(c);this._setHightlight()}},_addReadOnly:function(d){var c=this;var k=a.type(d);if(k==="undefined"){this.$checkboxList.each(function(j,l){a(l).off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked}})}else{if(k==="array"){for(var g=0,f=d.length;g<f;g++){var h=this.$checkboxList.filter("[value="+d[g]+"]");h.off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked}}}else{new Error("valueList error")}}},_removeReadOnly:function(d){var c=this;var h=a.type(d);if(h==="undefined"){this.$checkboxList.each(function(j,k){a(k).on("change",c,c._onChange).parent().removeClass("readonly").end().removeAttr("readonly")[0].onclick=null})}else{if(h==="array"){for(var g=0,f=d.length;g<f;g++){this.$checkboxList.filter("[value="+d[g]+"]").parent().removeClass("readonly").end().on("change",c,c._onChange).removeAttr("readonly")[0].onclick=null}}else{new Error("valueList error")}}},isReadonly:function(d){if(d===undefined){return this.readonly}else{var c=this.$checkboxList.filter("[value="+d+"]").attr("readonly");if(c!==undefined){return true}else{return false}}},_setHightlight:function(){var c=this;this.$container.find("label:not(.readonly)").css({fontWeight:"normal",color:"black"});this.$checkboxList.filter(":checked").each(function(){var d=a(this).closest("label");if(!d.hasClass("readonly")){if(d.data("color")){d.css({color:d.data("color"),fontWeight:"900"})}else{d.css({color:c.options.color})}}})},onInValid:function(f,d){var c=this.$container;c.css({border:"1px solid red"});if(!this.options.border){c.css({padding:"2px 5px"})}if(typeof(c.attr("tip"))!="undefined"){c.attr("tip",d)}},onValid:function(d){var c=this.$container;if(this.options.border){c.css({border:"1px solid #7F9DB9"})}else{c.css({border:"none",padding:"3px 5px"})}c.removeAttr("tip")},getLabelValue:function(){this.$container.css({padding:"0"});var l=this.options,g=l.checkbox_list,k=l.value,d="";if(g&&k){for(var f=0;f<g.length;f++){var h=g[f];for(var c=0;c<k.length;c++){if(h.value==k[c]){d+=h.text+" ";break}}}}return d}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ClickInput=b.UI.Base.extend({options:{uitype:"ClickInput",name:"",value:"",emptytext:"",width:"",maxlength:-1,readonly:false,icon:"",iconwidth:"",enterable:false,editable:false,textmode:false,on_iconclick:null,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},relation:"data-relation-value",tipPosition:".click_input_base",_init:function(){var c=this.options;c.id=b.guid();if(c.name==""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this.options;this.$inputWrap=a("#"+c.id+"_wrap");this.$inputBox=a("#"+c.id+"_box");this.$input=a("#"+c.id);this.$iconspan=a("#"+c.id+"_icon");if(c.icon!=""){if(c.icon.indexOf("/")!=-1||c.icon.indexOf(".")!=-1){this.$iconspan.css({backgroundImage:"url("+c.icon+")"})}else{this.$iconspan.addClass(c.icon)}}if(c.width!=""){this.setWidth(c.width)}if(c.readonly){this.setReadOnly(true)}if(c.value==""&&c.emptytext!=""){this.$input.val(c.emptytext);this.$input.addClass("input_tipcolor")}this.setEditAble(c.editable)},setWidth:function(c){this.$inputWrap.css({width:c})},setValue:function(d,g){var f=this.$input,c=this.options;d=(d==null||d==undefined)?"":d;if(a.type(d)=="string"){f.removeAttr(this.relation);f.val(d)}else{if(a.type(d)=="array"){if(d.length>0){f.val(d[0]);d.splice(0,1);f.attr(this.relation,d.join("|"))}}}if((d!=""&&d!=null)||(a.type(d)=="array"&&d.length>0)){f.removeClass("input_tipcolor")}else{if(c.emptytext!=""){f.val(c.emptytext);f.addClass("input_tipcolor")}}g||this._triggerHandler("change")},getValue:function(){var h=this.$input;var f=this.options;var g=a.trim(h.val());var d=h.attr(this.relation);var c=f.emptytext;if(g===c){return""}else{if(d){g=g+"|"+d;return g.split("|")}else{return g}}},getLabelValue:function(){var c=this.options.value;if(a.type(c)=="string"){return c}else{if(a.type(c)=="array"){if(c.length>0){return c[0]}else{return""}}}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var f=this.options;var h=this.$input;var g=this.$inputBox;f.readonly=c;if(c){h.attr("readonly",true);h.addClass("input_garybg");g.addClass("input_garybg");this._removeEmptyText(true)}else{if(f.editable){h.attr("readonly",false)}h.removeClass("input_garybg");g.removeClass("input_garybg");this._removeEmptyText(false)}this.$iconspan.css({display:c?"none":"inline-block"});var d="22px";if(f.iconwidth!=""){d=(parseFloat(f.iconwidth)+5)+"px"}this.$inputBox.css({marginRight:c?0:d})},setEditAble:function(c){var d=this.options;var f=this.$input;if(d.readonly){return false}d.editable=c;if(c){f.attr("readonly",false)}else{f.attr("readonly",true)}},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!=""){f.removeClass("input_tipcolor")}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(!c.editable||c.readonly){this.$input.blur();return false}this._removeEmptyText(true);this.$inputBox.addClass("input_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(g){var c=this.options;var f=this.$inputBox;if(c.readonly){return false}this._removeEmptyText(false);f.removeClass("input_focus");this._textCounter();var d=this.getValue();switch(a.type(d)){case"string":if(d!==""&&d!=null){this._triggerHandler("change")}break;case"array":if(d.length!==0){this._triggerHandler("change")}break}this._customHandler("on_blur",g)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}if(c.enterable&&d.keyCode==13){this._iconclickHandler(d);return false}this._customHandler("on_keydown",d)},_iconclickHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_iconclick",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)=="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var g=this.$input;var d=this.options.emptytext;var c=this.getValue();if(d==""||c.length!=0){return}if(f){g.val("");g.removeClass("input_tipcolor")}else{g.val(d);g.addClass("input_tipcolor")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength))}else{return false}}return false},onInValid:function(g,f){var c=this,d=c.options;c.$inputBox.addClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}c.$inputBox.removeClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Customform=b.UI.Base.extend({options:{uitype:"Customform",columnCount:2,datasource:[],classname:"customform"},_create:function(){var d=this.options.datasource,j,h,f,k,g,c;window.validater=window.validater||cui().validate();for(g=0;g<d.length;g++){j=d[g];f=j.uitype||j.uiType;h=f.charAt(0).toLowerCase()+f.substring(1);cui(j.el)[h](j)}for(g=0;g<d.length;g++){j=d[g];this._bindData(a(j.el),j.databind)}if(!b.UI.scan.textmode&&!comtop.UI.scan.disable){for(g=0,c=d.length;g<c;g++){j=d[g];k=a(j.el).data("uitype");if(k&&!k.options.textmode&&!k.options.disable){this._bindValidate(k.options.el,j.validate);this._bindTip(k.options.el,j,k.tipPosition||k.options.el)}}}},_bindData:function(g,c){if(c){var f=c.split(".");var i=f[0];var h=f[1];var j=window[i];if(!j){j=window[i]={}}if(j.nodeName){alert("???"+i+"????????ID????????????;");return false}var d=cui(j).databind();d.addBind(g,h)}},_bindValidate:function(f,c){if(c){switch(a.type(c)){case"array":for(var d=0;d<c.length;d++){if(c[d].rule){window.validater.add(cui(f),c[d].type,c[d].rule)}else{window.validater.add(cui(f),c[d].type)}}break;case"string":window.validater.add(cui(f),c)}}},_bindTip:function(d,f,c){c=a(c,d);if(cui(d).options.textmode!=undefined&&f.tip==undefined){d.attr("tip","");f.tip=""}if(f.tip!=undefined){d.attr("tip",f.tip);cui.tip(c,{trigger:f.trigger,tipEl:d})}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Dialog=b.UI.Base.extend({options:{uitype:"Dialog",title:"",modal:true,opacity:0.7,canClose:true,autoClose:false,width:350,height:100,left:"",top:"",minWidth:100,minHeight:50,draggable:true,animate:false,onClose:null,beforeClose:null,src:"",buttons:[],dragClass:".dialog-titlebar",closeBtnClass:".dialog-close-btn",contentClass:".dialog-content",footerClass:".dialog-ft"},hideOnBtnClick:false,_init:function(c){this.options.uid="dialog_"+comtop.guid()},_create:function(d){var f=this.options,c=this;if(f.modal===true){this.$overlay=b.UI.Overlay()}a("body").append(this._getView());this.$dialog=a("#"+f.uid);this._setContent();if(f.left!==""||f.top!==""){f.draggable=false;this.$dialog.find(f.dragClass).css("cursor","default")}if(typeof f.left==="string"&&typeof f.top==="string"){a(window).resize(function(){c._setPosition(c._calPosition())});a(window).scroll(function(){c._setPosition(c._calPosition())})}this._bindEvent();this._buildButtons(f.buttons)},_getView:function(){return this._buildTemplateStr("dialog",this.options)},_bindEvent:function(){var d=this.options,c=this;if(d.draggable===true){this.$dialog.find(d.dragClass).drag("start",function(i,g){var f=a(g.drag);if(!f.data("overlay")){var h=a("<div></div>");var l=comtop.guid();h.attr("id",l).css({position:"absolute",top:0,left:0,width:"100%",height:d.height,background:"#000",opacity:0});f.next().css("position","relative").append(h);f.data("overlay","#"+l)}else{f.next().css("position","relative");a(f.data("overlay")).show()}var j=a(document).scrollTop(),k=a(document).scrollLeft();g.limit={left:k,top:j};g.limit.bottom=g.limit.top+a(window).height()-a(this).parent().outerHeight(true)-1;g.limit.right=g.limit.left+a(window).width()-a(this).parent().outerWidth(true)-1}).drag(function(g,f){a(this).parent().css({top:Math.min(f.limit.bottom,Math.max(f.limit.top,f.offsetY)),left:Math.min(f.limit.right,Math.max(f.limit.left,f.offsetX))})}).drag("end",function(g,f){a(f.drag).next().css("position","");a(a(f.drag).data("overlay")).hide()})}else{this.$dialog.find(d.dragClass).css("cursor","default")}if(d.canClose){this.$dialog.find(d.closeBtnClass).bind("click",function(){if(d.beforeClose&&d.beforeClose(c)===false){return false}c.hide(false);return false})}},_buildButtons:function(m){var c=this.options,f=this.$dialog.find(c.footerClass).html(""),n=this;if(!m||(a.type(m)==="array"&&m.length<=0)){f.remove();return}var d=[],l=[],h,j=[],k,g;for(h=0;h<m.length;h++){m[h]=a.extend(true,{name:"???",handler:null,disable:false,hide:false},m[h]);d.push(m[h]);l.push("dialog_btn_"+b.guid());k=d[h].hide?"btn-normal-hide":"";g=d[h].disable?"btn-normal-dis":"";j.push('<a href="javascript:;" class="btn-normal ',g," ",k,'" id="',l[h],'">',d[h].name,"</a>")}f.append(j.join(""));for(h=0;h<l.length;h++){f.find("#"+l[h]).data("btn",d[h]).click(function(){n.hideOnBtnClick?n.hide():null;var i=a(this).data("btn");if(typeof i.handler==="function"&&i.disable===false){i.handler.call(n)}})}},_setContent:function(){var f=this.options;if(f.src!=null&&f.src!=""){var c="dialog_iframe_"+b.guid();this.ifmsrc=f.src;var d='<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" id="'+c+'" src="about:blank" ></iframe>';this.$dialog.find(f.contentClass).prepend(d);this.$content=a("#"+c);this.$content.width("100%")}else{this.$content=a(f.el).prependTo(this.$dialog.find(f.contentClass))}},_getContent:function(){return this.$content},show:function(f){var d=this.options,c=this;a("body").append(this.$dialog);if(f){this.reload(f)}else{if(this.ifmsrc!==undefined){this.reload(this.ifmsrc);this.ifmsrc=undefined}}if(d.modal===true){this.$overlay.show(d.opacity)}this._setSize();if(d.animate===true){this._animate(true)}else{this.$dialog.show();this._getContent().show();this._setMinSize();this._setPosition(this._calPosition())}if(d.autoClose&&d.autoClose>0){setTimeout(function(){c.hide()},d.autoClose)}return this},hide:function(){var c=this.options;if(c.modal===true){this.$overlay.hide(c.opacity)}if(c.animate===true){this._animate(false)}else{this.$dialog.hide()}if(c.onClose){c.onClose.call(this)}return this},_calPosition:function(){var h=this.options.left||"50%";var g=this.options.top||"50%";var i={};var f={scrolltop:function(){return a("html").scrollTop()||a("body").scrollTop()},scrollleft:function(){return a("html").scrollLeft()||a("body").scrollLeft()},client_width:function(){if(b.Browser.isQM){return document.documentElement.clientWidth||document.documentElement.offsetWidth-21}return a(window).width()},client_height:function(){if(b.Browser.isQM){return window.innerHeight||document.documentElement.offsetHeight-4}return a(window).height()}};if(typeof h==="number"&&typeof g==="number"){i={left:h,top:g}}else{if(typeof h==="string"&&typeof g==="string"){h=parseInt(h);g=parseInt(h);var d=this.$dialog.width()+18;var c=this.$dialog.height()+10;i={left:f.client_width()*h/100+f.scrollleft()-d*h/100,top:f.client_height()*g/100+f.scrolltop()-c*g/100}}}return i},_setPosition:function(c){this.$dialog.css(c)},_setSize:function(){var c=this.options;if(c.width&&c.width>0){this.$dialog.width(c.width)}if(c.height&&c.height>0){this.$content.height(c.height)}},_setMinSize:function(){var c=this.options;if(this.$dialog.width()<c.minWidth){this.$dialog.width(c.minWidth)}if(this.$content.height()<c.minHeight){this.$content.height(c.minHeight)}},_animate:function(c){},getIframeMember:function(c){if(this.$content[0].nodeName.toLocaleLowerCase()==="iframe"){return this.$content[0].contentWindow[c]}else{return null}},reload:function(g){g=g?g:this.options.src;var d=new Date().getTime();if(g.indexOf("?")===-1){g+="?cdl_time="+d}else{if(g.indexOf("&cdl_time=")===-1){g+="&cdl_time="+d}else{var c=g.substring(g.indexOf("&cdl_time="),g.indexOf("&cdl_time=")+6);var f="&cdl_time="+(parseInt(c.substring(5,6),10)+1);g=g.replace(c,f)}}this.$content.attr("src",g);return this},setTitle:function(d){var c=typeof d;if(c==="number"||c==="string"){d=a.trim(d);this.options.title=d;a("span.dialog-title",this.$dialog).html(d)}return this},setButton:function(){var d,h,g,c=arguments.length,j=a(".dialog-ft>a",this.$dialog);if(c===2){d=arguments[0];h=arguments[1];g=j.eq(d);if(a.type(h)!=="object"||typeof d!=="number"||g.length===0){return this}this.options.buttons[d]=a.extend(true,this.options.buttons[d],h);this._setButtonAttr(g,this.options.buttons[d])}else{h=arguments[0];if(a.type(h)!=="array"){return this}this.options.buttons=a.extend(true,this.options.buttons,h);for(var f=0;f<this.options.buttons.length;f++){this._setButtonAttr(j.eq(f),this.options.buttons[f])}}return this},_setButtonAttr:function(c,d){var f;for(var g in d){f=d[g];switch(g){case"name":c.html(f);break;case"disable":if(typeof f==="boolean"){f?c.addClass("btn-normal-dis"):c.removeClass("btn-normal-dis")}break;case"hide":if(typeof f==="boolean"){f?c.addClass("btn-normal-hide"):c.removeClass("btn-normal-hide")}break}}}});cui.dialog=function(c){return new comtop.UI.Dialog(c)}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.DragTable=b.UI.Base.extend({options:{uitype:"DragTable",noDragClass:"nodrag",dragClass:"highlight",dragPropmptClass:null,onDragStart:null,onDrag:null,onDragEnd:null,skipAccount:5,childEL:null},_create:function(){this.$table=this.options.el},doDrag:function(c,d){this._dragTable(c,d)},unDrag:function(){var c=this._getRows();if(c==null){return}a(c).unbind("dragstart").unbind("drag").unbind("dragend")},_dragTable:function(c,f){var d=this;var g=this.options;var h=this._getRows();if(h==null){return}a(h).drag("start",function(l,j){if(a(this).hasClass(g.noDragClass)){return}a(this).data("currRowTop",a(this).offset().top);a(this).data("currRowY",a(this).offset.top);a(this).addClass(g.dragClass);var m=a("<div></div>");var i=a(this).width();var k=a(this).offset().left;if(c){i=c}if(f){k=f}if(g.dragPromptClass){m.addClass(g.dragPromptClass).css({position:"absolute",width:i,height:a(this).height(),left:k})}else{m.css({border:"1px dashed #ccc",background:"#cdcbbc",opacity:0.5,position:"absolute",width:i,height:a(this).height(),left:k,cursor:"move"})}if(a.type(g.onDragStart)=="string"){window[g.onDragStart]&&window[g.onDragStart](l,j,this)}else{if(g.onDragStart){g.onDragStart(l,j,this)}}return m.appendTo(document.body)}).drag(function(m,i){if(a(this).hasClass(g.noDragClass)){return}a(i.proxy).css({top:i.offsetY});var l=a(this).data("currRowY");var o=i.offsetY-l;if((o>0&&o<g.skipAccount)||(o<0&&o>-g.skipAccount)){return}var n=a(this).data("currRowTop");var k=d._dropTargetRow(this,i,h,n);if(k!=null){var j=i.offsetY>n;if(j){a(this).insertAfter(k)}else{a(this).insertBefore(k)}if(a.type(g.onDrag)=="string"){window[g.onDrag]&&window[g.onDrag](m,i,this)}else{if(g.onDrag){g.onDrag(m,i,this)}}a(this).data("currRowTop",a(this).offset().top);a(this).data("currRowY",a(this).offset().top)}else{a(this).data("currRowY",i.offsetY)}}).drag("end",function(j,i){if(a(this).hasClass(g.noDragClass)){return}a(this).removeData("currRowTop");a(this).removeData("currRowY");a(i.proxy).remove();a(this).removeClass(g.dragClass);if(a.type(g.onDragEnd)=="string"){window[g.onDragEnd]&&window[g.onDragEnd](j,i,this)}else{if(g.onDragEnd){g.onDragEnd(j,i,this)}}})},_getRows:function(){var d=this.options;var c=this.$table;if(d.childEL){return d.childEL(c[0])}else{return c[0].rows}},_dropTargetRow:function(h,c,k,j){for(var f=0;f<k.length;f++){var l=k[f];if(l!=h){var d=a(l).offset().top;var g=parseInt(a(l).innerHeight())/2;if(((c.offsetY<d+g)&&d<j)||((c.offsetY+a(h).innerHeight()>d+g)&&d>j)){if(!a(l).hasClass("nodrag")){return l}}}}return null}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Input=b.UI.Base.extend({options:{uitype:"Input",width:"200px",readonly:false,maxlength:-1,value:"",emptytext:"",name:"",type:"text",mask:"",maskoptions:{},textmode:false,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null,on_keypress:null},tipPosition:".cui_inputCMP_wrap",_init:function(){var c=this.options;c.id="cui_inputCMP_"+b.guid();if(c.type!="password"&&c.type!="hidden"){c.type="text"}if(c.name==""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this,f=c.options;this.$input=a("#"+f.id);if(f.mask!==""){var d=a.extend({},f.maskoptions,{callback:function(){c._removeEmptyText(false)}});b.UI.InputMask.doMask(this.$input,f.mask,d)}if(f.value===""&&f.emptytext!==""){this.$input.val(f.emptytext);f.el.addClass("cui_inputCMP_empty")}},setWidth:function(c){if(typeof c==="string"&&/\d+(\%|px|pt|em)/.test(c)){this.options.el.children("div").css({width:c})}else{if(typeof c==="number"){this.options.el.children("div").css({width:c+"px"})}}},setValue:function(d,g){var f=this.$input,c=this.options;d=(d==null||d==undefined)?"":d;f.val(d);if(d!=""){c.el.removeClass("cui_inputCMP_empty")}else{if(c.emptytext!=""){f.val(c.emptytext);c.el.addClass("cui_inputCMP_empty")}}g||this._triggerHandler("change")},getValue:function(){var g=this.$input;var d=this.options;var f=a.trim(g.val());var c=d.emptytext;if(f===c){return""}else{if(d.mask!==""){return b.UI.InputMask.unMaskValue(g,d.mask,d.maskoptions)}return f}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){var d=this.options;var f=this.$input;d.readonly=c;f.attr("readonly",c);if(c){d.el.children("div").addClass("cui_inputCMP_readonly");this._removeEmptyText(true)}else{d.el.children("div").removeClass("cui_inputCMP_readonly");this._removeEmptyText(false)}},setReadonly:function(c){this.setReadOnly(c)},focus:function(){var c=this.options;if(!c.readonly){c.el.find(":text, :password").focus()}return this},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!==""){c.el.removeClass("cui_inputCMP_empty")}else{if(c.emptytext!==""){f.val(c.emptytext);c.el.addClass("cui_inputCMP_empty")}}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){return false}this._removeEmptyText(true);c.el.addClass("cui_inputCMP_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);c.el.removeClass("cui_inputCMP_focus");this._textCounter();var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keydown",d)},_keypressHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keypress",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var h=this.$input;var d=this.options.emptytext;var c=this.getValue();var g=this.options;if(d===""||c.length!==0){return}if(f){h.val("");g.el.removeClass("cui_inputCMP_empty")}else{h.val(d);g.el.addClass("cui_inputCMP_empty")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength))}else{return false}}return false},onInValid:function(g,f){var c=this,d=c.options;d.el.addClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}d.el.removeClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(d,h){var a=null;var b={};function c(){var j=cui.handleMask;var i=d("#"+b.id);a=new h.UI.Overlay();if(i.length===0){var k="z-index:"+(b.zIndex+1)+";";d("body").append('<div id="'+b.id+'" class="handlemask_wrap" style="'+k+'"></div>');i=d("#"+b.id)}i.html(b.html);i.css({visibility:"hidden",display:"block"});g();i.css({visibility:"visible",display:"none"})}function g(){var i=d("#"+b.id);i.css({margin:"-"+i.height()/2+"px 0 0 -"+i.width()/2+"px"})}function f(){d("#"+b.id).remove();if(b.mask){a.hide(0.5)}a._dom.remove();a=undefined}cui.handleMask=function(i){i=d.type(i)==="object"?i:{};if(d("#"+b.id).length!==0){f()}b=d.extend(true,{html:'<div class="handlemask_image_1"></div>',mask:true,zIndex:9999999,id:"handleMask_"+h.guid()},i);c();return cui.handleMask};cui.handleMask.show=function(){if(d("div.handlemask_wrap").length===0){cui.handleMask()}var i=d("#"+b.id);if(i.attr("isOpen")!=="true"){if(b.mask){a._dom.css("zIndex",b.zIndex).attr("id","ol_"+b.id);a.show(0.5)}i.show().attr("isOpen","true")}return cui.handleMask};cui.handleMask.hide=function(){if(d("div.handlemask_wrap").length===0){return}var i=d("#"+b.id);i.hide().attr("isOpen","false");if(b.mask){a.hide(0.5)}return cui.handleMask}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ListBox=b.UI.Base.extend({options:{uitype:"ListBox",width:"200",height:"200",name:"listboxName",value:"",value_field:"id",label_field:"text",multi:false,textmode:false,datasource:null,on_dbclick:null,on_click:null,on_select_change:null,on_add:null,on_remove:null,icon_path:null},$el:null,listbox:null,hiddenEl:null,listTemplateName:"cListBox",valueField:null,labelField:null,priorElement:null,rowTemplateName:"cListBoxRow",_init:function(c){this.$el=a(this.options.el);this._initParams();this.$el.addClass("cui")},_create:function(){if(typeof this.options.datasource=="function"){this.options.datasource(this,{})}this.listbox=a(".listbox",this.$el);this.hiddenEl=a("[type=hidden]",this.$el);this.valueField=this.options.value_field;this.labelField=this.options.label_field;this._setConfiguration();this._setDefaultText()},_initParams:function(){this._analysisHtmlTemplate()},_analysisHtmlTemplate:function(){var d=a("a",this.$el);if(d==null||typeof d=="undefine"||d.length<1){return}var g=this.options.value_field;var f=this.options.label_field;var c=[];a.each(d,function(i,j){var h={};h[f]=a.trim(a(this).text());h[g]=a.trim(a(this).attr("value"));c.push(h)});this.$el.html("");this.options.datasource=c},_setConfiguration:function(){this.listbox.width(this.options.width);this.listbox.height(this.options.height)},_selectChangeCallback:function(){var c=this.options.on_select_change;if(a.type(c)==="string"){window[c](this.getSelectedRows())}else{if(a.isFunction(c)){c(this.getSelectedRows())}}},setDatasource:function(c){this.options.datasource=c;this._renderElement()},setMulti:function(c){var d=this.options;if(d.multi===c||typeof c!=="boolean"){return}else{d.multi=c;this.cancelSelected()}},_renderElement:function(){var c=a(".tr",this.$el);this._buildTemplate(c,this.rowTemplateName,this.options)},_setDefaultText:function(){if(this.options.value){var h=a(".tr",this.$el);var i=this.options.multi?this.options.value.split(";"):this.options.value;var f=this.options.value_field;var g=[];var c=this.options.datasource;var d=this;a.each(c,function(j,k){if(d.options.multi){a.each(i,function(l,m){if(m==k[f]){a("li[name="+m+"]",h).addClass("selected");g.push(k[f])}})}else{if(i==k[f]){a("li[name="+i+"]",h).addClass("selected");g.push(k[f])}}});this.hiddenEl.val(g.join(";"))}},setWidth:function(c){this.listbox.width(c)},getRecordData:function(c){var g=this;var f=null;var d=this.options.datasource;a.each(d,function(h,i){if(i[g.valueField]==c){f=i;return false}});return f},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}var g=this.options.value.split(";");var d=this.options.value_field;var c=this.options.label_field;var f=[];a.each(this.options.datasource,function(h,i){a.each(g,function(j,k){if(k==i[d]){f.push(i[c])}})});return f.join(";")},deleteRecordData:function(c){var f=this;var d=null;var h=this.options.datasource;var g=[];if(this.hiddenEl.val()!=""){g=this.hiddenEl.val().split(";")}a.each(h,function(i,j){if(j[f.valueField]==c){d=j;h.splice(i,1);g.pop(c);return false}});this.hiddenEl.val(g.join(";"));return d},getValue:function(){var c=this.options.value_field;var d=[];var f=this.getSelectedRows();f=f===null?[]:(this.options.multi?f:[f]);a.each(f,function(g,h){d.push(h[c])});return d.join(";")},getText:function(){var c=this;var d=[];var f=this.getSelectedRows();f=f===null?[]:(this.options.multi?f:[f]);a.each(f,function(g,h){d.push(h[c.labelField])});return d.join(";")},setValue:function(f){var g=f+"";var d=g.split(";");if(!this.options.multi&&d.length>1){return}var c=[];this.cancelSelected();a(".td",this.$el).each(function(h,i){if(a.inArray(a(this).attr("name"),d)>=0){c.push(a(this).attr("name"));a(this).addClass("selected")}});this.hiddenEl.val(c.join(";"))},addRows:function(i){var f=[];var c=this;var d=true;if(i==null||i.length<1){return}var h=i;if(a.isPlainObject(i)){h=[];h.push(i)}if(this.options.datasource!=null){a.each(h,function(k,l){d=true;a.each(c.options.datasource,function(m,n){if(n[c.valueField]==l[c.valueField]){d=false;return false}});if(d){f.push(l)}});if(f.length<1){return}}else{f=h;c.options.datasource=[]}var g=a.extend({},this.options);g.datasource=f;this.options.datasource=this.options.datasource.concat(f);this._buildTemplate(a(".tr",this.$el),this.rowTemplateName,g,true);var j=this.options.on_add;if(a.type(j)==="string"){window[j](f)}else{if(a.isFunction(j)){j(f)}}},removeRow:function(d){var f=this;var h=null;var g=a("li[name="+d+"]",this.$el);if(g){h=this.deleteRecordData(d);g.remove()}var c=this.options.on_remove;if(a.type(c)==="string"){window[c]([h])}else{if(a.isFunction(c)){c([h])}}return h},removeSelectedRows:function(){var f=[];var d=this;a(".selected",this.$el).each(function(g,h){f.push(d.deleteRecordData(a(this).attr("name")));a(this).remove()});var c=this.options.on_remove;if(a.type(c)==="string"){window[c](f)}else{if(a.isFunction(c)){c(f)}}return f},removeAllRows:function(){var g=[];var d=this;var f;var h=this.options.datasource;a(".td",this.$el).remove();if(h!=null&&h.length>0){g=h.splice(0,h.length)}this.hiddenEl.val("");var c=this.options.on_remove;if(a.type(c)==="string"){window[c](g)}else{if(a.isFunction(c)){c(g)}}return g},getRow:function(d){var g=this.getRowSize();var c=null;if(d<g){var f=a(".td",this.$el).eq(d).attr("name");c=this.getRecordData(f)}return c},getSelectedRows:function(){var d=this.options.multi?[]:null;var c=this;a(".selected",this.$el).each(function(f,g){if(c.options.multi){d.push(c.getRecordData(a(this).attr("name")))}else{d=c.getRecordData(a(this).attr("name"))}});return d},selectRow:function(c){var d=[];if(this.hiddenEl.val()!=""){d=this.hiddenEl.val().split(";")}if(c>=0&&c<this.getRowSize()){a(".td",this.$el).eq(c).addClass("selected");d.push(a(".td",this.$el).eq(c).attr("name"));this.hiddenEl.val(d.join(";"))}this._selectChangeCallback()},selectAllRows:function(){if(!this.options.multi){return}var c=[];a(".td",this.$el).each(function(d,f){a(this).addClass("selected");c.push(a(this).attr("name"))});this.hiddenEl.val(c.join(";"));this._selectChangeCallback()},cancelSelected:function(){a(".selected",this.$el).each(function(c,d){a(this).removeClass("selected")});this.hiddenEl.val("");this._selectChangeCallback()},getAllRows:function(){return this.options.datasource},moveRow:function(f,c){var g=this.getRowSize();if(f>=0&&f<g&&c>=0&&c<g&&f!=c){var d=a(".td",this.$el);if(f<c){d.eq(c).after(d.eq(f))}else{d.eq(c).before(d.eq(f))}this.options.datasource.splice(c,0,this.options.datasource.splice(f,1)[0])}},moveUp:function(){var h=this.getSelectedRows();var g=this.getRowSize();var d;for(var f=0,c=h.length;f<c;f++){d=this._getRowIndexByName(h[f][this.valueField]);if(d==0){break}this.moveRow(d,d-1)}},moveDown:function(){var g=this.getSelectedRows();var f=this.getRowSize();var c;for(var d=g.length-1;d>=0;d--){c=this._getRowIndexByName(g[d][this.valueField]);if(c==(f-1)){break}this.moveRow(c,c+1)}},getRowSize:function(){return a(".td",this.$el).length},_getRowDataByKey:function(c){var d=this,g=this.options.datasource;var f=null;a.each(g,function(h,i){if(i&&i[d.valueField]==c){f=i;return false}});return f},_getRowIndexByName:function(d){var c=a("li",this.$el).index(a("li[name="+d+"]",this.$el));return c},_rowClick:function(d,l,n){var o="selected";var p=a(l);var k=[];if(this.hiddenEl.val()!=""){k=this.hiddenEl.val().split(";")}if(p.hasClass(o)){this.priorElement=null;p.removeClass(o);var f=p.attr("name");for(var m=0,h=k;m<h;m++){if(k[m]==p.attr("name")){k.splice(m,1);break}}}else{if(!this.options.multi){a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");p.addClass(o);k=[];k.push(p.attr("name"))}else{if(this.options.multi&&d.shiftKey){if(this.priorElement==null){this.priorElement=p.attr("name");k.push(this.priorElement)}else{var r=this._getRowIndexByName(p.attr("name"));var c=this._getRowIndexByName(this.priorElement);var g=a(".td",this.$el);a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");for(var m=Math.min(r,c),h=Math.max(r,c);m<=h;m++){g.eq(m).addClass(o);k.push(g.eq(m).attr("name"))}}p.addClass(o)}else{this.priorElement=p.attr("name");k.push(this.priorElement);p.addClass(o)}}}this.hiddenEl.val(k.join(";"));var q=this.options.on_click;if(a.type(q)==="string"){var f=a(l).attr("name");window[q](this._getRowDataByKey(f))}else{if(a.isFunction(q)){var f=a(l).attr("name");q(this._getRowDataByKey(f))}}this._selectChangeCallback()},_rowDblClick:function(g,d,h){var f=this.options.on_dbclick;if(a.type(f)==="string"){var c=a(d).attr("name");window[f](this._getRowDataByKey(c))}else{if(a.isFunction(f)){var c=a(d).attr("name");f(this._getRowDataByKey(c))}}},_trhoverin:function(d,c,f){var g="hover";a(c).addClass(g)},_trhoverout:function(d,c,f){var g="hover";a(c).removeClass(g)},_setCacheData:function(c,d){this.$el.data(c,d)},_getCacheData:function(c){return this.$el.data(c)},_removeCacheData:function(c){this.$el.removeData(c)}})})(window.comtop.cQuery,window.comtop);(function(c,d){d.UI.InputMask={Datetimes:"9999-1m-td 2h:59:59",Times:"2h:59:59",Time:"2h:59",Datetime:"9999-1m-td 2h:59",Date:"9999-1m-td",Int:{precision:0,prefix:"",separator:","},Dec:{precision:null,prefix:"",separator:","},Num:{precision:0,prefix:"",separator:""},Money:{precision:2,prefix:"",separator:","},Integer:{precision:0,prefix:""},definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",d:"d",m:"m",h:"h",t:"t","1":"[0-1]","2":"[0-2]","3":"[0-3]","5":"[0-5]"},dataName:"rawMaskFn",doMask:function(h,f,j){var k=f.toLocaleLowerCase();var g=c(h);switch(k){case"int":case"num":case"dec":case"money":var i;i=c.extend(true,{},this[f],j);if(k==="int"||k==="num"){i.precision=0}g.data("inputMaskModel",i);g.numberFormat(f,i);break;case"integer":g.scrapNumFormat(this[f].precision,this[f].prefix);break;case"custom":if(j&&j.model){g.mask(j.model,j)}break;default:if(this[f]){g.mask(this[f],j)}}},unMaskValue:function(i,f,l){function g(p,o){var n=false;c.each(o,function(q,r){if(p==q){n=true}});return n}var m=f.toLocaleLowerCase();var h=c(i);switch(m){case"int":case"num":case"dec":case"money":var k=h.data("inputMaskModel");var j=new RegExp("["+k.prefix+k.separator+"]","g");return h.val().replace(j,"");break;case"integer":return c(i).val().replace(/,/g,"");case"custom":return c(i).mask();default:return c(i).val()}}};var a=(d.Browser.isIE?"paste":"input")+".mask";var b=(window.orientation!=undefined);c.mask=d.UI.InputMask.definitions;c.fn.extend({caret:function(h,f){if(this.length==0){return}if(typeof h=="number"){f=(typeof f=="number")?f:h;c("#test").val(h+":"+f);return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(h,f)}else{if(this.createTextRange){var i=this.createTextRange();i.collapse(true);i.moveEnd("character",f);i.moveStart("character",h);i.select()}}})}else{if(this[0].setSelectionRange){h=this[0].selectionStart;f=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var g=document.selection.createRange();h=0-g.duplicate().moveStart("character",-100000);f=h+g.text.length}}return{begin:h,end:f}}},unmask:function(){return this.trigger("unmask")},mask:function(h,l){if(!h&&this.length>0){var i=c(this[0]);return i.data(d.UI.InputMask.dataName)()}l=c.extend({placeholder:"_",completed:null},l);var g=d.UI.InputMask.definitions;var k=[];var m=h.length;var j=null;var f=h.length;c.each(h.split(""),function(n,o){if(o=="?"){f--;m=n}else{if(g[o]){k.push(g[o]);if(j==null){j=k.length-1}}else{k.push(null)}}});return this.trigger("unmask").each(function(){var x=c(this);var s=c.map(h.split(""),function(B,A){if(B!="?"){return g[B]?l.placeholder:B}});var z=x.val();function w(A){while(++A<=f&&!k[A]){}return A}function t(A){while(--A>=0&&!k[A]){}return A}function o(D,C,F){switch(D){case"m":var K=x.val().substring(F-1,F);var E=parseFloat(C);if(K=="0"){return(E>0&&E<=9)}else{if(K=="1"){return(E>=0&&E<3)}}break;case"d":var B=x.val();var K=B.substring(F-1,F);var I=B.substring(0,4);var H=B.substring(5,7);var J=new Date(I,H,0).getDate();var A=(J+"").split("")[0];var G=(J+"").split("")[1];var E=parseFloat(C);if(K<A){if(K==0){return(E>0&&E<=9)}else{return(E>=0&&E<=9)}}else{return(E>=0&&E<=G)}break;case"h":var K=x.val().substring(F-1,F);var E=parseFloat(C);if(K=="0"||K=="1"){return(E>=0&&E<=9)}else{if(K=="2"){return(E>=0&&E<=3)}}break;case"t":var B=x.val();var I=B.substring(0,4);var H=B.substring(5,7);var J=new Date(I,H,0).getDate();var A=(J+"").split("")[0];var E=parseFloat(C);return E>=0&&E<=A;break;default:return new RegExp(D).test(C)}}function r(E,A){if(E<0){return}for(var D=E,C=w(A);D<f;D++){if(k[D]){if(C<f&&o(k[D],s[C],D)){s[D]=s[C];s[C]=l.placeholder}else{break}C=w(C)}}v();var B=j>E?j:E;x.caret(B)}function n(E){for(var C=E,D=l.placeholder;C<f;C++){if(k[C]){var A=w(C);var B=s[C];s[C]=D;if(A<f&&o(k[A],B,A)){D=B}else{break}}}}function u(D){var B=D.which;if(B==8||B==46||(b&&B==127)){var E=x.caret(),C=E.begin,A=E.end;if(A-C==0){C=B!=46?t(C):(A=w(C-1));A=B==46?w(A):A}p(C,A);r(C,A-1);return false}else{if(B==27){x.val(z);x.caret(0,q());return false}}}function y(D){var A=D.which,F=x.caret();if(D.ctrlKey||D.altKey||D.metaKey||A<32){return true}else{if(A){if(F.end-F.begin!=0){p(F.begin,F.end);r(F.begin,F.end-1)}var C=w(F.begin-1);if(C<f){var E=String.fromCharCode(A);if(o(k[C],E,C)){n(C);s[C]=E;v();var B=w(C);x.caret(B);if(l.completed&&B>=f){l.completed.call(x)}}}return false}}}function p(C,A){for(var B=C;B<A&&B<f;B++){if(k[B]){s[B]=l.placeholder}}}function v(){return x.val(s.join("")).val()}function q(B){var F=x.val();var E=-1;for(var A=0,D=0;A<f;A++){if(k[A]){s[A]=l.placeholder;while(D++<F.length){var C=F.charAt(D-1);if(o(k[A],C,A)){s[A]=C;E=A;break}}if(D>F.length){break}}else{if(s[A]==F.charAt(D)&&A!=m){D++;E=A}}}if(!B&&E+1<m){x.val("");p(0,f)}else{if(B||E+1>=m){v();if(!B){x.val(x.val().substring(0,E+1))}}}return(m?A:j)}x.data(d.UI.InputMask.dataName,function(){return c.map(s,function(B,A){return k[A]&&B!=l.placeholder?B:null}).join("")});if(!x.attr("readonly")){x.one("unmask",function(){x.unbind(".mask").removeData(d.UI.InputMask.dataName)}).bind("focus.mask",function(){z=x.val();var B=q();v();var A=function(){if(B==h.length){x.caret(0,B)}else{x.caret(B)}};(c.browser.msie?A:function(){setTimeout(A,0)})()}).bind("blur.mask",function(){q();if(x.val()!=z){x.change()}if(l.callback){l.callback()}}).bind("keydown.mask",u).bind("keypress.mask",y).bind(a,function(){setTimeout(function(){x.caret(q(true))},0)})}q()})},scrapNumFormat:function(m,l){var j=this,h=j.val();var k=function(p,v,s){var t=p.toString(),r=t.indexOf("."),u,o;if(r<0){u=t;o=""}else{u=t.substring(0,r);if(typeof v=="undefined"){o=t.substring(r)}else{o=t.substring(r,r+v+1)}}var q=/(-?\d+)(\d{3})/;while(q.test(u)){u=u.replace(q,"$1,$2")}return s?s+u+o:u+o};var f=function(){var n=j.val();if(!n.match(/^[\+\-]?\d*?\.?\d*?$/)){j.val(h)}else{h=n}};var g=function(){j.val(k(j.val(),m,l))};var i=function(){var n=j.val();if(l){n=n.replace(l,"")}n=n.replace(/,/g,"");j.val(n);f()};if(!j.attr("readonly")){j.one("unmask",function(){j.unbind(".mask")}).bind("keyup.mask",f).bind(a,f).bind("blur.mask",g).bind("focus.mask",i)}},numberFormat:function(g,m){var k=this,i=k.val();var l=function(q,s,t,p){var v=q.toString(),u=v.indexOf("."),o,r;if(u<0){o=v;r=""}else{o=v.substring(0,u);switch(s){case"null":case null:r=v.substring(u);break;case"0":r="";break;default:r=v.substring(u,u+s+1)}}var w=/(-?\d+)(\d{3})/;if(!!p||p!==""){while(w.test(o)){o=o.replace(w,"$1"+p+"$2")}}if(s>0&&r===""){for(var n=0;n<s;n++){r+="0"}r="."+r}return t?t+o+r:o+r};var f=function(){var o=k.val();var n={Int:/^[\+\-]?([1-9]{1}\d+|\d{1})?$/,Num:/^\d*$/,Dec:/^[\+\-]?([1-9]{1}\d*\.?\d*?|0{1}\.?\d*?)?$/,Money:/^[\+\-]?([1-9]{1}\d*\.?\d*?|0{1}\.?\d*?)?$/};if(!n[g].test(o)){k.val(i)}else{i=o}};var h=function(){var o=k.val();var n=l(o,m.precision,m.prefix,m.separator);if(/^[\-\+]$/.test(o)){n=""}k.val(n)};var j=function(){var n=k.val();if(m.prefix){n=n.replace(m.prefix,"")}n=n.replace(/,/g,"");k.val(n);f()};if(!k.attr("readonly")){k.one("unmask",function(){k.unbind(".mask")}).bind("keyup.mask",f).bind(a,f).bind("blur.mask",h).bind("focus.mask",j)}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Menu=b.UI.Base.extend({options:{uitype:"Menu",trigger:"click",width:"",on_click:null,datasource:null},_init:function(){var c=this;c.objMenu=null;c.objItemMap={};c.hideTimeout=null},_create:function(){var c=this;var f=this.options.el;var d=c.options.trigger;f.bind(d,function(g){g.stopPropagation();c.show()});f.bind("mouseout",function(g){c.hideTimeout=setTimeout(function(){c.hide()},100)});f.bind("mouseover",function(g){clearTimeout(c.hideTimeout)})},_loadTemplate:function(l,c){var j=this._buildTemplateStr("menuDom",c);j=this._bindTplEvent(j);var f=a(j);l.append(f);var d=f.find("li");for(var g=0;g<c.length;g++){var h=c[g];this.objItemMap[h.id]=h;if(h.disabled){this._disable(a("#"+h.id))}if(h.items){var k=d.eq(g);k.find("a").addClass("menu_item_a_background");this._loadTemplate(k,h.items)}}return f},_loadMenu:function(){if(this.objMenu==null){var c=this.options;if(a.isFunction(c.datasource)){c.datasource=c.datasource()}this.setDatasource(c.datasource)}},setDatasource:function(c){if(c){var f=this.options;this.objMenu=this._loadTemplate(a("body"),c);var d=this;this.objMenu.bind("mouseover",function(g){d.hideTimeout&&clearTimeout(d.hideTimeout)});this.objMenu.bind("mouseout",function(g){d.hideTimeout=setTimeout(function(){d.objMenu.hide()},100)})}},_mouseoverHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}if(c.mouseTimeout){clearTimeout(c.mouseTimeout)}var g=a(c).children(".menu_box");a(c).parent().children().css("zIndex",1);a(c).css("zIndex",2);if(g){g.show();this._setItemPosition(g,c);this._setItemsWidth(g.children(".menu"),this.options.width);this._setIframe(g)}},_mouseoutHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}var g=a(c).children(".menu_box");c.mouseTimeout=setTimeout(function(){g.hide()},100)},_clickHandler:function(g,c,f){if(a("#"+c.id).attr("disabled")){return}g.stopPropagation();if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){var d=a("#"+c.id);while(d[0].tagName!="BODY"){if(d[0].tagName=="DIV"){d.hide()}d=d.parent()}}this.hide();this.options.on_click&&this.options.on_click(this.objItemMap[c.id])},_setItemPosition:function(m,f){var d=m;m=m.children(".menu");var n={};var c=a(f);var g=c.offset();var k=c.outerHeight();var o=c.outerWidth();var l=m.outerHeight();var h=m.outerWidth();var j=a(window).height();var i=a(window).width();if(i-(g.left+o+h)<10&&(g.left-o)>0){n.left=0-h+4;n.right="auto"}else{n.left="auto";n.right=4}if(j-(g.top+k+l)<10&&(g.top-l)>0){n.bottom=0+l-4;n.top="auto"}else{n.bottom="auto";n.top=-4}d.css(n)},_setPosition:function(c){var d=a(c).offset();var j=a(c).outerHeight();var m=a(c).outerWidth();var i=a(window).height();var g=a(window).width();var f=this.objMenu.children(".menu").outerHeight();var k=this.objMenu.children(".menu").outerWidth();var l;var h;if(i-(d.top+j+f)<0&&(d.top-f)>0){l=d.top-f}else{l=d.top+j}if(g-(d.left+k)<0&&(d.left+m-k)>0){h=d.left+m-k}else{h=d.left}this.objMenu.css({left:h,top:l})},_setItemsWidth:function(c,j){var h=c.children("li");var g=0;for(var d=0;d<h.length;d++){var f=h.eq(d).children("a").children("span").outerWidth();if(f>g){g=f}}if(j>g){g=j}else{g=g+10}c.width(g)},_setIframe:function(c){if(b.Browser.isIE6){c.children("iframe").css({width:c.find(".menu_item").width(),height:c.find(".menu").height()})}},_setWidth:function(c){var d;if(this.options.width){d=parseInt(this.options.width,10)}else{d=a(c).outerWidth()-2}this.options.width=d;this._setItemsWidth(this.objMenu.children(".menu"),d)},_disable:function(c){c.children("a").children("span").addClass("menu_item_disable");c.attr("disabled",true)},_enable:function(c){c.children("a").children("span").removeClass("menu_item_disable");c.attr("disabled",false)},show:function(d){this._loadMenu();this.objMenu.show();if(!d){d=this.options.el}this._setWidth(d);this._setPosition(d);this._setIframe(this.objMenu);var c=this},hide:function(){this.objMenu&&this.objMenu.hide()},disable:function(f,c){this._loadMenu();var d=a("#"+f);if(c==true){this._disable(d)}else{this._enable(d)}},setLabel:function(f,c){this._loadMenu();var d=a("#"+f);d.children("a").children("span").html(c)}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.MultiNav=b.UI.Base.extend({options:{uitype:"MultiNav",unfold:false,initchecked:[],datasource:[],target:"_self",foldercheckable:false,_pos:-1},_create:function(){this.root=this.options.root=this.options.el.children(".multinav").eq(0);this._setDatasource(this.options.datasource)},_initcheck:function(g){var h=this.root;for(var f=0,d=g.length;f<d;f++){h=h.children("li").eq(g[f]);var c=h.find("a").eq(0);if(c.hasClass("multinav_fold")){if(f===d-1&&this.options.foldercheckable){c.addClass("checked");this.options._pos=c.attr("pos")}c.addClass("multinav_unfold").data("unfold",true);h=h.children("ul").eq(0);h.addClass("multinav_ul_unfold")}else{c.addClass("checked");this.options._pos=c.attr("pos");break}}},_bindEvents:function(){var c=this.root.find("[ev]");for(var k=0,g=c.length;k<g;k++){var o=c.eq(k).attr("pos").split("-");if(o!==undefined){var l=this.options.datasource;for(var f=0,d=o.length-1;f<d;f++){l=l[o[f]].children}var h=l[o[f]];l=l[o[f]].bind;for(var p in l){if(RegExp(p,"i").test("on_click on_dblclick on_mouseover on_mouseout")!==-1){c.eq(k).on(p.slice(3),function(i){l[p](i,this,h)})}}}}},_setDatasource:function(c){this.setDatasource(c,undefined);this._initcheck(this.options.initchecked);this.root.on("click",this.options,this._clickHandle)},setDatasource:function(g,d){var c=d?a.extend(this.options,d):this.options;function h(i){return new Function(i)}function f(m,p){var s=a(document.createDocumentFragment());for(var n=0,l=m.length;n<l;n++){var k=m[n],r=a("<li></li>"),q=a("<a></a>");r.append(q);if(k.onclick){q.click(h(k.onclick))}if(k.ondblclick){q.dblclick(h(k.ondblclick))}if(k.onmouseover){q.mouseover(h(k.onmouseover))}if(k.onmouseout){q.mouseout(h(k.onmouseout))}if(k.title){q.attr("title",k.title)}q.attr("pos",p+n);if(k.bind){q.attr("ev","1")}if(typeof k.href==="string"){q.attr("href",k.href);q.attr("target",k.target||c.target)}else{q.attr("href","javascript:;")}if(typeof k.children==="object"){q.addClass("multinav_fold").append("<span>"+k.name+"</span>");var o=a("<ul></ul>");o.append(f(k.children,p+n+"-"));r.append(o)}else{q.html(k.name)}s.append(r)}return s}this.options.datasource=g;c.root.html(f(g,""));this._bindEvents();if(c.unfold){this.allUnfold()}if(d&&d.initchecked){this._initcheck(d.initchecked)}},allUnfold:function(){this.root.find("ul").addClass("multinav_ul_unfold").show().end().find(".multinav_fold").addClass("multinav_unfold").data("unfold",true)},allFold:function(){this.root.find("ul").removeClass("multinav_ul_unfold").hide().end().find(".multinav_fold").removeClass("multinav_unfold").data("unfold",false)},_clickHandle:function(c){c.stopPropagation();var f=a(c.target);f=f.prop("tagName")==="A"?f:f.parent();c.data._pos=f.attr("pos");if(f.hasClass("multinav_fold")){var d=f.data("unfold");d=d===undefined?c.data.unfold:d;if(d){f.next("ul").stop().slideUp(100,function(){f.data("unfold",false).removeClass("multinav_unfold")})}else{f.next("ul").stop().slideDown(100,function(){f.data("unfold",true).addClass("multinav_unfold")})}if(c.data.foldercheckable){c.data.root.find(".checked").removeClass("checked");f.addClass("checked")}}else{c.data.root.find(".checked").removeClass("checked");f.addClass("checked")}},getCheckedData:function(){var f=this.options;var h=f._pos;if(h===-1){return null}var g=this.options.datasource;h=h.split("-");var c=h.length;for(var d=0;d<c-1;d++){g=g[parseInt(h[d])].children}g=g[parseInt(h[d])];if(!f.foldercheckable&&g.children!==undefined){return null}return g}})})(window.comtop);(function(a,b){b.UI.MessageBox=b.UI.Dialog.extend({options:{uitype:"MessageBox",type:"",msg:"",modal:true,canClose:true,autoClose:false,animate:false,position:"center",opacity:0.05,title:"",width:330,height:0,minWidth:150,minHeight:50,maxWidth:450,onClose:null,dragClass:".msgbox-titlebar",closeBtnClass:".msgbox-close-btn",contentClass:".msgbox-content .box-msg",footerClass:".msgbox-ft"},_init:function(c){this._super();if(b.Browser.isIE&&b.Browser.isQM){this.options.height?this.options.height+=20:null;this.options.minHeight?this.options.minHeight+=20:null}},hideOnBtnClick:true,_getView:function(){return this._buildTemplateStr("msgBox",this.options)},_calPosition:function(){var g=this.dialogWidth?this.dialogWidth:(this.dialogWidth=this.$dialog.outerWidth(true)),d=this.dialogHeight?this.dialogHeight:(this.dialogHeight=this.$dialog.outerHeight(true)),j=this.paddingV?this.paddingV:(this.paddingV=(this.$dialog.outerHeight(true)-this.$dialog.height()+2)),i=a.client.width(),c=a.client.height(),h=a.page.scrollLeft(),f=a.page.scrollTop();switch(this.options.position){case"center":return{left:i/2+h-g/2,top:c/2+f-d/2};case"rb":return{left:i+h-g-2,top:c+f-d-j}}},_animate:function(d){var g=this._calPosition();var f=this.dialogHeight,c=this.dialogWidth;if(b.Browser.isIE&&b.Browser.isQM){f+=10}switch(this.options.position){case"rb":if(d){this._setPosition({left:g.left,top:g.top+f});this.$dialog.css({height:1,minHeight:0});this.$dialog.animate({top:g.top+"px",height:f+"px",opacity:"show"},350)}else{this.$dialog.animate({height:1+"px",top:(g.top+f)+"px",opacity:"hide"},350)}break}},_setContent:function(){var c=this.options;this.$content=this.$dialog.find(c.contentClass).html(c.msg)},_getContent:function(){return this.$content},_setTitle:function(c){this.$dialog.find(".msgbox-title").text(c)},setMessage:function(c){this.$content.html(c);this.$content.removeAttr("style")},update:function(c){c=c||{};if(c.width){this.options.width=c.width;this._setSize()}if(c.title){this._setTitle(c.title)}this.options.onClose=c.onClose}});cui.alert=function(h,d,f){f=f||{};var g={msg:h,type:"alert",title:f.title||"???",width:f.width||330,buttons:[{name:"???"}],onClose:d};var c=a(document).data("alert-box");if(!c){c=new b.UI.MessageBox(g);a(document).data("alert-box",c)}c.setMessage(h);c.update(g);c.show()};cui.success=function(h,c,d){d=d||{};var f={msg:h,type:"success",title:d.title||"???",width:d.width||330,buttons:[{name:"???"}],onClose:c};var g=a(document).data("success-box");if(!g){g=new b.UI.MessageBox(f);a(document).data("success-box",g)}g.setMessage(h);g.update(f);g.show()};cui.error=function(h,c,f){f=f||{};var g={msg:h,type:"error",title:f.title||"????",width:f.width||330,buttons:[{name:"???"}],onClose:c};var d=a(document).data("error-box");if(!d){d=new b.UI.MessageBox(g);a(document).data("error-box",d)}d.setMessage(h);d.update(g);d.show()};cui.warn=function(h,c,f){f=f||{};var g={msg:h,type:"warn",title:f.title||"????",width:f.width||330,buttons:[{name:"???"}],onClose:c};var d=a(document).data("warn-box");if(!d){d=new b.UI.MessageBox(g);a(document).data("warn-box",d)}d.setMessage(h);d.update(g);d.show()};cui.confirm=function(h,d){d=d||{};var g=d.buttons||[{name:"???",handler:d.onYes},{name:"???",handler:d.onNo}];var f={msg:h,type:"confirm",title:d.title||"???",width:d.width||330,buttons:g};var c=a(document).data("confirm-box");if(!c){c=new b.UI.MessageBox(f);a(document).data("confirm-box",c)}else{c._buildButtons(g)}c.setMessage(h);c.update(f);c.show()};cui.message=function(g,d,c){var f=a(document).data("message-box-"+d);if(!f){f=new b.UI.MessageBox({modal:false,msg:g,canClose:false,autoClose:1500,animate:true,width:180,height:30,type:d?d:"alert",position:"rb",title:"???",buttons:null});a(document).data("message-box-"+d,f)}f.setMessage(g);f.show()}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.SinglePullDown=b.UI.Base.extend({options:{uitype:"SinglePullDown",name:"singlePullDownName",value_field:"id",label_field:"text",filter_fields:[],datasource:null,empty_text:"?????...",value:"",readonly:false,textmode:false,width:"200",height:200,auto_complete:false,editable:true,must_exist:true,on_select_data:null,on_filter_data:null},$el:null,$head:null,$headRack:null,$inputElement:null,$hiddenInput:null,$bodyElement:null,isOpen:false,isInputFocus:false,datasource:[],selected:{},displayValue:"",hideValue:"",preQuery:null,trHeight:0,defaultBodyHeight:5,bodyTemplateName:"tailCombo",listTemplateName:"comboList",isLoadData:false,calculateBodyPosition:true,loadData:null,callBackFunction:null,tipPosition:".cui_head",_init:function(c){this.$el=a(this.options.el);this._initParams(c);this.$el.addClass("cui");this._initHasDatasource=this.options.datasource==null?false:true},_create:function(){this.$inputElement=a(":text",this.$el);this.$hiddenInput=a("[type=hidden]",this.$el);this.$head=a(".cui_head",this.$el);this.$headRack=a(".cui_head_rack",this.$el);this._createBodyTemplate();this._resetTemplate();this._cacheFilterColumn();this._setDefaultText()},_createBodyTemplate:function(){var c=a("#cuiPullDownIsBuild_"+this.options.uuid).attr("isBuild");if(c==undefined||c==false){this._buildTemplate(a("body"),this.bodyTemplateName,this.options,true);a("#cuiPullDownIsBuild_"+this.options.uuid).attr("isBuild",true)}if(this.$bodyElement==null){this.$bodyElement=a("#cuiPullDownIsBuild_"+this.options.uuid)}this.$bodyElement.hide()},_initParams:function(d){this.options.uuid=b.guid();this._analysisHtmlTemplate();this.datasource=this.options.datasource;var c=this;this.loadData=function(f,g){if(g.query){f._filterRecord(g.query)}else{if(typeof f.options.datasource!=="function"){f.setDatasource(c.datasource)}else{f.options.datasource(f,g)}}};this._resetValue()},_analysisHtmlTemplate:function(){var d=a("a",this.$el);if(d==null||typeof d=="undefine"||d.length<1){return}var g=this.options.value_field;var f=this.options.label_field;var c=[];a.each(d,function(i,j){var h={};h[f]=a.trim(a(this).text());h[g]=a.trim(a(this).attr("value"));c.push(h)});this.$el.html("");this.options.datasource=c},setDatasource:function(c){this.options.datasource=c;this.datasource=c;this.isLoadData=true;this._setCacheData("datasource",this.options.datasource);if(this.calculateBodyPosition){this._reanderBody()}if(a.isFunction(this.callBackFunction)){this.callBackFunction();this.callBackFunction=null}if(this.openAction){this.open();this.$inputElement.focus()}},resetDataSource:function(c){this._resetValue();this.calculateBodyPosition=false;var d=this;this.callBackFunction=function(){d.calculateBodyPosition=true};this.setDatasource(c)},_resetTemplate:function(){if(this.options.readonly){this.setReadonly(true)}else{if(!this.options.editable){this.$inputElement.attr("readonly",true)}}this.setWidth(this.options.width)},_resetBodyShape:function(i){var q=this.$head.width()-2;if(b.Browser.isIE&&b.Browser.isQM){q=q+2}if(i==null||i.length<1){if(this.$bodyElement.height()<=0){this.$bodyElement.height(this.defaultBodyHeight+this.options.height);this.$bodyElement.width(q)}if(this.$bodyElement.width()<this.$head.width()){this.$bodyElement.width(q)}}else{if(this.trHeight==null||this.trHeight<=0){this.trHeight=a(".cui_tr",this.$bodyElement).outerHeight(true);if(b.Browser.isQM){a(".cui_tr",this.$bodyElement).height(this.trHeight-2)}}var f=i.length;var p=f*this.trHeight;var d=Math.floor(this.options.height/this.trHeight);if(p>this.options.height){this.$bodyElement.height(this.defaultBodyHeight+d*this.trHeight);this.$bodyElement.css({overflowY:"auto"})}else{this.$bodyElement.css({height:"auto",overflowY:"hidden"})}this.$bodyElement.css({width:"auto"});if(b.Browser.isIE){var o=this.$head.width()+2;var m=true;this.$bodyElement.show();a(".cui_tr .multitd",this.$bodyElement).each(function(s,r){m=false;if(o<a(this).width()){o=a(this).width()+50}else{a(this).parents(".cui_tr:eq(0)").css({display:"block"})}});if(m){a(".cui_tr",this.$bodyElement).each(function(s,r){if(o<a(this).width()){o=a(this).width()+35}else{a(this).css({display:"block"})}})}this.$bodyElement.width(o);var n=b.Dom.windowSize();var g=n.width;var j=this.$head;var c=j.offset();var h=c.left;var k=h+j.outerWidth()+2;if((g<=o)||(h+l>o)||(k<o)){this.$bodyElement.width(q);if(a(".cui_tr .cui_multitd",this.$bodyElement).length>0){if(b.Browser.isIE6){a(".cui_tr .cui_multitd",this.$bodyElement).width(q-20-a(".cui_tr .multicheck",this.$bodyElement).width())}else{a(".cui_tr .cui_multitd",this.$bodyElement).width(q-30-a(".cui_tr .multicheck",this.$bodyElement).width())}a(".cui_tr .cui_multitd",this.$bodyElement).addClass("cui_multi_apostrophe")}else{if(b.Browser.isIE6){a(".cui_tr",this.$bodyElement).width(q-16)}a(".cui_tr",this.$bodyElement).addClass("cui_apostrophe")}}this._initHasDatasource||this.$bodyElement.hide()}else{if(this.$bodyElement.width()<this.$head.width()&&this.$bodyElement.width()>0){this.$bodyElement.width(q)}var n=b.Dom.windowSize();var g=n.width;var j=this.$head;var c=j.offset();var h=c.left;var k=h+j.outerWidth();var l=this.$bodyElement.width();if((g<=l)||(h+l>g)||(k<=l)){this.$bodyElement.width(q);if(a(".cui_tr .cui_multitd",this.$bodyElement).length>0){a(".cui_tr .cui_multitd",this.$bodyElement).width(q-30-a(".cui_tr .multicheck",this.$bodyElement).width());a(".cui_tr .cui_multitd",this.$bodyElement).addClass("cui_multi_apostrophe")}else{a(".cui_tr",this.$bodyElement).addClass("cui_apostrophe")}}}if(b.Browser.isIE){this.$bodyElement.find("iframe").css({width:this.$bodyElement.width(),height:this.$bodyElement.height()})}}},setWidth:function(c){this.$head.width(c)},_inputdblClick:function(c){var d=c.target||c.srcElement;a(d).select()},_inputOnBlur:function(f,d){if(!this.isOpen){this.$headRack.removeClass("cursor")}var g=a.trim(a(d).val());var c=g==""&&this.hideValue=="";if(!g){if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}this._setEmptyText();c||this._change()}if(this.options.readonly||!this.options.editable||!this.isInputFocus){return}this.isInputFocus=false;if(g){this._setText(g)}},_setText:function(i){i=i+"";var d="";var j="";var g={};var f=this.options.label_field;var h=this.options.value_field;var c=this;g=c._findValueByRecord(i);if(a.isEmptyObject(g)){if(!c.options.must_exist){d=i;j=i;g[h]=i;g[f]=i;if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}}}else{d=g[f];j=g[h]}if(this.options.auto_complete){this.loadData(this,{});this.calculateBodyPosition=true}if(d){this.displayValue=d;this.hideValue=j;this.selected=g;this.$inputElement.val(this.displayValue);this.$hiddenInput.val(this.hideValue);this._removeDefaultCss();this._triggerHandler("change")}else{if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}this._setEmptyText()}this._change()},_inputOnFocus:function(d,c){if(this.options.readonly){a(c).trigger("blur");return}var f=a(c).val();if(this.options.empty_text==f){a(c).val("")}this._removeDefaultCss();this.$headRack.addClass("cursor")},_iconmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_btnmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_headmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_btnclick:function(c){},_headclick:function(c){if(this.options.readonly){return}c.stopImmediatePropagation();if(!this.isLoadData){this.calculateBodyPosition=true;this.loadData(this,{query:""})}if(this.isOpen){this.close()}else{this.open();this.$inputElement.focus()}},_bodymousedown:function(c){c.stopImmediatePropagation()},_trmousedown:function(d,c){if(this.hideValue&&a.trim(this.hideValue)==a(c).attr("name")){this.close();return}if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}if(this.isInputFocus){this.loadData(this,{})}this.isInputFocus=false;a(c).addClass("selected");this.setValue(a.trim(a(c).attr("name")));this.close()},_catchKeypress:function(d,c){d=d||window.event;var h=d.target||d.srcElement;var g=d.keyCode||d.which||d.charCode;switch(g){case 38:this._previousElement();break;case 40:this._nextElement();break;case 27:this.close();break;case 108:case 13:this._enterElement();break;case 8:case 46:default:this.isInputFocus=true;if(!this.options.editable||!this.options.auto_complete){return}var j=a(c).val();var f=j.replace(/\\|\*|\(|\)|\[|\]|\+/g,"");a(c).val(f);f=this._gainQueryText(j);if(this.preQuery!=f){this.preQuery=f;this.calculateBodyPosition=true;var i={};i.query=f;this.loadData(this,i);if(!this.isOpen){this.open()}}break}},_enterElement:function(){var d=a(".cui_tr",this.$bodyElement);var c=d.index(a(".hover",this.$bodyElement));if(c<0){return}var f=a.trim(d.eq(c).attr("name"));if(this.hideValue&&this.hideValue==f){this.close();return}if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}if(this.isInputFocus){this.loadData(this,{})}this.isInputFocus=false;d.eq(c).addClass("selected");this.setValue(f);this.close()},_previousElement:function(){var g=a(".cui_tr",this.$bodyElement);var h="hover";var c=g.size();if(c<1){return}var f=Math.floor(this.$bodyElement.height()/this.trHeight);var d=g.index(a(".hover",this.$bodyElement));if(d<0){g.last().addClass(h);this.$bodyElement.scrollTop(this.options.datasource.length*this.trHeight)}else{if(d==0){g.eq(d).removeClass(h);g.last().addClass(h);if(d<f){this.$bodyElement.scrollTop(0)}else{this.$bodyElement.scrollTop(this.options.datasource.length*this.trHeight)}}else{g.eq(d).removeClass(h);g.eq(d-1).addClass(h);this.$bodyElement.scrollTop((d-1)*this.trHeight)}}},_nextElement:function(){var g=a(".cui_tr",this.$bodyElement);var i="hover";var c=g.size();if(c<1){return}var f=Math.floor((this.$bodyElement.height()-7)/this.trHeight);var h=(this.$bodyElement.height()-2)-f*this.trHeight;var d=g.index(a(".hover",this.$bodyElement));if(d<0){g.first().addClass(i);this.$bodyElement.scrollTop(0)}else{if(d>=(c-1)){g.eq(d).removeClass(i);g.first().addClass(i);this.$bodyElement.scrollTop(0)}else{g.eq(d).removeClass(i);g.eq(d+1).addClass(i);if(d>=(f-1)){this.$bodyElement.scrollTop(Math.max(d-f+7,0)*this.trHeight+h)}else{this.$bodyElement.scrollTop(0)}}}},_trhoverin:function(d,c){a(c).addClass("hover")},_trhoverout:function(d,c){a(c).removeClass("hover")},open:function(){if(typeof this.options.datasource==="function"){this.openAction=true;return}this.$inputElement.removeClass("vignette");if(this.calculateBodyPosition){this._reanderBody()}this.$bodyElement.css("z-index",999999);this.$bodyElement.show();this._fixedPositionBody();var i=a("#cuiPullDownIsBuild_"+this.options.uuid);var g=this.options.uitype==="SinglePullDown"?i.find(".selected:eq(0)"):i.find(".multiSelected:eq(0)");var f=i.innerHeight();var d=i[0].scrollHeight;var c=i.scrollTop();var h;if(g.length>0&&f!==d){h=i.children("div").index(g)+1;if(h===1){i.scrollTop(0)}else{if(h*23>=c+f){i.scrollTop(h*23)}else{if((h-1)*23<=c){i.scrollTop((h-1)*23)}}}}else{if(g.length===0){i.scrollTop(0)}}this.isOpen=true;a(document).one("mousedown",a.proxy(function(j){this.close()},this))},_cacheFilterColumn:function(){var c=this.options.filter_fields;var d=[];d.push(this.options.label_field);d=d.concat(c);this._setCacheData("filterColumn",d)},_fixedPositionBody:function(){var l=this.$bodyElement;var k=this.$head;var p=b.Dom.windowSize();var c=k.offset();var m=k.outerHeight();var d=k.outerWidth();var f=p.width;var h=p.height;var q=a(window).scrollLeft();var o=a(window).scrollTop();var n=l.outerWidth();var j=l.outerHeight();var g=c.left;var i=c.top+m;if(g+n>f+q){if(c.left+d>n){g=d+c.left-n}else{if(f>n||f<n){g=0}}}if(c.top+m+j+5>h+o){if(c.top-j>0&&c.top-o){i=c.top-j-1}else{if(c.top<h+o-c.top-m){i=c.top+m+1}}}else{i=c.top+m+1}l.css({left:g,top:i})},close:function(){if(this.isOpen){this.isOpen=false;this.$headRack.removeClass("cursor");this.$bodyElement.find(".hover").removeClass("hover");this.$bodyElement.hide();this.$bodyElement.css("z-index",0)}},_change:function(d){var c=this.options.on_select_data;if(a.type(c)==="string"){window[c](this.selected)}else{if(a.isFunction(c)){c(this.selected)}}},_setDefaultText:function(){if(a.trim(this.options.value)==""){this._setEmptyText()}else{this.setValue(this.options.value)}},_setEmptyText:function(){this.$inputElement.val(this.options.empty_text);this.$inputElement.addClass("vignette");this.$inputElement.attr("title","");this.$hiddenInput.val("");this._resetValue()},_resetValue:function(){this.displayValue="";this.hideValue="";this.selected=null},_removeDefaultCss:function(){this.$inputElement.removeClass("vignette");this.$headRack.removeClass("cursor")},setValue:function(c,d){if(a.trim(c).length<1||a.trim(c)==""){this._setEmptyText();return}if(this.isLoadData){this._setComponentEffect(c,d)}else{this.calculateBodyPosition=false;this.callBackFunction=function(){this._setComponentEffect(c,d)};this.loadData(this,{query:""})}},_setComponentEffect:function(d,f){var c=this.hideValue;this._setComponentValue(d);this.$inputElement.val(this.displayValue);this.$inputElement.attr("title",this.displayValue);this._removeDefaultCss();this.$hiddenInput.val(this.hideValue);f||this._triggerHandler("change");this.calculateBodyPosition=true;if(c!=this.hideValue){this._change()}},getText:function(){return this.displayValue},getValue:function(){return this.$hiddenInput.val()},getData:function(){return this.selected},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}if(this.isLoadData){this._setComponentValue(this.options.value);return this.getText()}else{this.calculateBodyPosition=false;this.callBackFunction=this.setTextMode;this.loadData(this,{query:""})}},_setComponentValue:function(g){if(a.trim(g)==this.hideValue||this.options.datasource==null){return}var j=g;var c={};var f=this.options.label_field;var d=this.options.value_field;var h="";var k="";var i=true;a.each(this.options.datasource,function(l,m){if(m[d]==j){h=m[f];c=m;k=m[d];i=false}});if(i){return}this.selected=c;this.displayValue=h;this.hideValue=k},onInValid:function(f,d){this.$headRack.addClass("input_invalid");var c=this.$el.attr("tip");if(c){this.$el.data("save_tip_message",c)}this.$el.attr("tip",d)},onValid:function(d){this.$headRack.removeClass("input_invalid");var c=this.$el.data("save_tip_message");this.$el.removeAttr("tip");if(c){this.$el.removeData("save_tip_message")}},_filterRecord:function(f){var d=this.options.on_filter_data;var c=[];if(d){if(a.type(d)==="string"){c=window[d](this,f)}else{if(a.isFunction(d)){c=d(this,f)}}}else{c=this._searchRecordByText(f)}this._setCacheData("datasource",c);this._reanderBody();this._fixedPositionBody()},_searchRecordByText:function(d){if(d==null||d.length<1){return this.options.datasource}var i=[];var g=a.extend({},this.options);var f=this._getCacheData("filterColumn");var h=false;var c=new RegExp("^"+d,"i");i=a.grep(g.datasource,function(k,j){h=false;a.each(f,function(m,l){h=c.test(k[l]);if(h){return false}});return h});return i},_gainQueryText:function(c){return c},_findValueByText:function(c){if(!this.options.data){return null}var g=null;var f=this.options.label_field;var d=this.options.value_field;a.each(this.options.data,function(h,i){if(i[f]==c){g=i[d];return false}});return g},_findValueByRecord:function(d){if(!this.options.datasource){return null}var c={};var f=this.options.label_field;a.each(this.options.datasource,function(g,h){if(h[f]==d){c=h;return false}});return c},_reanderBody:function(){var c=a.extend({},this.options);c.datasource=this._getCacheData("datasource");if(a.isArray(c.datasource)){this.calculateBodyPosition=false}this._buildTemplate(this.$bodyElement,this.listTemplateName,c);this._resetBodyShape(c.datasource);this._setChooseCss()},_setChooseCss:function(){if(this.hideValue){this.$bodyElement.find(".selected").removeClass("selected");a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).addClass("selected")}},_setCacheData:function(c,d){this.$el.data(c,d)},_getCacheData:function(c){return this.$el.data(c)},_removeCacheData:function(c){this.$el.removeData(c)},setReadonly:function(c){c=typeof c=="undefined"?true:c;var d=this,f=d.options;if(c){d.$head.addClass("pulldown_readonly");d.$inputElement.attr("readonly",true)}else{d.$head.removeClass("pulldown_readonly");d.$inputElement.attr("readonly",false)}f.readonly=c;if(!f.editable){d.$inputElement.attr("readonly",true)}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.MultiPullDown=b.UI.SinglePullDown.extend({options:{uitype:"MultiPullDown",name:"MultiPullDownName",tpls:{comboList:"checkList"}},defaultBodyHeight:29,selected:[],displayValue:[],hideValue:[],listTemplateName:"checkList",_enterElement:function(){var c=a(".cui_tr",this.$bodyElement).index(a(".hover",this.$bodyElement));if(c<0){return}var g=a(".cui_tr :checkbox",this.$bodyElement).eq(c);var f=a(".cui_tr",this.$bodyElement).eq(c);var d=g.is(":checked");g.attr("checked",!d);if(d){f.removeClass("multiSelected");this._cancelValue(g.attr("name"));this._setComponentDisplayValue()}else{f.addClass("multiSelected");this.setValue(g.attr("name"))}this.isInputFocus=false;this.$inputElement.focus()},_gainQueryText:function(f){var c=f;var d=f.lastIndexOf(";");if(a.trim(f)!=""&&d!=-1){c=f.substring(d+1)}return c},_clickcheckAllHandle:function(d,c){d.stopImmediatePropagation();var f=a(c,this.$bodyElement).is(":checked");this.$inputElement.removeClass("vignette");if(f){this._chooseAll()}else{this._cancelAll()}if(this.hideValue.length<1){this.isInputFocus=true}this.$inputElement.focus()},_checkclickHandel:function(g,d){g.stopImmediatePropagation();var c=a(d,this.$bodyElement).attr("name");var f=a(".cui_tr[name='"+c+"']",this.$bodyElement);var j=a(d,this.$bodyElement).is(":checked");var i=a(".cui_tr",this.$bodyElement).size();var h=a(":checked",this.$bodyElement).size();if(j){if(i==h){a(".multicheckAll",this.$bodyElement).attr("checked",true)}f.addClass("multiSelected");this.setValue(c)}else{a(".multicheckAll",this.$bodyElement).attr("checked",false);f.removeClass("multiSelected");this._cancelValue(c);this._setComponentDisplayValue()}this.isInputFocus=false;this.$inputElement.focus()},_inputOnBlur:function(d,c){if(!this.isOpen){this.$headRack.removeClass("cursor")}var g=[];var f=a(c).val();if(!f){this._setEmptyText()}else{g=f.split(";")}if(this.options.readonly||!this.options.editable||!this.isInputFocus){return}this.isInputFocus=false;if(g.length>0){this._setText(g)}else{this._setEmptyText()}},_setText:function(c){var g={};var f=this.options.label_field;var h=this.options.value_field;var d=this;this.displayValue=[];this.hideValue=[];this.selected=[];a.each(c,function(i,j){g=d._findValueByRecord(j);if(!a.isEmptyObject(g)){d.displayValue.push(g[f]);d.hideValue.push(g[h]);d.selected.push(g)}});if(this.displayValue.length<1){this._setEmptyText();if(this.options.auto_complete){this.loadData(this,{});this.calculateBodyPosition=true}}else{this.$inputElement.val(this.displayValue.join(";"));this.$hiddenInput.val(this.hideValue.join(";"));if(!this.isOpen){this._removeDefaultCss()}}this._triggerHandler("change");this._change()},_chooseAll:function(){this._resetValue();var d=[];var c;this.$bodyElement.find(".cui_tr").each(function(g,f){c=a(":checkbox",this);c.attr("checked",true);a(this).addClass("multiSelected");d.push(c.attr("name"))});this.setValue(d)},_cancelAll:function(){var f=[];this.$bodyElement.find(".cui_tr").each(function(h,g){a(":checkbox",this).attr("checked",false);a(this).removeClass("multiSelected");f.push(a(this).attr("name"))});for(var d=0,c=f.length;d<c;d++){this._cancelValue(f[d])}this._setComponentDisplayValue()},setValue:function(d){var c=[];if(typeof d=="string"){if(a.trim(d)){c=d.split(";")}}else{if(a.isArray(d)){c=d}}if(c.length<1){this._setEmptyText();return}if(this.isLoadData){this._setComponentEffect(c)}else{this.calculateBodyPosition=false;this.callBackFunction=function(){this._setComponentEffect(c)};this.loadData(this,{query:""})}},_setComponentEffect:function(c){this._setComponentValue(c);this._setComponentDisplayValue()},_setComponentDisplayValue:function(){this.$inputElement.val(this.displayValue.join(";"));this.$inputElement.attr("title",this.displayValue.join(";"));this._removeDefaultCss();this.$hiddenInput.val(this.hideValue.join(";"));this._triggerHandler("change");this.calculateBodyPosition=true;this._change()},_cancelValue:function(j){var c,h,i;var g=this.options.label_field;var f=this.options.value_field;a.each(this.options.datasource,function(k,l){if(l[f]==j){c=l;i=l[f];h=l[g];return false}});var d=-1;a.each(this.hideValue,function(k,l){if(l==i){d=k;return false}});if(d>=0){this.selected.splice(d,1);this.hideValue.splice(d,1);this.displayValue.splice(d,1)}},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}if(this.isLoadData){this._setComponentValue(this.options.value);return this.getText().join(";")}else{this.calculateBodyPosition=false;this.callBackFunction=this.setTextMode;this.loadData(this,{query:""})}},_setComponentValue:function(i){if(this.options.datasource==null){this._resetValue();return}var k=[];if(typeof i=="string"){k=i.split(";")}else{k=i}var g=[];var d=this.options.label_field;var l=this.options.value_field;var j="multiSelected";var h=[];var f=[];var c=[];a.each(this.options.datasource,function(m,n){a.each(k,function(o,p){if(p==n[l]){g.push(n);f.push(n[l]);h.push(n[d]);c.push(m)}})});if(f.length<1){return}this.selected=this.selected.concat(g);this.displayValue=this.displayValue.concat(h);this.hideValue=this.hideValue.concat(f)},_resetValue:function(){this.displayValue=[];this.hideValue=[];this.selected=[]},_setChooseCss:function(){if(this.hideValue.length>0){if(this.hideValue.length==this.options.datasource.length){a(".multicheckAll",this.$bodyElement).attr("checked",true)}else{a(".multicheckAll",this.$bodyElement).attr("checked",false)}a.each(this.hideValue,function(d,f){var c=a("input[name='"+f+"']",this.$bodyElement);c.attr("checked",true);c.parents("div.cui_tr").eq(0).addClass("multiSelected")})}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.BasePagination=b.UI.Base.extend({_init:function(c){this.$container=a(this.options.el);this.setInitData(this.options)},_create:function(){if(this.totalItems<=0){this.$container.empty();return}this._calTotalPage();this._draw();this._bindEvent(this.$container)},_draw:function(){},_bindEvent:function(){},_calTotalPage:function(){this.totalPage=Math.ceil(this.totalItems/this.itemsPerPage);if(this.currentPage>=this.totalPage){this.currentPage=this.totalPage}},reDraw:function(){this._create();return this},setCount:function(c){this.totalItems=c;return this},setPagesize:function(c){this.itemsPerPage=c;return this},setInitData:function(c){c.count!=null?this.totalItems=c.count:null;c.pagesize!=null?this.itemsPerPage=c.pagesize:null;c.pageno!=null?this.currentPage=c.pageno:null;return this},go:function(c){if(c>this.totalPage){c=this.totalPage}this.currentPage=c;this._click(c,this.itemsPerPage)},next:function(){if(this.currentPage==this.totalPage){return}this.currentPage++;this._click(this.currentPage,this.itemsPerPage)},prev:function(c){if(this.currentPage==1){return}this.currentPage--;this._click(this.currentPage,this.itemsPerPage)},getCurrentPage:function(){return this.currentPage},_click:function(d,c){if(this.options.on_page_change){this.options.on_page_change.call(this,d,c)}},_setItemsPerPage:function(c){this.itemsPerPage=c}});b.UI.Pagination=b.UI.BasePagination.extend({options:{uitype:"Pagination",cls:"pagination",count:0,display_page:4,pagesize:25,pageno:1,pagesize_list:[25,50,100],on_page_change:null},_draw:function(){var g=this.options.display_page;if(g>this.totalPage){g=this.totalPage}if(g<=3){g=3}var c=Math.floor((g-1)/2),i=Math.ceil((g-1)/2);if(this.currentPage-2<c){i=i+c-(this.currentPage-2)}else{if(this.totalPage-this.currentPage-1<i){c=c+i-(this.totalPage-this.currentPage-1)}}if(c>this.currentPage-1){c=this.currentPage-1}if(i>this.totalPage-this.currentPage){i=this.totalPage-this.currentPage}var d=this.currentPage-c,f=this.currentPage+i;var h={totalItems:this.totalItems,totalPage:this.totalPage,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,selectList:this.options.pagesize_list,displayPreCount:c,displayNextCount:i,toFirst:d,toLast:f};this.$container.html(this._buildTemplateStr("pagination",h)).addClass(this.options.cls).addClass("cui");if(b.Browser.isQM&&b.Browser.isIE){this.$container.addClass("pagination-qm")}},_bindEvent:function(){var c=this,d=this.$container;d.find('[act="numPage"]').bind("click",function(){c.go(parseInt(a(this).text(),10));return false});d.find('[act="prevPage"]').bind("click",function(){c.prev();return false});d.find('[act="nextPage"]').bind("click",function(){c.next();return false});d.find('[act="goPage"]').bind("click",f);d.find('[act="cusPage"]').bind("keydown",function(g){if(g.keyCode===13){f()}});this.$container.find('[act="sizePage"]').bind("click",function(){c._setItemsPerPage(parseInt(a(this).text(),10));c._calTotalPage();c.go(c.currentPage);return false});function f(){var g=parseInt(c.$container.find(".page-skip-num").val(),10);if(isNaN(g)||g<=0){g=1}if(g>c.totalPage){g=c.totalPage}c.go(g);return false}}})})(window.comtop.cQuery,window.comtop);(function(f,g){var d=0,c=1,b="change";var a=function(i){if(!i){return{top:0,bottom:0,left:0,right:0}}var h=null;if(g.Browser.isIE){h=i.currentStyle}else{h=getComputedStyle(i,false)}return{top:parseInt(h.paddingTop),bottom:parseInt(h.paddingBottom),left:parseInt(h.paddingLeft),right:parseInt(h.paddingRight)}};comtop.UI.Panel=comtop.UI.Base.extend({options:{uitype:"Panel",header_title:"",width:0,height:0,url:"",html:"",on_change:null,collapsible:true,status:c,animate:"",containerCls:"cui-panel",titleCls:"cui-panel-title",triggerCls:"cui-panel-trigger",contentCls:"cui-panel-content"},container:null,title:null,trigger:null,content:null,status:null,loaded:false,events:[b],_init:function(h){var i=this.options;if(h.height){if(/\d+(\%|px|em|pt)/.test(h.height)){i.height=h.height}}this.status=i.status;if(h.html&&window[h.html]){i.html=window[h.html]}if(h.header_title&&window[h.header_title]){i.header_title=window[h.header_title]}if(!i.lazy){this.loaded=true}i.el.css({zoom:1});if(typeof i.on_change=="function"){this.bind("change",i.on_change)}if(f.trim(i.el.html())!==""){this._needBuildTemp=true}},_create:function(){var i=this.options,h=i.el;this._navHeight=31;if(this._needBuildTemp){this._initStructures()}this._parseMarkup();this._initView()},_parseMarkup:function(){var h=this.options;this.container=f("."+h.containerCls,h.el);this.title=f("."+h.titleCls,h.el);this.trigger=f("."+h.triggerCls,h.el).eq(0);this.content=f("."+h.contentCls,h.el)},_initView:function(){var i=this.options,h;if(arguments.length==0){h=true}else{h=arguments[0]}this._setUpSize();this._bindTriggers();if(i.header_title){this._setTitle(i.header_title)}if(i.html&&h){if(typeof(i.html)==="string"){this.content.find("div").html(i.html)}else{this.content.find("div").append(f(i.html))}}else{if(i.url&&h){this._loadFrame()}}if(i.collapsible!==undefined){if(i.collapsible==false){this.trigger.hide()}else{this.trigger.show()}}if(i.status!==undefined){if(i.status==c){this._showView()}else{this._hideView()}}},_setUpSize:function(){var i=this.options,l,h=i.height,k=i.el.parent();var j=a(i.el.find(".cui-panel-content").get(0)),m=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?0:(j.top+j.bottom)+2;this._contentPadding=j;if(i.width){this.container.width(i.width)}if(h){if(h==="100%"){if(k.prop("tagName")==="BODY"){this.h=f.client.height();i.el.find(".cui-panel-content").eq(0).css("height",0);this.margin=parseInt(k.css("marginTop"))+parseInt(k.css("marginBottom"));i.height=h=this.h-this.margin;this._resizeHandle()}else{this.margin=0;i.height=h=i.el.parent().height()}}l=h-this._navHeight-m;l=l<10?10:l;i.content_height=l;i.el.find(".cui-panel-content").height(l);i.el.find(".cui-panel-iframe").height("100%")}},_resizeHandle:function(){if(this.margin!==undefined){var h=this;var j=this.options;var k=this._contentPadding,l=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?(k.top+k.bottom)+2:0;function i(){var m=f.client.height();h.content.css("height",h.content.height()+m-h.h+l);h.h=m}f(window).on("resize",i)}},get:function(h){var i=this.options[h];if(h=="width"){i=i||this.container.width()}else{if(h=="height"){i=i||this.container.height()}else{if(!i&&h=="header_title"){i=this._getTitle()}else{if(h=="status"){i=this.status}}}}return i},set:function(i,j){var h=false;if(typeof(i)==="string"){this.options[i]=j;if(i=="url"||i=="html"){h=true}}else{if(i.hasOwnProperty("url")||i.hasOwnProperty("html")){h=true}f.extend(this.options,i)}this._initView(h);return this},expend:function(){if(!this.options.collapsible||this.status==c){return this}this._showView();this.status=c;if(this.options.onchange){this.options.onchange.call(null,this.status)}f(this).triggerHandler(b,this.status);return this},collapse:function(){if(!this.options.collapsible||this.status==d){return this}this._hideView();this.status=d;if(this.options.onchange){this.options.onchange.call(null,this.status)}f(this).triggerHandler(b,this.status);return this},toggle:function(){if(this.status==c){this.collapse()}else{this.expend()}return this},resize:function(h,j){if(arguments.length==0){return}if(typeof h=="number"){this.options.height=h;var i=this._contentPadding,k=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?0:(i.top+i.bottom)+2,l=h-this._navHeight-k;if(this.options.url){this.content.find("iframe").height(l)}else{this.content.find("div").height(l)}}if(typeof j=="number"){this.options.width=j;this.container.width(j)}},_initStructures:function(){var h=this.options,i=f("<div></div>");this._buildTemplate(i,"panel",h);f(h.el).before(i).appendTo(f("."+h.contentCls,i).find("div"));h.el.css("height","100%");this.el=h.el=i},_loadFrame:function(){var h=this,i=this.options,j=this.content.find("iframe");j.attr("src",this.options.url);this.loaded=true;j.one("load",function(){var o=j.get(0).contentWindow.document,n=o.body.scrollHeight,m=o.documentElement.scrollHeight,k=Math.max(n,m);if(i.content_height){k=k<i.content_height?i.content_height:k}if(g.Browser.isIE6&&!g.Browser.isQM){var l=j.height();if(l&&k>l){f(o).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(f(o).width()>j.width()){k+=17}if(!i.height){j.height(k)}})},_bindTriggers:function(){var i=this;var h=this.options.status;this.trigger.toggle(function(){if(h==c){i.collapse()}else{i.expend()}},function(){if(h==c){i.expend()}else{i.collapse()}})},_getTitle:function(){return this.title.find(".cui-panel-title-text").html()},_setTitle:function(h){this.title.find(".cui-panel-title-text").html(h)},_showView:function(){var h=this.options.animate;this.trigger.removeClass("collapse");if(h&&h==="slide"){this.content.slideDown(100)}else{this.content.show()}},_hideView:function(){var h=this.options.animate;this.trigger.addClass("collapse");if(h&&h==="slide"){this.content.slideUp(100)}else{this.content.hide()}}});comtop.UI.Panel.EXPAND=c;comtop.UI.Panel.COLLAPSE=d})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.RadioGroup=b.UI.Base.extend({options:{uitype:"RadioGroup",cls:"radio-group",name:"",value:"",radio_list:[],readonly:false,border:false,direction:"horizontal",textmode:false,br:[],on_change:null},_init:function(c){this.options.value=c.value+"";this.$container=a(this.options.el).addClass(this.options.cls).addClass("cui");this.readonly=this.options.readonly;this.options.color="#FF7D21";this._getRadioList()},_create:function(){var d=this.options,c=this;this.$container.html(this._buildTemplateStr("radioGroup",d));this.$radioList=this.$container.find("input[type=radio]");c.$radioList.on("change",c,c._onChange);if(d.readonly===true){this.setReadonly(true)}else{var f=d.readonly_value_list;if(f.length){this.setReadonly(true,f)}}if(d.value!=null&&d.value!=""&&d.value!=undefined&&d.value!="null"&&d.value!="undefined"){this.setValue(d.value,true)}if(d.border===true){this.$container.addClass("hasborder")}this.curr_checked();this.$container.data("input_tip",this.$container.attr("tip"));c._setHighlight()},curr_checked:function(){var c=this;c.$radioList.each(function(d,f){if(a(f).prop("checked")){c.checked_dom=f}})},_onChange:function(d){var c=d.data;var f=c.options;c._setHighlight();c._triggerHandler("change");c.curr_checked();if(f.on_change){f.on_change.call(c,c.getValue())}},setDatasource:function(c){this.options.radio_list=c;this._getRadioList()},_getRadioList:function(){var g=this.options;var t=g.readonly_value_list=[];var d=g.radio_list;var s=a.type(d);if(s==="array"&&d.length>0){for(var m=0,l=d.length;m<l;m++){if(d[m].readonly!==undefined){t.push(d[m].value)}}return}else{if(s==="function"){d(this);return}}var r=a.trim(this.$container.text()).split(/\s+/g);var p=this.$container.find("input[type=radio]");var q=[];for(var m=0;m<p.length;m++){var f=p.eq(m);var c=f.attr("name");if(c&&c!=""){g.name=c}var n=f.attr("readonly");var h=f.val();var k={text:r[m],value:h,color:f.attr("color")};if(n!==undefined){t.push(h);k.readonly=n}q.push(k)}g.radio_list=q},setValue:function(g,h){if(g===null||g===undefined||g===""){this.$radioList.attr("checked",false);this.$radioList.closest("label").css({color:"black"});if(this.getValue()!==null||!h){this._onChange({data:this})}return}var d=this.$radioList.filter(":checked").closest("label");var c=this.$radioList.filter("[value="+g+"]").attr("checked","checked");var f=c.closest("label");this.checked_dom=c;d.css({color:this.options.color});f.css({color:f.data("color")});if(this.getValue()!==g||!h){this._onChange({data:this})}},getValue:function(){var c=this.$radioList.filter(":checked").val();return c==undefined?null:c},getText:function(){var c=this.$radioList.filter(":checked");if(c.length==0){return null}else{return a.trim(c.parent().text())}},setReadonly:function(d,c){if(c===undefined){this.readonly=d}if(d===true){this._addReadOnly(c)}else{this._removeReadOnly(c);this._setHighlight()}},_addReadOnly:function(d){var c=this;var k=a.type(d);if(k==="undefined"){this.$radioList.each(function(j,l){a(l).off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked;if(c.checked_dom){a(c.checked_dom).prop("checked",true)}}})}else{if(k==="array"){for(var g=0,f=d.length;g<f;g++){var h=this.$radioList.filter("[value="+d[g]+"]");h.off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked;if(c.checked_dom){a(c.checked_dom).prop("checked",true)}}}}else{new Error("valueList error")}}},_removeReadOnly:function(d){var c=this;var h=a.type(d);if(h==="undefined"){this.$radioList.each(function(j,k){a(k).on("change",c,c._onChange).parent().removeClass("readonly").end().removeAttr("readonly")[0].onclick=null})}else{if(h==="array"){for(var g=0,f=d.length;g<f;g++){this.$radioList.filter("[value="+d[g]+"]").parent().removeClass("readonly").end().on("change",c,c._onChange).removeAttr("readonly")[0].onclick=null}}else{new Error("valueList error")}}},isReadonly:function(d){if(d===undefined){return this.readonly}else{var c=this.$radioList.filter("[value="+d+"]").attr("readonly");if(c!==undefined){return true}else{return false}}},_setHighlight:function(){var c=this;this.$container.find("label:not(.readonly)").css({fontWeight:"normal",color:"black"});var d=this.$radioList.filter(":checked").closest("label");if(d.data("color")){d.css({fontWeight:"bold",color:d.data("color")})}else{d.css({color:c.options.color})}},onInValid:function(f,d){var c=this.$container;c.css({border:"1px solid red"});if(!this.options.border){c.css({padding:"2px 5px"})}if(typeof(c.attr("tip"))!="undefined"){c.attr("tip",d)}},onValid:function(d){var c=this.$container;if(this.options.border){c.css({border:"1px solid #7F9DB9"})}else{c.css({border:"none",padding:"3px 5px"})}c.removeAttr("tip")},getLabelValue:function(){this.$container.css({padding:"0"});var h=this.options,g=h.radio_list,f=h.value;if(g&&f){for(var d=0;d<g.length;d++){var c=g[d];if(c.value==f){return c.text}}}return""}})})(window.comtop.cQuery,window.comtop);(function(a,b){comtop.UI.Tab=comtop.UI.Base.extend({options:{uitype:"Tab",width:0,height:0,tab_width:65,active_index:0,outer_scroll:false,tabs:[],fill_height:false,reload_on_active:true,closeable:false,trigger_type:"click"},_className:{parentCls:"cui-tab",navCls:"cui-tab-nav",contentCls:"cui-tab-content",titleCls:"cui-tab-title",activeTriggerCls:"cui-active",hoverTriggerCls:"cui-tab-hover",closeTriggerCls:"cui-tab-close"},active_index:0,navs:[],titles:[],contents:[],urls:[],events:["switch"],_initUrl:function(){this.urls=a.map(this.options.tabs,function(c){return c.url||false})},_init:function(){this.active_index=this.options.active_index||0;this._initUrl()},_create:function(){var f=this.options,d=f.el,k=".",c=this;this._navHeight=a(k+this._className.parentCls,d).height();if(f.fill_height){var i=f.el.parent();if(i.prop("tagName")==="BODY"){var g=a.client.height(),j=parseInt(i.css("marginTop"))+parseInt(i.css("marginBottom"));f.height=g-j;this._resizeHandle()}else{f.height=i.height()}}this._parseMarkup();this._setUpHeight();this._initView();this._bindTriggers()},_resizeHandle:function(){var c=this;var f=this.options;c.h=a.client.height();function d(){var g=a.client.height();c.resize(f.el.height()+g-c.h);c.h=g}a(window).on("resize",d)},_parseMarkup:function(){var f=this._className,d=this.options.el,h=".",c=a(h+f.navCls,d),g=a(h+f.contentCls,d);this.navs=c.children();this.titles=a(h+f.titleCls,d);this.contents=g.children()},_setUpHeight:function(){var c=this.options,d;if(!c.height){return}d=c.height-this._navHeight;d=d<10?10:d;c.content_height=d},attr:function(){var c=arguments;if(c.length==0){return this.options}else{if(c.length==1){if(typeof c[0]==="string"){var f=this.options[c[0]];if(c[0]=="width"){f=a(this.options.el).width()}if(c[0]=="height"){f=a(this.options.el).height()}return f}else{if(typeof c[0]==="object"){var d=this.options;a.extend(this.options,c[0]);this._setUpHeight();this._initView();return this}}}}},switchTo:function(c){this._switchTo(c);return this},next:function(){this.switchTo((this.active_index+1)%this.navs.length);return this},prev:function(){var c=this.navs.length;this.switchTo((this.active_index-1+c)%c);return this},onClose:function(c){a(this).bind("close",c);return this},resize:function(d,g){var i={};if(typeof d=="number"){i.height=d}if(typeof g=="number"){i.width=g}a.extend(this.options,i);this._setUpHeight();var f=this.options,h=a("."+this._className.contentCls,f.el),j=b.Browser;if(f.width){f.el.width(f.width);var c=typeof f.width==="number"?(f.width-(j.isIE&&j.isQM?0:6)):f.width;h.width(c)}if(f.content_height){h.height(f.content_height+(j.isIE&&j.isQM?10:0))}},addTab:function(){var f=this.options;var g={title:"",closeable:f.closeable,tab_width:f.tab_width},d=arguments,c=this.navs.length;if(d.length==2){g.title=d[0];g.url=d[1]}else{if(d.length==1&&typeof(d[0])=="object"){a.extend(g,d[0])}}f.tabs[c]=g;this._add(g);return this},removeTab:function(c){if(c<this.navs.length&&this.navs.length>1){if(this.active_index===c){this.next()}this.navs.eq(c).remove();this.contents.eq(c).remove();this.urls.splice(c,1);if(this.active_index>0&&c<this.active_index){this.active_index--}var d=this.options.tabs.splice(c,1);this._parseMarkup();a(this).triggerHandler("close",d)}return this},getActiveTab:function(){return this.getTab(this.active_index)},getTab:function(f,d){if(!d){return this.navs.get(f)}var c;switch(d){case"tab_width":c=this.navs.eq(f).width();break;case"title":c=this.titles.eq(f).html();break;case"html":c=this.options.tabs(f).html;break;case"url":c=this.options.tabs(f).url;break;case"closeable":c=this.navs.eq(f).hasClass(this._className.closeTriggerCls);break}return c},getContent:function(c){var c=c||this.active_index;return this.contents[c]},setTab:function(d,c,f){if(typeof(c)==="string"){this.options.tabs[d][c]=f}else{a.extend(this.options.tabs[d],c)}this._initTabs();this._initUrl();if(this.active_index==d){this._loadFrame(this.active_index,this.active_index)}return this},index:function(){return this.active_index},_bindTriggers:function(){var d=this;this.navs.hover(function(){if(d.navs.index(a(this))!==d.active_index){a(this).addClass(d._className.hoverTriggerCls)}},function(){a(this).removeClass(d._className.hoverTriggerCls)});if(this.options.trigger_type=="click"){a("."+this._className.navCls,this.options.el).bind("click",a.proxy(this,"_onTrigger"))}else{if(this.options.trigger_type=="mouseover"){this.navs.bind("mouseover",a.proxy(this,"_onMouseover"))}}var c="."+this._className.closeTriggerCls;a("."+this._className.navCls+" > li",this.options.el).delegate(c,"click",function(g){var h=d._findNav(g.target),f=d.navs.index(h);d.removeTab(f);g.preventDefault()})},_loadFrame:function(h,g){var f=this,i=this.options,d=this.urls.length>0&&this.urls[h];if(g!=undefined&&i.reload_on_active){var c=this.contents.eq(g).unbind().removeData("_binded");c.attr("src","about:blank");if(!i.height){c.height(0)}}if(d){var j=this.contents.eq(h).show();if(j.attr("src")=="about:blank"||i.reload_on_active){j.attr("src",this.urls[h]);if(!j.data("_binded")){j.bind("load",function(){try{var p=j.get(0).contentWindow.document,o=p.body.scrollHeight,m=p.documentElement.scrollHeight,k=Math.max(o,m);if(b.Browser.isIE6){var l=parseInt(j.css("height").replace("px",""));if(l&&k>l){a(p).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(a(p).width()>j.width()){k+=17}if(!i.height){j.height(k)}}catch(n){}}).data("_binded",true)}}}},_initView:function(g){this.contents.hide();this.contents.eq(this.active_index).show();var d=this.options,f=a("."+this._className.contentCls,d.el),h=b.Browser;if(d.width){d.el.width(d.width);var c=typeof d.width==="number"?(d.width-(h.isIE&&h.isQM?0:6)):d.width;f.width(c)}if(d.content_height){f.height(d.content_height+(h.isIE&&h.isQM?10:0))}if(d.tab_width){this.navs.width(d.tab_width)}if(d.tabs.length>0){this._initTabs(g)}else{this._initCloseBtns()}this._initContents()},_initTabs:function(f){var c=this,d=c.options;if(d.tabs.length>0){a.each(d.tabs,function(g,h){if(h.tab_width){c.navs.eq(g).width(h.tab_width)}if(h.closeable!==undefined||d.closeable!==undefined){var i=h.closeable!==undefined?h.closeable:d.closeable;if(i){c._addCloseBtn(g)}else{c._removeCloseBtn(g)}}if(h.title){c.titles.eq(g).html(h.title)}})}},_initContents:function(c,h){var g=c||this.active_index;var d=this.options.tabs[g],f=this.contents.eq(g);if(!d){return}if(d.html){if(!d.__isLoad_){if(typeof(d.html)==="string"){f.html(d.html)}else{f.append(a(d.html))}d.__isLoad_=true}}else{if(d.url){this._loadFrame(g,h)}}},_initCloseBtns:function(){var f=this.options,c=this.navs.length;if(f.closeable!==undefined){if(f.closeable===true){for(var d=0;d<c;d++){this._addCloseBtn(d)}}else{for(var d=0;d<c;d++){if(!this._isHTMLTemplate){this._removeCloseBtn(d)}}}}},_onTrigger:function(c){var d=this._findNav(c.target);if(d){idx=this.navs.index(d);this._switchTo(idx,c)}},_findNav:function(c){while(!(c==this.options.el||c==document.body)){if(a(c).parent().hasClass(this._className.navCls)){return c}c=c.parentNode}return null},_onMouseover:function(d){var c=this.navs.index(d.currentTarget);this._switchTo(c,d)},_triggerIsValid:function(c){return this.active_index!=c&&c<this.navs.length},_switchTo:function(g,h,l){if(!this._triggerIsValid(g)){return}var j=this.active_index,k=g,f=this.navs.eq(j),c=this.navs.eq(k),d=this.contents.eq(j),i=this.contents.eq(k);this.active_index=this.options.active_index=k;this._switchTrigger(f,c)._switchView(d,i);this._initContents(this.active_index,j);l&&l.call(this);a(this).triggerHandler("switch",[{fromTab:j,toTab:k}]);return this},_switchTrigger:function(d,c){d.removeClass(this._className.activeTriggerCls);c.addClass(this._className.activeTriggerCls);return this},_switchView:function(c,d){c.hide();d.show();return this},_add:function(d){var f=this.options,c=this.navs.length;var j=!!d.closeable,i=this._findClone(j),k;if(i!==-1){k=this.navs.eq(i).clone(true)}else{k=this.navs.eq(0).clone(true);if(j){this._addCloseBtn(c,k)}else{this._removeCloseBtn(k)}}if(k.hasClass(this._className.activeTriggerCls)){k.removeClass(this._className.activeTriggerCls)}if(d.tab_width||f.tab_width){k.width(d.tab_width||f.tab_width)}a("."+this._className.titleCls,k).html(d.title);this.navs.eq(c-1).after(k);var g,h=f.content_height||this._minHeight;if(d.url){g=a('<iframe src="about:blank" frameborder="0" style="display:none;width:100%;height:100%"></iframe>');this.urls[c]=d.url}else{g=a('<div style="display: none;width:100%;overflow:auto;height:100%"></div>')}this.contents.eq(c-1).after(g);this._parseMarkup()},_addCloseBtn:function(c,d){if(!d){d=this.navs.eq(c)}d.addClass("closeable").append(this._generateCloseBtn(c))},_generateCloseBtn:function(c){var d=a("<span>").addClass(this._className.closeTriggerCls);return d},_removeCloseBtn:function(c){var d=typeof(c)==="number"?this.navs.eq(c):c;a("."+this._className.closeTriggerCls,d).remove()},_findClone:function(c){return this._indexOf(this._getCloseBtns(),c)},_getCloseBtns:function(){var h=!!this.options.closeable,c=this.navs.length,f=this.options.tabs,g,j=[];for(var d=0;d<c;d++){g=f[d];j.push((g&&g.closeable!==undefined)?g.closeable:h)}return j},_indexOf:function(d,f){var c=d.length;var g=Number(arguments[1])||0;g=(g<0)?Math.ceil(g):Math.floor(g);if(g<0){g+=c}for(;g<c;g++){if(g in d&&d[g]===f){return g}}return -1}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Textarea=b.UI.Base.extend({options:{uitype:"Textarea",name:"",relation:"",value:"",width:"300px",height:"57px",readonly:false,maxlength:-1,emptytext:"",autoheight:false,maxheight:"",textmode:false,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},tipPosition:".textarea_textarea",_init:function(){var c=this.options;c.id=b.guid();if(c.name===""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this,f=c.options;this.$textarea=a("#"+f.id);if(f.relation!=""&&f.maxlength!=-1){this.$relation=a("#"+f.relation);var d=f.maxlength-b.String.getBytesLength(f.value)<0?0:f.maxlength-b.String.getBytesLength(f.value);this.$relation.text(d)}if(f.emptytext!==""&&f.value===""){this.$textarea.val(f.emptytext);this.$textarea.addClass("textarea_tipcolor")}if(f.height===""){f.height="51px"}this._setHeight(f.height);if(f.width===""){f.width="300px"}this.setWidth(f.width);if(f.readonly){this.setReadOnly(true)}if(f.autoheight){this.$textarea.css({overflow:"hidden"});this.$textarea.bind("propertychange",function(g){if(!g.originalEvent||g.originalEvent.propertyName!="value"){return}c._autoHeight()});this.$textarea.bind("input change",function(){c._autoHeight()})}},setWidth:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({width:c})}else{this.$textarea.css({width:parseFloat(c)-7+"px"})}},_setHeight:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({height:c})}else{this.$textarea.css({height:parseFloat(c)-6+"px"})}},setValue:function(d,g){var f=this.$textarea,c=this.options;d=(d==null||d==undefined)?"":d;f.val(d);if(d!=""){f.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){f.val(c.emptytext);f.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}g||this._triggerHandler("change")},getValue:function(){var d=a.trim(this.$textarea.val());var c=this.options.emptytext;if(d===c){return""}else{return d}},setMaxLength:function(c){this.options.maxlength=c;if(this.$relation){this.$relation.text(this._getRemainLength())}},_getRemainLength:function(){var c=this.options.maxlength-b.String.getBytesLength(this.getValue());return c<0?0:c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var d=this.options;d.readonly=c;this.$textarea.attr("readonly",c);if(c){this.$textarea.addClass("textarea_garybg");this._removeEmptyText(true)}else{this.$textarea.removeClass("textarea_garybg");this._removeEmptyText(false)}},focus:function(){var c=this.options;if(!c.readonly){c.el.find("textarea").focus()}return this},_changeHander:function(d){var c=this.options;if(c.readonly){return false}if(this.getValue()!=""){this.$textarea.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){this.$textarea.val(c.emptytext);this.$textarea.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){this.$textarea.blur();return false}this._removeEmptyText(true);this.$textarea.addClass("textarea_textareafocus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);this.$textarea.removeClass("textarea_textareafocus");this._textCounter();clearInterval(this._mousedownListener);var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();if(this.$relation){this.$relation.text(this._getRemainLength())}this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keydown",d)},_mousedownListener:null,_mousedownHandler:function(j){var d=this;if(d.options.readonly){return false}var g=d.$relation;var h=d._mousedownListener;if(g&&j.button===2){var f=0;var c=d._getRemainLength();clearInterval(h);h=setInterval(function(){f++;d._textCounter();var i=d._getRemainLength();d.$relation.text(i);if(i!==c||f>3){clearInterval(h)}},1000)}if(j.button!==2){clearInterval(h)}},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var c=this.options.emptytext;var d=this.getValue();if(c===""||d.length!=0){return}if(f){this.$textarea.val("");this.$textarea.removeClass("textarea_tipcolor")}else{this.$textarea.val(c);this.$textarea.addClass("textarea_tipcolor")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength));if(this.autoheight){this._autoHeight()}}}return false},_autoHeight:function(){var c,h=0;var d=this.$textarea[0];var g=this.options;style=d.style;if(d._length===d.value.length){return}d._length=d.value.length;if(a.browser.msie&&!b.Browser.isQM){h=parseInt(this.$textarea.css("paddingTop"))+parseInt(this.$textarea.css("paddingBottom"))}this.$textarea.css({height:g.height});var f=d.scrollHeight;if(a.browser.mozilla){if(b.Browser.isQM){f=f+6}}else{if(window.navigator.userAgent.indexOf("Chrome")!==-1){if(b.Browser.isQM){f=f+2}else{f=f-4}}}if(f>parseFloat(g.height)){if(g.maxheight!=""&&f>parseFloat(g.maxheight)){c=b.Browser.isQM?(parseFloat(g.maxheight)+6):parseFloat(g.maxheight);style.overflowY="auto"}else{c=f-h;style.overflowY="hidden"}style.height=c+"px"}},onInValid:function(g,f){var c=this,d=c.options;c.$textarea.addClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}c.$textarea.removeClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(c,d){comtop.UI.Tree=comtop.UI.Base.extend({options:{uitype:"Tree",children:null,checkbox:false,select_mode:1,persist:false,icon:"",checkbox_style:"",on_dbl_click:null,on_expand:null,on_select:null,on_click:null,on_activate:null,on_focus:null,on_blur:null,on_lazy_read:null,auto_focus:false,keyboard:false,click_folder_mode:3,min_expand_level:1,on_post_init:null,reactive:true},dtree:null,_init:function(g){var h=this;var i=this.options;if(i.icon!=="false"&&i.icon!=""){f(i.children,i.icon)}if(typeof i.checkbox_style=="string"&&i.checkbox_style!=""){i.classNames={checkbox:"dynatree-radio"}}if(typeof i.children=="function"){i.initDataFn=i.children;i.children=[]}c.each(this.options,function(l,m){var n=l.indexOf("_");if(n&&n!=-1){var j="";c.each(l.split("_"),function(o){if(o==0){j+=this}else{j+=this.charAt(0).toUpperCase()+this.substring(1)}});var k=m;if(typeof k=="function"){h._proxyEvent(k,i,j)}else{i[j]=m}}})},_proxyEvent:function(i,h,j){var g=this;h[j]=function(){var l=this;if(arguments.length===1){i.call(null,g._wrapNode(arguments[0]))}else{if(arguments.length===2){if(typeof arguments[0]==="boolean"){if(typeof arguments[1]==="boolean"){i.apply(l,arguments)}else{i.call(null,arguments[0],g._wrapNode(arguments[1]))}}else{if(j=="onClick"){var k=arguments[1].target||arguments[1].srcElement;if(k.nodeName.toLowerCase()=="span"&&k.className=="dynatree-expander"){return}}i.call(null,g._wrapNode(arguments[0]),arguments[1])}}}}},_create:function(){var g=this.options;this.dtree=c(this.options.el).dynatree(this.options).dynatree("getTree");if(g.initDataFn){g.initDataFn(this,g)}},getActiveNode:function(){return this._wrapNode(this.dtree.getActiveNode())},getNode:function(g){return this._wrapNode(this.dtree.getNodeByKey(g))},selectNode:function(h,g){return this.getNode(h).select(g)},enable:function(){this.dtree.enable();return this},disable:function(){this.dtree.disable();return this},setDatasource:function(g){this.options.children=g;this.getRoot().removeChildren().addChild(g);return this},getDatasource:function(){var g=this.dtree.toDict();return g.children},getDataSource:function(){return this.getDatasource()},getSelectedNodes:function(g){var i=this,h=this.dtree.getSelectedNodes(g);return c.map(h,function(k,j){return i._wrapNode(k)})},getRoot:function(){return this._wrapNode(this.dtree.getRoot())},bind:function(i,h){if(typeof i!="string"||typeof h!="function"){return}var i="on"+i.charAt(0).toUpperCase()+i.substring(1),g=this.dtree.options[i];if(typeof g==="undefined"){return}this._proxyEvent(h,this.dtree.options,i)},unbind:function(h){if(typeof h=="string"){var h="on"+h.charAt(0).toUpperCase()+h.substring(1);var g=this.dtree.options[h];if(typeof g==="undefined"){return}this.dtree.options[h]=null}else{c.extend(this.dtree.options,{onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onCustomRender:null,onCreate:null,onRender:null})}},_wrapNode:function(g){if(!g){return null}return new a(g)}});var a=function(g){this.dNode=g};a.prototype={error:-1,loading:1,ok:0,activate:function(g){if(typeof g=="undefined"){g=true}this.dNode.activate(g)},getData:function(g){if(typeof g=="string"){return this.dNode.data[g]}return this.dNode.data},expand:function(g){this.dNode.expand(g);return this},remove:function(){this.dNode.remove()},removeChildren:function(){this.dNode.removeChildren();return this},select:function(g){this.dNode.select(g);return this},toggleSelect:function(){this.dNode.toggleSelect();return this},addChild:function(i,g){var h=this.dNode.addChild(i,g&&g.dNode);return this._wrapNode(h)},setTitle:function(g){return this.dNode.setTitle(g)},setStyle:function(g){c(this.dNode.span).find("a").attr("style",g);this.dNode.data._customStyle=g;return this},removeStyle:function(){c(this.dNode.span).find("a").removeAttr("style");this.dNode.data._customStyle=null;return this},prev:function(){var g=this.dNode.getPrevSibling();return g&&this._wrapNode(g)},next:function(){var g=this.dNode.getNextSibling();return g&&this._wrapNode(g)},firstChild:function(){var g=this.children();if(g==null||g==undefined){return g}return g.length>0?g[0]:null},lastChild:function(){var g=this.children();if(g==null||g==undefined){return g}return g.length>0?g[g.length-1]:null},children:function(){var h=this,g=this.dNode.getChildren();if(g==null||g==undefined){return g}return c.map(g,function(j,i){return h._wrapNode(j)})},parent:function(){var g=this.dNode.getParent();return g&&this._wrapNode(g)},setData:function(h){if(arguments.length===1){for(var j in h){this.dNode.data[j]=h[j]}}else{var g=arguments[0],i=arguments[1];this.dNode.data[g]=i}this.dNode.render();return this},focus:function(){this.dNode.focus();return this},hasChild:function(){return this.dNode.hasChildren()},isChildOf:function(g){return this.dNode.isChildOf(g.dNode)},isDescendantOf:function(g){return this.dNode.isDescendantOf(g.dNode)},setLazyNodeStatus:function(){this.dNode.setLazyNodeStatus.apply(this.dNode,arguments)},getEventTargetType:function(g){return this.dNode.getEventTargetType(g)},move:function(g,h){if(!g.dNode){return}this.dNode.move(g.dNode,h)},disable:function(){this.dNode.disable();return this},enable:function(){this.dNode.enable();return this},_wrapNode:function(g){if(!g){return null}return new a(g)}};comtop.UI.Tree.Node=a;function b(g){return g.replace(/(^|\s+)\w/g,function(h){return h.toUpperCase()})}function f(g,h){if(g.length>0){c.each(g,function(i,j){if(j.icon===undefined){j.icon=h}if(j.children){f(j.children,h)}})}}})(window.comtop.cQuery,window.comtop);(function(c,d){d.UI.Grid=d.UI.Base.extend({options:{uitype:"Grid",gridwidth:"600px",gridheight:"500px",tablewidth:"",ellipsis:true,primarykey:"ID",allboxname:"allbox",checkboxname:"idList",datasource:null,selectrows:"multi",sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,adaptive:true,pagesize_list:[25,50,100],colrender:null,colstylerender:null,rowstylerender:null,resizeheight:null,resizewidth:null,fixcolumnnumber:0,oddevenrow:false,oddevenclass:"cardinal_row",selectedrowclass:"selected_row",titlerender:null,pagination:true,loadtip:true,pagination_model:"pagination_min_1",titlelock:true,colhidden:true,adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,on_dragstart:null,on_drag:null,on_dragend:null},_init:function(){var f=this,g=f.options;f.query={sortType:g.sorttype||[],sortName:g.sortname||[],pageSize:f._contains(g.pagesize_list,g.pagesize)>=0?g.pagesize:(f.options.pagesize_list[1]||f.options.pagesize_list[0]),pageNo:g.pageno>1?g.pageno:1};f.id=d.guid();if(g.gridwidth.indexOf("%")!=-1){g.gridwidth="500px"}f.data=null;f.headList=[];f.totalSize=0;f.widthConfig={th:null,prevTh:null,x:0,thWidth:0,prevWidth:0};f.thLayer="th-layer";f.tempFilterCols={};f.oriThWidth=[];f.oriTableWidth=0;f.complexHead=false;f.thListNum=[];f.scrollWidth=g.gridheight=="auto"?0:b()},_create:function(){var f=this.options;this.$tablehead=f.el;this._analyzeTable();this._wrapTable();this._renderTHead();this._createDom();this._addEventLisenter();this.loadData()},_analyzeTable:function(){var f=this,h=f.options,i=h.el;var j=i.find("tr");var g=null;if(j.length==1){g=i.find("th")}else{f.complexHead=true;g=this._getComplexHead(j,0)}c(g).each(function(m,n){var l={};var k=c(n);l.bindName=k.attr("bindName");l.render=k.attr("render");l.renderStyle=k.attr("renderStyle");l.format=k.attr("format");l.text=k.text();l.el=n;f.headList.push(l)})},_getComplexHead:function(l,f){var k=c(l[f]).children("th");var j=[];for(var h=0;h<k.length;h++){var g=c(k[h]).attr("colspan");c(k[h]).attr(this.thLayer,"lay-"+h);if(g&&parseInt(g)>1){this._getSubHead(l,f+1,parseInt(g),j,"lay-"+h)}else{j.push(k[h])}}return j},_getSubHead:function(p,m,h,n,g){var l=c(p[m]).children("th");var f=0;var j=0;if(this.thListNum[m]){j=this.thListNum[m]+1}for(var k=j;k<l.length;k++){var o=c(l[k]).attr("colspan");c(l[k]).attr(this.thLayer,g+"-"+k);if(o&&parseInt(o)>1){this._getSubHead(p,m+1,parseInt(o),n,g+"-"+k)}else{n.push(l[k])}f+=o?parseInt(o):1;this.thListNum[m]=k;if(f==h){break}}},_wrapTable:function(){var r=this,f=r.options,i=f.el;if(f.resizewidth){f.gridwidth=f.resizewidth()}if(f.resizeheight){f.gridheight=f.resizeheight()}var p,n,m;p=parseFloat(f.gridwidth)+"px";if(f.gridheight!="auto"){n=parseFloat(f.gridheight)+"px";m=parseFloat(f.gridheight)-(f.pagination?40:0)+"px"}else{n="auto";m="auto"}var q=['<div id="',r.id,'_wrap" class="cui_grid_wrap" style="',(d.Browser.isIE6?"position:relative;":""),"width:",p,";height:",n,";",f.gridheight=="auto"?"border-width:1px 0 0 1px;":"",'">','<div id="',r.id,'_box" class="grid_list_box" style="width:',p,";height:",m,'">','<div id="',r.id,'_tableData" class="cui_grid_tableData" style="width:',p,";height:",m,'">',"</div></div>"];i.after(q.join(""));r.$tableWrap=c("#"+r.id+"_wrap");r.$tableBox=c("#"+r.id+"_box");r.$tableData=c("#"+r.id+"_tableData");r.$tableData.append(i);r.$tableWrap.show();var k=r.headList,g=c(k[0].el).width()==0;c.each(k,function(s,t){if(g){r.oriThWidth.push(150)}else{r.oriThWidth.push(c(t.el).width())}});if(f.adaptive||(f.tablewidth===""&&g)){var l=parseFloat(f.gridwidth)-r.scrollWidth;i.width(l)}else{if(f.tablewidth!==""){i.width(f.tablewidth)}}if(g){var o=i.width()/k.length;c.each(k,function(s,u){var t=c(u.el);t.width(o-1)})}else{if(f.adaptive){var h=[],j=0,l=parseFloat(f.gridwidth)-r.scrollWidth;c.each(k,function(s,u){var t=c(u.el).width();h.push(t);j+=t});c.each(k,function(s,t){c(t.el).width(h[s]*l/j-1)})}}r.oriTableWidth=i.width()},_renderTHead:function(){var f=this,g=f.options,h=f.headList;c.each(h,function(k,n){var r=n.el;if(k==0&&g.selectrows=="multi"){var m=c(r).find(":checkbox");m.attr("name",g.allboxname)}else{if(k!=0||g.selectrows!="single"){var p=c(r);var q=f._buildTemplateStr("gridHeadRender",{headSpanSort:p.attr("sort")=="true"?"head_sp_sort":"",text:p.html(),bindName:n.bindName});p.html(q);var l=f._contains(f.query.sortName,n.bindName);if(l!=-1){var o=f.query.sortName[l];var j=f.query.sortType[l];if(!j){j="DESC";f.query.sortType[l]=j}f._createImg(o,j,p.find("span"))}}}if(g.ellipsis){c(r).find("p").css({cursor:"col-resize"})}})},_renderTBody:function(){var f=this,j=f.options,l=j.el,k=f.data;var g=[];if(!k||k.length==0){g.push(f._buildTemplateStr("emptyRow",c.extend({},j,{emptycolspan:f.headList.length,id:f.id})))}else{for(var h=0;h<k.length;h++){g.push(f._renderRow(k[h],h))}}g=g.join("");if(f.$tBody){f.$tBody.html(g)}else{f.$tBody=c("<tbody></tbody>").append(g);l.append(f.$tBody);if(d.Browser.isIE&&j.selectrows!=="no"){c(window).bind("load",function(){f._reChecked()})}}},_reChecked:function(){var h=this;var i=this.options;var j=h.$tableBox.find(":checked");if(i.fixcolumnnumber){var f=h.$tableColumnClone.find(":checked")}for(var g=0;g<j.length;g++){j.eq(g).parents("tr:eq(0)").addClass(i.selectedrowclass);if(i.fixcolumnnumber){f.eq(g).parents("tr:eq(0)").addClass(i.selectedrowclass)}}j=undefined;f=undefined},_adjustTable:function(){var f=this,h=f.options;if(h.colhidden){c.each(f.$subPopMenu.find("input"),function(j,k){if(!k.checked){f._filterCols(k)}})}var g=c("input[name='"+h.allboxname+"']",f.$tableWrap);if(g&&g.length>0){g.attr("checked",false)}f._createTableFix()},_createTableFix:function(){var r=this,f=r.options,m=f.el;var h=0;if(f.titlelock){if(!r.$tableHead){var k=['<div id="',r.id,'_tableHead" class="cui_grid_tableHead">','<table id="',r.id,'_tableHeadClone" class="cui_grid_list" style="width:',m.width(),'px;"></table></div>'];r.$tableBox.append(k.join(""));r.$tableHead=c("#"+r.id+"_tableHead");r.$tableHead.width(r.$tableData[0].clientWidth);r.$tableHeadClone=c("#"+r.id+"_tableHeadClone");var j=m.children("thead").clone(true);r.$tableHeadClone.append(j);h=j.height();r.$tableHeadClone.height(h);r.$tableHead.height(h+1);r.$tableHead.css("visibility","visible");r.$tableHeadClone.css("visibility","visible");r.$tableData.scroll(function(){r.$tableHead.scrollLeft(r.$tableData.scrollLeft())});var l=r.$tableBox.offset();r.$tableData.offset(l)}else{r.$tableHead.width(r.$tableData[0].clientWidth)}}var q=0;if(f.fixcolumnnumber>0&&!r.$tableColumn){var i=['<div id="',r.id,'_tableColumn" class="cui_grid_tableColumn"','style="height:',r.$tableData[0].clientHeight,'px"></div>'];r.$tableBox.append(i.join(""));r.$tableColumn=c("#"+r.id+"_tableColumn");var n=m.clone(true).removeAttr("uitype");n.attr("id",r.id+"_tableColumnClone");r.$tableColumn.append(n);r.$tableColumnClone=n;r.$tableColumn.css("visibility","visible");r.$tableColumnClone.css("visibility","visible");q=r._getColumnWidth();r.$tableColumn.width(q);r.$tableData.scroll(function(){r.$tableColumn.scrollTop(r.$tableData.scrollTop())})}else{if(f.fixcolumnnumber>0){var p=m.find("tbody").clone(true);r.$tableColumnClone.children("tbody").replaceWith(p);r.$tableColumn.height(r.$tableData[0].clientHeight)}}if(r.$tableHead&&r.$tableColumn&&!r.$tableFix){var o=['<div id="',r.id,'_tableFix" class="cui_grid_tableFix" style="width:',r.$tableHead.width(),'px;">','<table id="',r.id,'_tableFixClone" class="cui_grid_list" style="width:',m.width(),'px"></table></div>'];r.$tableBox.append(o.join(""));r.$tableFix=c("#"+r.id+"_tableFix");r.$tableFixClone=c("#"+r.id+"_tableFixClone");var g=m.children("thead").clone(true);r.$tableFixClone.append(g);r.$tableFixClone.height(h);r.$tableFix.height(h+1);r.$tableFix.css("visibility","visible");r.$tableFixClone.css("visibility","visible");r.$tableFix.width(q)}if(!r.resizeFlag){c(window).bind("resize.grid",function(){r.resize()});r.resizeFlag=true}},_resizeGrid:function(n){var p=this,f=p.options,h=f.el;p.$tableHead&&p.$tableHead.hide();var j=p.headList,m=[],g=[],k=0,l=p.oriTableWidth=n-p.scrollWidth;h.width(l);c.each(j,function(q,u){var t=u.el,r=c(t);if(r.css("display")!="none"){var s=p.oriThWidth[q];g.push(s);k+=s;m.push(t)}});c.each(m,function(q,r){c(r).width(g[q]*l/k-1)});var i=h.children("thead");if(f.titlelock){p.$tableHeadClone.children("thead").replaceWith(i.clone(true));p.$tableHeadClone.width(l)}var o=0;if(p.$tableColumn){p.$tableColumnClone.width(l);p.$tableColumnClone.children("thead").replaceWith(i.clone(true));o=p._getColumnWidth();p.$tableColumn.width(o);p.$tableColumn.height(p.$tableData[0].clientHeight)}if(p.$tableFix){p.$tableFixClone.width(l);p.$tableFixClone.children("thead").replaceWith(i.clone(true));p.$tableFix.width(o)}if(f.titlelock){p.$tableHead.show()}setTimeout(function(){if(f.titlelock){p.$tableHead.offset(p.$tableBox.offset())}if(p.$tableFix){p.$tableFix.offset(p.$tableBox.offset())}},10)},_getColumnWidth:function(){var f=this,h=f.options,j=0,l=0;var k=c("#"+f.id+"_tableColumn tr:last td:lt("+h.fixcolumnnumber+")");for(var g=0;g<k.length;g++){if(k.eq(g)[0].style.display=="none"){continue}j+=(k.eq(g)[0].clientWidth||k.eq(g)[0].offsetWidth)+1;l++}if(d.Browser.isIE8&&l>=3){j++}return j},_getGridRow:function(h){var m=h.rowIndex,l=h.selectrows=="multi"||h.selectrows=="single",k=m%2==0,g=h.innerHtml,j=h.pKey,f=h.rowStyle;var i=[];if(l){if(!k&&h.oddevenrow){i=['<tr pKey="',j,'" rowIndex="',m,'" events="click=_rowClickHandler" class="',h.oddevenclass,'" style="',f,'">']}else{i=['<tr pKey="',j,'" rowIndex="',m,'" events="click=_rowClickHandler" style="',f,'">']}}else{if(!k&&h.oddevenrow){i=['<tr pKey="',j,'" rowIndex="',m,'" class="',h.oddevenclass,'" style="',f,'">']}else{i=['<tr pKey="',j,'" rowIndex="',m,'" style="',f,'">']}}i.push(g,"</tr>");return i.join("")},_renderRow:function(k,n){var f=this.options,h=this.headList,o=f.rowstylerender;var q=[];for(var m=0;m<h.length;m++){q.push(this._renderCol(h[m],m,f,k,n))}var j="";if(o){var g="";if(c.type(o)=="string"&&window[o]){g=window[o](k)}else{if(c.type(o)=="function"){g=o(k)}}if(g){j=g}}var l=c.extend({},f,{innerHtml:q.join(""),pKey:k[f.primarykey],rowIndex:n,rowStyle:j});var p=this._getGridRow(l);p=this._bindTplEvent(p);return p},_getGridColHTML:function(f){var j=f.rowData,k=f.rowIndex,i=f.renderStyle,h=j[f.primarykey];var g=[];if(f.selectrows=="multi"){g=['<td style="',i,';text-align: center;">','<input pKey="',h,'" rowIndex="',k,'" type="checkbox" id="',new Date().getTime(),'" events="click=_inputClickHandler" name="',f.checkboxname,'" /></td>']}else{if(f.selectrows=="single"){g=['<td style="',i,';text-align: center;">','<input pKey="',h,'" rowIndex="',k,'" type="radio" events="click=_inputClickHandler" name="',f.checkboxname,'"/></td>']}}return g.join("")},_renderCol:function(k,t,p,n,l){var r=this,v=p.selectrows,o=k.renderStyle;if(o=="undefined"||o==null){o=""}var m="";if(t==0&&(v=="multi"||v=="single")){var w=c.extend({},p,{rowData:n,renderStyle:o,rowIndex:l});m=r._getGridColHTML(w);m=r._bindTplEvent(m)}else{var x=n[k.bindName];if(x==null||x=="undefined"||x===""){x=""}else{if(k.format){if(k.format=="money"){x=a(parseFloat(x))}else{if(c.type(x)=="date"){x=d.Date.format(x,k.format)}}}}var j="&nbsp;"+x;var u=p.colrender;if(k.render){j=r._getRenderMode(n,k,l);if(j===""){j="&nbsp;"+x}}else{if(u){var q="";if(c.type(u)==="string"&&window[u]){q=window[u](n,k.bindName,k,l)}else{if(c.type(u)==="function"){q=u(n,k.bindName,k,l)}}if(q){j=q}}}var y=x,s=p.titlerender;if(s){var h="";if(c.type(s)==="string"&&window[s]){h=window[s](n,k.bindName)}else{if(c.type(s)==="function"){h=s(n,k.bindName)}}if(h){y=h}}var g=p.colstylerender;if(g){var f="";if(c.type(g)==="string"&&window[g]){f=window[g](n,k.bindName,l)}else{if(c.type(g)==="function"){f=g(n,k.bindName,l)}}if(f){o+=(o===""?"":";")+f}}if(k.render&&(k.render==="image"||k.render==="button")){o+=(o===""?"":";")+"text-align:center"}if(p.ellipsis){m="<td style='"+o+"' class='ellipsis' title='"+y+"'>"+j+"</td>"}else{m="<td style='"+o+"' title='"+y+"'>"+j+"</td>"}}return m},_getGridRenderMode:function(w){var v=w.renderMode,k=w.rowData,j=w.col,u=w.value?w.value:k[j.bindName],q=w.rowIndex;var o=[];if(v==="image"){var f=w.url,h=w.relation?w.relation:j.bindName,g=w.compare,s=w.title,n=k[h];if(g){f=g[n]}if(s){if(comtop.cQuery.type(s)!="string"){s=s[n]}}else{s=n}o=['<img src="',f,'"  title="',s,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'"/>']}else{if(v==="button"){o=['<input type="button" value="',u,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'">']}else{if(v==="a"){var r="",l=w.params,f=w.url,p=w.targets;if(l){l=l.split(";");for(var m=0;m<l.length;m++){r+=(r===""?"":"&")+(l[m]+"="+k[l[m]])}}if(f&&r){var t=w.url.lastIndexOf("?");if(t!=-1){if(t==f.length-1){f+=r}else{f+="&"+r}}else{f+="?"+r}}if(!p){p="_self"}o=['<a href="',f,'" target="',p,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'">',u,"</a>"]}}}return o.join("")},_getRenderMode:function(j,i,m){var f=this.options;var o="";if(window[i.render]){o=window[i.render](j,m,i)}else{var k=c.extend({},f,{renderMode:i.render,rowData:j,col:i,rowIndex:m});if(i.renderOptions){k=c.extend(k,i.renderOptions)}else{var h=i.el,g=c(h).attr("options"),n=/^(?:\{.*\}|\[.*\])$/;if(g&&n.test(g)){g=c.parseJSON(g.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));k=c.extend(k,g);i.renderOptions=g}}var l=this._getGridRenderMode(k);l=this._bindTplEvent(l);if(l!=""){o=l}}return o},_renderTFoot:function(){var f=this,h=f.options;var g=f._buildTemplateStr("tFootDom",h);f.$tFoot=c(g).insertAfter(f.$tableBox)},_readHead:function(h){var j=this.headList;for(var g=0;g<j.length;g++){var f=j[g];if(f.bindName==h){return{idx:g,elem:f}}}return null},_filterCols:function(l){var s=this,f=s.options,o=c(l).attr("textValue"),j=s.options.el,g=s.headList,p=-1,h=null;for(var k=0;k<g.length;k++){var n=g[k];if(c.trim(n.text)==c.trim(o)){p=k;h=n.el}}if(p!=-1){if(l.checked){c(h).show()}else{c(h).hide()}s._showComplexTitle(h,l.checked,j.find("thead"));s.$tBody.find("tr").each(function(u,v){var t=c(v).children("td").get(p);if(l.checked){c(t).show()}else{c(t).hide()}});var m=j.children("thead"),r=j.width();if(f.titlelock){s.$tableHeadClone.width(r);s.$tableHeadClone.html(m.clone(true))}var q=0;if(s.$tableColumn){s.$tableColumnClone.html(j.html());q=s._getColumnWidth();s.$tableColumn.width(q)}if(s.$tableFix){s.$tableFixClone.width(r);s.$tableFixClone.html(m.clone(true));s.$tableFix.width(q)}}},_showComplexTitle:function(n,j,l){var f=c(n).attr(this.thLayer);if(f){f=f.substring(0,f.lastIndexOf("-"));var o=c("th["+this.thLayer+"='"+f+"']",l);while(o[0]){if(j){var g=o.attr("colspan");if(!g){g=1}o.attr("colspan",parseInt(g)+1);o.show()}else{o.attr("colspan",parseInt(o.attr("colspan"))-1);var h=c("th["+this.thLayer+"*='"+f+"-']",l);var m=true;for(var k=0;k<h.length;k++){if(h[k].style.display!="none"){m=false;break}}if(m){o.hide()}}f=f.substring(0,f.lastIndexOf("-"));o=c("th["+this.thLayer+"='"+f+"']",l)}}},_changePage:function(g,f){this.query.pageNo=g;this.query.pageSize=f;this.loadData()},_resetSortIcon:function(){var h=this;if(c.type(h.query.sortName)=="array"&&c.type(h.query.sortType)=="array"){var g=c("#"+h.id+"_wrap span.head_sp_sort");g.children("em").remove();for(var j=0,f=h.query.sortName.length;j<f;j++){switch(h.query.sortType[j]){case"ASC":this._createImg(h.query.sortName[j],"ASC",g.filter('[bindName="'+h.query.sortName[j]+'"]'));break;case"DESC":this._createImg(h.query.sortName[j],"DESC",g.filter('[bindName="'+h.query.sortName[j]+'"]'));break}}}},_sortTitle:function(j,l,g){var f=this.options,n=f.sortstyle;var m=this.query.sortName;var i=this.query.sortType;if(!g&&g!="DESC"&&g!="ASC"){g="DESC"}var k=this._contains(m,l);if(k!=-1){var h=i[k];if(h=="ASC"||h=="asc"){i[k]="DESC"}else{i[k]="ASC"}this._changeImg(l,i[k])}else{this._createImg(l,g,j);if(m.length==n){c('span.head_sp_sort em[name="'+m[0]+'_sort_icon"]',this.$tableBox).remove();m.splice(0,1);i.splice(0,1);m[n-1]=l;i[n-1]=g}else{m[m.length]=l;i[i.length]=g}}this.loadData()},_createImg:function(h,j,i){var g=j=="DESC"?"grid_sort_title_down":"grid_sort_title_up";var f="<em class='"+g+"' name='"+h+"_sort_icon'></em>";c(f).appendTo(c("th[bindName="+h+"] span.head_sp",self.$tableBox))},_changeImg:function(f,g){if(g=="DESC"){c("em[name='"+f+"_sort_icon']").removeClass("grid_sort_title_up").addClass("grid_sort_title_down")}else{c("em[name='"+f+"_sort_icon']").removeClass("grid_sort_title_down").addClass("grid_sort_title_up")}},_contains:function(h,j){var f=-1;for(var g=0;g<h.length;g++){if(j==h[g]){f=g;break}}return f},_createDom:function(){if(this.options.colhidden){this._createMenu()}this._createLoading();this.$line=c("<div class='grid_line'></div>").appendTo(document.body)},_createMenu:function(){var f=this,h=f.options;var g=f._buildTemplateStr("subPopMenu",c.extend({},h,{headList:f.headList}));g=f._bindTplEvent(g);f.$subPopMenu=c(g).appendTo(document.body);f.$subPopMenu.bind("click",function(m){var k=m.target||m.srcElement,l=k.nodeName.toLowerCase()==="a";m=c.event.fix(m);m.stopPropagation();if(l||k.nodeName.toLowerCase()==="input"){var n=l?c(k).find("input"):c(k),j=n.attr("bindName");if(n[0].disabled){return}l&&(n[0].checked=(!n[0].checked));var i=n.attr("textValue");if(!f.tempFilterCols[i]){f.tempFilterCols[i]={el:n[0],checked:!n[0].checked}}}})},_createLoading:function(){var f=this;var g="<div class='cui_grid_loading'><div class='cui_grid_loaddiv'><div class='cui_grid_loadgif'>Loading...</div></div>";f.$loading=c(g).appendTo(f.$tableWrap)},_filterClickHandler:function(g){var r=this,f=r.options,j=f.el,h=r.headList,s=false,m=null;c.each(r.tempFilterCols,function(v,y){if(y.el.checked!=y.checked){var z=c(y.el).attr("textValue"),t=-1,u=null;for(var x=0;x<h.length;x++){var w=h[x];if(c.trim(w.text)==c.trim(z)){t=x;u=w.el;break}}if(t!=-1){s=true;if(y.el.checked){c(u).show()}else{c(u).hide()}r._showComplexTitle(u,y.el.checked,j.find("thead"));if(!m){m=r.$tBody.find("tr")}m.each(function(B,C){var A=c(C).children("td").get(t);if(y.el.checked){c(A).show()}else{c(A).hide()}})}}});if(s){var m=r.headList,o=[],i=[],l=0,n=r.oriTableWidth;c.each(m,function(t,x){var w=x.el,u=c(w);if(u.css("display")!="none"){var v=r.oriThWidth[t];i.push(v);l+=v;o.push(w)}});c.each(o,function(t,u){c(u).width(i[t]*n/l-1)});var k=j.children("thead"),q=j.width();if(f.titlelock){r.$tableHeadClone.width(q);r.$tableHeadClone.html(k.clone(true))}var p=0;if(r.$tableColumn){r.$tableColumnClone.html(j.html());p=r._getColumnWidth();r.$tableColumn.width(p)}if(r.$tableFix){r.$tableFixClone.width(q);r.$tableFixClone.html(k.clone(true));r.$tableFix.width(p)}}r.tempFilterCols={};r._filterCancelHandler(g)},_filterCancelHandler:function(h){var f=this,g=f.options;c.each(f.tempFilterCols,function(j,l){var k=l.el;k.checked=l.checked});f.$subPopMenu.hide();if(f.isMenuOpen){c(document).unbind("click.grid");c(f.isMenuOpen).removeClass("theadfocus");c(f.isMenuOpen).find("a").hide()}if(f.menuDisabled){f.menuDisabled.attr("disabled",false);c(f.menuDisabled[0].parentNode.parentNode).removeClass("disabled")}f.menuDisabled=null;f.isMenuOpen=false;f.tempFilterCols={}},_rowClickHandler:function(k,f,l){var h=this,j=h.options,m=c("input:eq(0)",f),i,g;if(l!==undefined){i=l.nodeName.toLowerCase();if(i!=="td"){if(!(i==="tr"&&k.button===undefined)){return false}}}switch(j.selectrows){case"no":break;default:h._inputClickHandler(k,m[0])}},_inputClickHandler:function(g,h,n){var p=this,f=p.options,k=g.target,j,i;if(k!==undefined){j=k.nodeName.toLowerCase();if(j==="input"){g.stopPropagation()}}var l=n==undefined?!h.checked:h.checked;var m=c(h),o=m.attr("rowIndex");i=p._selectRows([parseInt(o)],l)[0];c.type(f.rowclick_callback)==="function"&&f.rowclick_callback.call(this,i,l,o)},_selectRows:function(n,j){var p=this,f=p.options,h,g=[],m,o,l=j?"addClass":"removeClass";if(f.selectrows==="single"){c("tr."+f.selectedrowclass,p.$tableBox).removeClass(f.selectedrowclass)}for(var k=0;k<n.length;k++){m=c("tr[rowIndex="+n[k]+"]",p.$tableBox);m[l](f.selectedrowclass);switch(f.selectrows){case"multi":h="checkbox";break;case"single":h="radio"}o=c(":"+h,m);o.prop("checked",j);g.push(p._getDataByPrimaryKey(o.attr("pkey")))}if(f.selectrows==="multi"){p._checkSelectAll()}return g},_checkSelectAll:function(){var f=this,h=f.options,i=c('input[name="'+h.checkboxname+'"]:checked',f.$tableData).length;var g=c("th input[name='"+h.allboxname+"']",f.$tableBox);if(i===f.data.length&&g.prop("checked")===false&&i!==0){g.prop("checked",true);typeof h.selectall_callback=="function"&&h.selectall_callback.call(this,f.data,true)}else{if(i!==f.data.length&&g.prop("checked")===true){g.prop("checked",false);typeof h.selectall_callback=="function"&&h.selectall_callback.call(this,f.data,false)}}},_renderClick:function(i,f){i.stopPropagation();var g=this,k=c(f).attr("rowIndex"),h=c(f).attr("on_click"),j=g.data[k];window[h]&&window[h](j)},_selectAllBox:function(j,g){var f=this,i=f.options,h=c("input[name='"+g+"']",f.$tableBox);c("input[name='"+j.name+"']").each(function(k,l){l.checked=j.checked});h.each(function(k,l){if(!l.disabled){l.checked=j.checked;if(l.checked){c("tr[rowIndex="+k+"]",f.$tableBox).addClass(i.selectedrowclass)}else{c("tr[rowIndex="+k+"]",f.$tableBox).removeClass(i.selectedrowclass)}}});typeof i.selectall_callback=="function"&&i.selectall_callback.call(this,f.data,j.checked)},_addEventLisenter:function(){var f=this,h=f.options,i=h.el,g=i.find("th");if(h.colhidden){g.bind("mouseover",function(){var k=c(this);var j=k.attr("colspan");if(j&&parseInt(j)>1){return}k.addClass("theadfocus").find("a").show()}).bind("mouseout",function(){var m=c(this);var l=m.attr("colspan");if(l&&parseInt(l)>1){return}var j=m.attr("bindName");if(f.isMenuOpen){var k=c(f.isMenuOpen).attr("bindName");if(j==k){return}}m.removeClass("theadfocus").find("a").hide()})}g.bind("click",function(q){var p=q.target||q.srcElement,o=p.nodeName.toLowerCase();q=c.event.fix(q);if(o==="a"){function r(){f._filterCancelHandler(q)}var s=c(p).offset(),n=s.left,t=s.top+p.offsetHeight,j=p.parentNode.parentNode;f.isMenuOpen&&r();q.stopPropagation();f.isMenuOpen=j;c(document).bind("click.grid",r);var k=c(f.isMenuOpen).find("span.head_sp").text();f.menuDisabled=f.$subPopMenu.find("input[textValue='"+k+"']");f.menuDisabled.attr("disabled",true);c(f.menuDisabled[0].parentNode.parentNode).addClass("disabled");f.$subPopMenu.css({left:n+"px",top:t+"px",display:"block"});var m=f.$subPopMenu.height();var l=f.$tableData[0].clientHeight;if(l<230){f.$subPopMenu.height(l-30);f.$subPopMenu.children("div:first").height(l-60)}else{if(m<200){f.$subPopMenu.height(200);f.$subPopMenu.children("div:first").height(170)}}var u=document.documentElement.clientWidth||document.body.clientWidth;if(f.$subPopMenu.width()+n>u){f.$subPopMenu.css({left:n-f.$subPopMenu.width()+"px"})}}else{if(o==="span"){if(c(this).attr("sort")=="true"){f._sortTitle(p,c(this).attr("bindName"),null)}}else{if(o==="input"){f._selectAllBox(c(this).find("input")[0],f.options.checkboxname)}}}});if(h.ellipsis){g.bind("mousedown",function(p){var n=p.target||p.srcElement;if(n.nodeName.toLowerCase()==="p"){var t=c(this).attr("bindName"),k=f.headList,q=true;for(var o=0;o<k.length;o++){var r=k[o];if(r.bindName==t){break}else{if(c(r.el).css("display")!="none"){q=false;break}}}if(q){return}var l=this,j=f.widthConfig;j.x=p.clientX;var s=f._readHead(t);j.th=s.elem.el;d.Browser.isIE?i[0].setCapture(false):p.preventDefault();var m=c(j.th).attr(f.thLayer);var w=null;for(var o=s.idx-1;o>=0;o--){var r=k[o];if(c(r.el).css("display")!="none"){w=r.el;break}else{continue}}j.prevTh=w;j.thWidth=~~c(j.th).width();j.prevWidth=~~c(j.prevTh).width();var u=Math.min(f.$tableBox[0].offsetHeight,i[0].offsetHeight),v=f.$tableBox[0].offsetHeight>=i[0].offsetHeight?0:18;f.$line.css({left:p.clientX+c(window).scrollLeft()+"px",height:u-v+"px",top:f.$tableBox.offset().top+"px"});c(document).bind("mousemove.grid",function(B){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var x=f.widthConfig,A=B.clientX,z=A,y=0;if(z>x.x&&B.clientX-x.x>x.thWidth-y){A=x.x+x.thWidth-y}if(z<x.x&&x.x-z>x.prevWidth-y){A=x.x-x.prevWidth+y}f.$line.css({left:A+c(window).scrollLeft()+"px",display:"block"})}).bind("mouseup.grid",function(D){f.$line.hide();var z=f.widthConfig,y=parseInt(f.$line[0].style.left)-c(window).scrollLeft()-z.x;i.width(i.width()+y);c(z.prevTh).width(~~z.prevWidth+y);var B=i.children("thead"),A=i.width();if(h.titlelock){f.$tableHeadClone.width(A);f.$tableHeadClone.html(B.clone(true))}var C=0;if(f.$tableColumn){f.$tableColumnClone.width(A);f.$tableColumnClone.children("thead").replaceWith(B.clone(true));C=f._getColumnWidth();f.$tableColumn.width(C);f.$tableColumn.height(f.$tableData[0].clientHeight)}if(f.$tableFix){f.$tableFixClone.width(A);f.$tableFixClone.html(B.clone(true));f.$tableFix.width(C);f.$tableFix.offset(f.$tableBox.offset())}if(h.titlelock){f.$tableHead.width(f.$tableData[0].clientWidth);d.Browser.isIE&&f.$tablehead[0].releaseCapture()}c(document).unbind("mousemove.grid").unbind("mouseup.grid")})}})}},_getDataByPrimaryKey:function(k){var g=this,j=g.options,l;for(var h=0,f=g.data.length;h<f;h++){if(g.data[h][j.primarykey]+""==k){l=g.data[h]}}return l},resize:function(){var f=this,h=f.options;if(h.resizeheight){f.setHeight(h.resizeheight())}if(h.resizewidth){var g=h.resizewidth();f.$tableWrap.width(g);f.$tableBox.width(g);f.$tableData.width(g);if(f.$tableHead){f.$tableHead.width(f.$tableData[0].clientWidth)}if(h.adaptive){f._resizeGrid(g)}}},getSelectedRowData:function(){var f=this;var h=[];var g=c("input[name='"+this.options.checkboxname+"']:checked",this.$tableData);g.each(function(k,j){h.push(f._getDataByPrimaryKey(c(j).attr("pkey")))});return h},getSelectedPrimaryKey:function(){var g=this,j=g.options,l,k=[];l=g.getSelectedRowData();for(var h=0,f=l.length;h<f;h++){k.push(l[h][j.primarykey])}return k},getSelectedIndex:function(){var f=[];var g=c("input[name='"+this.options.checkboxname+"']",this.$tableData);g.each(function(j,h){if(h.checked){f.push(j)}});return f},getRowsDataByIndex:function(g){var f=this,j=c.type(g),k=[];if(j=="undefined"||j=="null"){return[]}g=j=="array"?g:[g];for(var h=0;h<g.length;h++){k.push(f.data[g[h]])}return k},getRowsDataByPK:function(h){var g=this,n=g.options,m=c.type(h),o=[];if(m=="undefined"||m=="null"){return[]}h=m=="array"?h:[h];for(var f=0,l=g.data.length;f<l;f++){for(var j=0;j<h.length;j++){if(g.data[f][n.primarykey]==h[j]){o.push(g.data[f])}}}return o},selectRowsByPK:function(g,n){var f=this,k=f.options,j=c.type(g),m,l=[];n=n==undefined?true:n;if(j=="undefined"||j=="null"){return[]}g=j=="array"?g:[g];if(k.selectrows=="single"){g=[g[0]];c("tr."+k.selectedrowclass,f.$tableBox).removeClass()}for(var h=0;h<g.length;h++){m=c("input[pKey='"+g[h]+"']",this.$tableBox);l.push(m.attr("rowIndex"))}return f._selectRows(l,n)},selectRowsByIndex:function(g,j){var f=this,i=f.options,h=c.type(g);j=j==undefined?true:j;if(h=="undefined"||h=="null"){return[]}g=h=="array"?g:[g];if(i.selectrows=="single"){g=[g[0]];c("tr."+i.selectedrowclass,f.$tableBox).removeClass()}return f._selectRows(g,j)},setDatasource:function(i,f){var g=this,h=g.options;if(c.type(i)!=="array"){g.data=[]}else{g.data=i}g._resetSortIcon();g._renderTBody();g._adjustTable();if(g.data.length===0){g.setHeight()}g.setPagination(f);g.$loading.hide();typeof h.loadcomplate_callback=="function"&&h.loadcomplate_callback.call(g,g)},setPagination:function(g){var h=this,j=this.options,i=typeof g;h.totalSize=i==="number"?g:h.totalSize;if(j.pagination&&!this.$tFoot){this._renderTFoot()}if(i!=="number"){c(".cui_grid_pagination_tip",h.$tFoot).show()}if(j.pagination){if(h.cuiPagination){h.cuiPagination.setInitData({count:h.totalSize,pageno:h.query.pageNo,pagesize:h.query.pageSize}).reDraw();c(".cui_grid_pagination_tip",h.$tFoot).hide()}else{h.cuiPagination=cui(c(".pagination_wrap",h.$tFoot)).pagination({count:h.totalSize,pagesize:h.query.pageSize,pageno:h.query.pageNo,pagesize_list:j.pagesize_list,on_page_change:function(l,k){h._changePage(l,k)},cls:j.pagination_model,tpls:{pagination:j.pagination_model}})}}if(h.data.length==0){j.pagination&&h.$tFoot.hide();h.$tableColumn&&h.$tableColumn.hide();var f=this.$tableWrap.height();this.$tableBox.data("old_height",this.$tableBox.height()).height(f);this.$tableData.data("old_height",this.$tableData.height()).height(f)}else{if(this.$tableBox.data("old_height")){this.$tableBox.height(this.$tableBox.data("old_height")).removeData("old_height");this.$tableData.height(this.$tableData.data("old_height")).removeData("old_height")}h.$tableColumn&&h.$tableColumn.show();j.pagination&&h.$tFoot.show()}},loadData:function(){var f=this,g=f.options,h=g.datasource;g.loadtip&&f.$loading.show();if(c.type(h)=="string"){window[h]&&window[h](f,c.extend(true,{},f.query))}else{if(c.type(h)=="function"){h(f,c.extend(true,{},f.query))}}},dragSort:function(i){var f=this,h=f.options;if(!f.dragObj){var g=f.$tablehead.find("tbody");f.dragObj=cui(g).dragTable({dragClass:"drag_highlight",onDragStart:h.on_dragstart,onDrag:h.on_drag,onDragEnd:h.on_dragend,childEL:function(){return c(g).children("tr")}})}if(i){f.dragObj.doDrag(f.$tableData[0].clientWidth,f.$tableData.offset().left)}else{f.dragObj.unDrag()}},getQuery:function(){return c.extend(true,{},this.query)},setQuery:function(f){if(c.type(f)==="object"){this.query=c.extend(true,this.query,f);if(f.pageSize){this.query.pageSize=f.pageSize}if(f.pageNo){this.query.pageNo=f.pageNo}if(f.sortName){this.query.sortName=f.sortName}if(f.sortType){this.query.sortType=f.sortType}}},setHighLight:function(g){var f=this;c("input[pKey='"+g+"']",this.$tableBox).each(function(h,j){c(j.parentNode.parentNode).addClass(f.options.selectedrowclass)})},setHeight:function(f){if(f===undefined||f==null){return}var g=this.options;this.$tableWrap.height(f);this.$tableBox.height((parseFloat(f)-(g.pagination?40:0)));this.$tableData.height((parseFloat(f)-(g.pagination?40:0)));if(this.$tableColumn){this.$tableColumn.height(this.$tableData[0].clientHeight)}},addData:function(j){var o=this,f=o.options,h=f.adddata_callback,m=0,n="";var l=o.$tBody.children("tr:last");if(l[0]){var i=l.attr("rowIndex");if(i){m=parseInt(i)}}var g=c("#"+o.id+"_empty_cell",o.$tBody);if(g[0]){g.parent().remove();if(f.fixcolumnnumber>0){c("#"+o.id+"_empty_cell",o.$tableColumnClone).parent().remove()}}if(c.type(j)=="array"){c.each(j,function(p,q){n+=o._renderRow(q,m+p+1)})}else{n=o._renderRow(j,m+1)}o.$tBody.append(n);if(f.fixcolumnnumber>0){var k=o.$tableColumnClone.children("tbody");k.append(n);o.$tableColumn.height(o.$tableData[0].clientHeight)}if(!o.data){o.data=[]}if(c.type(j)=="array"){c.each(j,function(q,p){o.data.push(q)})}else{o.data.push(j)}if(!h){return}if(c.type(h)=="string"){window[h]&&window[h](j)}else{if(c.type(h)=="function"){h(j)}}},removeData:function(q){var r=this,f=r.options,j=f.removedata_callback,m=[],p=[],h=[];if(!q){var l=c("input[name='"+f.checkboxname+"']",r.$tablehead);l.each(function(t,s){if(s.checked){m.push(c(s).attr("rowindex"));p.push(t);h.push(r.data[t])}})}else{if(c.type(q)=="array"){m=q}else{m.push(q)}r.$tBody.children("tr").each(function(s,t){var u=c(t).attr("rowindex");if(u&&r._contains(m,u)!=-1){p.push(s);h.push(r.data[s])}})}if(m.length>0){var o=null;for(var k=0;k<m.length;k++){r.$tBody.children("tr[rowIndex="+m[k]+"]").remove();if(f.fixcolumnnumber>0){if(!o){o=r.$tableColumnClone.children("tbody")}o.children("tr[rowIndex="+m[k]+"]").remove()}}if(f.fixcolumnnumber>0){r.$tableColumn.height(r.$tableData[0].clientHeight)}}c.each(p,function(t,s){r.data.splice(t[s]-s,1)});if(r.data.length==0){r.query.pageNo=r.query.pageNo<=1?1:r.query.pageNo-1}if(r.data.length==0&&c("#"+r.id+"_empty_cell").length==0){var g=r._buildTemplateStr("emptyRow",c.extend({},f,{emptycolspan:r.headList.length,id:r.id}));r.$tBody.append(g);if(f.fixcolumnnumber>0){var n=r.$tableColumnClone.children("tbody");n.append(g);r.$tableColumn.height(r.$tableData[0].clientHeight)}}if(!j){return}if(c.type(j)=="string"){window[j]&&window[j](h)}else{if(c.type(j)=="function"){j(h)}}}});function a(j){var h,g;j=j.toString().replace(/\$|\,/g,"");if(isNaN(j)){j="0"}h=(j==(j=Math.abs(j)));var f=j.toString().indexOf(".");if(f==-1){g="00";j=j.toString()}else{g=j.toString().substring(f+1,j.length);j=j.toString().substring(0,f)}for(var k=0;k<Math.floor((j.length-(1+k))/3);k++){j=j.substring(0,j.length-(4*k+3))+","+j.substring(j.length-(4*k+3))}return(((h)?"":"-")+j+"."+g)}function b(){var h,f,g=document.createElement("DIV");g.style.cssText="position:absolute; top:-1000px; width:100px; height:100px; overflow:hidden;";h=document.body.appendChild(g).clientWidth;g.style.overflowY="scroll";f=g.clientWidth;document.body.removeChild(g);return h-f}})(window.comtop.cQuery,window.comtop);(function(h,a){a.UI.scan=function(){var q={};for(var r=0;r<arguments.length;r++){switch(typeof arguments[r]){case"string":case"object":q.range=h(arguments[r]);break;case"boolean":q.databind=arguments[r];break}}q=h.extend({range:document,databind:true},q);j(q)};a.UI.scan.debug=false;a.UI.scan.textmode=false;a.UI.scan.disable=false;a.UI.scan.readonly=false;a.UI.scan.databind=o;a.UI.scan.setReadonly=p;var b,d=[],k=[];function j(t){b=null;d=[];k=[];b=h("[uitype]",t.range);b.each(function(){var v=h(this);var u=v.attr("uitype");if(v.data("uitype")||!a.UI[u.charAt(0).toUpperCase()+u.substring(1)]){b=b.not(v);return true}d.push(l(v,u))});var s=null;if(t.databind){o()}if(!a.UI.scan.textmode&&!comtop.UI.scan.disable){for(var r=0,q=b.length;r<q;r++){s=b.eq(r).data("uitype");if(s&&!s.options.textmode&&!s.options.disable){k.push(f(b.eq(r),d[r]));k.push(i(b.eq(r),d[r],s.tipPosition||s.options.el))}}}if(a.UI.scan.debug){c(t.databind)}t=undefined}function l(r,q){if(!q&&q===""){return false}var s=n(r[0]);var x={validate:s.validate};var w={databind:s.databind};var v={tip:s.tip,trigger:s.tipTrigger?s.tipTrigger:"hover"};delete s.uitype;delete s.tipTrigger;delete s.tip;delete s.databind;delete s.validate;var t=q.charAt(0).toLowerCase()+q.substring(1);if(a.UI.scan.textmode){s.textmode=true;s.readonly=false;s.disable=false}if(a.UI.scan.disable){s.textmode=false;s.readonly=false;s.disable=true}if(a.UI.scan.readonly){s.readonly=true;s.textmode=false;s.disable=false}if(a.UI.scan.debug){try{r[t](s)}catch(u){k.push("["+q+":"+r.attr("id")+"]:????????????????????????????????????????\n")}}else{r[t](s)}return{opts:s,valiOpts:x,dbOpts:w,tipOpts:v}}function o(){if(!b||b.length===0){return}for(var r=0,q=b.length;r<q;r++){b.eq(r).data("uitype")&&k.push(g(b.eq(r),d[r]))}}function c(t){if(a.UI.scan.debug){var s=[];for(var r=0,q=k.length;r<q;r++){k[r]&&s.push(k[r])}s.length>0&&alert(s.join(""))}k=[];if(!t){b=undefined;d=[]}}function g(B,r){var A=r.dbOpts.databind;var z=null;var t=a.UI.scan.debug;if(A){var s=A.split(".");if(s.length<2){t&&(z="["+B.attr("uitype")+":"+B.attr("id")+"]:??????????JSON????????????;\n");return false}var v=[];var q;var x;for(var w=0,u=s.length;w<u;w++){if(w<u-1){v.push(s[w])}else{x=s[w]}}q=a.namespace(v.join("."));if(q.nodeName){t&&(z="["+B.attr("uitype")+":"+B.attr("id")+"]:???"+v+"????????ID????????????;\n");return false}var y=cui(q).databind();y.addBind(B,x)}return z}function f(t,u){var r=u.valiOpts.validate;var q="";if(r){var v=/^(?:\{.*\}|\[.*\])$/;if(!window.validater){window.validater=cui().validate()}if(v.test(r)){try{r=h.parseJSON(r.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"))}catch(w){q="["+t.attr("uitype")+":"+t.attr("id")+"]:???JSON???????;\n"}}else{try{r=m(r)}catch(w){q="["+t.attr("uitype")+":"+t.attr("id")+"]:?????????????;\n"}}switch(h.type(r)){case"array":for(var s=0;s<r.length;s++){if(r[s].rule){window.validater.add(cui(t),r[s].type,r[s].rule)}else{window.validater.add(cui(t),r[s].type)}}break;case"string":window.validater.add(cui(t),r)}}return q}function i(s,t,r){var q="";r=h(r,s);if(cui(s).options.textmode!=undefined&&!t.tipOpts.tip){s.attr("tip","");t.tipOpts.tip=""}if(t.tipOpts.tip!=undefined){try{cui.tip(r,{trigger:t.tipOpts.trigger,tipEl:s})}catch(u){q="["+s.attr("uitype")+":"+s.attr("id")+"]:??????????;\n"}}return q}function n(r){var q=h(r);return{isScanner:true,databind:q.attr("databind"),validate:q.attr("validate"),tip:q.attr("tip"),tipTrigger:q.attr("tip_trigger")}}function m(s){var q=s.split("."),t=window;for(var r=0;r<q.length;r++){t=t[q[r]]}return(typeof t==="object"&&!t.nodeName)?t:s}function p(r,v){r=typeof r==="undefined"?true:r;v=typeof v==="undefined"?"body":v;var u=[];var s=h(v);var t,q;if(v!="document"&&v!="body"&&v!="html"){for(t=0,q=a.UI.componentList.length;t<q;t++){if(s.find(a.UI.componentList[t].options.el).length){u.push(a.UI.componentList[t])}}}else{u=a.UI.componentList}for(t=0,q=u.length;t<q;t++){if(typeof u[t].setReadonly==="function"){u[t].setReadonly(r)}}}})(window.comtop.cQuery,window.comtop);window.comtop=window.comtop||{};comtop.version="V4.0.1-beta1-Bulid20130701";(function(c){window.console=window.console||{log:function(){},info:function(){},warn:function(){},error:function(){}};c.namespace=b;c.guid=a;function b(d){var g,f,j=d.split("."),h=window;for(g=0;g<j.length;g=g+1){f=j[g];h[f]=h[f]||{};h=h[f]}return h}function a(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(g){var f=Math.random()*16|0,d=g=="x"?f:(f&3|8);return d.toString(16)}).toUpperCase()}})(window.comtop=window.comtop||{});comtop.namespace("comtop.UI");comtop.namespace("comtop.Dom");comtop.namespace("comtop.String");comtop.namespace("comtop.Date");comtop.namespace("comtop.Browser");comtop.namespace("comtop.Tools");
/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
(function(a2,aB){var w,af,o=a2.document,aI=a2.location,d=a2.navigator,bg=a2.jQuery,I=a2.$,am=Array.prototype.push,a4=Array.prototype.slice,aK=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aO=String.prototype.trim,bG=function(bZ,b0){return new bG.fn.init(bZ,b0,w)},bx=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,aV=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bf=/^[\],:{}\s]*$/,bi=/(?:^|:|,)(?:\s*\[)+/g,bD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bP=/^-ms-/,aU=/-([\da-z])/gi,N=function(bZ,b0){return(b0+"").toUpperCase()},aF=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aF,false);bG.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aF);bG.ready()}}},Z={};bG.fn=bG.prototype={constructor:bG,init:function(bZ,b3,b2){var b1,b4,b0,b5;if(!bZ){return this}if(bZ.nodeType){this.context=this[0]=bZ;this.length=1;return this}if(typeof bZ==="string"){if(bZ.charAt(0)==="<"&&bZ.charAt(bZ.length-1)===">"&&bZ.length>=3){b1=[null,bZ,null]}else{b1=bo.exec(bZ)}if(b1&&(b1[1]||!b3)){if(b1[1]){b3=b3 instanceof bG?b3[0]:b3;b5=(b3&&b3.nodeType?b3.ownerDocument||b3:o);bZ=bG.parseHTML(b1[1],b5,true);if(a.test(b1[1])&&bG.isPlainObject(b3)){this.attr.call(bZ,b3,true)}return bG.merge(this,bZ)}else{b4=o.getElementById(b1[2]);if(b4&&b4.parentNode){if(b4.id!==b1[2]){return b2.find(bZ)}this.length=1;this[0]=b4}this.context=o;this.selector=bZ;return this}}else{if(!b3||b3.jquery){return(b3||b2).find(bZ)}else{return this.constructor(b3).find(bZ)}}}else{if(bG.isFunction(bZ)){return b2.ready(bZ)}}if(bZ.selector!==aB){this.selector=bZ.selector;this.context=bZ.context}return bG.makeArray(bZ,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(bZ){return bZ==null?this.toArray():(bZ<0?this[this.length+bZ]:this[bZ])},pushStack:function(b0,b2,bZ){var b1=bG.merge(this.constructor(),b0);b1.prevObject=this;b1.context=this.context;if(b2==="find"){b1.selector=this.selector+(this.selector?" ":"")+bZ}else{if(b2){b1.selector=this.selector+"."+b2+"("+bZ+")"}}return b1},each:function(b0,bZ){return bG.each(this,b0,bZ)},ready:function(bZ){bG.ready.promise().done(bZ);return this},eq:function(bZ){bZ=+bZ;return bZ===-1?this.slice(bZ):this.slice(bZ,bZ+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a4.apply(this,arguments),"slice",a4.call(arguments).join(","))},map:function(bZ){return this.pushStack(bG.map(this,function(b1,b0){return bZ.call(b1,b0,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bG.fn.init.prototype=bG.fn;bG.extend=bG.fn.extend=function(){var b8,b1,bZ,b0,b5,b6,b4=arguments[0]||{},b3=1,b2=arguments.length,b7=false;if(typeof b4==="boolean"){b7=b4;b4=arguments[1]||{};b3=2}if(typeof b4!=="object"&&!bG.isFunction(b4)){b4={}}if(b2===b3){b4=this;--b3}for(;b3<b2;b3++){if((b8=arguments[b3])!=null){for(b1 in b8){bZ=b4[b1];b0=b8[b1];if(b4===b0){continue}if(b7&&b0&&(bG.isPlainObject(b0)||(b5=bG.isArray(b0)))){if(b5){b5=false;b6=bZ&&bG.isArray(bZ)?bZ:[]}else{b6=bZ&&bG.isPlainObject(bZ)?bZ:{}}b4[b1]=bG.extend(b7,b6,b0)}else{if(b0!==aB){b4[b1]=b0}}}}}return b4};bG.extend({noConflict:function(bZ){if(a2.$===bG){a2.$=I}if(bZ&&a2.jQuery===bG){a2.jQuery=bg}return bG},isReady:false,readyWait:1,holdReady:function(bZ){if(bZ){bG.readyWait++}else{bG.ready(true)}},ready:function(bZ){if(bZ===true?--bG.readyWait:bG.isReady){return}if(!o.body){return setTimeout(bG.ready,1)}bG.isReady=true;if(bZ!==true&&--bG.readyWait>0){return}af.resolveWith(o,[bG]);if(bG.fn.trigger){bG(o).trigger("ready").off("ready")}},isFunction:function(bZ){return bG.type(bZ)==="function"},isArray:Array.isArray||function(bZ){return bG.type(bZ)==="array"},isWindow:function(bZ){return bZ!=null&&bZ==bZ.window},isNumeric:function(bZ){return !isNaN(parseFloat(bZ))&&isFinite(bZ)},type:function(bZ){return bZ==null?String(bZ):Z[z.call(bZ)]||"object"},isPlainObject:function(b1){if(!b1||bG.type(b1)!=="object"||b1.nodeType||bG.isWindow(b1)){return false}try{if(b1.constructor&&!V.call(b1,"constructor")&&!V.call(b1.constructor.prototype,"isPrototypeOf")){return false}}catch(b0){return false}var bZ;for(bZ in b1){}return bZ===aB||V.call(b1,bZ)},isEmptyObject:function(b0){var bZ;for(bZ in b0){return false}return true},error:function(bZ){throw new Error(bZ)},parseHTML:function(b2,b1,bZ){var b0;if(!b2||typeof b2!=="string"){return null}if(typeof b1==="boolean"){bZ=b1;b1=0}b1=b1||o;if((b0=a.exec(b2))){return[b1.createElement(b0[1])]}b0=bG.buildFragment([b2],b1,bZ?null:[]);return bG.merge([],(b0.cacheable?bG.clone(b0.fragment):b0.fragment).childNodes)},parseJSON:function(bZ){if(!bZ||typeof bZ!=="string"){return null}bZ=bG.trim(bZ);if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(bZ)}if(bf.test(bZ.replace(bD,"@").replace(a0,"]").replace(bi,""))){return(new Function("return "+bZ))()}bG.error("Invalid JSON: "+bZ)},parseXML:function(b1){var bZ,b0;if(!b1||typeof b1!=="string"){return null}try{if(a2.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}}catch(b2){bZ=aB}if(!bZ||!bZ.documentElement||bZ.getElementsByTagName("parsererror").length){bG.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(bZ){if(bZ&&aa.test(bZ)){(a2.execScript||function(b0){a2["eval"].call(a2,b0)})(bZ)}},camelCase:function(bZ){return bZ.replace(bP,"ms-").replace(aU,N)},nodeName:function(b0,bZ){return b0.nodeName&&b0.nodeName.toLowerCase()===bZ.toLowerCase()},each:function(b4,b5,b1){var b0,b2=0,b3=b4.length,bZ=b3===aB||bG.isFunction(b4);if(b1){if(bZ){for(b0 in b4){if(b5.apply(b4[b0],b1)===false){break}}}else{for(;b2<b3;){if(b5.apply(b4[b2++],b1)===false){break}}}}else{if(bZ){for(b0 in b4){if(b5.call(b4[b0],b0,b4[b0])===false){break}}}else{for(;b2<b3;){if(b5.call(b4[b2],b2,b4[b2++])===false){break}}}}return b4},trim:aO&&!aO.call("\uFEFF\xA0")?function(bZ){return bZ==null?"":aO.call(bZ)}:function(bZ){return bZ==null?"":(bZ+"").replace(C,"")},makeArray:function(bZ,b1){var b2,b0=b1||[];if(bZ!=null){b2=bG.type(bZ);if(bZ.length==null||b2==="string"||b2==="function"||b2==="regexp"||bG.isWindow(bZ)){am.call(b0,bZ)}else{bG.merge(b0,bZ)}}return b0},inArray:function(b2,b0,b1){var bZ;if(b0){if(aK){return aK.call(b0,b2,b1)}bZ=b0.length;b1=b1?b1<0?Math.max(0,bZ+b1):b1:0;for(;b1<bZ;b1++){if(b1 in b0&&b0[b1]===b2){return b1}}}return -1},merge:function(b3,b1){var bZ=b1.length,b2=b3.length,b0=0;if(typeof bZ==="number"){for(;b0<bZ;b0++){b3[b2++]=b1[b0]}}else{while(b1[b0]!==aB){b3[b2++]=b1[b0++]}}b3.length=b2;return b3},grep:function(b0,b5,bZ){var b4,b1=[],b2=0,b3=b0.length;bZ=!!bZ;for(;b2<b3;b2++){b4=!!b5(b0[b2],b2);if(bZ!==b4){b1.push(b0[b2])}}return b1},map:function(bZ,b6,b7){var b4,b5,b3=[],b1=0,b0=bZ.length,b2=bZ instanceof bG||b0!==aB&&typeof b0==="number"&&((b0>0&&bZ[0]&&bZ[b0-1])||b0===0||bG.isArray(bZ));if(b2){for(;b1<b0;b1++){b4=b6(bZ[b1],b1,b7);if(b4!=null){b3[b3.length]=b4}}}else{for(b5 in bZ){b4=b6(bZ[b5],b5,b7);if(b4!=null){b3[b3.length]=b4}}}return b3.concat.apply([],b3)},guid:1,proxy:function(b3,b2){var b1,bZ,b0;if(typeof b2==="string"){b1=b3[b2];b2=b3;b3=b1}if(!bG.isFunction(b3)){return aB}bZ=a4.call(arguments,2);b0=function(){return b3.apply(b2,bZ.concat(a4.call(arguments)))};b0.guid=b3.guid=b3.guid||bG.guid++;return b0},access:function(bZ,b5,b8,b6,b3,b9,b7){var b1,b4=b8==null,b2=0,b0=bZ.length;if(b8&&typeof b8==="object"){for(b2 in b8){bG.access(bZ,b5,b2,b8[b2],1,b9,b6)}b3=1}else{if(b6!==aB){b1=b7===aB&&bG.isFunction(b6);if(b4){if(b1){b1=b5;b5=function(cb,ca,cc){return b1.call(bG(cb),cc)}}else{b5.call(bZ,b6);b5=null}}if(b5){for(;b2<b0;b2++){b5(bZ[b2],b8,b1?b6.call(bZ[b2],b2,b5(bZ[b2],b8)):b6,b7)}}b3=1}}return b3?bZ:b4?b5.call(bZ):b0?b5(bZ[0],b8):b9},now:function(){return(new Date()).getTime()}});bG.ready.promise=function(b2){if(!af){af=bG.Deferred();if(o.readyState==="complete"){setTimeout(bG.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aF,false);a2.addEventListener("load",bG.ready,false)}else{o.attachEvent("onreadystatechange",aF);a2.attachEvent("onload",bG.ready);var b1=false;try{b1=a2.frameElement==null&&o.documentElement}catch(b0){}if(b1&&b1.doScroll){(function bZ(){if(!bG.isReady){try{b1.doScroll("left")}catch(b3){return setTimeout(bZ,50)}bG.ready()}})()}}}}return af.promise(b2)};bG.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,bZ){Z["[object "+bZ+"]"]=bZ.toLowerCase()});w=bG(o);var bU={};function ac(b0){var bZ=bU[b0]={};bG.each(b0.split(aV),function(b2,b1){bZ[b1]=true});return bZ}bG.Callbacks=function(b9){b9=typeof b9==="string"?(bU[b9]||ac(b9)):bG.extend({},b9);var b2,bZ,b3,b1,b4,b5,b6=[],b7=!b9.once&&[],b0=function(ca){b2=b9.memory&&ca;bZ=true;b5=b1||0;b1=0;b4=b6.length;b3=true;for(;b6&&b5<b4;b5++){if(b6[b5].apply(ca[0],ca[1])===false&&b9.stopOnFalse){b2=false;break}}b3=false;if(b6){if(b7){if(b7.length){b0(b7.shift())}}else{if(b2){b6=[]}else{b8.disable()}}}},b8={add:function(){if(b6){var cb=b6.length;(function ca(cc){bG.each(cc,function(ce,cd){var cf=bG.type(cd);if(cf==="function"&&(!b9.unique||!b8.has(cd))){b6.push(cd)}else{if(cd&&cd.length&&cf!=="string"){ca(cd)}}})})(arguments);if(b3){b4=b6.length}else{if(b2){b1=cb;b0(b2)}}}return this},remove:function(){if(b6){bG.each(arguments,function(cc,ca){var cb;while((cb=bG.inArray(ca,b6,cb))>-1){b6.splice(cb,1);if(b3){if(cb<=b4){b4--}if(cb<=b5){b5--}}}})}return this},has:function(ca){return bG.inArray(ca,b6)>-1},empty:function(){b6=[];return this},disable:function(){b6=b7=b2=aB;return this},disabled:function(){return !b6},lock:function(){b7=aB;if(!b2){b8.disable()}return this},locked:function(){return !b7},fireWith:function(cb,ca){ca=ca||[];ca=[cb,ca.slice?ca.slice():ca];if(b6&&(!bZ||b7)){if(b3){b7.push(ca)}else{b0(ca)}}return this},fire:function(){b8.fireWith(this,arguments);return this},fired:function(){return !!bZ}};return b8};bG.extend({Deferred:function(b1){var b0=[["resolve","done",bG.Callbacks("once memory"),"resolved"],["reject","fail",bG.Callbacks("once memory"),"rejected"],["notify","progress",bG.Callbacks("memory")]],b2="pending",b3={state:function(){return b2},always:function(){bZ.done(arguments).fail(arguments);return this},then:function(){var b4=arguments;return bG.Deferred(function(b5){bG.each(b0,function(b7,b6){var b9=b6[0],b8=b4[b7];bZ[b6[1]](bG.isFunction(b8)?function(){var ca=b8.apply(this,arguments);if(ca&&bG.isFunction(ca.promise)){ca.promise().done(b5.resolve).fail(b5.reject).progress(b5.notify)}else{b5[b9+"With"](this===bZ?b5:this,[ca])}}:b5[b9])});b4=null}).promise()},promise:function(b4){return b4!=null?bG.extend(b4,b3):b3}},bZ={};b3.pipe=b3.then;bG.each(b0,function(b5,b4){var b7=b4[2],b6=b4[3];b3[b4[1]]=b7.add;if(b6){b7.add(function(){b2=b6},b0[b5^1][2].disable,b0[2][2].lock)}bZ[b4[0]]=b7.fire;bZ[b4[0]+"With"]=b7.fireWith});b3.promise(bZ);if(b1){b1.call(bZ,bZ)}return bZ},when:function(b3){var b1=0,b5=a4.call(arguments),bZ=b5.length,b0=bZ!==1||(b3&&bG.isFunction(b3.promise))?bZ:0,b8=b0===1?b3:bG.Deferred(),b2=function(ca,cb,b9){return function(cc){cb[ca]=this;b9[ca]=arguments.length>1?a4.call(arguments):cc;if(b9===b7){b8.notifyWith(cb,b9)}else{if(!(--b0)){b8.resolveWith(cb,b9)}}}},b7,b4,b6;if(bZ>1){b7=new Array(bZ);b4=new Array(bZ);b6=new Array(bZ);for(;b1<bZ;b1++){if(b5[b1]&&bG.isFunction(b5[b1].promise)){b5[b1].promise().done(b2(b1,b6,b5)).fail(b8.reject).progress(b2(b1,b4,b7))}else{--b0}}}if(!b0){b8.resolveWith(b6,b5)}return b8.promise()}});bG.support=(function(){var cb,ca,b8,b9,b2,b7,b6,b4,b3,b1,bZ,b0=o.createElement("div");b0.setAttribute("className","t");b0.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";ca=b0.getElementsByTagName("*");b8=b0.getElementsByTagName("a")[0];b8.style.cssText="top:1px;float:left;opacity:.5";if(!ca||!ca.length){return{}}b9=o.createElement("select");b2=b9.appendChild(o.createElement("option"));b7=b0.getElementsByTagName("input")[0];cb={leadingWhitespace:(b0.firstChild.nodeType===3),tbody:!b0.getElementsByTagName("tbody").length,htmlSerialize:!!b0.getElementsByTagName("link").length,style:/top/.test(b8.getAttribute("style")),hrefNormalized:(b8.getAttribute("href")==="/a"),opacity:/^0.5/.test(b8.style.opacity),cssFloat:!!b8.style.cssFloat,checkOn:(b7.value==="on"),optSelected:b2.selected,getSetAttribute:b0.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b7.checked=true;cb.noCloneChecked=b7.cloneNode(true).checked;b9.disabled=true;cb.optDisabled=!b2.disabled;try{delete b0.test}catch(b5){cb.deleteExpando=false}if(!b0.addEventListener&&b0.attachEvent&&b0.fireEvent){b0.attachEvent("onclick",bZ=function(){cb.noCloneEvent=false});b0.cloneNode(true).fireEvent("onclick");b0.detachEvent("onclick",bZ)}b7=o.createElement("input");b7.value="t";b7.setAttribute("type","radio");cb.radioValue=b7.value==="t";b7.setAttribute("checked","checked");b7.setAttribute("name","t");b0.appendChild(b7);b6=o.createDocumentFragment();b6.appendChild(b0.lastChild);cb.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;cb.appendChecked=b7.checked;b6.removeChild(b7);b6.appendChild(b0);if(b0.attachEvent){for(b3 in {submit:true,change:true,focusin:true}){b4="on"+b3;b1=(b4 in b0);if(!b1){b0.setAttribute(b4,"return;");b1=(typeof b0[b4]==="function")}cb[b3+"Bubbles"]=b1}}bG(function(){var cd,ch,cf,cg,ce="padding:0;margin:0;border:0;display:block;overflow:hidden;",cc=o.getElementsByTagName("body")[0];if(!cc){return}cd=o.createElement("div");cd.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";cc.insertBefore(cd,cc.firstChild);ch=o.createElement("div");cd.appendChild(ch);ch.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cf=ch.getElementsByTagName("td");cf[0].style.cssText="padding:0;margin:0;border:0;display:none";b1=(cf[0].offsetHeight===0);cf[0].style.display="";cf[1].style.display="none";cb.reliableHiddenOffsets=b1&&(cf[0].offsetHeight===0);ch.innerHTML="";ch.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cb.boxSizing=(ch.offsetWidth===4);cb.doesNotIncludeMarginInBodyOffset=(cc.offsetTop!==1);if(a2.getComputedStyle){cb.pixelPosition=(a2.getComputedStyle(ch,null)||{}).top!=="1%";cb.boxSizingReliable=(a2.getComputedStyle(ch,null)||{width:"4px"}).width==="4px";cg=o.createElement("div");cg.style.cssText=ch.style.cssText=ce;cg.style.marginRight=cg.style.width="0";ch.style.width="1px";ch.appendChild(cg);cb.reliableMarginRight=!parseFloat((a2.getComputedStyle(cg,null)||{}).marginRight)}if(typeof ch.style.zoom!=="undefined"){ch.innerHTML="";ch.style.cssText=ce+"width:1px;padding:1px;display:inline;zoom:1";cb.inlineBlockNeedsLayout=(ch.offsetWidth===3);ch.style.display="block";ch.style.overflow="visible";ch.innerHTML="<div></div>";ch.firstChild.style.width="5px";cb.shrinkWrapBlocks=(ch.offsetWidth!==3);cd.style.zoom=1}cc.removeChild(cd);cd=ch=cf=cg=null});b6.removeChild(b0);ca=b8=b9=b2=b7=b6=b0=null;return cb})();var bt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;bG.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bG.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(bZ){bZ=bZ.nodeType?bG.cache[bZ[bG.expando]]:bZ[bG.expando];return !!bZ&&!O(bZ)},data:function(b2,b0,b4,b3){if(!bG.acceptData(b2)){return}var b5,b7,b8=bG.expando,b6=typeof b0==="string",b9=b2.nodeType,bZ=b9?bG.cache:b2,b1=b9?b2[b8]:b2[b8]&&b8;if((!b1||!bZ[b1]||(!b3&&!bZ[b1].data))&&b6&&b4===aB){return}if(!b1){if(b9){b2[b8]=b1=bG.deletedIds.pop()||bG.guid++}else{b1=b8}}if(!bZ[b1]){bZ[b1]={};if(!b9){bZ[b1].toJSON=bG.noop}}if(typeof b0==="object"||typeof b0==="function"){if(b3){bZ[b1]=bG.extend(bZ[b1],b0)}else{bZ[b1].data=bG.extend(bZ[b1].data,b0)}}b5=bZ[b1];if(!b3){if(!b5.data){b5.data={}}b5=b5.data}if(b4!==aB){b5[bG.camelCase(b0)]=b4}if(b6){b7=b5[b0];if(b7==null){b7=b5[bG.camelCase(b0)]}}else{b7=b5}return b7},removeData:function(b2,b0,b3){if(!bG.acceptData(b2)){return}var b6,b5,b4,b7=b2.nodeType,bZ=b7?bG.cache:b2,b1=b7?b2[bG.expando]:bG.expando;if(!bZ[b1]){return}if(b0){b6=b3?bZ[b1]:bZ[b1].data;if(b6){if(!bG.isArray(b0)){if(b0 in b6){b0=[b0]}else{b0=bG.camelCase(b0);if(b0 in b6){b0=[b0]}else{b0=b0.split(" ")}}}for(b5=0,b4=b0.length;b5<b4;b5++){delete b6[b0[b5]]}if(!(b3?O:bG.isEmptyObject)(b6)){return}}}if(!b3){delete bZ[b1].data;if(!O(bZ[b1])){return}}if(b7){bG.cleanData([b2],true)}else{if(bG.support.deleteExpando||bZ!=bZ.window){delete bZ[b1]}else{bZ[b1]=null}}},_data:function(b0,bZ,b1){return bG.data(b0,bZ,b1,true)},acceptData:function(b0){var bZ=b0.nodeName&&bG.noData[b0.nodeName.toLowerCase()];return !bZ||bZ!==true&&b0.getAttribute("classid")===bZ}});bG.fn.extend({data:function(b8,b7){var b3,b0,b6,bZ,b2,b1=this[0],b5=0,b4=null;if(b8===aB){if(this.length){b4=bG.data(b1);if(b1.nodeType===1&&!bG._data(b1,"parsedAttrs")){b6=b1.attributes;for(b2=b6.length;b5<b2;b5++){bZ=b6[b5].name;if(!bZ.indexOf("data-")){bZ=bG.camelCase(bZ.substring(5));bv(b1,bZ,b4[bZ])}}bG._data(b1,"parsedAttrs",true)}}return b4}if(typeof b8==="object"){return this.each(function(){bG.data(this,b8)})}b3=b8.split(".",2);b3[1]=b3[1]?"."+b3[1]:"";b0=b3[1]+"!";return bG.access(this,function(b9){if(b9===aB){b4=this.triggerHandler("getData"+b0,[b3[0]]);if(b4===aB&&b1){b4=bG.data(b1,b8);b4=bv(b1,b8,b4)}return b4===aB&&b3[1]?this.data(b3[0]):b4}b3[1]=b9;this.each(function(){var ca=bG(this);ca.triggerHandler("setData"+b0,b3);bG.data(this,b8,b9);ca.triggerHandler("changeData"+b0,b3)})},null,b7,arguments.length>1,null,false)},removeData:function(bZ){return this.each(function(){bG.removeData(this,bZ)})}});function bv(b1,b0,b2){if(b2===aB&&b1.nodeType===1){var bZ="data-"+b0.replace(aL,"-$1").toLowerCase();b2=b1.getAttribute(bZ);if(typeof b2==="string"){try{b2=b2==="true"?true:b2==="false"?false:b2==="null"?null:+b2+""===b2?+b2:bt.test(b2)?bG.parseJSON(b2):b2}catch(b3){}bG.data(b1,b0,b2)}else{b2=aB}}return b2}function O(b0){var bZ;for(bZ in b0){if(bZ==="data"&&bG.isEmptyObject(b0[bZ])){continue}if(bZ!=="toJSON"){return false}}return true}bG.extend({queue:function(b1,b0,b2){var bZ;if(b1){b0=(b0||"fx")+"queue";bZ=bG._data(b1,b0);if(b2){if(!bZ||bG.isArray(b2)){bZ=bG._data(b1,b0,bG.makeArray(b2))}else{bZ.push(b2)}}return bZ||[]}},dequeue:function(b4,b3){b3=b3||"fx";var b0=bG.queue(b4,b3),b5=b0.length,b2=b0.shift(),bZ=bG._queueHooks(b4,b3),b1=function(){bG.dequeue(b4,b3)};if(b2==="inprogress"){b2=b0.shift();b5--}if(b2){if(b3==="fx"){b0.unshift("inprogress")}delete bZ.stop;b2.call(b4,b1,bZ)}if(!b5&&bZ){bZ.empty.fire()}},_queueHooks:function(b1,b0){var bZ=b0+"queueHooks";return bG._data(b1,bZ)||bG._data(b1,bZ,{empty:bG.Callbacks("once memory").add(function(){bG.removeData(b1,b0+"queue",true);bG.removeData(b1,bZ,true)})})}});bG.fn.extend({queue:function(bZ,b0){var b1=2;if(typeof bZ!=="string"){b0=bZ;bZ="fx";b1--}if(arguments.length<b1){return bG.queue(this[0],bZ)}return b0===aB?this:this.each(function(){var b2=bG.queue(this,bZ,b0);bG._queueHooks(this,bZ);if(bZ==="fx"&&b2[0]!=="inprogress"){bG.dequeue(this,bZ)}})},dequeue:function(bZ){return this.each(function(){bG.dequeue(this,bZ)})},delay:function(b0,bZ){b0=bG.fx?bG.fx.speeds[b0]||b0:b0;bZ=bZ||"fx";return this.queue(bZ,function(b2,b1){var b3=setTimeout(b2,b0);b1.stop=function(){clearTimeout(b3)}})},clearQueue:function(bZ){return this.queue(bZ||"fx",[])},promise:function(b1,b5){var b0,b2=1,b6=bG.Deferred(),b4=this,bZ=this.length,b3=function(){if(!(--b2)){b6.resolveWith(b4,[b4])}};if(typeof b1!=="string"){b5=b1;b1=aB}b1=b1||"fx";while(bZ--){b0=bG._data(b4[bZ],b1+"queueHooks");if(b0&&b0.empty){b2++;b0.empty.add(b3)}}b3();return b6.promise(b5)}});var a7,bV,n,bJ=/[\t\r\n]/g,ai=/\r/g,j=/^(?:button|input)$/i,aA=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bL=bG.support.getSetAttribute;bG.fn.extend({attr:function(bZ,b0){return bG.access(this,bG.attr,bZ,b0,arguments.length>1)},removeAttr:function(bZ){return this.each(function(){bG.removeAttr(this,bZ)})},prop:function(bZ,b0){return bG.access(this,bG.prop,bZ,b0,arguments.length>1)},removeProp:function(bZ){bZ=bG.propFix[bZ]||bZ;return this.each(function(){try{this[bZ]=aB;delete this[bZ]}catch(b0){}})},addClass:function(b3){var b5,b1,b0,b2,b4,b6,bZ;if(bG.isFunction(b3)){return this.each(function(b7){bG(this).addClass(b3.call(this,b7,this.className))})}if(b3&&typeof b3==="string"){b5=b3.split(aV);for(b1=0,b0=this.length;b1<b0;b1++){b2=this[b1];if(b2.nodeType===1){if(!b2.className&&b5.length===1){b2.className=b3}else{b4=" "+b2.className+" ";for(b6=0,bZ=b5.length;b6<bZ;b6++){if(b4.indexOf(" "+b5[b6]+" ")<0){b4+=b5[b6]+" "}}b2.className=bG.trim(b4)}}}}return this},removeClass:function(b5){var b2,b3,b4,b6,b0,b1,bZ;if(bG.isFunction(b5)){return this.each(function(b7){bG(this).removeClass(b5.call(this,b7,this.className))})}if((b5&&typeof b5==="string")||b5===aB){b2=(b5||"").split(aV);for(b1=0,bZ=this.length;b1<bZ;b1++){b4=this[b1];if(b4.nodeType===1&&b4.className){b3=(" "+b4.className+" ").replace(bJ," ");for(b6=0,b0=b2.length;b6<b0;b6++){while(b3.indexOf(" "+b2[b6]+" ")>=0){b3=b3.replace(" "+b2[b6]+" "," ")}}b4.className=b5?bG.trim(b3):""}}}return this},toggleClass:function(b2,b0){var b1=typeof b2,bZ=typeof b0==="boolean";if(bG.isFunction(b2)){return this.each(function(b3){bG(this).toggleClass(b2.call(this,b3,this.className,b0),b0)})}return this.each(function(){if(b1==="string"){var b5,b4=0,b3=bG(this),b6=b0,b7=b2.split(aV);while((b5=b7[b4++])){b6=bZ?b6:!b3.hasClass(b5);b3[b6?"addClass":"removeClass"](b5)}}else{if(b1==="undefined"||b1==="boolean"){if(this.className){bG._data(this,"__className__",this.className)}this.className=this.className||b2===false?"":bG._data(this,"__className__")||""}}})},hasClass:function(bZ){var b2=" "+bZ+" ",b1=0,b0=this.length;for(;b1<b0;b1++){if(this[b1].nodeType===1&&(" "+this[b1].className+" ").replace(bJ," ").indexOf(b2)>=0){return true}}return false},val:function(b2){var bZ,b0,b3,b1=this[0];if(!arguments.length){if(b1){bZ=bG.valHooks[b1.type]||bG.valHooks[b1.nodeName.toLowerCase()];if(bZ&&"get" in bZ&&(b0=bZ.get(b1,"value"))!==aB){return b0}b0=b1.value;return typeof b0==="string"?b0.replace(ai,""):b0==null?"":b0}return}b3=bG.isFunction(b2);return this.each(function(b5){var b6,b4=bG(this);if(this.nodeType!==1){return}if(b3){b6=b2.call(this,b5,b4.val())}else{b6=b2}if(b6==null){b6=""}else{if(typeof b6==="number"){b6+=""}else{if(bG.isArray(b6)){b6=bG.map(b6,function(b7){return b7==null?"":b7+""})}}}bZ=bG.valHooks[this.type]||bG.valHooks[this.nodeName.toLowerCase()];if(!bZ||!("set" in bZ)||bZ.set(this,b6,"value")===aB){this.value=b6}})}});bG.extend({valHooks:{option:{get:function(bZ){var b0=bZ.attributes.value;return !b0||b0.specified?bZ.value:bZ.text}},select:{get:function(bZ){var b5,b0,b4,b2,b3=bZ.selectedIndex,b6=[],b7=bZ.options,b1=bZ.type==="select-one";if(b3<0){return null}b0=b1?b3:0;b4=b1?b3+1:b7.length;for(;b0<b4;b0++){b2=b7[b0];if(b2.selected&&(bG.support.optDisabled?!b2.disabled:b2.getAttribute("disabled")===null)&&(!b2.parentNode.disabled||!bG.nodeName(b2.parentNode,"optgroup"))){b5=bG(b2).val();if(b1){return b5}b6.push(b5)}}if(b1&&!b6.length&&b7.length){return bG(b7[b3]).val()}return b6},set:function(b0,b1){var bZ=bG.makeArray(b1);bG(b0).find("option").each(function(){this.selected=bG.inArray(bG(this).val(),bZ)>=0});if(!bZ.length){b0.selectedIndex=-1}return bZ}}},attrFn:{},attr:function(b5,b2,b6,b4){var b1,bZ,b3,b0=b5.nodeType;if(!b5||b0===3||b0===8||b0===2){return}if(b4&&bG.isFunction(bG.fn[b2])){return bG(b5)[b2](b6)}if(typeof b5.getAttribute==="undefined"){return bG.prop(b5,b2,b6)}b3=b0!==1||!bG.isXMLDoc(b5);if(b3){b2=b2.toLowerCase();bZ=bG.attrHooks[b2]||(M.test(b2)?bV:a7)}if(b6!==aB){if(b6===null){bG.removeAttr(b5,b2);return}else{if(bZ&&"set" in bZ&&b3&&(b1=bZ.set(b5,b6,b2))!==aB){return b1}else{b5.setAttribute(b2,b6+"");return b6}}}else{if(bZ&&"get" in bZ&&b3&&(b1=bZ.get(b5,b2))!==null){return b1}else{b1=b5.getAttribute(b2);return b1===null?aB:b1}}},removeAttr:function(b2,b4){var b3,b5,b0,bZ,b1=0;if(b4&&b2.nodeType===1){b5=b4.split(aV);for(;b1<b5.length;b1++){b0=b5[b1];if(b0){b3=bG.propFix[b0]||b0;bZ=M.test(b0);if(!bZ){bG.attr(b2,b0,"")}b2.removeAttribute(bL?b0:b3);if(bZ&&b3 in b2){b2[b3]=false}}}}},attrHooks:{type:{set:function(bZ,b0){if(j.test(bZ.nodeName)&&bZ.parentNode){bG.error("type property can't be changed")}else{if(!bG.support.radioValue&&b0==="radio"&&bG.nodeName(bZ,"input")){var b1=bZ.value;bZ.setAttribute("type",b0);if(b1){bZ.value=b1}return b0}}}},value:{get:function(b0,bZ){if(a7&&bG.nodeName(b0,"button")){return a7.get(b0,bZ)}return bZ in b0?b0.value:null},set:function(b0,b1,bZ){if(a7&&bG.nodeName(b0,"button")){return a7.set(b0,b1,bZ)}b0.value=b1}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b4,b2,b5){var b1,bZ,b3,b0=b4.nodeType;if(!b4||b0===3||b0===8||b0===2){return}b3=b0!==1||!bG.isXMLDoc(b4);if(b3){b2=bG.propFix[b2]||b2;bZ=bG.propHooks[b2]}if(b5!==aB){if(bZ&&"set" in bZ&&(b1=bZ.set(b4,b5,b2))!==aB){return b1}else{return(b4[b2]=b5)}}else{if(bZ&&"get" in bZ&&(b1=bZ.get(b4,b2))!==null){return b1}else{return b4[b2]}}},propHooks:{tabIndex:{get:function(b0){var bZ=b0.getAttributeNode("tabindex");return bZ&&bZ.specified?parseInt(bZ.value,10):aA.test(b0.nodeName)||D.test(b0.nodeName)&&b0.href?0:aB}}}});bV={get:function(b0,bZ){var b2,b1=bG.prop(b0,bZ);return b1===true||typeof b1!=="boolean"&&(b2=b0.getAttributeNode(bZ))&&b2.nodeValue!==false?bZ.toLowerCase():aB},set:function(b0,b2,bZ){var b1;if(b2===false){bG.removeAttr(b0,bZ)}else{b1=bG.propFix[bZ]||bZ;if(b1 in b0){b0[b1]=true}b0.setAttribute(bZ,bZ.toLowerCase())}return bZ}};if(!bL){n={name:true,id:true,coords:true};a7=bG.valHooks.button={get:function(b1,b0){var bZ;bZ=b1.getAttributeNode(b0);return bZ&&(n[b0]?bZ.value!=="":bZ.specified)?bZ.value:aB},set:function(b1,b2,b0){var bZ=b1.getAttributeNode(b0);if(!bZ){bZ=o.createAttribute(b0);b1.setAttributeNode(bZ)}return(bZ.value=b2+"")}};bG.each(["width","height"],function(b0,bZ){bG.attrHooks[bZ]=bG.extend(bG.attrHooks[bZ],{set:function(b1,b2){if(b2===""){b1.setAttribute(bZ,"auto");return b2}}})});bG.attrHooks.contenteditable={get:a7.get,set:function(b0,b1,bZ){if(b1===""){b1="false"}a7.set(b0,b1,bZ)}}}if(!bG.support.hrefNormalized){bG.each(["href","src","width","height"],function(b0,bZ){bG.attrHooks[bZ]=bG.extend(bG.attrHooks[bZ],{get:function(b2){var b1=b2.getAttribute(bZ,2);return b1===null?aB:b1}})})}if(!bG.support.style){bG.attrHooks.style={get:function(bZ){return bZ.style.cssText.toLowerCase()||aB},set:function(bZ,b0){return(bZ.style.cssText=b0+"")}}}if(!bG.support.optSelected){bG.propHooks.selected=bG.extend(bG.propHooks.selected,{get:function(b0){var bZ=b0.parentNode;if(bZ){bZ.selectedIndex;if(bZ.parentNode){bZ.parentNode.selectedIndex}}return null}})}if(!bG.support.enctype){bG.propFix.enctype="encoding"}if(!bG.support.checkOn){bG.each(["radio","checkbox"],function(){bG.valHooks[this]={get:function(bZ){return bZ.getAttribute("value")===null?"on":bZ.value}}})}bG.each(["radio","checkbox"],function(){bG.valHooks[this]=bG.extend(bG.valHooks[this],{set:function(bZ,b0){if(bG.isArray(b0)){return(bZ.checked=bG.inArray(bG(bZ).val(),b0)>=0)}}})});var bE=/^(?:textarea|input|select)$/i,br=/^([^\.]*|)(?:\.(.+)|)$/,ba=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,bK=/^(?:mouse|contextmenu)|click/,by=/^(?:focusinfocus|focusoutblur)$/,aq=function(bZ){return bG.event.special.hover?bZ:bZ.replace(ba,"mouseenter$1 mouseleave$1")};bG.event={add:function(b2,b6,cd,b4,b3){var b7,b5,ce,cc,cb,b9,bZ,ca,b0,b1,b8;if(b2.nodeType===3||b2.nodeType===8||!b6||!cd||!(b7=bG._data(b2))){return}if(cd.handler){b0=cd;cd=b0.handler;b3=b0.selector}if(!cd.guid){cd.guid=bG.guid++}ce=b7.events;if(!ce){b7.events=ce={}}b5=b7.handle;if(!b5){b7.handle=b5=function(cf){return typeof bG!=="undefined"&&(!cf||bG.event.triggered!==cf.type)?bG.event.dispatch.apply(b5.elem,arguments):aB};b5.elem=b2}b6=bG.trim(aq(b6)).split(" ");for(cc=0;cc<b6.length;cc++){cb=br.exec(b6[cc])||[];b9=cb[1];bZ=(cb[2]||"").split(".").sort();b8=bG.event.special[b9]||{};b9=(b3?b8.delegateType:b8.bindType)||b9;b8=bG.event.special[b9]||{};ca=bG.extend({type:b9,origType:cb[1],data:b4,handler:cd,guid:cd.guid,selector:b3,needsContext:b3&&bG.expr.match.needsContext.test(b3),namespace:bZ.join(".")},b0);b1=ce[b9];if(!b1){b1=ce[b9]=[];b1.delegateCount=0;if(!b8.setup||b8.setup.call(b2,b4,bZ,b5)===false){if(b2.addEventListener){b2.addEventListener(b9,b5,false)}else{if(b2.attachEvent){b2.attachEvent("on"+b9,b5)}}}}if(b8.add){b8.add.call(b2,ca);if(!ca.handler.guid){ca.handler.guid=cd.guid}}if(b3){b1.splice(b1.delegateCount++,0,ca)}else{b1.push(ca)}bG.event.global[b9]=true}b2=null},global:{},remove:function(b2,b7,cd,b3,b6){var ce,cf,ca,b1,b0,b4,b5,cc,b9,bZ,cb,b8=bG.hasData(b2)&&bG._data(b2);if(!b8||!(cc=b8.events)){return}b7=bG.trim(aq(b7||"")).split(" ");for(ce=0;ce<b7.length;ce++){cf=br.exec(b7[ce])||[];ca=b1=cf[1];b0=cf[2];if(!ca){for(ca in cc){bG.event.remove(b2,ca+b7[ce],cd,b3,true)}continue}b9=bG.event.special[ca]||{};ca=(b3?b9.delegateType:b9.bindType)||ca;bZ=cc[ca]||[];b4=bZ.length;b0=b0?new RegExp("(^|\\.)"+b0.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b5=0;b5<bZ.length;b5++){cb=bZ[b5];if((b6||b1===cb.origType)&&(!cd||cd.guid===cb.guid)&&(!b0||b0.test(cb.namespace))&&(!b3||b3===cb.selector||b3==="**"&&cb.selector)){bZ.splice(b5--,1);if(cb.selector){bZ.delegateCount--}if(b9.remove){b9.remove.call(b2,cb)}}}if(bZ.length===0&&b4!==bZ.length){if(!b9.teardown||b9.teardown.call(b2,b0,b8.handle)===false){bG.removeEvent(b2,ca,b8.handle)}delete cc[ca]}}if(bG.isEmptyObject(cc)){delete b8.handle;bG.removeData(b2,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b0,b7,b5,ce){if(b5&&(b5.nodeType===3||b5.nodeType===8)){return}var bZ,b2,b8,cc,b4,b3,ca,b9,b6,cd,cb=b0.type||b0,b1=[];if(by.test(cb+bG.event.triggered)){return}if(cb.indexOf("!")>=0){cb=cb.slice(0,-1);b2=true}if(cb.indexOf(".")>=0){b1=cb.split(".");cb=b1.shift();b1.sort()}if((!b5||bG.event.customEvent[cb])&&!bG.event.global[cb]){return}b0=typeof b0==="object"?b0[bG.expando]?b0:new bG.Event(cb,b0):new bG.Event(cb);b0.type=cb;b0.isTrigger=true;b0.exclusive=b2;b0.namespace=b1.join(".");b0.namespace_re=b0.namespace?new RegExp("(^|\\.)"+b1.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3=cb.indexOf(":")<0?"on"+cb:"";if(!b5){bZ=bG.cache;for(b8 in bZ){if(bZ[b8].events&&bZ[b8].events[cb]){bG.event.trigger(b0,b7,bZ[b8].handle.elem,true)}}return}b0.result=aB;if(!b0.target){b0.target=b5}b7=b7!=null?bG.makeArray(b7):[];b7.unshift(b0);ca=bG.event.special[cb]||{};if(ca.trigger&&ca.trigger.apply(b5,b7)===false){return}b6=[[b5,ca.bindType||cb]];if(!ce&&!ca.noBubble&&!bG.isWindow(b5)){cd=ca.delegateType||cb;cc=by.test(cd+cb)?b5:b5.parentNode;for(b4=b5;cc;cc=cc.parentNode){b6.push([cc,cd]);b4=cc}if(b4===(b5.ownerDocument||o)){b6.push([b4.defaultView||b4.parentWindow||a2,cd])}}for(b8=0;b8<b6.length&&!b0.isPropagationStopped();b8++){cc=b6[b8][0];b0.type=b6[b8][1];b9=(bG._data(cc,"events")||{})[b0.type]&&bG._data(cc,"handle");if(b9){b9.apply(cc,b7)}b9=b3&&cc[b3];if(b9&&bG.acceptData(cc)&&b9.apply&&b9.apply(cc,b7)===false){b0.preventDefault()}}b0.type=cb;if(!ce&&!b0.isDefaultPrevented()){if((!ca._default||ca._default.apply(b5.ownerDocument,b7)===false)&&!(cb==="click"&&bG.nodeName(b5,"a"))&&bG.acceptData(b5)){if(b3&&b5[cb]&&((cb!=="focus"&&cb!=="blur")||b0.target.offsetWidth!==0)&&!bG.isWindow(b5)){b4=b5[b3];if(b4){b5[b3]=null}bG.event.triggered=cb;b5[cb]();bG.event.triggered=aB;if(b4){b5[b3]=b4}}}}return b0.result},dispatch:function(bZ){bZ=bG.event.fix(bZ||a2.event);var b6,b5,cf,b9,b8,b0,b7,cd,b2,ce,b3=((bG._data(this,"events")||{})[bZ.type]||[]),b4=b3.delegateCount,cb=a4.call(arguments),b1=!bZ.exclusive&&!bZ.namespace,ca=bG.event.special[bZ.type]||{},cc=[];cb[0]=bZ;bZ.delegateTarget=this;if(ca.preDispatch&&ca.preDispatch.call(this,bZ)===false){return}if(b4&&!(bZ.button&&bZ.type==="click")){for(cf=bZ.target;cf!=this;cf=cf.parentNode||this){if(cf.disabled!==true||bZ.type!=="click"){b8={};b7=[];for(b6=0;b6<b4;b6++){cd=b3[b6];b2=cd.selector;if(b8[b2]===aB){b8[b2]=cd.needsContext?bG(b2,this).index(cf)>=0:bG.find(b2,this,null,[cf]).length}if(b8[b2]){b7.push(cd)}}if(b7.length){cc.push({elem:cf,matches:b7})}}}}if(b3.length>b4){cc.push({elem:this,matches:b3.slice(b4)})}for(b6=0;b6<cc.length&&!bZ.isPropagationStopped();b6++){b0=cc[b6];bZ.currentTarget=b0.elem;for(b5=0;b5<b0.matches.length&&!bZ.isImmediatePropagationStopped();b5++){cd=b0.matches[b5];if(b1||(!bZ.namespace&&!cd.namespace)||bZ.namespace_re&&bZ.namespace_re.test(cd.namespace)){bZ.data=cd.data;bZ.handleObj=cd;b9=((bG.event.special[cd.origType]||{}).handle||cd.handler).apply(b0.elem,cb);if(b9!==aB){bZ.result=b9;if(b9===false){bZ.preventDefault();bZ.stopPropagation()}}}}}if(ca.postDispatch){ca.postDispatch.call(this,bZ)}return bZ.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b0,bZ){if(b0.which==null){b0.which=bZ.charCode!=null?bZ.charCode:bZ.keyCode}return b0}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b2,b1){var b3,b4,bZ,b0=b1.button,b5=b1.fromElement;if(b2.pageX==null&&b1.clientX!=null){b3=b2.target.ownerDocument||o;b4=b3.documentElement;bZ=b3.body;b2.pageX=b1.clientX+(b4&&b4.scrollLeft||bZ&&bZ.scrollLeft||0)-(b4&&b4.clientLeft||bZ&&bZ.clientLeft||0);b2.pageY=b1.clientY+(b4&&b4.scrollTop||bZ&&bZ.scrollTop||0)-(b4&&b4.clientTop||bZ&&bZ.clientTop||0)}if(!b2.relatedTarget&&b5){b2.relatedTarget=b5===b2.target?b1.toElement:b5}if(!b2.which&&b0!==aB){b2.which=(b0&1?1:(b0&2?3:(b0&4?2:0)))}return b2}},fix:function(b1){if(b1[bG.expando]){return b1}var b0,b4,bZ=b1,b2=bG.event.fixHooks[b1.type]||{},b3=b2.props?this.props.concat(b2.props):this.props;b1=bG.Event(bZ);for(b0=b3.length;b0;){b4=b3[--b0];b1[b4]=bZ[b4]}if(!b1.target){b1.target=bZ.srcElement||o}if(b1.target.nodeType===3){b1.target=b1.target.parentNode}b1.metaKey=!!b1.metaKey;return b2.filter?b2.filter(b1,bZ):b1},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b1,b0,bZ){if(bG.isWindow(this)){this.onbeforeunload=bZ}},teardown:function(b0,bZ){if(this.onbeforeunload===bZ){this.onbeforeunload=null}}}},simulate:function(b0,b2,b1,bZ){var b3=bG.extend(new bG.Event(),b1,{type:b0,isSimulated:true,originalEvent:{}});if(bZ){bG.event.trigger(b3,null,b2)}else{bG.event.dispatch.call(b2,b3)}if(b3.isDefaultPrevented()){b1.preventDefault()}}};bG.event.handle=bG.event.dispatch;bG.removeEvent=o.removeEventListener?function(b0,bZ,b1){if(b0.removeEventListener){b0.removeEventListener(bZ,b1,false)}}:function(b1,b0,b2){var bZ="on"+b0;if(b1.detachEvent){if(typeof b1[bZ]==="undefined"){b1[bZ]=null}b1.detachEvent(bZ,b2)}};bG.Event=function(b0,bZ){if(!(this instanceof bG.Event)){return new bG.Event(b0,bZ)}if(b0&&b0.type){this.originalEvent=b0;this.type=b0.type;this.isDefaultPrevented=(b0.defaultPrevented||b0.returnValue===false||b0.getPreventDefault&&b0.getPreventDefault())?R:X}else{this.type=b0}if(bZ){bG.extend(this,bZ)}this.timeStamp=b0&&b0.timeStamp||bG.now();this[bG.expando]=true};function X(){return false}function R(){return true}bG.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.preventDefault){bZ.preventDefault()}else{bZ.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.stopPropagation){bZ.stopPropagation()}bZ.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};bG.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b0,bZ){bG.event.special[b0]={delegateType:bZ,bindType:bZ,handle:function(b4){var b2,b6=this,b5=b4.relatedTarget,b3=b4.handleObj,b1=b3.selector;if(!b5||(b5!==b6&&!bG.contains(b6,b5))){b4.type=b3.origType;b2=b3.handler.apply(this,arguments);b4.type=bZ}return b2}}});if(!bG.support.submitBubbles){bG.event.special.submit={setup:function(){if(bG.nodeName(this,"form")){return false}bG.event.add(this,"click._submit keypress._submit",function(b1){var b0=b1.target,bZ=bG.nodeName(b0,"input")||bG.nodeName(b0,"button")?b0.form:aB;if(bZ&&!bG._data(bZ,"_submit_attached")){bG.event.add(bZ,"submit._submit",function(b2){b2._submit_bubble=true});bG._data(bZ,"_submit_attached",true)}})},postDispatch:function(bZ){if(bZ._submit_bubble){delete bZ._submit_bubble;if(this.parentNode&&!bZ.isTrigger){bG.event.simulate("submit",this.parentNode,bZ,true)}}},teardown:function(){if(bG.nodeName(this,"form")){return false}bG.event.remove(this,"._submit")}}}if(!bG.support.changeBubbles){bG.event.special.change={setup:function(){if(bE.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bG.event.add(this,"propertychange._change",function(bZ){if(bZ.originalEvent.propertyName==="checked"){this._just_changed=true}});bG.event.add(this,"click._change",function(bZ){if(this._just_changed&&!bZ.isTrigger){this._just_changed=false}bG.event.simulate("change",this,bZ,true)})}return false}bG.event.add(this,"beforeactivate._change",function(b0){var bZ=b0.target;if(bE.test(bZ.nodeName)&&!bG._data(bZ,"_change_attached")){bG.event.add(bZ,"change._change",function(b1){if(this.parentNode&&!b1.isSimulated&&!b1.isTrigger){bG.event.simulate("change",this.parentNode,b1,true)}});bG._data(bZ,"_change_attached",true)}})},handle:function(b0){var bZ=b0.target;if(this!==bZ||b0.isSimulated||b0.isTrigger||(bZ.type!=="radio"&&bZ.type!=="checkbox")){return b0.handleObj.handler.apply(this,arguments)}},teardown:function(){bG.event.remove(this,"._change");return !bE.test(this.nodeName)}}}if(!bG.support.focusinBubbles){bG.each({focus:"focusin",blur:"focusout"},function(b2,bZ){var b0=0,b1=function(b3){bG.event.simulate(bZ,b3.target,bG.event.fix(b3),true)};bG.event.special[bZ]={setup:function(){if(b0++===0){o.addEventListener(b2,b1,true)}},teardown:function(){if(--b0===0){o.removeEventListener(b2,b1,true)}}}})}bG.fn.extend({on:function(b1,bZ,b4,b3,b0){var b5,b2;if(typeof b1==="object"){if(typeof bZ!=="string"){b4=b4||bZ;bZ=aB}for(b2 in b1){this.on(b2,bZ,b4,b1[b2],b0)}return this}if(b4==null&&b3==null){b3=bZ;b4=bZ=aB}else{if(b3==null){if(typeof bZ==="string"){b3=b4;b4=aB}else{b3=b4;b4=bZ;bZ=aB}}}if(b3===false){b3=X}else{if(!b3){return this}}if(b0===1){b5=b3;b3=function(b6){bG().off(b6);return b5.apply(this,arguments)};b3.guid=b5.guid||(b5.guid=bG.guid++)}return this.each(function(){bG.event.add(this,b1,b3,b4,bZ)})},one:function(b0,bZ,b2,b1){return this.on(b0,bZ,b2,b1,1)},off:function(b1,bZ,b3){var b0,b2;if(b1&&b1.preventDefault&&b1.handleObj){b0=b1.handleObj;bG(b1.delegateTarget).off(b0.namespace?b0.origType+"."+b0.namespace:b0.origType,b0.selector,b0.handler);return this}if(typeof b1==="object"){for(b2 in b1){this.off(b2,bZ,b1[b2])}return this}if(bZ===false||typeof bZ==="function"){b3=bZ;bZ=aB}if(b3===false){b3=X}return this.each(function(){bG.event.remove(this,b1,b3,bZ)})},bind:function(bZ,b1,b0){return this.on(bZ,null,b1,b0)},unbind:function(bZ,b0){return this.off(bZ,null,b0)},live:function(bZ,b1,b0){bG(this.context).on(bZ,this.selector,b1,b0);return this},die:function(bZ,b0){bG(this.context).off(bZ,this.selector||"**",b0);return this},delegate:function(bZ,b0,b2,b1){return this.on(b0,bZ,b2,b1)},undelegate:function(bZ,b0,b1){return arguments.length===1?this.off(bZ,"**"):this.off(b0,bZ||"**",b1)},trigger:function(bZ,b0){return this.each(function(){bG.event.trigger(bZ,b0,this)})},triggerHandler:function(bZ,b0){if(this[0]){return bG.event.trigger(bZ,b0,this[0],true)}},toggle:function(b2){var b0=arguments,bZ=b2.guid||bG.guid++,b1=0,b3=function(b4){var b5=(bG._data(this,"lastToggle"+b2.guid)||0)%b1;bG._data(this,"lastToggle"+b2.guid,b5+1);b4.preventDefault();return b0[b5].apply(this,arguments)||false};b3.guid=bZ;while(b1<b0.length){b0[b1++].guid=bZ}return this.click(b3)},hover:function(bZ,b0){return this.mouseenter(bZ).mouseleave(b0||bZ)}});bG.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b0,bZ){bG.fn[bZ]=function(b2,b1){if(b1==null){b1=b2;b2=null}return arguments.length>0?this.on(bZ,null,b2,b1):this.trigger(bZ)};if(a3.test(bZ)){bG.event.fixHooks[bZ]=bG.event.keyHooks}if(bK.test(bZ)){bG.event.fixHooks[bZ]=bG.event.mouseHooks}});
/*!
     * Sizzle CSS Selector Engine
     * Copyright 2012 jQuery Foundation and other contributors
     * Released under the MIT license
     * http://sizzlejs.com/
     */
(function(cS,ch){var cX,ca,cL,b0,cm,cA,cd,cg,cc,cJ,b9=true,cu="undefined",cZ=("sizcache"+Math.random()).replace(".",""),b4=String,b8=cS.document,cb=b8.documentElement,cr=0,cf=0,cE=[].pop,cW=[].push,cl=[].slice,co=[].indexOf||function(c9){var c8=0,c7=this.length;for(;c8<c7;c8++){if(this[c8]===c9){return c8}}return -1},c1=function(c7,c8){c7[cZ]=c8==null||c8;return c7},c5=function(){var c7={},c8=[];return c1(function(c9,da){if(c8.push(c9)>cL.cacheLength){delete c7[c8.shift()]}return(c7[c9]=da)},c7)},cU=c5(),cV=c5(),cn=c5(),cy="[\\x20\\t\\r\\n\\f]",ck="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ci=ck.replace("w","w#"),c4="([*^$|!~]?=)",cP="\\["+cy+"*("+ck+")"+cy+"*(?:"+c4+cy+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ci+")|)|)"+cy+"*\\]",c6=":("+ck+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cP+")|[^:]|\\\\.)*|.*))\\)|)",cz=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cy+"*((?:-\\d)?\\d*)"+cy+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+cy+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cy+"+$","g"),b5=new RegExp("^"+cy+"*,"+cy+"*"),cH=new RegExp("^"+cy+"*([\\x20\\t\\r\\n\\f>+~])"+cy+"*"),cM=new RegExp(c6),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cD=/^:not/,cR=/[\x20\t\r\n\f]*[+~]/,c0=/:not\($/,cs=/h\d/i,cN=/input|select|textarea|button/i,ct=/\\(?!\\)/g,cG={ID:new RegExp("^#("+ck+")"),CLASS:new RegExp("^\\.("+ck+")"),NAME:new RegExp("^\\[name=['\"]?("+ck+")['\"]?\\]"),TAG:new RegExp("^("+ck.replace("w","w*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),POS:new RegExp(cz,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cy+"*(even|odd|(([+-]|)(\\d*)n|)"+cy+"*(?:([+-]|)"+cy+"*(\\d+)|))"+cy+"*\\)|)","i"),needsContext:new RegExp("^"+cy+"*[>+~]|"+cz,"i")},cK=function(c7){var c9=b8.createElement("div");try{return c7(c9)}catch(c8){return false}finally{c9=null}},b7=cK(function(c7){c7.appendChild(b8.createComment(""));return !c7.getElementsByTagName("*").length}),cC=cK(function(c7){c7.innerHTML="<a href='#'></a>";return c7.firstChild&&typeof c7.firstChild.getAttribute!==cu&&c7.firstChild.getAttribute("href")==="#"}),cq=cK(function(c8){c8.innerHTML="<select></select>";var c7=typeof c8.lastChild.getAttribute("multiple");return c7!=="boolean"&&c7!=="string"}),cB=cK(function(c7){c7.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!c7.getElementsByClassName||!c7.getElementsByClassName("e").length){return false}c7.lastChild.className="e";return c7.getElementsByClassName("e").length===2}),bZ=cK(function(c8){c8.id=cZ+0;c8.innerHTML="<a name='"+cZ+"'></a><div name='"+cZ+"'></div>";cb.insertBefore(c8,cb.firstChild);var c7=b8.getElementsByName&&b8.getElementsByName(cZ).length===2+b8.getElementsByName(cZ+0).length;ca=!b8.getElementById(cZ);cb.removeChild(c8);return c7});try{cl.call(cb.childNodes,0)[0].nodeType}catch(c3){cl=function(c8){var c9,c7=[];for(;(c9=this[c8]);c8++){c7.push(c9)}return c7}}function cQ(da,c7,dc,df){dc=dc||[];c7=c7||b8;var dd,c8,de,c9,db=c7.nodeType;if(!da||typeof da!=="string"){return dc}if(db!==1&&db!==9){return[]}de=cm(c7);if(!de&&!df){if((dd=cO.exec(da))){if((c9=dd[1])){if(db===9){c8=c7.getElementById(c9);if(c8&&c8.parentNode){if(c8.id===c9){dc.push(c8);return dc}}else{return dc}}else{if(c7.ownerDocument&&(c8=c7.ownerDocument.getElementById(c9))&&cA(c7,c8)&&c8.id===c9){dc.push(c8);return dc}}}else{if(dd[2]){cW.apply(dc,cl.call(c7.getElementsByTagName(da),0));return dc}else{if((c9=dd[3])&&cB&&c7.getElementsByClassName){cW.apply(dc,cl.call(c7.getElementsByClassName(c9),0));return dc}}}}}return cY(da.replace(cT,"$1"),c7,dc,df,de)}cQ.matches=function(c8,c7){return cQ(c8,null,null,c7)};cQ.matchesSelector=function(c7,c8){return cQ(c8,null,null,[c7]).length>0};function cI(c7){return function(c9){var c8=c9.nodeName.toLowerCase();return c8==="input"&&c9.type===c7}}function b3(c7){return function(c9){var c8=c9.nodeName.toLowerCase();return(c8==="input"||c8==="button")&&c9.type===c7}}function cF(c7){return c1(function(c8){c8=+c8;return c1(function(c9,dd){var db,da=c7([],c9.length,c8),dc=da.length;while(dc--){if(c9[(db=da[dc])]){c9[db]=!(dd[db]=c9[db])}}})})}b0=cQ.getText=function(db){var da,c8="",c9=0,c7=db.nodeType;if(c7){if(c7===1||c7===9||c7===11){if(typeof db.textContent==="string"){return db.textContent}else{for(db=db.firstChild;db;db=db.nextSibling){c8+=b0(db)}}}else{if(c7===3||c7===4){return db.nodeValue}}}else{for(;(da=db[c9]);c9++){c8+=b0(da)}}return c8};cm=cQ.isXML=function(c7){var c8=c7&&(c7.ownerDocument||c7).documentElement;return c8?c8.nodeName!=="HTML":false};cA=cQ.contains=cb.contains?function(c8,c7){var da=c8.nodeType===9?c8.documentElement:c8,c9=c7&&c7.parentNode;return c8===c9||!!(c9&&c9.nodeType===1&&da.contains&&da.contains(c9))}:cb.compareDocumentPosition?function(c8,c7){return c7&&!!(c8.compareDocumentPosition(c7)&16)}:function(c8,c7){while((c7=c7.parentNode)){if(c7===c8){return true}}return false};cQ.attr=function(c9,c8){var da,c7=cm(c9);if(!c7){c8=c8.toLowerCase()}if((da=cL.attrHandle[c8])){return da(c9)}if(c7||cq){return c9.getAttribute(c8)}da=c9.getAttributeNode(c8);return da?typeof c9[c8]==="boolean"?c9[c8]?c8:null:da.specified?da.value:null:null};cL=cQ.selectors={cacheLength:50,createPseudo:c1,match:cG,attrHandle:cC?{}:{href:function(c7){return c7.getAttribute("href",2)},type:function(c7){return c7.getAttribute("type")}},find:{ID:ca?function(da,c9,c8){if(typeof c9.getElementById!==cu&&!c8){var c7=c9.getElementById(da);return c7&&c7.parentNode?[c7]:[]}}:function(da,c9,c8){if(typeof c9.getElementById!==cu&&!c8){var c7=c9.getElementById(da);return c7?c7.id===da||typeof c7.getAttributeNode!==cu&&c7.getAttributeNode("id").value===da?[c7]:ch:[]}},TAG:b7?function(c7,c8){if(typeof c8.getElementsByTagName!==cu){return c8.getElementsByTagName(c7)}}:function(c7,db){var da=db.getElementsByTagName(c7);if(c7==="*"){var dc,c9=[],c8=0;for(;(dc=da[c8]);c8++){if(dc.nodeType===1){c9.push(dc)}}return c9}return da},NAME:bZ&&function(c7,c8){if(typeof c8.getElementsByName!==cu){return c8.getElementsByName(name)}},CLASS:cB&&function(c9,c8,c7){if(typeof c8.getElementsByClassName!==cu&&!c7){return c8.getElementsByClassName(c9)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(c7){c7[1]=c7[1].replace(ct,"");c7[3]=(c7[4]||c7[5]||"").replace(ct,"");if(c7[2]==="~="){c7[3]=" "+c7[3]+" "}return c7.slice(0,4)},CHILD:function(c7){c7[1]=c7[1].toLowerCase();if(c7[1]==="nth"){if(!c7[2]){cQ.error(c7[0])}c7[3]=+(c7[3]?c7[4]+(c7[5]||1):2*(c7[2]==="even"||c7[2]==="odd"));c7[4]=+((c7[6]+c7[7])||c7[2]==="odd")}else{if(c7[2]){cQ.error(c7[0])}}return c7},PSEUDO:function(c8){var c9,c7;if(cG.CHILD.test(c8[0])){return null}if(c8[3]){c8[2]=c8[3]}else{if((c9=c8[4])){if(cM.test(c9)&&(c7=b1(c9,true))&&(c7=c9.indexOf(")",c9.length-c7)-c9.length)){c9=c9.slice(0,c7);c8[0]=c8[0].slice(0,c7)}c8[2]=c9}}return c8.slice(0,3)}},filter:{ID:ca?function(c7){c7=c7.replace(ct,"");return function(c8){return c8.getAttribute("id")===c7}}:function(c7){c7=c7.replace(ct,"");return function(c9){var c8=typeof c9.getAttributeNode!==cu&&c9.getAttributeNode("id");return c8&&c8.value===c7}},TAG:function(c7){if(c7==="*"){return function(){return true}}c7=c7.replace(ct,"").toLowerCase();return function(c8){return c8.nodeName&&c8.nodeName.toLowerCase()===c7}},CLASS:function(c7){var c8=cU[cZ][c7];if(!c8){c8=cU(c7,new RegExp("(^|"+cy+")"+c7+"("+cy+"|$)"))}return function(c9){return c8.test(c9.className||(typeof c9.getAttribute!==cu&&c9.getAttribute("class"))||"")}},ATTR:function(c9,c8,c7){return function(dc,db){var da=cQ.attr(dc,c9);if(da==null){return c8==="!="}if(!c8){return true}da+="";return c8==="="?da===c7:c8==="!="?da!==c7:c8==="^="?c7&&da.indexOf(c7)===0:c8==="*="?c7&&da.indexOf(c7)>-1:c8==="$="?c7&&da.substr(da.length-c7.length)===c7:c8==="~="?(" "+da+" ").indexOf(c7)>-1:c8==="|="?da===c7||da.substr(0,c7.length+1)===c7+"-":false}},CHILD:function(c7,c9,da,c8){if(c7==="nth"){return function(dd){var dc,de,db=dd.parentNode;if(da===1&&c8===0){return true}if(db){de=0;for(dc=db.firstChild;dc;dc=dc.nextSibling){if(dc.nodeType===1){de++;if(dd===dc){break}}}}de-=c8;return de===da||(de%da===0&&de/da>=0)}}return function(dc){var db=dc;switch(c7){case"only":case"first":while((db=db.previousSibling)){if(db.nodeType===1){return false}}if(c7==="first"){return true}db=dc;case"last":while((db=db.nextSibling)){if(db.nodeType===1){return false}}return true}}},PSEUDO:function(da,c9){var c7,c8=cL.pseudos[da]||cL.setFilters[da.toLowerCase()]||cQ.error("unsupported pseudo: "+da);if(c8[cZ]){return c8(c9)}if(c8.length>1){c7=[da,da,"",c9];return cL.setFilters.hasOwnProperty(da.toLowerCase())?c1(function(dd,df){var dc,db=c8(dd,c9),de=db.length;while(de--){dc=co.call(dd,db[de]);dd[dc]=!(df[dc]=db[de])}}):function(db){return c8(db,0,c7)}}return c8}},pseudos:{not:c1(function(c7){var c8=[],c9=[],da=cd(c7.replace(cT,"$1"));return da[cZ]?c1(function(dc,dh,df,dd){var dg,db=da(dc,null,dd,[]),de=dc.length;while(de--){if((dg=db[de])){dc[de]=!(dh[de]=dg)}}}):function(dd,dc,db){c8[0]=dd;da(c8,null,db,c9);return !c9.pop()}}),has:c1(function(c7){return function(c8){return cQ(c7,c8).length>0}}),contains:c1(function(c7){return function(c8){return(c8.textContent||c8.innerText||b0(c8)).indexOf(c7)>-1}}),enabled:function(c7){return c7.disabled===false},disabled:function(c7){return c7.disabled===true},checked:function(c7){var c8=c7.nodeName.toLowerCase();return(c8==="input"&&!!c7.checked)||(c8==="option"&&!!c7.selected)},selected:function(c7){if(c7.parentNode){c7.parentNode.selectedIndex}return c7.selected===true},parent:function(c7){return !cL.pseudos.empty(c7)},empty:function(c8){var c7;c8=c8.firstChild;while(c8){if(c8.nodeName>"@"||(c7=c8.nodeType)===3||c7===4){return false}c8=c8.nextSibling}return true},header:function(c7){return cs.test(c7.nodeName)},text:function(c9){var c8,c7;return c9.nodeName.toLowerCase()==="input"&&(c8=c9.type)==="text"&&((c7=c9.getAttribute("type"))==null||c7.toLowerCase()===c8)},radio:cI("radio"),checkbox:cI("checkbox"),file:cI("file"),password:cI("password"),image:cI("image"),submit:b3("submit"),reset:b3("reset"),button:function(c8){var c7=c8.nodeName.toLowerCase();return c7==="input"&&c8.type==="button"||c7==="button"},input:function(c7){return cN.test(c7.nodeName)},focus:function(c7){var c8=c7.ownerDocument;return c7===c8.activeElement&&(!c8.hasFocus||c8.hasFocus())&&!!(c7.type||c7.href)},active:function(c7){return c7===c7.ownerDocument.activeElement},first:cF(function(c7,c9,c8){return[0]}),last:cF(function(c7,c9,c8){return[c9-1]}),eq:cF(function(c7,c9,c8){return[c8<0?c8+c9:c8]}),even:cF(function(c7,da,c9){for(var c8=0;c8<da;c8+=2){c7.push(c8)}return c7}),odd:cF(function(c7,da,c9){for(var c8=1;c8<da;c8+=2){c7.push(c8)}return c7}),lt:cF(function(c7,da,c9){for(var c8=c9<0?c9+da:c9;--c8>=0;){c7.push(c8)}return c7}),gt:cF(function(c7,da,c9){for(var c8=c9<0?c9+da:c9;++c8<da;){c7.push(c8)}return c7})}};function b2(c8,c7,c9){if(c8===c7){return c9}var da=c8.nextSibling;while(da){if(da===c7){return -1}da=da.nextSibling}return 1}cg=cb.compareDocumentPosition?function(c8,c7){if(c8===c7){cc=true;return 0}return(!c8.compareDocumentPosition||!c7.compareDocumentPosition?c8.compareDocumentPosition:c8.compareDocumentPosition(c7)&4)?-1:1}:function(df,de){if(df===de){cc=true;return 0}else{if(df.sourceIndex&&de.sourceIndex){return df.sourceIndex-de.sourceIndex}}var dc,c8,c9=[],c7=[],db=df.parentNode,dd=de.parentNode,dg=db;if(db===dd){return b2(df,de)}else{if(!db){return -1}else{if(!dd){return 1}}}while(dg){c9.unshift(dg);dg=dg.parentNode}dg=dd;while(dg){c7.unshift(dg);dg=dg.parentNode}dc=c9.length;c8=c7.length;for(var da=0;da<dc&&da<c8;da++){if(c9[da]!==c7[da]){return b2(c9[da],c7[da])}}return da===dc?b2(df,c7[da],-1):b2(c9[da],de,1)};[0,0].sort(cg);b9=!cc;cQ.uniqueSort=function(c8){var c9,c7=1;cc=b9;c8.sort(cg);if(cc){for(;(c9=c8[c7]);c7++){if(c9===c8[c7-1]){c8.splice(c7--,1)}}}return c8};cQ.error=function(c7){throw new Error("Syntax error, unrecognized expression: "+c7)};function b1(db,dg){var c8,dc,de,df,dd,c9,c7,da=cV[cZ][db];if(da){return dg?0:da.slice(0)}dd=db;c9=[];c7=cL.preFilter;while(dd){if(!c8||(dc=b5.exec(dd))){if(dc){dd=dd.slice(dc[0].length)}c9.push(de=[])}c8=false;if((dc=cH.exec(dd))){de.push(c8=new b4(dc.shift()));dd=dd.slice(c8.length);c8.type=dc[0].replace(cT," ")}for(df in cL.filter){if((dc=cG[df].exec(dd))&&(!c7[df]||(dc=c7[df](dc,b8,true)))){de.push(c8=new b4(dc.shift()));dd=dd.slice(c8.length);c8.type=df;c8.matches=dc}}if(!c8){break}}return dg?dd.length:dd?cQ.error(db):cV(db,c9).slice(0)}function cw(db,c9,da){var c7=c9.dir,dc=da&&c9.dir==="parentNode",c8=cf++;return c9.first?function(df,de,dd){while((df=df[c7])){if(dc||df.nodeType===1){return db(df,de,dd)}}}:function(dg,df,de){if(!de){var dd,dh=cr+" "+c8+" ",di=dh+cX;while((dg=dg[c7])){if(dc||dg.nodeType===1){if((dd=dg[cZ])===di){return dg.sizset}else{if(typeof dd==="string"&&dd.indexOf(dh)===0){if(dg.sizset){return dg}}else{dg[cZ]=di;if(db(dg,df,de)){dg.sizset=true;return dg}dg.sizset=false}}}}}else{while((dg=dg[c7])){if(dc||dg.nodeType===1){if(db(dg,df,de)){return dg}}}}}}function ce(c7){return c7.length>1?function(db,da,c8){var c9=c7.length;while(c9--){if(!c7[c9](db,da,c8)){return false}}return true}:c7[0]}function cv(c7,c8,c9,da,dd){var db,dg=[],dc=0,de=c7.length,df=c8!=null;for(;dc<de;dc++){if((db=c7[dc])){if(!c9||c9(db,da,dd)){dg.push(db);if(df){c8.push(dc)}}}}return dg}function c2(c9,c8,db,da,dc,c7){if(da&&!da[cZ]){da=c2(da)}if(dc&&!dc[cZ]){dc=c2(dc,c7)}return c1(function(dp,dl,df,dn){if(dp&&dc){return}var dm,dh,di,dg=[],dq=[],de=dl.length,dd=dp||cp(c8||"*",df.nodeType?[df]:df,[],dp),dj=c9&&(dp||!c8)?cv(dd,dg,c9,df,dn):dd,dk=db?dc||(dp?c9:de||da)?[]:dl:dj;if(db){db(dj,dk,df,dn)}if(da){di=cv(dk,dq);da(di,[],df,dn);dm=di.length;while(dm--){if((dh=di[dm])){dk[dq[dm]]=!(dj[dq[dm]]=dh)}}}if(dp){dm=c9&&dk.length;while(dm--){if((dh=dk[dm])){dp[dg[dm]]=!(dl[dg[dm]]=dh)}}}else{dk=cv(dk===dl?dk.splice(de,dk.length):dk);if(dc){dc(null,dl,dk,dn)}else{cW.apply(dl,dk)}}})}function cx(dd){var c8,db,c9,dc=dd.length,dg=cL.relative[dd[0].type],dh=dg||cL.relative[" "],da=dg?1:0,de=cw(function(di){return di===c8},dh,true),df=cw(function(di){return co.call(c8,di)>-1},dh,true),c7=[function(dk,dj,di){return(!dg&&(di||dj!==cJ))||((c8=dj).nodeType?de(dk,dj,di):df(dk,dj,di))}];for(;da<dc;da++){if((db=cL.relative[dd[da].type])){c7=[cw(ce(c7),db)]}else{db=cL.filter[dd[da].type].apply(null,dd[da].matches);if(db[cZ]){c9=++da;for(;c9<dc;c9++){if(cL.relative[dd[c9].type]){break}}return c2(da>1&&ce(c7),da>1&&dd.slice(0,da-1).join("").replace(cT,"$1"),db,da<c9&&cx(dd.slice(da,c9)),c9<dc&&cx((dd=dd.slice(c9))),c9<dc&&dd.join(""))}c7.push(db)}}return ce(c7)}function b6(da,c9){var c7=c9.length>0,db=da.length>0,c8=function(dl,df,dk,dj,ds){var dg,dh,dm,dr=[],dq=0,di="0",dc=dl&&[],dn=ds!=null,dp=cJ,de=dl||db&&cL.find.TAG("*",ds&&df.parentNode||df),dd=(cr+=dp==null?1:Math.E);if(dn){cJ=df!==b8&&df;cX=c8.el}for(;(dg=de[di])!=null;di++){if(db&&dg){for(dh=0;(dm=da[dh]);dh++){if(dm(dg,df,dk)){dj.push(dg);break}}if(dn){cr=dd;cX=++c8.el}}if(c7){if((dg=!dm&&dg)){dq--}if(dl){dc.push(dg)}}}dq+=di;if(c7&&di!==dq){for(dh=0;(dm=c9[dh]);dh++){dm(dc,dr,df,dk)}if(dl){if(dq>0){while(di--){if(!(dc[di]||dr[di])){dr[di]=cE.call(dj)}}}dr=cv(dr)}cW.apply(dj,dr);if(dn&&!dl&&dr.length>0&&(dq+c9.length)>1){cQ.uniqueSort(dj)}}if(dn){cr=dd;cJ=dp}return dc};c8.el=0;return c7?c1(c8):c8}cd=cQ.compile=function(c7,dc){var c9,c8=[],db=[],da=cn[cZ][c7];if(!da){if(!dc){dc=b1(c7)}c9=dc.length;while(c9--){da=cx(dc[c9]);if(da[cZ]){c8.push(da)}else{db.push(da)}}da=cn(c7,b6(db,c8))}return da};function cp(c8,dc,db,c9){var da=0,c7=dc.length;for(;da<c7;da++){cQ(c8,dc[da],db,c9)}return db}function cY(c9,c7,db,df,de){var dc,di,c8,dh,dg,dd=b1(c9),da=dd.length;if(!df){if(dd.length===1){di=dd[0]=dd[0].slice(0);if(di.length>2&&(c8=di[0]).type==="ID"&&c7.nodeType===9&&!de&&cL.relative[di[1].type]){c7=cL.find.ID(c8.matches[0].replace(ct,""),c7,de)[0];if(!c7){return db}c9=c9.slice(di.shift().length)}for(dc=cG.POS.test(c9)?-1:di.length-1;dc>=0;dc--){c8=di[dc];if(cL.relative[(dh=c8.type)]){break}if((dg=cL.find[dh])){if((df=dg(c8.matches[0].replace(ct,""),cR.test(di[0].type)&&c7.parentNode||c7,de))){di.splice(dc,1);c9=df.length&&di.join("");if(!c9){cW.apply(db,cl.call(df,0));return db}break}}}}}cd(c9,dd)(df,c7,de,db,cR.test(c9));return db}if(b8.querySelectorAll){(function(){var dc,dd=cY,db=/'|\\/g,c9=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c8=[":focus"],c7=[":active",":focus"],da=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;cK(function(de){de.innerHTML="<select><option selected=''></option></select>";if(!de.querySelectorAll("[selected]").length){c8.push("\\["+cy+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!de.querySelectorAll(":checked").length){c8.push(":checked")}});cK(function(de){de.innerHTML="<p test=''></p>";if(de.querySelectorAll("[test^='']").length){c8.push("[*^$]="+cy+"*(?:\"\"|'')")}de.innerHTML="<input type='hidden'/>";if(!de.querySelectorAll(":enabled").length){c8.push(":enabled",":disabled")}});c8=new RegExp(c8.join("|"));cY=function(dk,df,dm,dq,dp){if(!dq&&!dp&&(!c8||!c8.test(dk))){var di,dn,dh=true,de=cZ,dg=df,dl=df.nodeType===9&&dk;if(df.nodeType===1&&df.nodeName.toLowerCase()!=="object"){di=b1(dk);if((dh=df.getAttribute("id"))){de=dh.replace(db,"\\$&")}else{df.setAttribute("id",de)}de="[id='"+de+"'] ";dn=di.length;while(dn--){di[dn]=de+di[dn].join("")}dg=cR.test(dk)&&df.parentNode||df;dl=di.join(",")}if(dl){try{cW.apply(dm,cl.call(dg.querySelectorAll(dl),0));return dm}catch(dj){}finally{if(!dh){df.removeAttribute("id")}}}}return dd(dk,df,dm,dq,dp)};if(da){cK(function(df){dc=da.call(df,"div");try{da.call(df,"[test!='']:sizzle");c7.push("!=",c6)}catch(de){}});c7=new RegExp(c7.join("|"));cQ.matchesSelector=function(df,dh){dh=dh.replace(c9,"='$1']");if(!cm(df)&&!c7.test(dh)&&(!c8||!c8.test(dh))){try{var de=da.call(df,dh);if(de||dc||df.document&&df.document.nodeType!==11){return de}}catch(dg){}}return cQ(dh,null,null,[df]).length>0}}})()}cL.pseudos.nth=cL.pseudos.eq;function cj(){}cL.filters=cj.prototype=cL.pseudos;cL.setFilters=new cj();cQ.attr=bG.attr;bG.find=cQ;bG.expr=cQ.selectors;bG.expr[":"]=bG.expr.pseudos;bG.unique=cQ.uniqueSort;bG.text=cQ.getText;bG.isXMLDoc=cQ.isXML;bG.contains=cQ.contains})(a2);var ag=/Until$/,bq=/^(?:parents|prev(?:Until|All))/,al=/^.[^:#\[\.,]*$/,y=bG.expr.match.needsContext,bu={children:true,contents:true,next:true,prev:true};bG.fn.extend({find:function(bZ){var b3,b0,b5,b6,b4,b2,b1=this;if(typeof bZ!=="string"){return bG(bZ).filter(function(){for(b3=0,b0=b1.length;b3<b0;b3++){if(bG.contains(b1[b3],this)){return true}}})}b2=this.pushStack("","find",bZ);for(b3=0,b0=this.length;b3<b0;b3++){b5=b2.length;bG.find(bZ,this[b3],b2);if(b3>0){for(b6=b5;b6<b2.length;b6++){for(b4=0;b4<b5;b4++){if(b2[b4]===b2[b6]){b2.splice(b6--,1);break}}}}}return b2},has:function(b2){var b1,b0=bG(b2,this),bZ=b0.length;return this.filter(function(){for(b1=0;b1<bZ;b1++){if(bG.contains(this,b0[b1])){return true}}})},not:function(bZ){return this.pushStack(aM(this,bZ,false),"not",bZ)},filter:function(bZ){return this.pushStack(aM(this,bZ,true),"filter",bZ)},is:function(bZ){return !!bZ&&(typeof bZ==="string"?y.test(bZ)?bG(bZ,this.context).index(this[0])>=0:bG.filter(bZ,this).length>0:this.filter(bZ).length>0)},closest:function(b3,b2){var b4,b1=0,bZ=this.length,b0=[],b5=y.test(b3)||typeof b3!=="string"?bG(b3,b2||this.context):0;for(;b1<bZ;b1++){b4=this[b1];while(b4&&b4.ownerDocument&&b4!==b2&&b4.nodeType!==11){if(b5?b5.index(b4)>-1:bG.find.matchesSelector(b4,b3)){b0.push(b4);break}b4=b4.parentNode}}b0=b0.length>1?bG.unique(b0):b0;return this.pushStack(b0,"closest",b3)},index:function(bZ){if(!bZ){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof bZ==="string"){return bG.inArray(this[0],bG(bZ))}return bG.inArray(bZ.jquery?bZ[0]:bZ,this)},add:function(bZ,b0){var b2=typeof bZ==="string"?bG(bZ,b0):bG.makeArray(bZ&&bZ.nodeType?[bZ]:bZ),b1=bG.merge(this.get(),b2);return this.pushStack(aR(b2[0])||aR(b1[0])?b1:bG.unique(b1))},addBack:function(bZ){return this.add(bZ==null?this.prevObject:this.prevObject.filter(bZ))}});bG.fn.andSelf=bG.fn.addBack;function aR(bZ){return !bZ||!bZ.parentNode||bZ.parentNode.nodeType===11}function aY(b0,bZ){do{b0=b0[bZ]}while(b0&&b0.nodeType!==1);return b0}bG.each({parent:function(b0){var bZ=b0.parentNode;return bZ&&bZ.nodeType!==11?bZ:null},parents:function(bZ){return bG.dir(bZ,"parentNode")},parentsUntil:function(b0,bZ,b1){return bG.dir(b0,"parentNode",b1)},next:function(bZ){return aY(bZ,"nextSibling")},prev:function(bZ){return aY(bZ,"previousSibling")},nextAll:function(bZ){return bG.dir(bZ,"nextSibling")},prevAll:function(bZ){return bG.dir(bZ,"previousSibling")},nextUntil:function(b0,bZ,b1){return bG.dir(b0,"nextSibling",b1)},prevUntil:function(b0,bZ,b1){return bG.dir(b0,"previousSibling",b1)},siblings:function(bZ){return bG.sibling((bZ.parentNode||{}).firstChild,bZ)},children:function(bZ){return bG.sibling(bZ.firstChild)},contents:function(bZ){return bG.nodeName(bZ,"iframe")?bZ.contentDocument||bZ.contentWindow.document:bG.merge([],bZ.childNodes)}},function(bZ,b0){bG.fn[bZ]=function(b3,b1){var b2=bG.map(this,b0,b3);if(!ag.test(bZ)){b1=b3}if(b1&&typeof b1==="string"){b2=bG.filter(b1,b2)}b2=this.length>1&&!bu[bZ]?bG.unique(b2):b2;if(this.length>1&&bq.test(bZ)){b2=b2.reverse()}return this.pushStack(b2,bZ,a4.call(arguments).join(","))}});bG.extend({filter:function(b1,bZ,b0){if(b0){b1=":not("+b1+")"}return bZ.length===1?bG.find.matchesSelector(bZ[0],b1)?[bZ[0]]:[]:bG.find.matches(b1,bZ)},dir:function(b1,b0,b3){var bZ=[],b2=b1[b0];while(b2&&b2.nodeType!==9&&(b3===aB||b2.nodeType!==1||!bG(b2).is(b3))){if(b2.nodeType===1){bZ.push(b2)}b2=b2[b0]}return bZ},sibling:function(b1,b0){var bZ=[];for(;b1;b1=b1.nextSibling){if(b1.nodeType===1&&b1!==b0){bZ.push(b1)}}return bZ}});function aM(b2,b1,bZ){b1=b1||0;if(bG.isFunction(b1)){return bG.grep(b2,function(b4,b3){var b5=!!b1.call(b4,b3,b4);return b5===bZ})}else{if(b1.nodeType){return bG.grep(b2,function(b4,b3){return(b4===b1)===bZ})}else{if(typeof b1==="string"){var b0=bG.grep(b2,function(b3){return b3.nodeType===1});if(al.test(b1)){return bG.filter(b1,b0,!bZ)}else{b1=bG.filter(b1,b0)}}}}return bG.grep(b2,function(b4,b3){return(bG.inArray(b4,b1)>=0)===bZ})}function A(bZ){var b1=c.split("|"),b0=bZ.createDocumentFragment();if(b0.createElement){while(b1.length){b0.createElement(b1.pop())}}return b0}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",av=/ jQuery\d+="(?:null|\d+)"/g,bY=/^\s+/,ay=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bT=/<tbody/i,J=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,ap=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aE=/^(?:checkbox|radio)$/,bR=/checked\s*(?:[^=]|=\s*.checked.)/i,bw=/\/(java|ecma)script/i,aH=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aQ=A(o),l=aQ.appendChild(o.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;if(!bG.support.htmlSerialize){T._default=[1,"X<div>","</div>"]}bG.fn.extend({text:function(bZ){return bG.access(this,function(b0){return b0===aB?bG.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(b0))},null,bZ,arguments.length)},wrapAll:function(bZ){if(bG.isFunction(bZ)){return this.each(function(b1){bG(this).wrapAll(bZ.call(this,b1))})}if(this[0]){var b0=bG(bZ,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b0.insertBefore(this[0])}b0.map(function(){var b1=this;while(b1.firstChild&&b1.firstChild.nodeType===1){b1=b1.firstChild}return b1}).append(this)}return this},wrapInner:function(bZ){if(bG.isFunction(bZ)){return this.each(function(b0){bG(this).wrapInner(bZ.call(this,b0))})}return this.each(function(){var b0=bG(this),b1=b0.contents();if(b1.length){b1.wrapAll(bZ)}else{b0.append(bZ)}})},wrap:function(bZ){var b0=bG.isFunction(bZ);return this.each(function(b1){bG(this).wrapAll(b0?bZ.call(this,b1):bZ)})},unwrap:function(){return this.parent().each(function(){if(!bG.nodeName(this,"body")){bG(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(bZ){if(this.nodeType===1||this.nodeType===11){this.appendChild(bZ)}})},prepend:function(){return this.domManip(arguments,true,function(bZ){if(this.nodeType===1||this.nodeType===11){this.insertBefore(bZ,this.firstChild)}})},before:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this)})}if(arguments.length){var bZ=bG.clean(arguments);return this.pushStack(bG.merge(bZ,this),"before",this.selector)}},after:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this.nextSibling)})}if(arguments.length){var bZ=bG.clean(arguments);return this.pushStack(bG.merge(this,bZ),"after",this.selector)}},remove:function(bZ,b2){var b1,b0=0;for(;(b1=this[b0])!=null;b0++){if(!bZ||bG.filter(bZ,[b1]).length){if(!b2&&b1.nodeType===1){bG.cleanData(b1.getElementsByTagName("*"));bG.cleanData([b1])}if(b1.parentNode){b1.parentNode.removeChild(b1)}}}return this},empty:function(){var b0,bZ=0;for(;(b0=this[bZ])!=null;bZ++){if(b0.nodeType===1){bG.cleanData(b0.getElementsByTagName("*"))}while(b0.firstChild){b0.removeChild(b0.firstChild)}}return this},clone:function(b0,bZ){b0=b0==null?false:b0;bZ=bZ==null?b0:bZ;return this.map(function(){return bG.clone(this,b0,bZ)})},html:function(bZ){return bG.access(this,function(b3){var b2=this[0]||{},b1=0,b0=this.length;if(b3===aB){return b2.nodeType===1?b2.innerHTML.replace(av,""):aB}if(typeof b3==="string"&&!aj.test(b3)&&(bG.support.htmlSerialize||!K.test(b3))&&(bG.support.leadingWhitespace||!bY.test(b3))&&!T[(p.exec(b3)||["",""])[1].toLowerCase()]){b3=b3.replace(ay,"<$1></$2>");try{for(;b1<b0;b1++){b2=this[b1]||{};if(b2.nodeType===1){bG.cleanData(b2.getElementsByTagName("*"));b2.innerHTML=b3}}b2=0}catch(b4){}}if(b2){this.empty().append(b3)}},null,bZ,arguments.length)},replaceWith:function(bZ){if(!aR(this[0])){if(bG.isFunction(bZ)){return this.each(function(b2){var b1=bG(this),b0=b1.html();b1.replaceWith(bZ.call(this,b2,b0))})}if(typeof bZ!=="string"){bZ=bG(bZ).detach()}return this.each(function(){var b1=this.nextSibling,b0=this.parentNode;bG(this).remove();if(b1){bG(b1).before(bZ)}else{bG(b0).append(bZ)}})}return this.length?this.pushStack(bG(bG.isFunction(bZ)?bZ():bZ),"replaceWith",bZ):this},detach:function(bZ){return this.remove(bZ,true)},domManip:function(b5,b9,b8){b5=[].concat.apply([],b5);var b1,b3,b4,b7,b2=0,b6=b5[0],b0=[],bZ=this.length;if(!bG.support.checkClone&&bZ>1&&typeof b6==="string"&&bR.test(b6)){return this.each(function(){bG(this).domManip(b5,b9,b8)})}if(bG.isFunction(b6)){return this.each(function(cb){var ca=bG(this);b5[0]=b6.call(this,cb,b9?ca.html():aB);ca.domManip(b5,b9,b8)})}if(this[0]){b1=bG.buildFragment(b5,this,b0);b4=b1.fragment;b3=b4.firstChild;if(b4.childNodes.length===1){b4=b3}if(b3){b9=b9&&bG.nodeName(b3,"tr");for(b7=b1.cacheable||bZ-1;b2<bZ;b2++){b8.call(b9&&bG.nodeName(this[b2],"table")?x(this[b2],"tbody"):this[b2],b2===b7?b4:bG.clone(b4,true,true))}}b4=b3=null;if(b0.length){bG.each(b0,function(ca,cb){if(cb.src){if(bG.ajax){bG.ajax({url:cb.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bG.error("no ajax")}}else{bG.globalEval((cb.text||cb.textContent||cb.innerHTML||"").replace(aH,""))}if(cb.parentNode){cb.parentNode.removeChild(cb)}})}}return this}});function x(b0,bZ){return b0.getElementsByTagName(bZ)[0]||b0.appendChild(b0.ownerDocument.createElement(bZ))}function ao(b6,b0){if(b0.nodeType!==1||!bG.hasData(b6)){return}var b3,b2,bZ,b5=bG._data(b6),b4=bG._data(b0,b5),b1=b5.events;if(b1){delete b4.handle;b4.events={};for(b3 in b1){for(b2=0,bZ=b1[b3].length;b2<bZ;b2++){bG.event.add(b0,b3,b1[b3][b2])}}}if(b4.data){b4.data=bG.extend({},b4.data)}}function F(b0,bZ){var b1;if(bZ.nodeType!==1){return}if(bZ.clearAttributes){bZ.clearAttributes()}if(bZ.mergeAttributes){bZ.mergeAttributes(b0)}b1=bZ.nodeName.toLowerCase();if(b1==="object"){if(bZ.parentNode){bZ.outerHTML=b0.outerHTML}if(bG.support.html5Clone&&(b0.innerHTML&&!bG.trim(bZ.innerHTML))){bZ.innerHTML=b0.innerHTML}}else{if(b1==="input"&&aE.test(b0.type)){bZ.defaultChecked=bZ.checked=b0.checked;if(bZ.value!==b0.value){bZ.value=b0.value}}else{if(b1==="option"){bZ.selected=b0.defaultSelected}else{if(b1==="input"||b1==="textarea"){bZ.defaultValue=b0.defaultValue}else{if(b1==="script"&&bZ.text!==b0.text){bZ.text=b0.text}}}}}bZ.removeAttribute(bG.expando)}bG.buildFragment=function(b2,b3,b0){var b1,bZ,b4,b5=b2[0];b3=b3||o;b3=!b3.nodeType&&b3[0]||b3;b3=b3.ownerDocument||b3;if(b2.length===1&&typeof b5==="string"&&b5.length<512&&b3===o&&b5.charAt(0)==="<"&&!ap.test(b5)&&(bG.support.checkClone||!bR.test(b5))&&(bG.support.html5Clone||!K.test(b5))){bZ=true;b1=bG.fragments[b5];b4=b1!==aB}if(!b1){b1=b3.createDocumentFragment();bG.clean(b2,b3,b1,b0);if(bZ){bG.fragments[b5]=b4&&b1}}return{fragment:b1,cacheable:bZ}};bG.fragments={};bG.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(bZ,b0){bG.fn[bZ]=function(b1){var b3,b5=0,b4=[],b7=bG(b1),b2=b7.length,b6=this.length===1&&this[0].parentNode;if((b6==null||b6&&b6.nodeType===11&&b6.childNodes.length===1)&&b2===1){b7[b0](this[0]);return this}else{for(;b5<b2;b5++){b3=(b5>0?this.clone(true):this).get();bG(b7[b5])[b0](b3);b4=b4.concat(b3)}return this.pushStack(b4,bZ,b7.selector)}}});function m(bZ){if(typeof bZ.getElementsByTagName!=="undefined"){return bZ.getElementsByTagName("*")}else{if(typeof bZ.querySelectorAll!=="undefined"){return bZ.querySelectorAll("*")}else{return[]}}}function bS(bZ){if(aE.test(bZ.type)){bZ.defaultChecked=bZ.checked}}bG.extend({clone:function(b3,b5,b1){var bZ,b0,b2,b4;if(bG.support.html5Clone||bG.isXMLDoc(b3)||!K.test("<"+b3.nodeName+">")){b4=b3.cloneNode(true)}else{l.innerHTML=b3.outerHTML;l.removeChild(b4=l.firstChild)}if((!bG.support.noCloneEvent||!bG.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bG.isXMLDoc(b3)){F(b3,b4);bZ=m(b3);b0=m(b4);for(b2=0;bZ[b2];++b2){if(b0[b2]){F(bZ[b2],b0[b2])}}}if(b5){ao(b3,b4);if(b1){bZ=m(b3);b0=m(b4);for(b2=0;bZ[b2];++b2){ao(bZ[b2],b0[b2])}}}bZ=b0=null;return b4},clean:function(cc,b1,bZ,b2){var b9,b8,cb,cg,b5,cf,b6,b3,b0,ca,ce,b7,b4=b1===o&&aQ,cd=[];if(!b1||typeof b1.createDocumentFragment==="undefined"){b1=o}for(b9=0;(cb=cc[b9])!=null;b9++){if(typeof cb==="number"){cb+=""}if(!cb){continue}if(typeof cb==="string"){if(!J.test(cb)){cb=b1.createTextNode(cb)}else{b4=b4||A(b1);b6=b1.createElement("div");b4.appendChild(b6);cb=cb.replace(ay,"<$1></$2>");cg=(p.exec(cb)||["",""])[1].toLowerCase();b5=T[cg]||T._default;cf=b5[0];b6.innerHTML=b5[1]+cb+b5[2];while(cf--){b6=b6.lastChild}if(!bG.support.tbody){b3=bT.test(cb);b0=cg==="table"&&!b3?b6.firstChild&&b6.firstChild.childNodes:b5[1]==="<table>"&&!b3?b6.childNodes:[];for(b8=b0.length-1;b8>=0;--b8){if(bG.nodeName(b0[b8],"tbody")&&!b0[b8].childNodes.length){b0[b8].parentNode.removeChild(b0[b8])}}}if(!bG.support.leadingWhitespace&&bY.test(cb)){b6.insertBefore(b1.createTextNode(bY.exec(cb)[0]),b6.firstChild)}cb=b6.childNodes;b6.parentNode.removeChild(b6)}}if(cb.nodeType){cd.push(cb)}else{bG.merge(cd,cb)}}if(b6){cb=b6=b4=null}if(!bG.support.appendChecked){for(b9=0;(cb=cd[b9])!=null;b9++){if(bG.nodeName(cb,"input")){bS(cb)}else{if(typeof cb.getElementsByTagName!=="undefined"){bG.grep(cb.getElementsByTagName("input"),bS)}}}}if(bZ){ce=function(ch){if(!ch.type||bw.test(ch.type)){return b2?b2.push(ch.parentNode?ch.parentNode.removeChild(ch):ch):bZ.appendChild(ch)}};for(b9=0;(cb=cd[b9])!=null;b9++){if(!(bG.nodeName(cb,"script")&&ce(cb))){bZ.appendChild(cb);if(typeof cb.getElementsByTagName!=="undefined"){b7=bG.grep(bG.merge([],cb.getElementsByTagName("script")),ce);cd.splice.apply(cd,[b9+1,0].concat(b7));b9+=b7.length}}}}return cd},cleanData:function(b0,b8){var b3,b1,b2,b7,b4=0,b9=bG.expando,bZ=bG.cache,b5=bG.support.deleteExpando,b6=bG.event.special;for(;(b2=b0[b4])!=null;b4++){if(b8||bG.acceptData(b2)){b1=b2[b9];b3=b1&&bZ[b1];if(b3){if(b3.events){for(b7 in b3.events){if(b6[b7]){bG.event.remove(b2,b7)}else{bG.removeEvent(b2,b7,b3.handle)}}}if(bZ[b1]){delete bZ[b1];if(b5){delete b2[b9]}else{if(b2.removeAttribute){b2.removeAttribute(b9)}else{b2[b9]=null}}bG.deletedIds.push(b1)}}}}}});(function(){var bZ,b0;bG.uaMatch=function(b2){b2=b2.toLowerCase();var b1=/(chrome)[ \/]([\w.]+)/.exec(b2)||/(webkit)[ \/]([\w.]+)/.exec(b2)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b2)||/(msie) ([\w.]+)/.exec(b2)||b2.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b2)||[];return{browser:b1[1]||"",version:b1[2]||"0"}};bZ=bG.uaMatch(d.userAgent);b0={};if(bZ.browser){b0[bZ.browser]=true;b0.version=bZ.version}if(b0.chrome){b0.webkit=true}else{if(b0.webkit){b0.safari=true}}bG.browser=b0;bG.sub=function(){function b1(b4,b5){return new b1.fn.init(b4,b5)}bG.extend(true,b1,this);b1.superclass=this;b1.fn=b1.prototype=this();b1.fn.constructor=b1;b1.sub=this.sub;b1.fn.init=function b3(b4,b5){if(b5&&b5 instanceof bG&&!(b5 instanceof b1)){b5=b1(b5)}return bG.fn.init.call(this,b4,b5,b2)};b1.fn.init.prototype=b1.fn;var b2=b1(o);return b1}})();var E,az,aW,be=/alpha\([^)]*\)/i,aS=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,aZ=/^margin/,a8=new RegExp("^("+bx+")(.*)$","i"),W=new RegExp("^("+bx+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+bx+")","i"),bh={},a9={position:"absolute",visibility:"hidden",display:"block"},bA={letterSpacing:0,fontWeight:400},bQ=["Top","Right","Bottom","Left"],ar=["Webkit","O","Moz","ms"],aJ=bG.fn.toggle;function b(b2,b0){if(b0 in b2){return b0}var b3=b0.charAt(0).toUpperCase()+b0.slice(1),bZ=b0,b1=ar.length;while(b1--){b0=ar[b1]+b3;if(b0 in b2){return b0}}return bZ}function Q(b0,bZ){b0=bZ||b0;return bG.css(b0,"display")==="none"||!bG.contains(b0.ownerDocument,b0)}function s(b4,bZ){var b3,b5,b0=[],b1=0,b2=b4.length;for(;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}b0[b1]=bG._data(b3,"olddisplay");if(bZ){if(!b0[b1]&&b3.style.display==="none"){b3.style.display=""}if(b3.style.display===""&&Q(b3)){b0[b1]=bG._data(b3,"olddisplay",bC(b3.nodeName))}}else{b5=E(b3,"display");if(!b0[b1]&&b5!=="none"){bG._data(b3,"olddisplay",b5)}}}for(b1=0;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}if(!bZ||b3.style.display==="none"||b3.style.display===""){b3.style.display=bZ?b0[b1]||"":"none"}}return b4}bG.fn.extend({css:function(bZ,b0){return bG.access(this,function(b2,b1,b3){return b3!==aB?bG.style(b2,b1,b3):bG.css(b2,b1)},bZ,b0,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b1,b0){var bZ=typeof b1==="boolean";if(bG.isFunction(b1)&&bG.isFunction(b0)){return aJ.apply(this,arguments)}return this.each(function(){if(bZ?b1:Q(this)){bG(this).show()}else{bG(this).hide()}})}});bG.extend({cssHooks:{opacity:{get:function(b1,b0){if(b0){var bZ=E(b1,"opacity");return bZ===""?"1":bZ}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bG.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b0,b7,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return}var b5,b6,b8,b3=bG.camelCase(b0),bZ=b1.style;b0=bG.cssProps[b3]||(bG.cssProps[b3]=b(bZ,b3));b8=bG.cssHooks[b0]||bG.cssHooks[b3];if(b7!==aB){b6=typeof b7;if(b6==="string"&&(b5=S.exec(b7))){b7=(b5[1]+1)*b5[2]+parseFloat(bG.css(b1,b0));b6="number"}if(b7==null||b6==="number"&&isNaN(b7)){return}if(b6==="number"&&!bG.cssNumber[b3]){b7+="px"}if(!b8||!("set" in b8)||(b7=b8.set(b1,b7,b2))!==aB){try{bZ[b0]=b7}catch(b4){}}}else{if(b8&&"get" in b8&&(b5=b8.get(b1,false,b2))!==aB){return b5}return bZ[b0]}},css:function(b5,b3,b4,b0){var b6,b2,bZ,b1=bG.camelCase(b3);b3=bG.cssProps[b1]||(bG.cssProps[b1]=b(b5.style,b1));bZ=bG.cssHooks[b3]||bG.cssHooks[b1];if(bZ&&"get" in bZ){b6=bZ.get(b5,true,b0)}if(b6===aB){b6=E(b5,b3)}if(b6==="normal"&&b3 in bA){b6=bA[b3]}if(b4||b0!==aB){b2=parseFloat(b6);return b4||bG.isNumeric(b2)?b2||0:b6}return b6},swap:function(b3,b2,b4){var b1,b0,bZ={};for(b0 in b2){bZ[b0]=b3.style[b0];b3.style[b0]=b2[b0]}b1=b4.call(b3);for(b0 in b2){b3.style[b0]=bZ[b0]}return b1}});if(a2.getComputedStyle){E=function(b6,b0){var bZ,b3,b2,b5,b4=a2.getComputedStyle(b6,null),b1=b6.style;if(b4){bZ=b4[b0];if(bZ===""&&!bG.contains(b6.ownerDocument,b6)){bZ=bG.style(b6,b0)}if(W.test(bZ)&&aZ.test(b0)){b3=b1.width;b2=b1.minWidth;b5=b1.maxWidth;b1.minWidth=b1.maxWidth=b1.width=bZ;bZ=b4.width;b1.width=b3;b1.minWidth=b2;b1.maxWidth=b5}}return bZ}}else{if(o.documentElement.currentStyle){E=function(b3,b1){var b4,bZ,b0=b3.currentStyle&&b3.currentStyle[b1],b2=b3.style;if(b0==null&&b2&&b2[b1]){b0=b2[b1]}if(W.test(b0)&&!bk.test(b1)){b4=b2.left;bZ=b3.runtimeStyle&&b3.runtimeStyle.left;if(bZ){b3.runtimeStyle.left=b3.currentStyle.left}b2.left=b1==="fontSize"?"1em":b0;b0=b2.pixelLeft+"px";b2.left=b4;if(bZ){b3.runtimeStyle.left=bZ}}return b0===""?"auto":b0}}}function aG(bZ,b1,b2){var b0=a8.exec(b1);return b0?Math.max(0,b0[1]-(b2||0))+(b0[2]||"px"):b1}function at(b2,b0,bZ,b4){var b1=bZ===(b4?"border":"content")?4:b0==="width"?1:0,b3=0;for(;b1<4;b1+=2){if(bZ==="margin"){b3+=bG.css(b2,bZ+bQ[b1],true)}if(b4){if(bZ==="content"){b3-=parseFloat(E(b2,"padding"+bQ[b1]))||0}if(bZ!=="margin"){b3-=parseFloat(E(b2,"border"+bQ[b1]+"Width"))||0}}else{b3+=parseFloat(E(b2,"padding"+bQ[b1]))||0;if(bZ!=="padding"){b3+=parseFloat(E(b2,"border"+bQ[b1]+"Width"))||0}}}return b3}function u(b2,b0,bZ){var b3=b0==="width"?b2.offsetWidth:b2.offsetHeight,b1=true,b4=bG.support.boxSizing&&bG.css(b2,"boxSizing")==="border-box";if(b3<=0||b3==null){b3=E(b2,b0);if(b3<0||b3==null){b3=b2.style[b0]}if(W.test(b3)){return b3}b1=b4&&(bG.support.boxSizingReliable||b3===b2.style[b0]);b3=parseFloat(b3)||0}return(b3+at(b2,b0,bZ||(b4?"border":"content"),b1))+"px"}function bC(b1){if(bh[b1]){return bh[b1]}var bZ=bG("<"+b1+">").appendTo(o.body),b0=bZ.css("display");bZ.remove();if(b0==="none"||b0===""){az=o.body.appendChild(az||bG.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aW||!az.createElement){aW=(az.contentWindow||az.contentDocument).document;aW.write("<!doctype html><html><body>");aW.close()}bZ=aW.body.appendChild(aW.createElement(b1));b0=E(bZ,"display");o.body.removeChild(az)}bh[b1]=b0;return b0}bG.each(["height","width"],function(b0,bZ){bG.cssHooks[bZ]={get:function(b3,b2,b1){if(b2){if(b3.offsetWidth===0&&G.test(E(b3,"display"))){return bG.swap(b3,a9,function(){return u(b3,bZ,b1)})}else{return u(b3,bZ,b1)}}},set:function(b2,b3,b1){return aG(b2,b3,b1?at(b2,bZ,b1,bG.support.boxSizing&&bG.css(b2,"boxSizing")==="border-box"):0)}}});if(!bG.support.opacity){bG.cssHooks.opacity={get:function(b0,bZ){return aS.test((bZ&&b0.currentStyle?b0.currentStyle.filter:b0.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":bZ?"1":""},set:function(b3,b4){var b2=b3.style,b0=b3.currentStyle,bZ=bG.isNumeric(b4)?"alpha(opacity="+b4*100+")":"",b1=b0&&b0.filter||b2.filter||"";b2.zoom=1;if(b4>=1&&bG.trim(b1.replace(be,""))===""&&b2.removeAttribute){b2.removeAttribute("filter");if(b0&&!b0.filter){return}}b2.filter=be.test(b1)?b1.replace(be,bZ):b1+" "+bZ}}}bG(function(){if(!bG.support.reliableMarginRight){bG.cssHooks.marginRight={get:function(b0,bZ){return bG.swap(b0,{display:"inline-block"},function(){if(bZ){return E(b0,"marginRight")}})}}}if(!bG.support.pixelPosition&&bG.fn.position){bG.each(["top","left"],function(bZ,b0){bG.cssHooks[b0]={get:function(b3,b2){if(b2){var b1=E(b3,b0);return W.test(b1)?bG(b3).position()[b0]+"px":b1}}}})}});if(bG.expr&&bG.expr.filters){bG.expr.filters.hidden=function(bZ){return(bZ.offsetWidth===0&&bZ.offsetHeight===0)||(!bG.support.reliableHiddenOffsets&&((bZ.style&&bZ.style.display)||E(bZ,"display"))==="none")};bG.expr.filters.visible=function(bZ){return !bG.expr.filters.hidden(bZ)}}bG.each({margin:"",padding:"",border:"Width"},function(bZ,b0){bG.cssHooks[bZ+b0]={expand:function(b3){var b2,b4=typeof b3==="string"?b3.split(" "):[b3],b1={};for(b2=0;b2<4;b2++){b1[bZ+bQ[b2]+b0]=b4[b2]||b4[b2-2]||b4[0]}return b1}};if(!aZ.test(bZ)){bG.cssHooks[bZ+b0].set=aG}});var bs=/%20/g,aP=/\[\]$/,U=/\r?\n/g,bz=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aD=/^(?:select|textarea)/i;bG.fn.extend({serialize:function(){return bG.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bG.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aD.test(this.nodeName)||bz.test(this.type))}).map(function(bZ,b0){var b1=bG(this).val();return b1==null?null:bG.isArray(b1)?bG.map(b1,function(b3,b2){return{name:b0.name,value:b3.replace(U,"\r\n")}}):{name:b0.name,value:b1.replace(U,"\r\n")}}).get()}});bG.param=function(bZ,b1){var b2,b0=[],b3=function(b4,b5){b5=bG.isFunction(b5)?b5():(b5==null?"":b5);b0[b0.length]=encodeURIComponent(b4)+"="+encodeURIComponent(b5)};if(b1===aB){b1=bG.ajaxSettings&&bG.ajaxSettings.traditional}if(bG.isArray(bZ)||(bZ.jquery&&!bG.isPlainObject(bZ))){bG.each(bZ,function(){b3(this.name,this.value)})}else{for(b2 in bZ){k(b2,bZ[b2],b1,b3)}}return b0.join("&").replace(bs,"+")};function k(b1,b3,b0,b2){var bZ;if(bG.isArray(b3)){bG.each(b3,function(b5,b4){if(b0||aP.test(b1)){b2(b1,b4)}else{k(b1+"["+(typeof b4==="object"?b5:"")+"]",b4,b0,b2)}})}else{if(!b0&&bG.type(b3)==="object"){for(bZ in b3){k(b1+"["+bZ+"]",b3[bZ],b0,b2)}}else{b2(b1,b3)}}}var bX,Y,an=/#.*$/,ad=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aC=/^\/\//,bN=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bW=bG.fn.load,v={},a6={},aX=["*/"]+["*"];try{Y=aI.href}catch(bd){Y=o.createElement("a");Y.href="";Y=Y.href}bX=aT.exec(Y.toLowerCase())||[];function bI(bZ){return function(b3,b5){if(typeof b3!=="string"){b5=b3;b3="*"}var b0,b6,b7,b2=b3.toLowerCase().split(aV),b1=0,b4=b2.length;if(bG.isFunction(b5)){for(;b1<b4;b1++){b0=b2[b1];b7=/^\+/.test(b0);if(b7){b0=b0.substr(1)||"*"}b6=bZ[b0]=bZ[b0]||[];b6[b7?"unshift":"push"](b5)}}}}function q(b0,b9,b4,b7,b6,b2){b6=b6||b9.dataTypes[0];b2=b2||{};b2[b6]=true;var b8,b5=b0[b6],b1=0,bZ=b5?b5.length:0,b3=(b0===v);for(;b1<bZ&&(b3||!b8);b1++){b8=b5[b1](b9,b4,b7);if(typeof b8==="string"){if(!b3||b2[b8]){b8=aB}else{b9.dataTypes.unshift(b8);b8=q(b0,b9,b4,b7,b8,b2)}}}if((b3||!b8)&&!b2["*"]){b8=q(b0,b9,b4,b7,"*",b2)}return b8}function t(b1,b2){var b0,bZ,b3=bG.ajaxSettings.flatOptions||{};for(b0 in b2){if(b2[b0]!==aB){(b3[b0]?b1:(bZ||(bZ={})))[b0]=b2[b0]}}if(bZ){bG.extend(true,b1,bZ)}}bG.fn.load=function(b2,b5,b6){if(typeof b2!=="string"&&bW){return bW.apply(this,arguments)}if(!this.length){return this}var bZ,b3,b1,b0=this,b4=b2.indexOf(" ");if(b4>=0){bZ=b2.slice(b4,b2.length);b2=b2.slice(0,b4)}if(bG.isFunction(b5)){b6=b5;b5=aB}else{if(b5&&typeof b5==="object"){b3="POST"}}bG.ajax({url:b2,type:b3,dataType:"html",data:b5,complete:function(b8,b7){if(b6){b0.each(b6,b1||[b8.responseText,b7,b8])}}}).done(function(b7){b1=arguments;b0.html(bZ?bG("<div>").append(b7.replace(g,"")).find(bZ):b7)});return this};bG.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(bZ,b0){bG.fn[b0]=function(b1){return this.on(b0,b1)}});bG.each(["get","post"],function(bZ,b0){bG[b0]=function(b1,b3,b4,b2){if(bG.isFunction(b3)){b2=b2||b4;b4=b3;b3=aB}return bG.ajax({type:b0,url:b1,data:b3,success:b4,dataType:b2})}});bG.extend({getScript:function(bZ,b0){return bG.get(bZ,aB,b0,"script")},getJSON:function(bZ,b0,b1){return bG.get(bZ,b0,b1,"json")},ajaxSetup:function(b0,bZ){if(bZ){t(b0,bG.ajaxSettings)}else{bZ=b0;b0=bG.ajaxSettings}t(b0,bZ);return b0},ajaxSettings:{url:Y,isLocal:B.test(bX[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bG.parseJSON,"text xml":bG.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bI(v),ajaxTransport:bI(a6),ajax:function(b4,b1){if(typeof b4==="object"){b1=b4;b4=aB}b1=b1||{};var b7,cl,b2,cg,b9,cd,b0,cf,b8=bG.ajaxSetup({},b1),cn=b8.context||b8,cb=cn!==b8&&(cn.nodeType||cn instanceof bG)?bG(cn):bG.event,cm=bG.Deferred(),ci=bG.Callbacks("once memory"),b5=b8.statusCode||{},cc={},cj={},b3=0,b6="canceled",ce={readyState:0,setRequestHeader:function(cp,cq){if(!b3){var co=cp.toLowerCase();cp=cj[co]=cj[co]||cp;cc[cp]=cq}return this},getAllResponseHeaders:function(){return b3===2?cl:null},getResponseHeader:function(cp){var co;if(b3===2){if(!b2){b2={};while((co=ad.exec(cl))){b2[co[1].toLowerCase()]=co[2]}}co=b2[cp.toLowerCase()]}return co===aB?null:co},overrideMimeType:function(co){if(!b3){b8.mimeType=co}return this},abort:function(co){co=co||b6;if(cg){cg.abort(co)}ca(0,co);return this}};function ca(ct,cp,cu,cr){var co,cx,cv,cs,cw,cq=cp;if(b3===2){return}b3=2;if(b9){clearTimeout(b9)}cg=aB;cl=cr||"";ce.readyState=ct>0?4:0;if(cu){cs=h(b8,ce,cu)}if(ct>=200&&ct<300||ct===304){if(b8.ifModified){cw=ce.getResponseHeader("Last-Modified");if(cw){bG.lastModified[b7]=cw}cw=ce.getResponseHeader("Etag");if(cw){bG.etag[b7]=cw}}if(ct===304){cq="notmodified";co=true}else{co=ae(b8,cs);cq=co.state;cx=co.data;cv=co.error;co=!cv}}else{cv=cq;if(!cq||ct){cq="error";if(ct<0){ct=0}}}ce.status=ct;ce.statusText=(cp||cq)+"";if(co){cm.resolveWith(cn,[cx,cq,ce])}else{cm.rejectWith(cn,[ce,cq,cv])}ce.statusCode(b5);b5=aB;if(b0){cb.trigger("ajax"+(co?"Success":"Error"),[ce,b8,co?cx:cv])}ci.fireWith(cn,[ce,cq]);if(b0){cb.trigger("ajaxComplete",[ce,b8]);if(!(--bG.active)){bG.event.trigger("ajaxStop")}}}cm.promise(ce);ce.success=ce.done;ce.error=ce.fail;ce.complete=ci.add;ce.statusCode=function(cp){if(cp){var co;if(b3<2){for(co in cp){b5[co]=[b5[co],cp[co]]}}else{co=cp[ce.status];ce.always(co)}}return this};b8.url=((b4||b8.url)+"").replace(an,"").replace(aC,bX[1]+"//");b8.dataTypes=bG.trim(b8.dataType||"*").toLowerCase().split(aV);if(b8.crossDomain==null){cd=aT.exec(b8.url.toLowerCase())||false;b8.crossDomain=cd&&(cd.join(":")+(cd[3]?"":cd[1]==="http:"?80:443))!==(bX.join(":")+(bX[3]?"":bX[1]==="http:"?80:443))}if(b8.data&&b8.processData&&typeof b8.data!=="string"){b8.data=bG.param(b8.data,b8.traditional)}q(v,b8,b1,ce);if(b3===2){return ce}b0=b8.global;b8.type=b8.type.toUpperCase();b8.hasContent=!r.test(b8.type);if(b0&&bG.active++===0){bG.event.trigger("ajaxStart")}if(!b8.hasContent){if(b8.data){b8.url+=(bN.test(b8.url)?"&":"?")+b8.data;delete b8.data}b7=b8.url;if(b8.cache===false){var bZ=bG.now(),ck=b8.url.replace(P,"$1_="+bZ);b8.url=ck+((ck===b8.url)?(bN.test(b8.url)?"&":"?")+"_="+bZ:"")}}if(b8.data&&b8.hasContent&&b8.contentType!==false||b1.contentType){ce.setRequestHeader("Content-Type",b8.contentType)}if(b8.ifModified){b7=b7||b8.url;if(bG.lastModified[b7]){ce.setRequestHeader("If-Modified-Since",bG.lastModified[b7])}if(bG.etag[b7]){ce.setRequestHeader("If-None-Match",bG.etag[b7])}}ce.setRequestHeader("Accept",b8.dataTypes[0]&&b8.accepts[b8.dataTypes[0]]?b8.accepts[b8.dataTypes[0]]+(b8.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):b8.accepts["*"]);for(cf in b8.headers){ce.setRequestHeader(cf,b8.headers[cf])}if(b8.beforeSend&&(b8.beforeSend.call(cn,ce,b8)===false||b3===2)){return ce.abort()}b6="abort";for(cf in {success:1,error:1,complete:1}){ce[cf](b8[cf])}cg=q(a6,b8,b1,ce);if(!cg){ca(-1,"No Transport")}else{ce.readyState=1;if(b0){cb.trigger("ajaxSend",[ce,b8])}if(b8.async&&b8.timeout>0){b9=setTimeout(function(){ce.abort("timeout")},b8.timeout)}try{b3=1;cg.send(cc,ca)}catch(ch){if(b3<2){ca(-1,ch)}else{throw ch}}}return ce},active:0,lastModified:{},etag:{}});function h(b8,b7,b4){var b3,b5,b2,bZ,b0=b8.contents,b6=b8.dataTypes,b1=b8.responseFields;for(b5 in b1){if(b5 in b4){b7[b1[b5]]=b4[b5]}}while(b6[0]==="*"){b6.shift();if(b3===aB){b3=b8.mimeType||b7.getResponseHeader("content-type")}}if(b3){for(b5 in b0){if(b0[b5]&&b0[b5].test(b3)){b6.unshift(b5);break}}}if(b6[0] in b4){b2=b6[0]}else{for(b5 in b4){if(!b6[0]||b8.converters[b5+" "+b6[0]]){b2=b5;break}if(!bZ){bZ=b5}}b2=b2||bZ}if(b2){if(b2!==b6[0]){b6.unshift(b2)}return b4[b2]}}function ae(b9,b1){var b7,bZ,b5,b3,b6=b9.dataTypes.slice(),b0=b6[0],b8={},b2=0;if(b9.dataFilter){b1=b9.dataFilter(b1,b9.dataType)}if(b6[1]){for(b7 in b9.converters){b8[b7.toLowerCase()]=b9.converters[b7]}}for(;(b5=b6[++b2]);){if(b5!=="*"){if(b0!=="*"&&b0!==b5){b7=b8[b0+" "+b5]||b8["* "+b5];if(!b7){for(bZ in b8){b3=bZ.split(" ");if(b3[1]===b5){b7=b8[b0+" "+b3[0]]||b8["* "+b3[0]];if(b7){if(b7===true){b7=b8[bZ]}else{if(b8[bZ]!==true){b5=b3[0];b6.splice(b2--,0,b5)}}break}}}}if(b7!==true){if(b7&&b9["throws"]){b1=b7(b1)}else{try{b1=b7(b1)}catch(b4){return{state:"parsererror",error:b7?b4:"No conversion from "+b0+" to "+b5}}}}}b0=b5}}return{state:"success",data:b1}}var bp=[],aw=/\?/,a5=/(=)\?(?=&|$)|\?\?/,bl=bG.now();bG.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var bZ=bp.pop()||(bG.expando+"_"+(bl++));this[bZ]=true;return bZ}});bG.ajaxPrefilter("json jsonp",function(b9,b4,b8){var b7,bZ,b6,b2=b9.data,b0=b9.url,b1=b9.jsonp!==false,b5=b1&&a5.test(b0),b3=b1&&!b5&&typeof b2==="string"&&!(b9.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b2);if(b9.dataTypes[0]==="jsonp"||b5||b3){b7=b9.jsonpCallback=bG.isFunction(b9.jsonpCallback)?b9.jsonpCallback():b9.jsonpCallback;bZ=a2[b7];if(b5){b9.url=b0.replace(a5,"$1"+b7)}else{if(b3){b9.data=b2.replace(a5,"$1"+b7)}else{if(b1){b9.url+=(aw.test(b0)?"&":"?")+b9.jsonp+"="+b7}}}b9.converters["script json"]=function(){if(!b6){bG.error(b7+" was not called")}return b6[0]};b9.dataTypes[0]="json";a2[b7]=function(){b6=arguments};b8.always(function(){a2[b7]=bZ;if(b9[b7]){b9.jsonpCallback=b4.jsonpCallback;bp.push(b7)}if(b6&&bG.isFunction(bZ)){bZ(b6[0])}b6=bZ=aB});return"script"}});bG.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(bZ){bG.globalEval(bZ);return bZ}}});bG.ajaxPrefilter("script",function(bZ){if(bZ.cache===aB){bZ.cache=false}if(bZ.crossDomain){bZ.type="GET";bZ.global=false}});bG.ajaxTransport("script",function(b1){if(b1.crossDomain){var bZ,b0=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b2,b3){bZ=o.createElement("script");bZ.async="async";if(b1.scriptCharset){bZ.charset=b1.scriptCharset}bZ.src=b1.url;bZ.onload=bZ.onreadystatechange=function(b5,b4){if(b4||!bZ.readyState||/loaded|complete/.test(bZ.readyState)){bZ.onload=bZ.onreadystatechange=null;if(b0&&bZ.parentNode){b0.removeChild(bZ)}bZ=aB;if(!b4){b3(200,"success")}}};b0.insertBefore(bZ,b0.firstChild)},abort:function(){if(bZ){bZ.onload(0,1)}}}}});var ah,aN=a2.ActiveXObject?function(){for(var bZ in ah){ah[bZ](0,1)}}:false,au=0;function bB(){try{return new a2.XMLHttpRequest()}catch(bZ){}}function bb(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(bZ){}}bG.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bB()||bb()}:bB;(function(bZ){bG.extend(bG.support,{ajax:!!bZ,cors:!!bZ&&("withCredentials" in bZ)})})(bG.ajaxSettings.xhr());if(bG.support.ajax){bG.ajaxTransport(function(bZ){if(!bZ.crossDomain||bG.support.cors){var b0;return{send:function(b6,b1){var b4,b3,b5=bZ.xhr();if(bZ.username){b5.open(bZ.type,bZ.url,bZ.async,bZ.username,bZ.password)}else{b5.open(bZ.type,bZ.url,bZ.async)}if(bZ.xhrFields){for(b3 in bZ.xhrFields){b5[b3]=bZ.xhrFields[b3]}}if(bZ.mimeType&&b5.overrideMimeType){b5.overrideMimeType(bZ.mimeType)}if(!bZ.crossDomain&&!b6["X-Requested-With"]){b6["X-Requested-With"]="XMLHttpRequest"}try{for(b3 in b6){b5.setRequestHeader(b3,b6[b3])}}catch(b2){}b5.send((bZ.hasContent&&bZ.data)||null);b0=function(cf,b9){var ca,b8,b7,cd,cc;try{if(b0&&(b9||b5.readyState===4)){b0=aB;if(b4){b5.onreadystatechange=bG.noop;if(aN){delete ah[b4]}}if(b9){if(b5.readyState!==4){b5.abort()}}else{ca=b5.status;b7=b5.getAllResponseHeaders();cd={};cc=b5.responseXML;if(cc&&cc.documentElement){cd.xml=cc}try{cd.text=b5.responseText}catch(cf){}try{b8=b5.statusText}catch(ce){b8=""}if(!ca&&bZ.isLocal&&!bZ.crossDomain){ca=cd.text?200:404}else{if(ca===1223){ca=204}}}}}catch(cb){if(!b9){b1(-1,cb)}}if(cd){b1(ca,b8,cd,b7)}};if(!bZ.async){b0()}else{if(b5.readyState===4){setTimeout(b0,0)}else{b4=++au;if(aN){if(!ah){ah={};bG(a2).unload(aN)}ah[b4]=b0}b5.onreadystatechange=b0}}},abort:function(){if(b0){b0(0,1)}}}}})}var L,ab,bO=/^(?:toggle|show|hide)$/,bH=new RegExp("^(?:([-+])=|)("+bx+")([a-z%]*)$","i"),bM=/queueHooks$/,ax=[i],a1={"*":[function(bZ,b6){var b2,b7,b8=this.createTween(bZ,b6),b3=bH.exec(b6),b4=b8.cur(),b0=+b4||0,b1=1,b5=20;if(b3){b2=+b3[2];b7=b3[3]||(bG.cssNumber[bZ]?"":"px");if(b7!=="px"&&b0){b0=bG.css(b8.elem,bZ,true)||b2||1;do{b1=b1||".5";b0=b0/b1;bG.style(b8.elem,bZ,b0+b7)}while(b1!==(b1=b8.cur()/b4)&&b1!==1&&--b5)}b8.unit=b7;b8.start=b0;b8.end=b3[1]?b0+(b3[1]+1)*b2:b2}return b8}]};function bj(){setTimeout(function(){L=aB},0);return(L=bG.now())}function bc(b0,bZ){bG.each(bZ,function(b5,b3){var b4=(a1[b5]||[]).concat(a1["*"]),b1=0,b2=b4.length;for(;b1<b2;b1++){if(b4[b1].call(b0,b5,b3)){return}}})}function f(b1,b5,b8){var b9,b4=0,bZ=0,b0=ax.length,b7=bG.Deferred().always(function(){delete b3.elem}),b3=function(){var ce=L||bj(),cb=Math.max(0,b2.startTime+b2.duration-ce),cd=1-(cb/b2.duration||0),ca=0,cc=b2.tweens.length;for(;ca<cc;ca++){b2.tweens[ca].run(cd)}b7.notifyWith(b1,[b2,cd,cb]);if(cd<1&&cc){return cb}else{b7.resolveWith(b1,[b2]);return false}},b2=b7.promise({elem:b1,props:bG.extend({},b5),opts:bG.extend(true,{specialEasing:{}},b8),originalProperties:b5,originalOptions:b8,startTime:L||bj(),duration:b8.duration,tweens:[],createTween:function(cd,ca,cc){var cb=bG.Tween(b1,b2.opts,cd,ca,b2.opts.specialEasing[cd]||b2.opts.easing);b2.tweens.push(cb);return cb},stop:function(cb){var ca=0,cc=cb?b2.tweens.length:0;for(;ca<cc;ca++){b2.tweens[ca].run(1)}if(cb){b7.resolveWith(b1,[b2,cb])}else{b7.rejectWith(b1,[b2,cb])}return this}}),b6=b2.props;ak(b6,b2.opts.specialEasing);for(;b4<b0;b4++){b9=ax[b4].call(b2,b1,b6,b2.opts);if(b9){return b9}}bc(b2,b6);if(bG.isFunction(b2.opts.start)){b2.opts.start.call(b1,b2)}bG.fx.timer(bG.extend(b3,{anim:b2,queue:b2.opts.queue,elem:b1}));return b2.progress(b2.opts.progress).done(b2.opts.done,b2.opts.complete).fail(b2.opts.fail).always(b2.opts.always)}function ak(b2,b4){var b1,b0,b5,b3,bZ;for(b1 in b2){b0=bG.camelCase(b1);b5=b4[b0];b3=b2[b1];if(bG.isArray(b3)){b5=b3[1];b3=b2[b1]=b3[0]}if(b1!==b0){b2[b0]=b3;delete b2[b1]}bZ=bG.cssHooks[b0];if(bZ&&"expand" in bZ){b3=bZ.expand(b3);delete b2[b0];for(b1 in b3){if(!(b1 in b2)){b2[b1]=b3[b1];b4[b1]=b5}}}else{b4[b0]=b5}}}bG.Animation=bG.extend(f,{tweener:function(b0,b3){if(bG.isFunction(b0)){b3=b0;b0=["*"]}else{b0=b0.split(" ")}var b2,bZ=0,b1=b0.length;for(;bZ<b1;bZ++){b2=b0[bZ];a1[b2]=a1[b2]||[];a1[b2].unshift(b3)}},prefilter:function(b0,bZ){if(bZ){ax.unshift(b0)}else{ax.push(b0)}}});function i(b3,b8,bZ){var b7,b1,ca,b2,ce,cd,cc,cb,b4=this,b0=b3.style,b9={},b6=[],b5=b3.nodeType&&Q(b3);if(!bZ.queue){cc=bG._queueHooks(b3,"fx");if(cc.unqueued==null){cc.unqueued=0;cb=cc.empty.fire;cc.empty.fire=function(){if(!cc.unqueued){cb()}}}cc.unqueued++;b4.always(function(){b4.always(function(){cc.unqueued--;if(!bG.queue(b3,"fx").length){cc.empty.fire()}})})}if(b3.nodeType===1&&("height" in b8||"width" in b8)){bZ.overflow=[b0.overflow,b0.overflowX,b0.overflowY];if(bG.css(b3,"display")==="inline"&&bG.css(b3,"float")==="none"){if(!bG.support.inlineBlockNeedsLayout||bC(b3.nodeName)==="inline"){b0.display="inline-block"}else{b0.zoom=1}}}if(bZ.overflow){b0.overflow="hidden";if(!bG.support.shrinkWrapBlocks){b4.done(function(){b0.overflow=bZ.overflow[0];b0.overflowX=bZ.overflow[1];b0.overflowY=bZ.overflow[2]})}}for(b7 in b8){ca=b8[b7];if(bO.exec(ca)){delete b8[b7];if(ca===(b5?"hide":"show")){continue}b6.push(b7)}}b2=b6.length;if(b2){ce=bG._data(b3,"fxshow")||bG._data(b3,"fxshow",{});if(b5){bG(b3).show()}else{b4.done(function(){bG(b3).hide()})}b4.done(function(){var cf;bG.removeData(b3,"fxshow",true);for(cf in b9){bG.style(b3,cf,b9[cf])}});for(b7=0;b7<b2;b7++){b1=b6[b7];cd=b4.createTween(b1,b5?ce[b1]:0);b9[b1]=ce[b1]||bG.style(b3,b1);if(!(b1 in ce)){ce[b1]=cd.start;if(b5){cd.end=cd.start;cd.start=b1==="width"||b1==="height"?1:0}}}}}function H(b1,b0,b3,bZ,b2){return new H.prototype.init(b1,b0,b3,bZ,b2)}bG.Tween=H;H.prototype={constructor:H,init:function(b2,b0,b4,bZ,b3,b1){this.elem=b2;this.prop=b4;this.easing=b3||"swing";this.options=b0;this.start=this.now=this.cur();this.end=bZ;this.unit=b1||(bG.cssNumber[b4]?"":"px")},cur:function(){var bZ=H.propHooks[this.prop];return bZ&&bZ.get?bZ.get(this):H.propHooks._default.get(this)},run:function(b1){var b0,bZ=H.propHooks[this.prop];if(this.options.duration){this.pos=b0=bG.easing[this.easing](b1,this.options.duration*b1,0,1,this.options.duration)}else{this.pos=b0=b1}this.now=(this.end-this.start)*b0+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(bZ&&bZ.set){bZ.set(this)}else{H.propHooks._default.set(this)}return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(b0){var bZ;if(b0.elem[b0.prop]!=null&&(!b0.elem.style||b0.elem.style[b0.prop]==null)){return b0.elem[b0.prop]}bZ=bG.css(b0.elem,b0.prop,false,"");return !bZ||bZ==="auto"?0:bZ},set:function(bZ){if(bG.fx.step[bZ.prop]){bG.fx.step[bZ.prop](bZ)}else{if(bZ.elem.style&&(bZ.elem.style[bG.cssProps[bZ.prop]]!=null||bG.cssHooks[bZ.prop])){bG.style(bZ.elem,bZ.prop,bZ.now+bZ.unit)}else{bZ.elem[bZ.prop]=bZ.now}}}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(bZ){if(bZ.elem.nodeType&&bZ.elem.parentNode){bZ.elem[bZ.prop]=bZ.now}}};bG.each(["toggle","show","hide"],function(b0,bZ){var b1=bG.fn[bZ];bG.fn[bZ]=function(b2,b4,b3){return b2==null||typeof b2==="boolean"||(!b0&&bG.isFunction(b2)&&bG.isFunction(b4))?b1.apply(this,arguments):this.animate(bF(bZ,true),b2,b4,b3)}});bG.fn.extend({fadeTo:function(bZ,b2,b1,b0){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b2},bZ,b1,b0)},animate:function(b5,b2,b4,b3){var b1=bG.isEmptyObject(b5),bZ=bG.speed(b2,b4,b3),b0=function(){var b6=f(this,bG.extend({},b5),bZ);if(b1){b6.stop(true)}};return b1||bZ.queue===false?this.each(b0):this.queue(bZ.queue,b0)},stop:function(b1,b0,bZ){var b2=function(b3){var b4=b3.stop;delete b3.stop;b4(bZ)};if(typeof b1!=="string"){bZ=b0;b0=b1;b1=aB}if(b0&&b1!==false){this.queue(b1||"fx",[])}return this.each(function(){var b6=true,b3=b1!=null&&b1+"queueHooks",b5=bG.timers,b4=bG._data(this);if(b3){if(b4[b3]&&b4[b3].stop){b2(b4[b3])}}else{for(b3 in b4){if(b4[b3]&&b4[b3].stop&&bM.test(b3)){b2(b4[b3])}}}for(b3=b5.length;b3--;){if(b5[b3].elem===this&&(b1==null||b5[b3].queue===b1)){b5[b3].anim.stop(bZ);b6=false;b5.splice(b3,1)}}if(b6||!bZ){bG.dequeue(this,b1)}})}});function bF(b1,b3){var b2,bZ={height:b1},b0=0;b3=b3?1:0;for(;b0<4;b0+=2-b3){b2=bQ[b0];bZ["margin"+b2]=bZ["padding"+b2]=b1}if(b3){bZ.opacity=bZ.width=b1}return bZ}bG.each({slideDown:bF("show"),slideUp:bF("hide"),slideToggle:bF("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(bZ,b0){bG.fn[bZ]=function(b1,b3,b2){return this.animate(b0,b1,b3,b2)}});bG.speed=function(b1,b2,b0){var bZ=b1&&typeof b1==="object"?bG.extend({},b1):{complete:b0||!b0&&b2||bG.isFunction(b1)&&b1,duration:b1,easing:b0&&b2||b2&&!bG.isFunction(b2)&&b2};bZ.duration=bG.fx.off?0:typeof bZ.duration==="number"?bZ.duration:bZ.duration in bG.fx.speeds?bG.fx.speeds[bZ.duration]:bG.fx.speeds._default;if(bZ.queue==null||bZ.queue===true){bZ.queue="fx"}bZ.old=bZ.complete;bZ.complete=function(){if(bG.isFunction(bZ.old)){bZ.old.call(this)}if(bZ.queue){bG.dequeue(this,bZ.queue)}};return bZ};bG.easing={linear:function(bZ){return bZ},swing:function(bZ){return 0.5-Math.cos(bZ*Math.PI)/2}};bG.timers=[];bG.fx=H.prototype.init;bG.fx.tick=function(){var b1,b0=bG.timers,bZ=0;for(;bZ<b0.length;bZ++){b1=b0[bZ];if(!b1()&&b0[bZ]===b1){b0.splice(bZ--,1)}}if(!b0.length){bG.fx.stop()}};bG.fx.timer=function(bZ){if(bZ()&&bG.timers.push(bZ)&&!ab){ab=setInterval(bG.fx.tick,bG.fx.interval)}};bG.fx.interval=13;bG.fx.stop=function(){clearInterval(ab);ab=null};bG.fx.speeds={slow:600,fast:200,_default:400};bG.fx.step={};if(bG.expr&&bG.expr.filters){bG.expr.filters.animated=function(bZ){return bG.grep(bG.timers,function(b0){return bZ===b0.elem}).length}}var bm=/^(?:body|html)$/i;bG.fn.offset=function(ca){if(arguments.length){return ca===aB?this:this.each(function(cb){bG.offset.setOffset(this,ca,cb)})}var b0,b5,b6,b3,b7,bZ,b2,b4={top:0,left:0},b1=this[0],b8=b1&&b1.ownerDocument;if(!b8){return}if((b5=b8.body)===b1){return bG.offset.bodyOffset(b1)}b0=b8.documentElement;if(!bG.contains(b0,b1)){return b4}if(typeof b1.getBoundingClientRect!=="undefined"){b4=b1.getBoundingClientRect()}b6=bn(b8);b3=b0.clientTop||b5.clientTop||0;b7=b0.clientLeft||b5.clientLeft||0;bZ=b6.pageYOffset||b0.scrollTop;b2=b6.pageXOffset||b0.scrollLeft;var b9=a2.document.compatMode;if(b9=="BackCompat"&&!!a2.ActiveXObject){return{top:b4.top+Math.max(a2.document.documentElement.scrollTop,a2.document.body.scrollTop)-b3,left:b4.left+Math.max(a2.document.documentElement.scrollLeft,a2.document.body.scrollLeft)-b7}}return{top:b4.top+bZ-b3,left:b4.left+b2-b7}};bG.offset={bodyOffset:function(bZ){var b1=bZ.offsetTop,b0=bZ.offsetLeft;if(bG.support.doesNotIncludeMarginInBodyOffset){b1+=parseFloat(bG.css(bZ,"marginTop"))||0;b0+=parseFloat(bG.css(bZ,"marginLeft"))||0}return{top:b1,left:b0}},setOffset:function(b2,cb,b5){var b6=bG.css(b2,"position");if(b6==="static"){b2.style.position="relative"}var b4=bG(b2),b0=b4.offset(),bZ=bG.css(b2,"top"),b9=bG.css(b2,"left"),ca=(b6==="absolute"||b6==="fixed")&&bG.inArray("auto",[bZ,b9])>-1,b8={},b7={},b1,b3;if(ca){b7=b4.position();b1=b7.top;b3=b7.left}else{b1=parseFloat(bZ)||0;b3=parseFloat(b9)||0}if(bG.isFunction(cb)){cb=cb.call(b2,b5,b0)}if(cb.top!=null){b8.top=(cb.top-b0.top)+b1}if(cb.left!=null){b8.left=(cb.left-b0.left)+b3}if("using" in cb){cb.using.call(b2,b8)}else{b4.css(b8)}}};bG.fn.extend({position:function(){if(!this[0]){return}var b1=this[0],b0=this.offsetParent(),b2=this.offset(),bZ=bm.test(b0[0].nodeName)?{top:0,left:0}:b0.offset();b2.top-=parseFloat(bG.css(b1,"marginTop"))||0;b2.left-=parseFloat(bG.css(b1,"marginLeft"))||0;bZ.top+=parseFloat(bG.css(b0[0],"borderTopWidth"))||0;bZ.left+=parseFloat(bG.css(b0[0],"borderLeftWidth"))||0;return{top:b2.top-bZ.top,left:b2.left-bZ.left}},offsetParent:function(){return this.map(function(){var bZ=this.offsetParent||o.body;while(bZ&&(!bm.test(bZ.nodeName)&&bG.css(bZ,"position")==="static")){bZ=bZ.offsetParent}return bZ||o.body})}});bG.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b1,b0){var bZ=/Y/.test(b0);bG.fn[b1]=function(b2){return bG.access(this,function(b4,b7,b6){var b5=bn(b4);if(b6===aB){var b3=a2.document.compatMode;if(b3=="BackCompat"&&!!a2.ActiveXObject){return b5?(b0 in b5)?b5[b0]:Math.max(a2.document.documentElement[b7],a2.document.body[b7]):b4[b7]}return b5?(b0 in b5)?b5[b0]:b5.document.documentElement[b7]:b4[b7]}if(b5){b5.scrollTo(!bZ?b6:bG(b5).scrollLeft(),bZ?b6:bG(b5).scrollTop())}else{b4[b7]=b6}},b1,b2,arguments.length,null)}});function bn(bZ){return bG.isWindow(bZ)?bZ:bZ.nodeType===9?bZ.defaultView||bZ.parentWindow:false}bG.each({Height:"height",Width:"width"},function(bZ,b0){bG.each({padding:"inner"+bZ,content:b0,"":"outer"+bZ},function(b1,b2){bG.fn[b2]=function(b6,b5){var b4=arguments.length&&(b1||typeof b6!=="boolean"),b3=b1||(b6===true||b5===true?"margin":"border");return bG.access(this,function(b9,b8,ca){var cb;if(bG.isWindow(b9)){var b7=a2.document.compatMode;if(b7=="BackCompat"){return b9.document.body["client"+bZ]}return b9.document.documentElement["client"+bZ]}if(b9.nodeType===9){cb=b9.documentElement;return Math.max(b9.body["scroll"+bZ],cb["scroll"+bZ],b9.body["offset"+bZ],cb["offset"+bZ],cb["client"+bZ])}return ca===aB?bG.css(b9,b8,ca,b3):bG.style(b9,b8,ca,b3)},b0,b4?b6:aB,b4,null)}})});a2.comtop.cQuery=bG;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bG})}})(window);(function(c,d){var a=c("html");a.attr("style","font-family:isIE\\0; border:none; *font-family:isIE7; _font-family:isIE6;-moz-border-radius-topleft:0");d.Browser={isIE:false,isIE6:false,isIE7:false,isIE8:false,isIE9:false,notIE:true,isQM:document.compatMode!=="CSS1Compat"};var b=a.css("font-family");if(/isIE(?!\\|0)/.test(b)){d.Browser[b]=true;d.Browser.notIE=false;if(b!=="isIE"){d.Browser.isIE=true}else{if(a.css("border")===undefined){d.Browser.isIE8=true}else{d.Browser.isIE9=true}}}a.removeAttr("style")})(window.comtop.cQuery,window.comtop);if(comtop.Browser.isIE6){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}(function(b){var a=b.cQuery;a.page={height:function(){if(b.Browser.isIE6||b.Browser.isIE7||b.Browser.isIE8){var d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(d<f){return a(window).height()}else{if(b.Browser.isQM){return d-4}return d}}else{if(b.Browser.isQM){return a(document).height()-4}return a(document).height()}},width:function(){var f=a("<div></div>");f.css({height:1});var d=parseInt(a("body").css("paddingLeft"))+parseInt(a("body").css("paddingRight"))+parseInt(a("body").css("marginLeft"))+parseInt(a("body").css("marginRight"));a("body").append(f);var c=f.width();f.remove();return c+d},scrollTop:function(){return a("html").scrollTop()||a("body").scrollTop()},scrollLeft:function(){return a("html").scrollLeft()||a("body").scrollLeft()}};a.client={width:function(){if(b.Browser.isQM){return document.documentElement.clientWidth||document.documentElement.offsetWidth-21}return a(window).width()},height:function(){if(b.Browser.isQM){return window.innerHeight||document.documentElement.offsetHeight-4}return a(window).height()}}})(window.comtop);(function(a){a.JCT=b;function b(c,f){if(b.clearWhiteSpace){c=c.replace(/[\f\n\r\t\v]+/g,"")}this.Fn=new b.Instance(c,f);for(var d in this){this.Fn.Reserve+=d+","}}b.prototype={Extend:function(f,c){for(var d in f){if(this[d]&&this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].Extend){this[d].Extend(f[d])}else{if(this.Fn.Reserve.indexOf(","+d+",")==-1){this[d]=f[d]}}}if(typeof f.ERun=="function"){f.ERun.apply(this,c||[])}return this},ExtendTo:function(f,c){for(var d in this){if(this.Fn.Reserve.indexOf(","+d+",")>0&&f[d]){continue}if(f[d]==null){f[d]=this[d]}else{if(this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].ExtendTo){this[d].ExtendTo(f[d])}}}if(typeof f.ERun=="function"){f.ERun.apply(f,c||[])}return this},ExecChilds:function(f,d){if(typeof f=="string"){d=f;f=0}d=d||"Exec";if(!f){f={};for(var g in this){if(this[g].Fn&&this[g].Fn.JavaScriptCommonTemplates){f[g]=[]}}}for(var g in f){if(this[g]&&(typeof this[g][d]=="function")){this[g][d].apply(this[g],f[g])}}return this},BuildChilds:function(g){var d={},f=false;if(undefined==g){g=[]}else{if(typeof g=="string"){g=g.split(",")}else{d=g;f=true}}if(g instanceof Array){for(var c=0;c<g.length;c++){d[g[c]]=true}}for(var c in this){if(this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&(g.length==0||d[c])){this[c].Build(f?g[c]:[])}}return this},GetView:function(){this.Fn.V=[];this.GetViewContinue.apply(this,arguments);return this.Fn.V.join("")},GetViewContinue:function(){this.Build.apply(this,[arguments])},Build:function(c){this.Fn.Build(this,c,arguments.callee.caller===this.GetViewContinue);return this},PushView:function(c){this.Fn.V.push(c)}};b.Instance=function(c,d){this.Init(c,d)};b.clearWhiteSpace=true;b.Instance.prototype={JavaScriptCommonTemplates:3,Reserve:",",args:[],Tags:{comment:{block:{begin:"<!---",end:"-->"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},script:{block:{begin:'<script type="text/jct">',end:"<\/script>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},code:{block:{begin:'<code class="jct">',end:"</code>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}}},Init:function(f,i){this.Src=f||"";this.Path=i||"";for(var d in this.Tags){if(this.Src.indexOf(this.Tags[d].block.begin)>=0){break}}this.Tag=this.Tags[d];this.A=[];this.V=[];this.EXEC=[];var g=[];var h=[0,0,0,0,0];var c=this.Src.length;while(this.Slice(this.Tag.clean,h[4],h,c)){g.push(this.Src.slice(h[0],h[1]))}if(g.length){g.push(this.Src.slice(h[4]));this.Src=g.join("")}},Build:function(c,d,h){this.EXEC=[];this.Parse(c);try{var g=this.EXEC.join("\n");c.GetViewContinue=new Function(this.args,g);this.Src=""}catch(f){this.V=["jCT Parse Error"];c.ERROR={message:f.message+"\n"+(f.lineNumber||f.number),code:g}}if(c.BRun){c.BRun.apply(c,d||[])}if(h){this.V=[];c.GetViewContinue.apply(c,d||[])}},Parse:function(r){var t=this.Tag,f=this.A,s=this.EXEC,n=this.Src.length,c=[0,0,0,0,0],q=[0,0,0,0,0];while(this.Slice(t.block,c[4],c,n)){q=[0,0,0,0,c[0]];while(this.Slice(t.exp,q[4],q,c[1])){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[0],q[1]));s.push("this.Fn.V.push("+this.Src.slice(q[2],q[3])+");")}if(q[4]!=c[1]){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[4],c[1]))}if(this.Src.slice(c[2],c[2]+2)=="//"){var m=this.Src.slice(c[2]+2,c[2]+3);if(m=="/"){m=this.Src.slice(c[2]+3,c[3]);var g=m.indexOf(" ");var l=[];if(g>0){l=m.slice(g+1).split(",");m=m.slice(0,g)}var d=t.block.begin+"///"+m+t.block.end;var k=this.Src.indexOf(d,c[4]);if(k>0){var o=new b(this.Src.slice(c[4],k),this.Path);o.Fn.args=l;if(!r[m]){r[m]={}}for(var h in o){r[m][h]=o[h]}c[4]=k+d.length}}else{if(m=="."){m=this.Src.slice(c[2]+3,c[3]);var g=m.indexOf(" ")+1;if(m.slice(g,g+8)=="function"){var i=m.slice(0,g-1);r[i]=new Function("return "+m.slice(g,m.length))()}else{var i=new Function("return "+m.slice(g));r[m.slice(0,g)]=i.call(r)}}else{if(m==" "){this.args=this.Src.slice(c[2]+2,c[3]).slice(1).split(",")}}}}else{s.push(this.Src.slice(c[2],c[3]))}}q=[0,0,0,0,c[4]];c[1]=n;while(this.Slice(t.exp,q[4],q,c[1])){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[0],q[1]));s.push("this.Fn.V.push("+this.Src.slice(q[2],q[3])+");")}if(q[4]!=c[1]){s.push("this.Fn.V.push(this.Fn.A["+f.length+"]);");f.push(this.Src.slice(q[4],c[1]))}},Slice:function(l,k,c,j){var d=l.begin;var f=l.end;var h,i,g;h=this.Src.indexOf(d,k);if(h<0||h>=j){return false}i=h+d.length;if(i<0||i>=j){return false}g=this.Src.indexOf(f,i);if(g<0||g>=j){return false}c[0]=k;c[1]=h;c[2]=i;c[3]=g;c[4]=g+f.length;return true}}})(window.comtop);(function(d,f){window.cui=function(i){var h=d(i);var g=h.data("uitype");var j=g||h;if(!j.cuiCreated){j.cuiCreated=function(m,k){if(this[m]){this[m].apply(this,Array.prototype.slice.call(arguments,1))}else{var l=this.data("cuiCreated")||[];l.push({method:m,arg:Array.prototype.slice.call(arguments,1)});this.data("cuiCreated",l)}delete this.cuiCreated;return this}}return j};function b(h,i){h.options=d.extend(true,{},i.options,h.options);if(i.options&&i.options.uitype){var k=i.options.uitype;h._superUITypes=d.extend(true,[],i._superUITypes);h._superUITypes.push(k)}var g=h.options?h.options.uitype:null;if(!g){return}var j=g.charAt(0).toLowerCase()+g.substring(1);if(d.fn[j]==null){d.fn[j]=function(l){var n=d(this).eq(0);var o=f.UI[g].prototype.options.scope;n.selector=n.selector.replace(".slice(0,1)","");if(!n.selector&&o!="uitype"){var m="e-"+f.guid(),q=this.nodeName||"";n.attr("eventID",m);n.selector=q+"[eventID="+m+"]:eq(0)"}var p=null;if(o==null){p=n.data("uitype")}else{if(o=="uitype"){p=n.data(g)}}if(p==null){l=l||{};l.el=n;p=new f.UI[g](l);f.UI.componentList.push(p);if(n.size()){if(o==null){n.data("uitype",p)}else{if(o=="uitype"){n.data(g,p)}}}}return p}}h[j]=function(){return this}}var a=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;f.Class=function(){};f.Class.extend=function(k){var j=this.prototype;b(k,j);a=true;var i=new this();a=false;for(var h in k){i[h]=typeof k[h]=="function"&&typeof j[h]=="function"&&c.test(k[h])?(function(l,m){return function(){var o=this._super;this._super=j[l];var n=m.apply(this,arguments);this._super=o;return n}})(h,k[h]):k[h]}function g(){if(!a&&this.__init){this.__init.apply(this,arguments)}}g.prototype=i;g.prototype.constructor=g;g.extend=arguments.callee;return g}})(window.comtop.cQuery,window.comtop);(function(b,f){var a=a||{};f.UI.templatePath=null;f.UI.componentList=[];f.UI.Base=f.Class.extend({options:{},tpls:{},autoTpls:{},isInit:false,__load:function(g,i,h){typeof h==="undefined"&&(h=false);typeof i!=="function"&&(i=function(){});b.ajax({url:g,async:h,dataType:"text",success:i,error:function(){}})},__loadTemplate:function(p){p=p||"template.html";var u=this,o=u.options.uitype,g="",r,s=a[o],m=b("body"),t=m.attr("cuitmplmark")||"",h=new RegExp(p);o=o.charAt(0).toUpperCase()+o.substring(1);if(!s){if(!h.test(t)){if(!f.UI.templatePath){f.UI.scanTemplateUrl(p)}r=d(p);g=r.path+"template/"+p;m.attr("cuitmplmark",t+"["+r.mark+"#"+p+"]");u.__load(g,function(B){B=B.match(/<cmptpl[^>]*>(\s|\r|\t|.)*?<\/cmptpl>/g);for(var x=0,v=B.length;x<v;x++){var w=B[x].match(/uiType="([\w-]*)"/)[1],C=B[x].match(/var="([\w-]*)"/)[1],A=B[x].match(/parse="([\w-]*)"/)[1]!="false",y=B[x].replace(/<cmptpl[^>]*>/,"").replace(/<\/cmptpl>/,"");var z=a[w]||{tpls:{},autoTpls:{}};z.tpls[C]=y;A&&(z.autoTpls[C]=true);a[w]=z}})}s=a[o]||{tpls:{},autoTpls:{}}}u.tpls=b.extend(true,{},s.tpls);u.autoTpls=b.extend(true,{},s.autoTpls);if(u._superUITypes){for(var n=u._superUITypes.length-1;n>=0;n--){o=u._superUITypes[n];var k=a[o];if(k){var j=a[o].tpls;for(var l in j){if(!u.tpls[l]){u.tpls[l]=j[l]}}var q=a[o].autoTpls;for(l in q){if(!u.autoTpls[l]){u.autoTpls[l]=q[l]}}}}}m=null},_buildTemplate:function(l,k,q,n){var o=this,p=b(l);q=q||o.options;if(typeof o.tpls[k]=="object"){o.tpls[k].el=p;o.__createTargetCmp(o.tpls[k])}else{var m=b.trim(o._buildTemplateStr(k,q))||"";var g=m.match(/\#ref\=[\w\.]*\#/g)||[];var h="";for(var j=0;j<g.length;j++){h=b.trim(g[j].replace(/#/g,"").replace("ref=",""));m=m.replace(g[j],o._buildTemplateStr(h,q)||"")}m=o._bindTplEvent(m);n?p.append(m):p.html(m);return m}},_buildTemplateStr:function(j,i){var h=this;var g=new f.JCT(h.tpls[j]);g.Build();return g.GetView(i)},__createTargetCmp:function(g){new f.UI[g.uitype](g)},__init:function(s){var r=this,g={target:{eventName:"change",source:"getValue",target:"setValue"},scope:null},q=s.isScanner,j={},m="",h="";r.options.tpls=r.options.tpls||{};for(var i in r.options){if(q){switch(i){case"readonly":case"width":case"height":m=c(s.el[0],i);break;default:m=s.el.attr(i)}}else{m=s[i];j[i]=m;continue}if(typeof m!=="string"){continue}j[i]=m;if(m=="null"){s[i]=null;continue}h=r.options[i]==null?"function":typeof r.options[i];s[i]=r._convertTo(m,h,r.options[i])}if(r.options.textmode==undefined){delete s.textmode}g=r.options=b.extend(true,{},g,r.options,s);r._init(j);if(g.textmode){r.setTextMode();return}r.__loadTemplate(g.template);for(var o in g.tpls){r.tpls["super."+o]=r.tpls[o];if(typeof g.tpls[o]==="string"){r.tpls[o]=r.tpls[g.tpls[o]]||g.tpls[o]}else{r.tpls[o]=g.tpls[o]}}for(o in r.tpls){if(r.autoTpls[o]==true){var k=b(g.el);var l=k.get(0).tagName;if(/[DIV|SPAN]/.test(l)&&b.trim(k.html())==""){r._buildTemplate(k,o,g)}else{r._bindTplEvent()}}}r._create();if(k){var n=k.data("cuiCreated");if(n){b.each(n,function(){if(r[this.method]){r[this.method].apply(r,this.arg)}});k.removeData("cuiCreated")}}},_bindTplEvent:function(s){var t=this,g=t.options;if(typeof s==="string"){var l=g.el.selector,n=s.match(/events=\"[\w-\s\;\=\,\.]*\"/g)||[],r=[],h=null,q=null,j=null;for(var o=0;o<n.length;o++){r=[];h=n[o].replace(/\"/g,"").replace(/events\=/,"").split(";");for(var m=0,p=h.length;m<p;m++){q=h[m].split("=");if(!b.trim(q[0])){continue}r.push("on",q[0],"=\"comtop.proxyHandler(event, '",l,"', this, '",q[1],"');\" ")}var j=new RegExp(n[o],"g");r.push(n[o].replace("events","etsBak"));s=s.replace(j,r.join(""))}return s}s=s||b(g.el);b("[etsBak]",s).each(function(){var w=b(this),v=w.attr("etsBak").split(";"),k;for(var u=0;u<v.length;u++){k=v[u].split("=");w.bind(k[0]+".comtopBase",{self:t,func:k[1]},comtop.proxyHandler)}w=null});return s},_unbindTplEvent:function(h){var g=this,i=g.options;h=h||i.el;b("[etsBak]",h).each(function(){var l=b(this),k=l.attr("etsBak").split(";");for(var j=0;j<k.length;j++){l.removeAttr("on"+k[j].split("=")[0])}l.unbind(".comtopBase")})},_triggerHandler:function(g,h){b(this).triggerHandler(g,h)},_init:function(g){},_create:function(){},bind:function(g,i,h){b(this).bind(g,i,h);return this},unbind:function(g,h){b(this).unbind(g,h);return this},setValue:function(){},getValue:function(){},show:function(){this.options.el.show();return this},hide:function(){this.options.el.hide();return this},setReadonly:function(){},setTextMode:function(){var h=this,i=h.options,j=i.el[0].nodeName,g=h.getLabelValue();if(j=="SPAN"||j=="DIV"){i.el.html(g)}else{if(j=="INPUT"||j=="BUTTON"||j=="TEXTAREA"){i.el=i.el.replaceWith("<span>"+g+"</span>")}}},getLabelValue:function(){return this.options.value||""},disable:function(g){g=typeof g==="undefined"?false:g;b("input, select, textarea, button",this.options.el).attr("disabled",g);return this},destroy:function(){var g=this,h=g.options;g._unbindTplEvent(h.el);h.el.removeData();if(g.tpls){h.el.empty()}},_convertTo:function(l,j,h){if(b.trim(l)===""){return j==="string"?"":h}var i={},k=/^(?:\{.*\}|\[.*\])$/;l=l.replace(/[\n\r\t]/g,"");switch(j){case"string":l=""+l;break;case"boolean":l=!!(l==="true");break;case"number":l=+l;break;case"object":l=k.test(l)?b.parseJSON(l.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):g(l);break;case"function":l=g(l);break;default:l=h}function g(p){var m=p.split("."),o=window;for(var n=0;n<m.length;n++){o=o[m[n]]}return(typeof o==="object"||typeof o==="function")&&!o.nodeName?o:h}return l}});f.proxyHandler=function(q,l,g,j){var r=null,p=null,h=null,o=null,n=0,m=0;if(l){if(!q){q=b.Event()}q=b.event.fix(q);for(n=0;n<f.UI.componentList.length;n++){o=f.UI.componentList[n];if(o.options.el.selector===l){r=o;break}}if(r==null){return}}else{r=q.data.self;j=q.data.func;g=this;q.data=null}j=j.split(",");for(n=0;n<j.length;n++){if(b.isFunction(r[j[n]])){r[j[n]](q,g,q.target||q.srcElement)}else{p=window;h=j[n].split(".");for(m=0;m<h.length;m++){p=p[h[m]]}p(q,g,q.target||q.srcElement)}}};f.UI.scanTemplateUrl=function(n){var l,h,k=0,m=0,q,r,j,o=new RegExp(n),p=[],g=[];l=b('script[src*="cui/js/comtop.ui"]');h=b("script[cuiTemplate]");q=l.eq(0).attr("src");r=q.substr(0,q.lastIndexOf("/"));r=q.substr(0,r.lastIndexOf("/")+1);p.push({path:r,attrTmpl:""});for(m=h.length;k<m;k++){q=h.eq(k).attr("src");if(!q){continue}r=q.substr(0,q.lastIndexOf("/"));r=q.substr(0,r.lastIndexOf("/")+1);g.push({path:r,attrTmpl:h.eq(k).attr("cuiTemplate")})}f.UI.templatePath={scriptTP:g,scriptOP:p}};function d(k){var j=f.UI.templatePath,h=new RegExp(k);for(var g=0;g<j.scriptTP.length;g++){if(h.test(j.scriptTP[g].attrTmpl)){return{path:j.scriptTP[g].path,mark:"extend"}}}return{path:j.scriptOP[0].path,mark:"cui"}}function c(j,g){var h=j.outerHTML.match(/<[^>]*>/)[0].replace(/[\r\n\t]/g,"");var i=new RegExp("\\s"+g+"=[\"']*([\\w-\\%]*)[\"']*");var k=h.match(i);return k?k[1]:null}b(window).bind("unload",function(){if(comtop.Browser.isIE&&window.CollectGarbage){window.CollectGarbage()}window.comtop=undefined;window.cui=undefined})})(window.comtop.cQuery,window.comtop);(function(a,b){b.Dom.minWidth=function(d,f,g,c){if(b.Browser.isIE){if(d.width()<f){if(b.Browser.isQM){g=g||0;c=c||0;d.width(f+g+c)}else{d.width(f)}}}else{d.css({minWidth:f})}};b.Dom.maxWidth=function(d,f,g,c){if(b.Browser.isIE){if(d.width()>f){if(b.Browser.isQM){g=g||0;c=c||0;d.width(f+g+c)}else{d.width(f)}}}else{d.css({maxWidth:f})}};b.Dom.minHeight=function(d,f,g,c){if(b.Browser.isIE){if(d.height()<f){if(b.Browser.isQM){g=g||0;c=c||0;d.height(f+g+c)}else{d.height(f)}}}else{d.css({minHeight:f})}};b.Dom.maxHeight=function(d,f,g,c){if(b.Browser.isIE){if(d.height()>f){if(b.Browser.isQM){g=g||0;c=c||0;d.height(f+g+c)}else{d.height(f)}}}else{d.css({maxHeight:f})}};b.Dom.windowSize=function(){var c=a(window);return{width:c.width(),height:c.height()}};b.Dom.DocumentSize=function(j){j=j||document;var f=0,d=0;if(!b.Browser.isIE){f=a(j).width();d=a(j).height()}else{if(j.documentElement&&(j.documentElement.scrollWidth||j.documentElement.scrollHeight)){var i=j.documentElement.scrollHeight;var c=j.documentElement.offsetHeight;var g=j.documentElement.scrollWidth;var h=j.documentElement.offsetWidth;f=Math.max(g,h);d=Math.max(i,c)}else{if(j.body&&(j.body.scrollHeight||j.body.scrollWidth)){var i=j.body.scrollHeight;var c=j.body.offsetHeight;var g=j.body.scrollWidth;var h=j.body.offsetWidth;f=Math.max(g,h);d=Math.max(i,c)}}}return{width:f,height:d}};b.MQ={topicList:{},sub:function(c,d){this.topicList[c]=this.topicList[c]||[];this.topicList[c].push(d)},unsub:function(c,f){var g=this.topicList[c];if(!g){return}for(var d=0;d<g.length;d++){if(g==f){g.splice(d,1);break}}},pub:function(c,f){var d=this.topicList[c];if(!d||d.length==0){console.warn("no widget has subscribe this topic "+c);return}for(handler in d){handler(f)}}};b.String.getBytesLength=function(g){var d=0;for(var f=0;f<g.length;f++){var h=g.charCodeAt(f);if((h>=1&&h<=126)||(65376<=h&&h<=65439)){d++}else{d+=2}}return d};b.String.intercept=function(j,h){var f="";var d=0;for(var g=0;g<j.length;g++){var k=j.charCodeAt(g);if((k>=0&&k<=126)||(65376<=k&&k<=65439)){d++}else{d+=2}if(d<=h){f+=j.charAt(g)}else{break}}return f};b.Date.format=function(f,d){var g={"M+":f.getMonth()+1,"d+":f.getDate(),"h+":f.getHours(),"H+":f.getHours(),"m+":f.getMinutes(),"s+":f.getSeconds(),"q+":Math.floor((f.getMonth()+3)/3),S:f.getMilliseconds(),"w+":b.Date.getOnWeek(f).week};if(/(y+)/.test(d)){d=d.replace(RegExp.$1,(f.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in g){if(new RegExp("("+c+")").test(d)){d=d.replace(RegExp.$1,RegExp.$1.length==1?g[c]:("00"+g[c]).substr((""+g[c]).length))}}return d};b.Date.getOnWeek=function(d,f,h){if(!d){return null}var g,c=f?4:1,i=new Date(d.getTime());i.setDate(i.getDate()+c-(h?i.getDay():i.getDay()||7));g=i.getTime();i.setMonth(0);i.setDate(1);return{year:i.getFullYear(),week:Math.floor(Math.round((g-i)/86400000)/7)+1}};b.Date.getWeekRange=function(i,f,k,h){h=k?false:h;var c=new Date(i,0,1),l=b.Date.getOnWeek(c,k,h).week,d,g,j;j=l!=1?h?7-c.getDay():8-(c.getDay()||7):0;d=(f-1)*7+j;g=d+6;return[new Date(d*86400000+c.getTime()),new Date(g*86400000+c.getTime())]};b.Date.parse=function(t,z){t=a.trim(t);if(t===""){return null}var C,l,j,B,A,u,o,r,n;l=[-1,"([0-9]{4})","([0-9]{2})"];j=[-1,"(0[1-9]|1[0-2])","([1-9]|1[0-2])"];B=[-1,"(0[1-9]|[1-2][0-9]|30|31)","([1-9]|[1-2][0-9]|30|31)"];A=[-1,"([0-1][0-9]|20|21|22|23)","([0-9]|1[0-9]|20|21|22|23)"];u=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];o=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];r=[-1,"([0-0][1-4])","([1-4])"];n=[-1,"([0-5][0-3])","([0-9]|[1-4][0-9]|5[0-3])"];if(k(t,z)){var c=new Date(),D=C.exec(t),g=v(z),f=[c.getFullYear(),1,1,0,0,0,1,1];D.shift();for(var x=0;x<8;x++){f[x]=g[x]>=0?+(D[g[x]]):f[x]}if(g[6]>=0&&g[1]<0){f[1]=(f[6]-1)*3;f[2]=1;f[3]=0;f[4]=0;f[5]=0}else{if(g[7]>=0&&g[1]){var p=b.Date.getWeekRange(f[0],f[7]);f[1]=p[0].getMonth();f[2]=p[0].getDate()}else{f[1]=f[1]-1}}return new Date(f[0],f[1],f[2],f[3],f[4],f[5],0)}else{return null}function k(h,d){d=d.replace(/yyyy/,l[1]).replace(/yy/,l[2]).replace(/MM/,j[1]).replace(/M/,j[2]).replace(/dd/,B[1]).replace(/d/,B[2]).replace(/hh/,A[1]).replace(/h/,A[2]).replace(/mm/,u[1]).replace(/m/,u[2]).replace(/ss/,o[1]).replace(/s/,o[2]).replace(/qq/,r[1]).replace(/q/,r[2]).replace(/ww/,n[1]).replace(/w/,n[2]);C=new RegExp("^"+d+"$");return C.test(h)}function v(s){var h=[],q=0,m,w;l[0]=s.indexOf("yyyy");l[0]<0&&(l[0]=s.indexOf("yy"));l[0]>=0&&(h[q]=l[0],q++);j[0]=s.indexOf("MM");j[0]<0&&(j[0]=s.indexOf("M"));j[0]>=0&&(h[q]=j[0],q++);B[0]=s.indexOf("dd");B[0]<0&&(B[0]=s.indexOf("d"));B[0]>=0&&(h[q]=B[0],q++);A[0]=s.indexOf("hh");A[0]<0&&(A[0]=s.indexOf("h"));A[0]>=0&&(h[q]=A[0],q++);u[0]=s.indexOf("mm");u[0]<0&&(u[0]=s.indexOf("m"));u[0]>=0&&(h[q]=u[0],q++);o[0]=s.indexOf("ss");o[0]<0&&(o[0]=s.indexOf("s"));o[0]>=0&&(h[q]=o[0],q++);r[0]=s.indexOf("qq");r[0]<0&&(r[0]=s.indexOf("q"));r[0]>=0&&(h[q]=r[0],q++);n[0]=s.indexOf("ww");n[0]<0&&(n[0]=s.indexOf("w"));n[0]>=0&&(h[q]=n[0],q++);w=[l[0],j[0],B[0],A[0],u[0],o[0],r[0],n[0]];for(q=0;q<h.length-1;q++){for(m=0;m<h.length-1-q;m++){if(h[m]>h[m+1]){var d=h[m];h[m]=h[m+1];h[m+1]=d}}}for(q=0;q<h.length;q++){for(m=0;m<w.length;m++){if(h[q]==w[m]){w[m]=q}}}return w}};b.Tools.formatSizeUnit=function(f,d){var g=typeof f,c;d=d||"string";switch(g){case"string":var h=f.match(/^(\d)+(px|pt|em|PX|PT|EM|%)$/);c=h?[h[0],+h[1],h[2]]:["",0,""];break;case"number":c=[f+"px",f,"px"];break}return d==="string"?c[0]:c[1]};cui.ajax=function(c){var h=c.type||"GET",d=c.dataType||"json",j=c.success||i.noop,f=c.error,g=c.scope||window;var i=window.comtop.cQuery;i.ajax({url:c.url,type:h,data:c.data,dataType:d,success:function(k){if(d=="json"){if(k.success===false){if(f&&f.call){f.call(g,k)}else{cui.error(k.exMessage)}}else{j.call(g,k)}}else{j.call(g,k)}},error:function(k,l){if(f&&f.call){f.call(g)}else{if(l=="parsererror"){cui.error("???????????????????")}else{if(l=="timeout"){cui.error("?????????????????????")}else{if(k.status==404){cui.error("????????????????????????????????")}else{if(k.status==0){}else{cui.error("??????")}}}}}}})}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Databind=b.UI.Base.extend({options:{uitype:"Databind",scope:"uitype",data:{}},data:{},initData:{},bindMapping:{},_init:function(){this.data=this.options.el.get(0);this.initData=a.extend(true,{},this.data);this.bindMapping={}},setValue:function(d,f){for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){continue}this.set(c,d[c],f)}},getValue:function(){var d=a.extend({},this.data);for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){delete d[c]}}return d},_change:function(f){var g=f.data.propName;var d=f.data.el;var h=cui(d).getValue();var c=this.data[g];if(h!=c){this.data[g]=h;this._triggerHandler("change",[g,c,h])}},addBind:function(d,f){this.bindMapping[f]=d;var c=cui(d);c.bind("change",{propName:f,el:d},a.proxy(this._change,this));if(!c.options.textmode){c.setValue(this.data[f],true)}else{c.options.value=this.data[f];c.setTextMode()}return this},reset:function(){for(var c in this.initData){this.set(c,this.initData[c],true)}},setEmpty:function(){var f,d="",c;for(c in this.bindMapping){cui(this.bindMapping[c]).onValid()}for(c in this.data){if(c.toLowerCase().indexOf("jquery")>=0){continue}f=Object.prototype.toString.call(this.data[c]).match(/\[object\s([A-Za-z]{1,})\]/)[1].toLocaleLowerCase();f=this.data[c]===null?"null":f;switch(f){case"number":d="";break;case"string":d="";break;case"array":d=[];break;case"object":d={};break;case"null":d=null;break;case"undefined":d=undefined}this.set(c,d,true)}},set:function(h,g,i){var c=this.data[h];if(g!=c||i){this.data[h]=g;var f=this.bindMapping[h];var d=cui(f);if(f){if(!d.options.textmode){d.setValue(g,!!i)}else{d.options.value=g;d.setTextMode()}}this._triggerHandler("change",[h,c,g])}},get:function(c){return this.data[c]},destroy:function(){this._super();for(var c in this.bindMapping){if(c){cui(this.bindMapping[c]).unbind("change",null,this._change)}}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Validate=b.UI.Base.extend({options:{uitype:"Validate"},invalidClass:"validate_invalid",messageClass:"validate_validation_message",invalidFieldClass:"validate_invalid_field",_create:function(){a.extend(this,this.options)},destroy:function(){var f=this;var d=a.data(this.options.el,"validateEl")||[];a.each(d,function(g,i){var j=cui("#"+i.id);var h=j.options.el;j.unbind("change",f._validateEvent);h.removeData("validateRule")});a.removeData(this.options.el,"validateEl")},add:function(i,k,j){var l=a.type(i)=="string"?cui("#"+i):i;if(!l.options){return}var h=l.options.el;var g=h.data("validateRule")||[];var f=null;if(!j&&!c[k]){f={type:"required",params:{m:k}}}else{f={type:k,params:j||{}}}g.push(f);h.data("validateRule",g);var d=a.data(this.options.el,"validateEl")||[];if(!this._contains(h[0],d)){l.bind("change",this,this._validateEvent);d.push(h[0])}a.data(this.options.el,"validateEl",d)},disValid:function(g,d){var h=a.type(g)=="string"?cui("#"+g):g;if(!h.options){return}var f=h.options.el;if(d){f.data("disValid","true")}else{f.removeData("disValid")}},_contains:function(f,g){var d=false;a.each(g,function(h,i){if(f===i){d=true;return}});return d},remove:function(j,k){var l=a.type(j)=="string"?cui("#"+j):j;if(!l.options){return}var i=l.options.el;var h=[];if(k){h=i.data("validateRule")||[];var d=-1;a.each(h,function(m,n){if(n.type==k){d=m}});if(d>=0){h.splice(d,1)}}if(h.length<1){i.removeData("validateRule");l.unbind("change",this,this._validateEvent);var f=a.data(this.options.el,"validateEl")||[];var g=-1;a.each(f,function(m,n){if(n.id==i[0].id){g=m}});if(g>=0){f.splice(g,1)}if(f.length<1){a.removeData(this.options.el,"validateEl")}else{a.data(this.options.el,"validateEl",f)}}else{i.data("validateRule",h)}},_validateEvent:function(g,f){var d=g.data;d._validate(this,!!f)},validAllElement:function(){var f=a.data(this.options.el,"validateEl")||[];var k=[];var j=[];var l=true;for(var h=0;h<f.length;h++){var g=f[h];var m=cui(g);if(typeof m.options==="undefined"){continue}var d=this._validate(m);d=a.extend(d,{id:g.id});if(d.valid){k.push(d)}else{l=false;j.push(d)}}return[j,k,l]},validOneElement:function(d){var f=a.type(d)=="string"?cui("#"+d):d;if(!f.options){return false}return this._validate(f)},_validate:function(j,i){var f=j.options.el;if(i){j.onValid(j);return false}if(!f[0].disabled){var d=null;var g=j.options.el.data("disValid");if(g&&g=="true"){d={valid:true,message:""}}else{d=this._doValidate(j)}var h=d.valid;if(h){if(j.onValid){j.onValid(j)}else{this.onValid(f)}}else{if(j.onInValid){j.onInValid(j,d.message)}else{this.onInValid(f,d.message)}}return d}},_doValidate:function(l){var j=l.options.el;var k=false;var h=j.data("validateRule")||[];for(var g=0;g<h.length;g++){var f=h[g];var d=this._validateElement(l,f);k=!d.valid;if(k){return{valid:false,message:d.message}}}return{valid:true,message:""}},_validateElement:function(l,d){var i=d.type;var g=d.params;var j=l.getValue();var k=true;var h="";try{c[i](j,g)}catch(f){h=f.message;k=false}finally{return{valid:k,message:h}}},onInValid:function(d,f){this._insertMessage(d,this._createMessageSpan(f));this._addFieldClass(d)},onValid:function(d){this._removeMessageAndFieldClass(d)},_createMessageSpan:function(d){return a("<span></span>").html(d)},_insertMessage:function(d,f){this._removeMessage(d);a(f).addClass(this.messageClass+(" "+this.invalidClass));a(f).insertAfter(d)},_addFieldClass:function(d){this._removeFieldClass(d);a(d).addClass(this.invalidFieldClass)},_removeMessage:function(d){if(nextEl=a(d).next("."+this.messageClass)){a(nextEl).remove()}},_removeFieldClass:function(d){a(d).removeClass(this.invalidFieldClass)},_removeMessageAndFieldClass:function(d){this._removeMessage(d);this._removeFieldClass(d)}});var c={required:function(f,g){var h=a.extend({m:"???????!"},g||{});if(f===""||f===null||f===undefined){c.fail(h.m)}if(h.emptyVal){a.each(h.emptyVal,function(j,k){if(f==k){c.fail(h.m)}})}if(a.type(f)=="array"&&f.length==0){c.fail(h.m)}else{if(a.type(f)=="array"){for(var d=0;d<f.length;d++){if(f[d]===""||f[d]===null||f[d]===undefined){c.fail(h.m);break}}}}return true},numeric:function(f,g){var d=f;if(""==f){return true}var f=Number(f);var g=g||{};var h={notANumberMessage:g.notnm||"?????????!",notAnIntegerMessage:g.notim||"?????????!",wrongNumberMessage:g.wrongm||"????? "+g.is+"!",tooLowMessage:g.minm||"??????? "+g.min+"!",tooHighMessage:g.maxm||"?????? "+g.max+"!",is:((g.is)||(g.is==0))?g.is:null,minimum:((g.min)||(g.min==0))?g.min:null,maximum:((g.max)||(g.max==0))?g.max:null,onlyInteger:g.oi||false};if(!isFinite(f)){c.fail(h.notANumberMessage)}if(h.onlyInteger&&((/\.0+$|\.$/.test(String(d)))||(f!=parseInt(f)))){c.fail(h.notAnIntegerMessage)}switch(true){case (h.is!==null):if(f!=Number(h.is)){c.fail(h.wrongNumberMessage)}break;case (h.minimum!==null&&h.maximum!==null):c.numeric(f,{minm:h.tooLowMessage,min:h.minimum});c.numeric(f,{maxm:h.tooHighMessage,max:h.maximum});break;case (h.minimum!==null):if(f<Number(h.minimum)){c.fail(h.tooLowMessage)}break;case (h.maximum!==null):if(f>Number(h.maximum)){c.fail(h.tooHighMessage)}break}return true},format:function(d,f){var d=String(d);if(""==d){return true}var g=a.extend({m:"????????!",pattern:/./,negate:false},f||{});g.pattern=a.type(g.pattern)=="string"?new RegExp(g.pattern):g.pattern;if(!g.negate){if(!g.pattern.test(d)){c.fail(g.m)}}return true},email:function(d,f){if(""==d){return true}var g=a.extend({m:"?????????????!"},f||{});c.format(d,{m:g.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return true},dateFormat:function(d,f){var g=a.extend({m:"???????????yyyy-MM-dd?????"},f||{});c.format(d,{m:g.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i});return true},length:function(d,f){var d=String(d);var f=f||{};var g={wrongLengthMessage:f.wrongm||"???????? "+f.is+" ???!",tooShortMessage:f.minm||"?????????? "+f.min+" ???!",tooLongMessage:f.maxm||"????????? "+f.max+" ???!",is:((f.is)||(f.is==0))?f.is:null,minimum:((f.min)||(f.min==0))?f.min:null,maximum:((f.max)||(f.max==0))?f.max:null};switch(true){case (g.is!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length!=Number(g.is)){c.fail(g.wrongLengthMessage)}break;case (g.minimum!==null&&g.maximum!==null):c.length(d,{minm:g.tooShortMessage,min:g.minimum});c.length(d,{maxm:g.tooLongMessage,max:g.maximum});break;case (g.minimum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length<Number(g.minimum)){c.fail(g.tooShortMessage)}break;case (g.maximum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length>Number(g.maximum)){c.fail(g.tooLongMessage)}break;default:throw new c.error("Validate::Length - ??????????????????!")}return true},inclusion:function(g,h){var i=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true,negate:false},h||{});i.m=i.m||g+"?????????"+i.within.join(",")+"??";if(i.allowNull&&!g){return true}if(!i.allowNull&&!g){c.fail(i.m)}if(!i.caseSensitive){var d=[];a.each(i.within,function(j,k){if(typeof k=="string"){k=k.toLowerCase()}d.push(k)});i.within=d;if(typeof g=="string"){g=g.toLowerCase()}}var f=false;a.each(i.within,function(j,k){if(k==g){f=true}if(i.partialMatch){if(g.indexOf(k)!=-1){f=true}}});if((!i.negate&&!f)||(i.negate&&f)){c.fail(i.m)}return true},exclusion:function(d,f){var g=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true},f||{});g.m=g.m||d+"???????????"+g.within.join(",")+"??";g.negate=true;c.inclusion(d,g);return true},confirmation:function(d,f){if(!f.match){throw new Error("Validate::Confirmation - ??????????????????id??????!")}var g=a.extend({m:"????????!",match:null},f||{});g.match=a.type(g.match)=="string"?cui("#"+g.match):g.match;if(!g.match||g.match.length==0){throw new Error("Validate::Confirmation - ???????????????????????!")}if(d!=g.match.getValue()){c.fail(g.m)}return true},acceptance:function(d,f){var g=a.extend({m:"???????!"},f||{});if(!d){c.fail(g.m)}return true},custom:function(f,g){var h=a.extend({against:function(){return true},args:{},m:"?????!"},g||{});var d=h.against;if(a.type(d)=="string"){d=window[d]}if(!d(f,h.args)){c.fail(h.m)}return true},error:function(d){this.message=d;this.name="ValidationError"},fail:function(d){throw new c.error(d)}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Tip=b.UI.Base.extend({options:{uitype:"Tip",pointee:true,position:"auto",live:false,trigger:"hover",x:false,maxWidth:150,fade:false,opacity:1,tipEl:null,content_cls:".ctip-msg",close_cls:".ctip-x"},_init:function(){this.options.uid="tip_"+comtop.guid();var c=this.options;this.$el=a(c.el);this.$tipEl=c.tipEl?a(c.tipEl):this.$el;this._bindElEvent();this._fixTitle()},_create:function(){if(this.options.trigger=="onload"){this.show()}},_bindElEvent:function(){var c=this,h=this.options;var d=(h.live=="true"||h.live===true)?"live":"bind",g=h.trigger=="hover"?"mouseenter":h.trigger=="click"?"click":"focus",f=h.trigger=="hover"?"mouseleave":h.trigger=="click"?"":"blur";this.$el[d](g,function(){c.show();return false})[d](f,function(){c.hide();return false})},_lazyCreate:function(){if(!this.created){var c=this.options;a(document.body).append(this._getView());this.$tip=a("#"+c.uid);this._bindEvent();this.created=true}},_setMaxWidth:function(){var f=this.$tip,d=this.options;if(b.Browser.isIE6){var c=f.find(".ctip-msg").width()>d.maxWidth?d.maxWidth:"auto";if(b.Browser.isQM&&c!="auto"){c=c+16}f.children(".ctip-content").css("width",c)}else{f.children(".ctip-content").css("maxWidth",d.maxWidth)}},_getView:function(){return this._buildTemplateStr("tip",this.options)},_bindEvent:function(){var c=this,d=this.options;if(d.x===true){this.$tip.find(d.close_cls).bind("click",function(){c.hide();return false})}},_fixTitle:function(){this.$el.removeAttr("title")},_setPosition:function(){var i=this.$tip,h=this.$el,g=this.options;var k=a.extend({},h.offset(),{width:h[0].offsetWidth,height:h[0].offsetHeight});var d=i[0].offsetWidth,f=i[0].offsetHeight,c=g.position;if(b.Browser.isIE&&d>g.maxWidth){i.width(g.maxWidth);d=i[0].offsetWidth;f=i[0].offsetHeight}if(c=="auto"){c=this._calAutoPosition(k)}var j={};switch(c){case"t":j={left:k.left+k.width/2-d/2,top:k.top-f-5};break;case"b":j={left:k.left+k.width/2-d/2,top:k.top+k.height+5};break;case"l":j={left:k.left-d-5,top:k.top+k.height/2-f/2};break;case"r":j={left:k.left+k.width+5,top:k.top+k.height/2-f/2};break;case"rt":j={left:k.left+k.width/2-25,top:k.top-f-5};break;case"rb":j={left:k.left+k.width/2-25,top:k.top+k.height+5};break;case"lt":j={left:k.left+k.width/2-d+25,top:k.top-f-5};break;case"lb":j={left:k.left+k.width/2-d+25,top:k.top+k.height+5};break}i.css(j).addClass("ctip-"+c)},_calAutoPosition:function(j){var h=b.Dom.windowSize();var c=j.top>(a(document).scrollTop()+h.height/2)?"t":"b";var g="",i=this.options.maxWidth/2,f=j.left+j.width/2-a(document).scrollLeft(),d=h.width-f;if(f<i){g="r"}else{if(d<i){g="l"}}return g+c},getContent:function(){var c=this.options;return c.content?c.content:this.$tipEl.attr("tip")},setContent:function(){var c=this.getContent();this.$tip.find(this.options.content_cls).html(c)},show:function(){this._lazyCreate();if(a.trim(this.getContent())==""){return}this.setContent();this.$tip[0].className="ctip";this.$tip.css({top:0,left:0,display:"block"});this._setMaxWidth();this._setPosition()},hide:function(){if(this.$tip){this.$tip.hide()}}});cui.tipList={};cui.tip=function(d,c){c=c||{};c.el=a(d);var f=new b.UI.Tip(c);cui.tipList[f.options.uid]=f;c.el.attr("tipID",f.options.uid);return f}})(window.comtop.cQuery,window.comtop);(function(d,c){(function(k,a){var l=0,b=/^ui-id-\d+$/;k.ui=k.ui||{};if(k.ui.version){return}k.extend(k.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});k.fn.extend({_focus:k.fn.focus,focus:function(g,f){return typeof g==="number"?this.each(function(){var h=this;setTimeout(function(){k(h).focus();if(f){f.call(h)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var f;if((k.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){f=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(k.css(this,"position"))&&(/(auto|scroll)/).test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0)}else{f=this.parents().filter(function(){return(/(auto|scroll)/).test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!f.length?k(document):f},zIndex:function(f){if(f!==a){return this.css("zIndex",f)}if(this.length){var h=k(this[0]),m,g;while(h.length&&h[0]!==document){m=h.css("position");if(m==="absolute"||m==="relative"||m==="fixed"){g=parseInt(h.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++l)}})},removeUniqueId:function(){return this.each(function(){if(b.test(this.id)){k(this).removeAttr("id")}})}});if(!k("<a>").outerWidth(1).jquery){k.each(["Width","Height"],function(g,p){var h=p==="Width"?["Left","Right"]:["Top","Bottom"],f=p.toLowerCase(),q={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};function r(o,s,m,n){k.each(h,function(){s-=parseFloat(k.css(o,"padding"+this))||0;if(m){s-=parseFloat(k.css(o,"border"+this+"Width"))||0}if(n){s-=parseFloat(k.css(o,"margin"+this))||0}});return s}k.fn["inner"+p]=function(m){if(m===a){return q["inner"+p].call(this)}return this.each(function(){k(this).css(f,r(this,m)+"px")})};k.fn["outer"+p]=function(m,n){if(typeof m!=="number"){return q["outer"+p].call(this,m)}return this.each(function(){k(this).css(f,r(this,m,true,n)+"px")})}})}function i(h,p){var f,g,o,q=h.nodeName.toLowerCase();if("area"===q){f=h.parentNode;g=f.name;if(!h.href||!g||f.nodeName.toLowerCase()!=="map"){return false}o=k("img[usemap=#"+g+"]")[0];return !!o&&j(o)}return(/input|select|textarea|button|object/.test(q)?!h.disabled:"a"===q?h.href||p:p)&&j(h)}function j(f){return k.expr.filters.visible(f)&&!k(f).parents().andSelf().filter(function(){return k.css(this,"visibility")==="hidden"}).length}k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(f){return function(g){return !!k.data(g,f)}}):function(f,g,h){return !!k.data(f,h[3])},focusable:function(f){return i(f,!isNaN(k.attr(f,"tabindex")))},tabbable:function(f){var h=k.attr(f,"tabindex"),g=isNaN(h);return(g||h>=0)&&i(f,!g)}});k(function(){var g=document.body,f=g.appendChild(f=document.createElement("div"));f.offsetHeight;k.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});k.support.minHeight=f.offsetHeight===100;k.support.selectstart="onselectstart" in f;g.removeChild(f).style.display="none"});(function(){var f=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];k.ui.ie=f.length?true:false;k.ui.ie6=parseFloat(f[1],10)===6})();k.fn.extend({disableSelection:function(){return this.bind((k.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(f){f.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});k.extend(k.ui,{plugin:{add:function(h,g,p){var o,f=k.ui[h].prototype;for(o in p){f.plugins[o]=f.plugins[o]||[];f.plugins[o].push([g,p[o]])}},call:function(o,g,h){var f,p=o.plugins[g];if(!p||!o.element[0].parentNode||o.element[0].parentNode.nodeType===11){return}for(f=0;f<p.length;f++){if(o.options[p[f][0]]){p[f][1].apply(o.element,h)}}}},contains:k.contains,hasScroll:function(f,h){if(k(f).css("overflow")==="hidden"){return false}var m=(h&&h==="left")?"scrollLeft":"scrollTop",g=false;if(f[m]>0){return true}f[m]=1;g=(f[m]>0);f[m]=0;return g},isOverAxis:function(g,h,f){return(g>h)&&(g<(h+f))},isOver:function(q,o,f,g,p,h){return k.ui.isOverAxis(q,f,p)&&k.ui.isOverAxis(o,g,h)}})})(d);(function(i,a){var j=0,b=Array.prototype.slice,h=i.cleanData;i.cleanData=function(n){for(var m=0,g;(g=n[m])!=null;m++){try{i(g).triggerHandler("remove")}catch(f){}}h(n)};i.widget=function(r,g,s){var t,u,p,f,q=r.split(".")[0];r=r.split(".")[1];t=q+"-"+r;if(!s){s=g;g=i.Widget}i.expr[":"][t.toLowerCase()]=function(k){return !!i.data(k,t)};i[q]=i[q]||{};u=i[q][r];p=i[q][r]=function(l,k){if(!this._createWidget){return new p(l,k)}if(arguments.length){this._createWidget(l,k)}};i.extend(p,u,{version:s.version,_proto:i.extend({},s),_childConstructors:[]});f=new g();f.options=i.widget.extend({},f.options);i.each(s,function(k,l){if(i.isFunction(l)){s[k]=(function(){var n=function(){return g.prototype[k].apply(this,arguments)},m=function(o){return g.prototype[k].apply(this,o)};return function(){var o=this._super,x=this._superApply,w;this._super=n;this._superApply=m;w=l.apply(this,arguments);this._super=o;this._superApply=x;return w}})()}});p.prototype=i.widget.extend(f,{widgetEventPrefix:f.widgetEventPrefix||r},s,{constructor:p,namespace:q,widgetName:r,widgetBaseClass:t,widgetFullName:t});if(u){i.each(u._childConstructors,function(l,k){var m=k.prototype;i.widget(m.namespace+"."+m.widgetName,p,k._proto)});delete u._childConstructors}else{g._childConstructors.push(p)}i.widget.bridge(r,p)};i.widget.extend=function(f){var p=b.call(arguments,1),g=0,q=p.length,o,n;for(;g<q;g++){for(o in p[g]){n=p[g][o];if(p[g].hasOwnProperty(o)&&n!==a){if(i.isPlainObject(n)){f[o]=i.isPlainObject(f[o])?i.widget.extend({},f[o],n):i.widget.extend({},n)}else{f[o]=n}}}}return f};i.widget.bridge=function(g,k){var f=k.prototype.widgetFullName;i.fn[g]=function(o){var q=typeof o==="string",p=b.call(arguments,1),r=this;o=!q&&p.length?i.widget.extend.apply(null,[o].concat(p)):o;if(q){this.each(function(){var l,m=i.data(this,f);if(!m){return i.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+o+"'")}if(!i.isFunction(m[o])||o.charAt(0)==="_"){return i.error("no such method '"+o+"' for "+g+" widget instance")}l=m[o].apply(m,p);if(l!==m&&l!==a){r=l&&l.jquery?r.pushStack(l.get()):l;return false}})}else{this.each(function(){var l=i.data(this,f);if(l){l.option(o||{})._init()}else{new k(o,this)}})}return r}};i.Widget=function(){};i.Widget._childConstructors=[];i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,f){f=i(f||this.defaultElement||this)[0];this.element=i(f);this.uuid=j++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=i.widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=i();this.hoverable=i();this.focusable=i();if(f!==this){i.data(f,this.widgetName,this);i.data(f,this.widgetFullName,this);this._on(this.element,{remove:function(k){if(k.target===f){this.destroy()}}});this.document=i(f.style?f.ownerDocument:f.document||f);this.window=i(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(g,f){var q=g,r,o,p;if(arguments.length===0){return i.widget.extend({},this.options)}if(typeof g==="string"){q={};r=g.split(".");g=r.shift();if(r.length){o=q[g]=i.widget.extend({},this.options[g]);for(p=0;p<r.length-1;p++){o[r[p]]=o[r[p]]||{};o=o[r[p]]}g=r.pop();if(f===a){return o[g]===a?null:o[g]}o[g]=f}else{if(f===a){return this.options[g]===a?null:this.options[g]}q[g]=f}}this._setOptions(q);return this},_setOptions:function(g){var f;for(f in g){this._setOption(f,g[f])}return this},_setOption:function(g,f){this.options[g]=f;if(g==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!f).attr("aria-disabled",f);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(g,l){var f,m=this;if(!l){l=g;g=this.element;f=this.widget()}else{g=f=i(g);this.bindings=this.bindings.add(g)}i.each(l,function(s,t){function v(){if(m.options.disabled===true||i(this).hasClass("ui-state-disabled")){return}return(typeof t==="string"?m[t]:t).apply(m,arguments)}if(typeof t!=="string"){v.guid=t.guid=t.guid||v.guid||i.guid++}var u=s.match(/^(\w+)\s*(.*)$/),k=u[1]+m.eventNamespace,r=u[2];if(r){f.delegate(r,k,v)}else{g.bind(k,v)}})},_off:function(f,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;f.unbind(g).undelegate(g)},_delay:function(f,g){function l(){return(typeof f==="string"?m[f]:f).apply(m,arguments)}var m=this;return setTimeout(l,g||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){i(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){i(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){i(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){i(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(q,p,o){var f,g,n=this.options[q];o=o||{};p=i.Event(p);p.type=(q===this.widgetEventPrefix?q:this.widgetEventPrefix+q).toLowerCase();p.target=this.element[0];g=p.originalEvent;if(g){for(f in g){if(!(f in p)){p[f]=g[f]}}}this.element.trigger(p,o);return !(i.isFunction(n)&&n.apply(this.element[0],[p].concat(o))===false||p.isDefaultPrevented())}};i.each({show:"fadeIn",hide:"fadeOut"},function(f,g){i.Widget.prototype["_"+f]=function(p,q,s){if(typeof q==="string"){q={effect:q}}var o,r=!q?f:q===true||typeof q==="number"?g:q.effect||g;q=q||{};if(typeof q==="number"){q={duration:q}}o=!i.isEmptyObject(q);q.complete=s;if(q.delay){p.delay(q.delay)}if(o&&i.effects&&(i.effects.effect[r]||i.uiBackCompat!==false&&i.effects[r])){p[f](q)}else{if(r!==f&&p[r]){p[r](q.duration,q.easing,s)}else{p.queue(function(k){i(this)[f]();if(s){s.call(p[0])}k()})}}}});if(i.uiBackCompat!==false){i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}}})(d);(function(b,a){var f=false;b(document).mouseup(function(g){f=false});b.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var g=this;this.element.bind("mousedown."+this.widgetName,function(h){return g._mouseDown(h)}).bind("click."+this.widgetName,function(h){if(true===b.data(h.target,g.widgetName+".preventClickEvent")){b.removeData(h.target,g.widgetName+".preventClickEvent");h.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(k){if(f){return}(this._mouseStarted&&this._mouseUp(k));this._mouseDownEvent=k;var l=this,j=(k.which===1),m=(typeof this.options.cancel==="string"&&k.target.nodeName?b(k.target).closest(this.options.cancel).length:false);if(!j||m||!this._mouseCapture(k)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)){this._mouseStarted=(this._mouseStart(k)!==false);if(!this._mouseStarted){k.preventDefault();return true}}if(true===b.data(k.target,this.widgetName+".preventClickEvent")){b.removeData(k.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(g){return l._mouseMove(g)};this._mouseUpDelegate=function(g){return l._mouseUp(g)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);k.preventDefault();f=true;return true},_mouseMove:function(g){if(b.ui.ie&&!(document.documentMode>=9)&&!g.button){return this._mouseUp(g)}if(this._mouseStarted){this._mouseDrag(g);return g.preventDefault()}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,g)!==false);(this._mouseStarted?this._mouseDrag(g):this._mouseUp(g))}return !this._mouseStarted},_mouseUp:function(g){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(g.target===this._mouseDownEvent.target){b.data(g.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(g)}return false},_mouseDistanceMet:function(g){return(Math.max(Math.abs(this._mouseDownEvent.pageX-g.pageX),Math.abs(this._mouseDownEvent.pageY-g.pageY))>=this.options.distance)},_mouseDelayMet:function(g){return this.mouseDelayMet},_mouseStart:function(g){},_mouseDrag:function(g){},_mouseStop:function(g){},_mouseCapture:function(g){return true}})})(d);(function(x,z){x.ui=x.ui||{};var t,s=Math.max,a=Math.abs,q=Math.round,y=/left|center|right/,v=/top|center|bottom/,B=/[\+\-]\d+%?/,r=/^\w+/,A=/%$/,w=x.fn.position;function b(f,g,h){return[parseInt(f[0],10)*(A.test(f[0])?g/100:1),parseInt(f[1],10)*(A.test(f[1])?h/100:1)]}function u(g,f){return parseInt(x.css(g,f),10)||0}x.position={scrollbarWidth:function(){if(t!==z){return t}var h,i,f=x("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];x("body").append(f);h=g.offsetWidth;f.css("overflow","scroll");i=g.offsetWidth;if(h===i){i=f[0].clientWidth}f.remove();return(t=h-i)},getScrollInfo:function(f){var g=f.isWindow?"":f.element.css("overflow-x"),h=f.isWindow?"":f.element.css("overflow-y"),i=g==="scroll"||(g==="auto"&&f.width<f.element[0].scrollWidth),j=h==="scroll"||(h==="auto"&&f.height<f.element[0].scrollHeight);return{width:i?x.position.scrollbarWidth():0,height:j?x.position.scrollbarWidth():0}},getWithinInfo:function(g){var f=x(g||window),h=x.isWindow(f[0]);return{element:f,isWindow:h,offset:f.offset()||{left:0,top:0},scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop(),width:h?f.width():f.outerWidth(),height:h?f.height():f.outerHeight()}}};x.fn.position=function(i){if(!i||!i.of){return w.apply(this,arguments)}i=x.extend({},i);var h,l,o,j,p,m=x(i.of),C=x.position.getWithinInfo(i.within),g=x.position.getScrollInfo(C),n=m[0],k=(i.collision||"flip").split(" "),f={};if(n.nodeType===9){l=m.width();o=m.height();j={top:0,left:0}}else{if(x.isWindow(n)){l=m.width();o=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(n.preventDefault){i.at="left top";l=o=0;j={top:n.pageY,left:n.pageX}}else{l=m.outerWidth();o=m.outerHeight();j=m.offset()}}}p=x.extend({},j);x.each(["my","at"],function(){var F=(i[this]||"").split(" "),G,H;if(F.length===1){F=y.test(F[0])?F.concat(["center"]):v.test(F[0])?["center"].concat(F):["center","center"]}F[0]=y.test(F[0])?F[0]:"center";F[1]=v.test(F[1])?F[1]:"center";G=B.exec(F[0]);H=B.exec(F[1]);f[this]=[G?G[0]:0,H?H[0]:0];i[this]=[r.exec(F[0])[0],r.exec(F[1])[0]]});if(k.length===1){k[1]=k[0]}if(i.at[0]==="right"){p.left+=l}else{if(i.at[0]==="center"){p.left+=l/2}}if(i.at[1]==="bottom"){p.top+=o}else{if(i.at[1]==="center"){p.top+=o/2}}h=b(f.at,l,o);p.left+=h[0];p.top+=h[1];return this.each(function(){var N,P,W=x(this),U=W.outerWidth(),X=W.outerHeight(),V=u(this,"marginLeft"),O=u(this,"marginTop"),Q=U+V+u(this,"marginRight")+g.width,R=X+O+u(this,"marginBottom")+g.height,T=x.extend({},p),S=b(f.my,W.outerWidth(),W.outerHeight());if(i.my[0]==="right"){T.left-=U}else{if(i.my[0]==="center"){T.left-=U/2}}if(i.my[1]==="bottom"){T.top-=X}else{if(i.my[1]==="center"){T.top-=X/2}}T.left+=S[0];T.top+=S[1];if(!x.support.offsetFractions){T.left=q(T.left);T.top=q(T.top)}N={marginLeft:V,marginTop:O};x.each(["left","top"],function(D,E){if(x.ui.position[k[D]]){x.ui.position[k[D]][E](T,{targetWidth:l,targetHeight:o,elemWidth:U,elemHeight:X,collisionPosition:N,collisionWidth:Q,collisionHeight:R,offset:[h[0]+S[0],h[1]+S[1]],my:i.my,at:i.at,within:C,elem:W})}});if(x.fn.bgiframe){W.bgiframe()}if(i.using){P=function(F){var D=j.left-T.left,G=D+l-U,E=j.top-T.top,H=E+o-X,I={target:{element:m,left:j.left,top:j.top,width:l,height:o},element:{element:W,left:T.left,top:T.top,width:U,height:X},horizontal:G<0?"left":D>0?"right":"center",vertical:H<0?"top":E>0?"bottom":"middle"};if(l<U&&a(D+G)<l){I.horizontal="center"}if(o<X&&a(E+H)<o){I.vertical="middle"}if(s(a(D),a(G))>s(a(E),a(H))){I.important="horizontal"}else{I.important="vertical"}i.using.call(this,F,I)}}W.offset(x.extend(T,{using:P}))})};x.ui.position={fit:{left:function(l,m){var n=m.within,j=n.isWindow?n.scrollLeft:n.offset.left,h=n.width,k=l.left-m.collisionPosition.marginLeft,i=j-k,f=k+m.collisionWidth-h-j,g;if(m.collisionWidth>h){if(i>0&&f<=0){g=l.left+i+m.collisionWidth-h-j;l.left+=i-g}else{if(f>0&&i<=0){l.left=j}else{if(i>f){l.left=j+h-m.collisionWidth}else{l.left=j}}}}else{if(i>0){l.left+=i}else{if(f>0){l.left-=f}else{l.left=s(l.left-k,l.left)}}}},top:function(m,n){var f=n.within,i=f.isWindow?f.scrollTop:f.offset.top,h=n.within.height,k=m.top-n.collisionPosition.marginTop,j=i-k,l=k+n.collisionHeight-h-i,g;if(n.collisionHeight>h){if(j>0&&l<=0){g=m.top+j+n.collisionHeight-h-i;m.top+=j-g}else{if(l>0&&j<=0){m.top=i}else{if(j>l){m.top=i+h-n.collisionHeight}else{m.top=i}}}}else{if(j>0){m.top+=j}else{if(l>0){m.top-=l}else{m.top=s(m.top-k,m.top)}}}}},flip:{left:function(o,p){var E=p.within,k=E.offset.left+E.scrollLeft,g=E.width,G=E.isWindow?E.scrollLeft:E.offset.left,n=o.left-p.collisionPosition.marginLeft,j=n-G,f=n+p.collisionWidth-g-G,l=p.my[0]==="left"?-p.elemWidth:p.my[0]==="right"?p.elemWidth:0,i=p.at[0]==="left"?p.targetWidth:p.at[0]==="right"?-p.targetWidth:0,F=-2*p.offset[0],h,m;if(j<0){h=o.left+l+i+F+p.collisionWidth-g-k;if(h<0||h<a(j)){o.left+=l+i+F}}else{if(f>0){m=o.left-p.collisionPosition.marginLeft+l+i+F-G;if(m>0||a(m)<f){o.left+=l+i+F}}}},top:function(p,F){var G=F.within,h=G.offset.top+G.scrollTop,g=G.height,i=G.isWindow?G.scrollTop:G.offset.top,n=p.top-F.collisionPosition.marginTop,l=n-i,o=n+F.collisionHeight-g-i,k=F.my[1]==="top",m=k?-F.elemHeight:F.my[1]==="bottom"?F.elemHeight:0,I=F.at[1]==="top"?F.targetHeight:F.at[1]==="bottom"?-F.targetHeight:0,H=-2*F.offset[1],j,f;if(l<0){f=p.top+m+I+H+F.collisionHeight-g-h;if((p.top+m+I+H)>l&&(f<0||f<a(l))){p.top+=m+I+H}}else{if(o>0){j=p.top-F.collisionPosition.marginTop+m+I+H-i;if((p.top+m+I+H)>o&&(j>0||a(j)<o)){p.top+=m+I+H}}}}},flipfit:{left:function(){x.ui.position.flip.left.apply(this,arguments);x.ui.position.fit.left.apply(this,arguments)},top:function(){x.ui.position.flip.top.apply(this,arguments);x.ui.position.fit.top.apply(this,arguments)}}};(function(){var h,f,k,i,j,l=document.getElementsByTagName("body")[0],g=document.createElement("div");h=document.createElement(l?"div":"body");k={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(l){x.extend(k,{position:"absolute",left:"-1000px",top:"-1000px"})}for(j in k){h.style[j]=k[j]}h.appendChild(g);f=l||document.documentElement;f.insertBefore(h,f.firstChild);g.style.cssText="position: absolute; left: 10.7432222px;";i=x(g).offset().left;x.support.offsetFractions=i>10&&i<11;h.innerHTML="";f.removeChild(h)})();if(x.uiBackCompat!==false){(function(f){var g=f.fn.position;f.fn.position=function(i){if(!i||!i.offset){return g.call(this,i)}var h=i.offset.split(" "),j=i.at.split(" ");if(h.length===1){h[1]=h[0]}if(/^\d/.test(h[0])){h[0]="+"+h[0]}if(/^\d/.test(h[1])){h[1]="+"+h[1]}if(j.length===1){if(/left|center|right/.test(j[0])){j[1]="center"}else{j[1]=j[0];j[0]="center"}}return g.call(this,f.extend(i,{at:j[0]+h[0]+" "+j[1]+h[1],offset:z}))}}(d))}}(d));(function(b,a){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(h){var g=this.options;if(this.helper||g.disabled||b(h.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(h);if(!this.handle){return false}b(g.iframeFix===true?"iframe":g.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")});return true},_mouseStart:function(h){var g=this.options;this.helper=this._createHelper(h);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;(g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt));if(g.containment){this._setContainment()}if(this._trigger("start",h)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!g.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,h)}this._mouseDrag(h,true);if(b.ui.ddmanager){b.ui.ddmanager.dragStart(this,h)}return true},_mouseDrag:function(j,h){this.position=this._generatePosition(j);this.positionAbs=this._convertPositionTo("absolute");if(!h){var i=this._uiHash();if(this._trigger("drag",j,i)===false){this._mouseUp({});return false}this.position=i.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(b.ui.ddmanager){b.ui.ddmanager.drag(this,j)}return false},_mouseStop:function(l){var j=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){j=b.ui.ddmanager.drop(this,l)}if(this.dropped){j=this.dropped;this.dropped=false}var n=this.element[0],k=false;while(n&&(n=n.parentNode)){if(n==document){k=true}}if(!k&&this.options.helper==="original"){return false}if((this.options.revert=="invalid"&&!j)||(this.options.revert=="valid"&&j)||this.options.revert===true||(b.isFunction(this.options.revert)&&this.options.revert.call(this.element,j))){var m=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(m._trigger("stop",l)!==false){m._clear()}})}else{if(this._trigger("stop",l)!==false){this._clear()}}return false},_mouseUp:function(f){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(b.ui.ddmanager){b.ui.ddmanager.dragStop(this,f)}return b.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(h){var g=!this.options.handle||!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==h.target){g=true}});return g},_createHelper:function(i){var h=this.options;var j=b.isFunction(h.helper)?b(h.helper.apply(this.element[0],[i])):(h.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!j.parents("body").length){j.appendTo((h.appendTo=="parent"?this.element[0].parentNode:h.appendTo))}if(j[0]!=this.element[0]&&!(/(fixed|absolute)/).test(j.css("position"))){j.css("position","absolute")}return j},_adjustOffsetFromHelper:function(f){if(typeof f=="string"){f=f.split(" ")}if(b.isArray(f)){f={left:+f[0],top:+f[1]||0}}if("left" in f){this.offset.click.left=f.left+this.margins.left}if("right" in f){this.offset.click.left=this.helperProportions.width-f.right+this.margins.left}if("top" in f){this.offset.click.top=f.top+this.margins.top}if("bottom" in f){this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])){f.left+=this.scrollParent.scrollLeft();f.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie)){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var f=this.element.position();return{top:f.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:f.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var k=this.options;if(k.containment=="parent"){k.containment=this.helper[0].parentNode}if(k.containment=="document"||k.containment=="window"){this.containment=[k.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(k.containment=="document"?0:b(window).scrollLeft())+b(k.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(k.containment=="document"?0:b(window).scrollTop())+(b(k.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(k.containment)&&k.containment.constructor!=Array){var j=b(k.containment);var m=j[0];if(!m){return}var l=j.offset();var n=(b(m).css("overflow")!="hidden");this.containment=[(parseInt(b(m).css("borderLeftWidth"),10)||0)+(parseInt(b(m).css("paddingLeft"),10)||0),(parseInt(b(m).css("borderTopWidth"),10)||0)+(parseInt(b(m).css("paddingTop"),10)||0),(n?Math.max(m.scrollWidth,m.offsetWidth):m.offsetWidth)-(parseInt(b(m).css("borderLeftWidth"),10)||0)-(parseInt(b(m).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(m.scrollHeight,m.offsetHeight):m.offsetHeight)-(parseInt(b(m).css("borderTopWidth"),10)||0)-(parseInt(b(m).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=j}else{if(k.containment.constructor==Array){this.containment=k.containment}}},_convertPositionTo:function(m,k){if(!k){k=this.position}var o=m=="absolute"?1:-1;var n=this.options,p=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(p[0].tagName);return{top:(k.top+this.offset.relative.top*o+this.offset.parent.top*o-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(l?0:p.scrollTop()))*o)),left:(k.left+this.offset.relative.left*o+this.offset.parent.left*o-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:p.scrollLeft())*o))}},_generatePosition:function(w){var v=this.options,o=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=(/(html|body)/i).test(o[0].tagName);var s=w.pageX;var t=w.pageY;if(this.originalPosition){var x;if(this.containment){if(this.relative_container){var p=this.relative_container.offset();x=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]}else{x=this.containment}if(w.pageX-this.offset.click.left<x[0]){s=x[0]+this.offset.click.left}if(w.pageY-this.offset.click.top<x[1]){t=x[1]+this.offset.click.top}if(w.pageX-this.offset.click.left>x[2]){s=x[2]+this.offset.click.left}if(w.pageY-this.offset.click.top>x[3]){t=x[3]+this.offset.click.top}}if(v.grid){var q=v.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/v.grid[1])*v.grid[1]:this.originalPageY;t=x?(!(q-this.offset.click.top<x[1]||q-this.offset.click.top>x[3])?q:(!(q-this.offset.click.top<x[1])?q-v.grid[1]:q+v.grid[1])):q;var u=v.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/v.grid[0])*v.grid[0]:this.originalPageX;s=x?(!(u-this.offset.click.left<x[0]||u-this.offset.click.left>x[2])?u:(!(u-this.offset.click.left<x[0])?u-v.grid[0]:u+v.grid[0])):u}}return{top:(t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(r?0:o.scrollTop())))),left:(s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(j,i,h){h=h||this._uiHash();b.ui.plugin.call(this,j,[i,h]);if(j=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return b.Widget.prototype._trigger.call(this,j,i,h)},plugins:{},_uiHash:function(f){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(m,k){var l=b(this).data("draggable"),j=l.options,n=b.extend({},k,{item:l.element});l.sortables=[];b(j.connectToSortable).each(function(){var f=b.data(this,"sortable");if(f&&!f.options.disabled){l.sortables.push({instance:f,shouldRevert:f.options.revert});f.refreshPositions();f._trigger("activate",m,n)}})},stop:function(k,i){var j=b(this).data("draggable"),l=b.extend({},i,{item:j.element});b.each(j.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;j.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(k);this.instance.options.helper=this.instance.options._helper;if(j.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",k,l)}})},drag:function(m,j){var k=b(this).data("draggable"),n=this;var l=function(t){var f=this.offset.click.top,g=this.offset.click.left;var v=this.positionAbs.top,i=this.positionAbs.left;var o=t.height,h=t.width;var w=t.top,u=t.left;return b.ui.isOver(v+f,i+g,w,u,o,h)};b.each(k.sortables,function(g){var h=false;var f=this;this.instance.positionAbs=k.positionAbs;this.instance.helperProportions=k.helperProportions;this.instance.offset.click=k.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){h=true;b.each(k.sortables,function(){this.instance.positionAbs=k.positionAbs;this.instance.helperProportions=k.helperProportions;this.instance.offset.click=k.offset.click;if(this!=f&&this.instance._intersectsWith(this.instance.containerCache)&&b.ui.contains(f.instance.element[0],this.instance.element[0])){h=false}return h})}if(h){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return j.helper[0]};m.target=this.instance.currentItem[0];this.instance._mouseCapture(m,true);this.instance._mouseStart(m,true,true);this.instance.offset.click.top=k.offset.click.top;this.instance.offset.click.left=k.offset.click.left;this.instance.offset.parent.left-=k.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=k.offset.parent.top-this.instance.offset.parent.top;k._trigger("toSortable",m);k.dropped=this.instance.element;k.currentItem=k.element;this.instance.fromOutside=k}if(this.instance.currentItem){this.instance._mouseDrag(m)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",m,this.instance._uiHash(this.instance));this.instance._mouseStop(m,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}k._trigger("fromSortable",m);k.dropped=false}}})}});b.ui.plugin.add("draggable","cursor",{start:function(k,j){var l=b("body"),i=b(this).data("draggable").options;if(l.css("cursor")){i._cursor=l.css("cursor")}l.css("cursor",i.cursor)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._cursor){b("body").css("cursor",h._cursor)}}});b.ui.plugin.add("draggable","opacity",{start:function(k,j){var l=b(j.helper),i=b(this).data("draggable").options;if(l.css("opacity")){i._opacity=l.css("opacity")}l.css("opacity",i.opacity)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._opacity){b(i.helper).css("opacity",h._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(i,h){var j=b(this).data("draggable");if(j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"){j.overflowOffset=j.scrollParent.offset()}},drag:function(l,k){var m=b(this).data("draggable"),i=m.options,n=false;if(m.scrollParent[0]!=document&&m.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x"){if((m.overflowOffset.top+m.scrollParent[0].offsetHeight)-l.pageY<i.scrollSensitivity){m.scrollParent[0].scrollTop=n=m.scrollParent[0].scrollTop+i.scrollSpeed}else{if(l.pageY-m.overflowOffset.top<i.scrollSensitivity){m.scrollParent[0].scrollTop=n=m.scrollParent[0].scrollTop-i.scrollSpeed}}}if(!i.axis||i.axis!="y"){if((m.overflowOffset.left+m.scrollParent[0].offsetWidth)-l.pageX<i.scrollSensitivity){m.scrollParent[0].scrollLeft=n=m.scrollParent[0].scrollLeft+i.scrollSpeed}else{if(l.pageX-m.overflowOffset.left<i.scrollSensitivity){m.scrollParent[0].scrollLeft=n=m.scrollParent[0].scrollLeft-i.scrollSpeed}}}}else{if(!i.axis||i.axis!="x"){if(l.pageY-b(document).scrollTop()<i.scrollSensitivity){n=b(document).scrollTop(b(document).scrollTop()-i.scrollSpeed)}else{if(b(window).height()-(l.pageY-b(document).scrollTop())<i.scrollSensitivity){n=b(document).scrollTop(b(document).scrollTop()+i.scrollSpeed)}}}if(!i.axis||i.axis!="y"){if(l.pageX-b(document).scrollLeft()<i.scrollSensitivity){n=b(document).scrollLeft(b(document).scrollLeft()-i.scrollSpeed)}else{if(b(window).width()-(l.pageX-b(document).scrollLeft())<i.scrollSensitivity){n=b(document).scrollLeft(b(document).scrollLeft()+i.scrollSpeed)}}}}if(n!==false&&b.ui.ddmanager&&!i.dropBehaviour){b.ui.ddmanager.prepareOffsets(m,l)}}});b.ui.plugin.add("draggable","snap",{start:function(k,j){var l=b(this).data("draggable"),i=l.options;l.snapElements=[];b(i.snap.constructor!=String?(i.snap.items||":data(draggable)"):i.snap).each(function(){var f=b(this);var g=f.offset();if(this!=l.element[0]){l.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})}})},drag:function(t,F){var M=b(this).data("draggable"),D=M.options;var i=D.snapTolerance;var l=F.offset.left,o=l+M.helperProportions.width,N=F.offset.top,O=N+M.helperProportions.height;for(var r=M.snapElements.length-1;r>=0;r--){var C=M.snapElements[r].left,H=C+M.snapElements[r].width,I=M.snapElements[r].top,E=I+M.snapElements[r].height;if(!((C-i<l&&l<H+i&&I-i<N&&N<E+i)||(C-i<l&&l<H+i&&I-i<O&&O<E+i)||(C-i<o&&o<H+i&&I-i<N&&N<E+i)||(C-i<o&&o<H+i&&I-i<O&&O<E+i))){if(M.snapElements[r].snapping){(M.options.snap.release&&M.options.snap.release.call(M.element,t,b.extend(M._uiHash(),{snapItem:M.snapElements[r].item})))}M.snapElements[r].snapping=false;continue}if(D.snapMode!="inner"){var P=Math.abs(I-O)<=i;var G=Math.abs(E-N)<=i;var K=Math.abs(C-o)<=i;var J=Math.abs(H-l)<=i;if(P){F.position.top=M._convertPositionTo("relative",{top:I-M.helperProportions.height,left:0}).top-M.margins.top}if(G){F.position.top=M._convertPositionTo("relative",{top:E,left:0}).top-M.margins.top}if(K){F.position.left=M._convertPositionTo("relative",{top:0,left:C-M.helperProportions.width}).left-M.margins.left}if(J){F.position.left=M._convertPositionTo("relative",{top:0,left:H}).left-M.margins.left}}var L=(P||G||K||J);if(D.snapMode!="outer"){var P=Math.abs(I-N)<=i;var G=Math.abs(E-O)<=i;var K=Math.abs(C-l)<=i;var J=Math.abs(H-o)<=i;if(P){F.position.top=M._convertPositionTo("relative",{top:I,left:0}).top-M.margins.top}if(G){F.position.top=M._convertPositionTo("relative",{top:E-M.helperProportions.height,left:0}).top-M.margins.top}if(K){F.position.left=M._convertPositionTo("relative",{top:0,left:C}).left-M.margins.left}if(J){F.position.left=M._convertPositionTo("relative",{top:0,left:H-M.helperProportions.width}).left-M.margins.left}}if(!M.snapElements[r].snapping&&(P||G||K||J||L)){(M.options.snap.snap&&M.options.snap.snap.call(M.element,t,b.extend(M._uiHash(),{snapItem:M.snapElements[r].item})))}M.snapElements[r].snapping=(P||G||K||J||L)}}});b.ui.plugin.add("draggable","stack",{start:function(m,l){var j=b(this).data("draggable").options;var k=b.makeArray(b(j.stack)).sort(function(f,g){return(parseInt(b(f).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(!k.length){return}var n=parseInt(k[0].style.zIndex)||0;b(k).each(function(f){this.style.zIndex=n+f});this[0].style.zIndex=n+k.length}});b.ui.plugin.add("draggable","zIndex",{start:function(k,j){var l=b(j.helper),i=b(this).data("draggable").options;if(l.css("zIndex")){i._zIndex=l.css("zIndex")}l.css("zIndex",i.zIndex)},stop:function(j,i){var h=b(this).data("draggable").options;if(h._zIndex){b(i.helper).css("zIndex",h._zIndex)}}})})(d);(function(b,a){b.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var g=this.options,h=g.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(h)?h:function(f){return f.is(h)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[g.scope]=b.ui.ddmanager.droppables[g.scope]||[];b.ui.ddmanager.droppables[g.scope].push(this);(g.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var h=b.ui.ddmanager.droppables[this.options.scope];for(var g=0;g<h.length;g++){if(h[g]==this){h.splice(g,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(h,g){if(h=="accept"){this.accept=b.isFunction(g)?g:function(f){return f.is(g)}}b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(g){var h=b.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(h&&this._trigger("activate",g,this.ui(h)))},_deactivate:function(g){var h=b.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(h&&this._trigger("deactivate",g,this.ui(h)))},_over:function(g){var h=b.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(h.currentItem||h.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",g,this.ui(h))}},_out:function(g){var h=b.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(h.currentItem||h.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",g,this.ui(h))}},_drop:function(k,j){var l=j||b.ui.ddmanager.current;if(!l||(l.currentItem||l.element)[0]==this.element[0]){return false}var i=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=b.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==l.options.scope&&f.accept.call(f.element[0],(l.currentItem||l.element))&&b.ui.intersect(l,b.extend(f,{offset:f.element.offset()}),f.options.tolerance)){i=true;return false}});if(i){return false}if(this.accept.call(this.element[0],(l.currentItem||l.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",k,this.ui(l));return this.element}return false},ui:function(f){return{draggable:(f.currentItem||f.element),helper:f.helper,position:f.position,offset:f.positionAbs}}});b.ui.intersect=function(E,w,l){if(!w.offset){return false}var B=(E.positionAbs||E.position.absolute).left,C=B+E.helperProportions.width,r=(E.positionAbs||E.position.absolute).top,t=r+E.helperProportions.height;var z=w.offset.left,D=z+w.proportions.width,F=w.offset.top,v=F+w.proportions.height;switch(l){case"fit":return(z<=B&&C<=D&&F<=r&&t<=v);break;case"intersect":return(z<B+(E.helperProportions.width/2)&&C-(E.helperProportions.width/2)<D&&F<r+(E.helperProportions.height/2)&&t-(E.helperProportions.height/2)<v);break;case"pointer":var y=((E.positionAbs||E.position.absolute).left+(E.clickOffset||E.offset.click).left),x=((E.positionAbs||E.position.absolute).top+(E.clickOffset||E.offset.click).top),A=b.ui.isOver(x,y,F,z,w.proportions.height,w.proportions.width);return A;break;case"touch":return((r>=F&&r<=v)||(t>=F&&t<=v)||(r<F&&t>v))&&((B>=z&&B<=D)||(C>=z&&C<=D)||(B<z&&C>D));break;default:return false;break}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,i){var q=b.ui.ddmanager.droppables[m.options.scope]||[];var j=i?i.type:null;var r=(m.currentItem||m.element).find(":data(droppable)").andSelf();droppablesLoop:for(var o=0;o<q.length;o++){if(q[o].options.disabled||(m&&!q[o].accept.call(q[o].element[0],(m.currentItem||m.element)))){continue}for(var p=0;p<r.length;p++){if(r[p]==q[o].element[0]){q[o].proportions.height=0;continue droppablesLoop}}q[o].visible=q[o].element.css("display")!="none";if(!q[o].visible){continue}if(j=="mousedown"){q[o]._activate.call(q[o],i)}q[o].offset=q[o].element.offset();q[o].proportions={width:q[o].element[0].offsetWidth,height:q[o].element[0].offsetHeight}}},drop:function(j,i){var h=false;b.each(b.ui.ddmanager.droppables[j.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.ui.intersect(j,this,this.options.tolerance)){h=this._drop.call(this,i)||h}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(j.currentItem||j.element))){this.isout=1;this.isover=0;this._deactivate.call(this,i)}});return h},dragStart:function(h,g){h.element.parentsUntil("body").bind("scroll.droppable",function(){if(!h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}})},drag:function(h,g){if(h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}b.each(b.ui.ddmanager.droppables[h.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var m=b.ui.intersect(h,this,this.options.tolerance);var f=!m&&this.isover==1?"isout":(m&&this.isover==0?"isover":null);if(!f){return}var l;if(this.options.greedy){var n=this.options.scope;var o=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===n});if(o.length){l=b.data(o[0],"droppable");l.greedyChild=(f=="isover"?1:0)}}if(l&&f=="isover"){l.isover=0;l.isout=1;l._out.call(l,g)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,g);if(l&&f=="isout"){l.isout=0;l.isover=1;l._over.call(l,g)}})},dragStop:function(h,g){h.element.parentsUntil("body").unbind("scroll.droppable");if(!h.options.refreshPositions){b.ui.ddmanager.prepareOffsets(h,g)}}}})(d)})(window.comtop.cQuery);(function(a){a.cookie=function(c,l,o){if(typeof l!="undefined"){o=o||{};if(l===null){l="";o=$.extend({},o);o.expires=-1}var g="";if(o.expires&&(typeof o.expires=="number"||o.expires.toUTCString)){var h;if(typeof o.expires=="number"){h=new Date();h.setTime(h.getTime()+(o.expires*24*60*60*1000))}else{h=o.expires}g="; expires="+h.toUTCString()}var n=o.path?"; path="+(o.path):"";var j=o.domain?"; domain="+(o.domain):"";var b=o.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(l),g,n,j,b].join("")}else{var f=null;if(document.cookie&&document.cookie!=""){var m=document.cookie.split(";");for(var k=0;k<m.length;k++){var d=a.trim(m[k]);if(d.substring(0,c.length+1)==(c+"=")){f=decodeURIComponent(d.substring(c.length+1));break}}}return f}}})(window.comtop.cQuery);var _canLog=true;function _log(j,k){if(!_canLog){return}var h=Array.prototype.slice.apply(arguments,[1]);var m=new Date();var i=m.getHours()+":"+m.getMinutes()+":"+m.getSeconds()+"."+m.getMilliseconds();h[0]=i+" - "+h[0];try{switch(j){case"info":window.console.info.apply(window.console,h);break;case"warn":window.console.warn.apply(window.console,h);break;default:window.console.log.apply(window.console,h);break}}catch(l){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){alert("getDtNodeFromElement is deprecated");return $.ui.dynatree.getNode(el)}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this._isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},disable:function(){this.data.disable=true;var li=$(this.li);this.expand(false);li.children().removeClass("dynatree-active").addClass("dynatree-node-disable");li.find(".dynatree-checkbox").removeClass("dynatree-checkbox").addClass("dynatree-checkbox-disable");li.find(".dynatree-radio").removeClass("dynatree-radio").addClass("dynatree-radio-disable")},enable:function(){this.data.disable=false;var li=$(this.li);li.children().removeClass("dynatree-node-disable");li.find(".dynatree-checkbox-disable").removeClass("dynatree-checkbox-disable").addClass("dynatree-checkbox");li.find(".dynatree-radio-disable").removeClass("dynatree-radio-disable").addClass("dynatree-radio")},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="",imageSrc;if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){if(data.icon.charAt(0)==="/"){imageSrc=data.icon}else{imageSrc=opts.imagePath+data.icon}res+="<img src='"+imageSrc+"' alt='' />"}else{if(data.icon===false){}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?' title="'+data.tooltip.replace(/\"/g,"&quot;")+'"':"",href=data.href||"#";if(opts.noLink||data.noLink){nodeTitle='<span style="display:inline-block;" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</span>"}else{nodeTitle='<a hidefocus="true" onclick="return false;"  href="'+href+'" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling(),firstTime=false;if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){firstTime=true;this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(data.disable){this.disable()}if(data._customStyle){$(this.span).find("a").attr("style",data._customStyle)}if(firstTime&&opts.onCreate){opts.onCreate.call(tree,this,this.span)}if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if(this.li){$(this.li).data("nodeData",this.data)}if((this.bExpanded||includeInvisible===true)&&$.isArray(this.childList)){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){if(this.hasChildren()===undefined){return undefined}return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},isLoading:function(){return !!this._isLoading},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){var x=a.data.title.toLowerCase(),y=b.data.title.toLowerCase();return x===y?0:x>y?1:-1};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li);firstChild.li=null}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null,info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this._isLoading=false;if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this._isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this._isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"",cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents,reActive){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this&&!reActive){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(reActive){this._activate(true,true,reActive)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand()}if(activate){this.activate(this.tree.options.reactive)}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_updatePartSelectionState:function(){var sel;var initBSelected=this.bSelected;if(!this.hasChildren()){sel=(this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode);this._setSubSel(false);return sel}var i,l,cl=this.childList,allSelected=true,allDeselected=true;for(i=0,l=cl.length;i<l;i++){var n=cl[i],s=n._updatePartSelectionState();if(s!==false){allDeselected=false}if(s!==true){allSelected=false}}if(allSelected){sel=true}else{if(allDeselected){sel=false}else{sel=undefined}}this._setSubSel(sel===undefined);this.bSelected=(sel===true);if(this.tree.options.selectMode==4){this.bSelected=initBSelected}return sel},_fixSelectionState:function(flag){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);if(!node.data.unselectable){node._select(true,false,false)}});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){allChildsSelected=false;break}}if(allChildsSelected&&!flag){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(deep&&opts.selectMode===3){this._fixSelectionState()}if(deep&&opts.selectMode===4){this._fixSelectionState(true)}if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return !!this.data.isLazy},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this._isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this._isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},isExpanded:function(){return this.bExpanded},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand()}else{if(targetType==="checkbox"){this.toggleSelect()}else{this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){}else{return true}}}},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}if(handled){event.preventDefault()}},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}this.parent.removeChild(this);this.parent.render()},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}this.removeChildren();$(this.ul).addClass("tree-hide-ul");return}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){$("li",$(this.ul)).remove()}}this.childList=null}if(!isRecursiveCall){this._isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logDebug("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}}callback.call(tree,undefined,"notfound",seg,segList.length===0);tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree,opts=tree.options,pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){if(this.childList.length>0){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey===dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey===dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){$(this.ul).removeClass("tree-hide-ul");if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success,orgError=ajaxOptions.error,eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus,jqXHR){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}else{if(data&&data.hasOwnProperty("d")){data=(typeof data.d)=="string"?$.parseJSON(data.d):data.d}}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self,data,textStatus)}self.tree.logDebug("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(jqXHR,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",jqXHR,"\n",errorThrown);if(orgError){orgError.call(options,self,jqXHR,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=this.parent.data.isLazy?[]:null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}if(this.parent.ul){this.parent.ul.removeChild(this.li)}this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this]}if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}if(this.li){targetParent.ul.appendChild(this.li)}if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}if(!prevParent.isDescendantOf(targetParent)){prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version:$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options,self=this;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){this.logWarning("Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){this.logWarning("Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}var $ulInitialize=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot,isReloading=(opts.persist&&this.persistence.isReloading()),isLazy=false,prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{this._createFromTag(root,$ulInitialize);$ulInitialize.remove()}}}this._checkConsistency();if(!isLazy&&(opts.selectMode==3||opts.selectMode==4)){root._updatePartSelectionState()}this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy){if(opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}if(callback){callback.call(this,"ok")}}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored; use onPostInit instead.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored; use onPostInit instead.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode,data,textStatus){if(opts.selectMode==3){dtnode.tree.tnRoot._updatePartSelectionState()}if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,false)}if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode,XMLHttpRequest,textStatus,errorThrown){if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,true,XMLHttpRequest,textStatus,errorThrown)}if(callback){callback.call(dtnode.tree,"error",XMLHttpRequest,textStatus,errorThrown)}};this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length){title=$liSpan.html()}else{if($liA.length){title=$liA.html();href=$liA.attr("href");target=$liA.attr("target");tooltip=$liA.attr("title")}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href){data.href=href;data.target=target}if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null,$target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var markerOffset="0 0";switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");markerOffset="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");markerOffset="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");markerOffset="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:$target,offset:markerOffset})}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options,dnd=this.options.dnd,res=null,nodeTag=$(node.span),hitMode,enterResponse;switch(eventName){case"helper":var $helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());$("ul.dynatree-container",node.tree.divTree).append($helper);$helper.data("dtSourceNode",node);res=$helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;if(!res){res=false}else{res={over:((res===true)||(res==="over")||$.inArray("over",res)>=0),before:((res===true)||(res==="before")||$.inArray("before",res)>=0),after:((res===true)||(res==="after")||$.inArray("after",res)>=0)}}ui.helper.data("enterResponse",res);break;case"over":enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode);if(res==="over"||res==="before"||res==="after"){hitMode=res}}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false&&hitMode!==null);break;case"drop":var isForbidden=ui.helper.hasClass("dynatree-drop-reject");hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop&&!isForbidden){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){if(this.options.debugLevel>=0){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.")}return this._create()}if(this.options.debugLevel>=2){_log("debug","ui.dynatree._init() was called; no current default functionality.")}},_create:function(){var opts=this.options;if(opts.debugLevel>=1){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel)}this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";var timer=null;if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=$.ui.dynatree.getNode(event.target);if(!dtnode){return true}if(dtnode.data.disable){return}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":if(typeof o.onDblClick==="function"&&(dtnode.data.isFolder===true||dtnode.data.isFolder==="true")){if(dtnode._timer_){clearTimeout(dtnode._timer_);dtnode._timer_=null}else{dtnode._timer_=setTimeout(function(){dtnode._onClick(event);dtnode._timer_=null},200)}}else{dtnode._onClick(event)}if(typeof o.onClick==="function"){o.onClick.call(tree,dtnode,event)}break;case"dblclick":if(typeof o.onDblClick==="function"){o.onDblClick.call(tree,dtnode,event)}dtnode._onDblClick(event);break;case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){event=$.event.fix(event||window.event);var dtnode=$.ui.dynatree.getNode(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.version="$Version:$";$.ui.dynatree.getNode=function(el){if(el instanceof DynaTreeNode){return el}if(el.selector!==undefined){el=el[0]}while(el){if(el.dtnode){return el.dtnode}el=el.parentNode}return null};$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData;$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:"",children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,reactive:true,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:0,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,href:null,icon:false,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,scroll:true,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:true,helper:function(event){var sourceNode=$.ui.dynatree.getNode(event.target);if(!sourceNode){return"<div></div>"}return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},start:function(event,ui){var sourceNode=ui.helper.data("dtSourceNode");return !!sourceNode},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,prevTargetNode=ui.helper.data("dtTargetNode")||null,targetNode=$.ui.dynatree.getNode(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,targetNode=ui.helper.data("dtTargetNode")||null,mouseDownEvent=draggable._mouseDownEvent,eventType=event.type,dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}}(window.comtop.cQuery));
/*!
 * jquery.event.drag - v 2.0.0
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(j,f,i){var h=typeof j=="string"?j:"",g=d.isFunction(j)?j:d.isFunction(f)?f:null;if(h.indexOf("drag")!==0){h="drag"+h}i=(j==g?f:i)||{};return g?this.bind(h,i,g):this.trigger(h)};var b=d.event,a=b.special,c=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(h){var g=d.data(this,c.datakey),f=h.data||{};g.related+=1;if(!g.live&&h.selector){g.live=true;b.add(this,"draginit."+c.livekey,c.delegate)}d.each(c.defaults,function(i,j){if(f[i]!==undefined){g[i]=f[i]}})},remove:function(){d.data(this,c.datakey).related-=1},setup:function(){if(d.data(this,c.datakey)){return}var f=d.extend({related:0},c.defaults);d.data(this,c.datakey,f);b.add(this,"mousedown",c.init,f);if(this.attachEvent){this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){if(d.data(this,c.datakey).related){return}d.removeData(this,c.datakey);b.remove(this,"mousedown",c.init);b.remove(this,"draginit",c.delegate);c.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",c.dontstart)}},init:function(h){var f=h.data,g;if(f.which>0&&h.which!=f.which){return}if(d(h.target).is(f.not)){return}if(f.handle&&!d(h.target).closest(f.handle,h.currentTarget).length){return}f.propagates=1;f.interactions=[c.interaction(this,f)];f.target=h.target;f.pageX=h.pageX;f.pageY=h.pageY;f.dragging=null;g=c.hijack(h,"draginit",f);if(!f.propagates){return}g=c.flatten(g);if(g&&g.length){f.interactions=[];d.each(g,function(){f.interactions.push(c.interaction(this,f))})}f.propagates=f.interactions.length;if(f.drop!==false&&a.drop){a.drop.handler(h,f)}c.textselect(false);b.add(document,"mousemove mouseup mouseleave",c.handler,f);return false},interaction:function(g,f){return{drag:g,callback:new c.callback(),droppable:[],offset:d(g)[f.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(g){var f=g.data;switch(g.type){case !f.dragging&&"mousemove":if(Math.pow(g.pageX-f.pageX,2)+Math.pow(g.pageY-f.pageY,2)<Math.pow(f.distance,2)){break}g.target=f.target;c.hijack(g,"dragstart",f);if(f.propagates){f.dragging=true}case"mousemove":if(f.dragging){c.hijack(g,"drag",f);if(f.propagates){if(f.drop!==false&&a.drop){a.drop.handler(g,f)}break}g.type="mouseup"}case"mouseup":case"mouseleave":b.remove(document,"mousemove mouseup mouseleave",c.handler);if(f.dragging){if(f.drop!==false&&a.drop){a.drop.handler(g,f)}c.hijack(g,"dragend",f)}c.textselect(true);if(f.click===false&&f.dragging){d.event.triggered=true;setTimeout(function(){d.event.triggered=false},20);f.dragging=false}break}return false},delegate:function(h){var f=[],i,g=d.data(this,"events")||{};d.each(g.live||[],function(j,k){if(k.preType.indexOf("drag")!==0){return}i=d(h.target).closest(k.selector,h.currentTarget)[0];if(!i){return}b.add(i,k.origType+"."+c.livekey,k.origHandler,k.data);if(d.inArray(i,f)<0){f.push(i)}});if(!f.length){return false}return d(f).bind("dragend."+c.livekey,function(){b.remove(this,"."+c.livekey)})},hijack:function(g,n,q,o,j){if(!q){return}var p={event:g.originalEvent,type:g.type},l=n.indexOf("drop")?"drag":"drop",s,k=o||0,h,f,r,m=!isNaN(o)?o:q.interactions.length;g.type=n;g.originalEvent=null;q.results=[];do{if(h=q.interactions[k]){if(n!=="dragend"&&h.cancelled){continue}r=c.properties(g,q,h);h.results=[];d(j||h[l]||q.droppable).each(function(t,i){r.target=i;s=i?b.handle.call(i,g,r):null;if(s===false){if(l=="drag"){h.cancelled=true;q.propagates-=1}if(n=="drop"){h[l][t]=null}}else{if(n=="dropinit"){h.droppable.push(c.element(s)||i)}}if(n=="dragstart"){h.proxy=d(c.element(s)||h.drag)[0]}h.results.push(s);delete g.result;if(n!=="dropinit"){return s}});q.results[k]=c.flatten(h.results);if(n=="dropinit"){h.droppable=c.flatten(h.droppable)}if(n=="dragstart"&&!h.cancelled){r.update()}}}while(++k<m);g.type=p.type;g.originalEvent=p.event;return c.flatten(q.results)},properties:function(h,f,g){var i=g.callback;i.drag=g.drag;i.proxy=g.proxy||g.drag;i.startX=f.pageX;i.startY=f.pageY;i.deltaX=h.pageX-f.pageX;i.deltaY=h.pageY-f.pageY;i.originalX=g.offset.left;i.originalY=g.offset.top;i.offsetX=h.pageX-(f.pageX-i.originalX);i.offsetY=h.pageY-(f.pageY-i.originalY);i.drop=c.flatten((g.drop||[]).slice());i.available=c.flatten((g.droppable||[]).slice());return i},element:function(f){if(f&&(f.jquery||f.nodeType==1)){return f}},flatten:function(f){return d.map(f,function(g){return g&&g.jquery?d.makeArray(g):g&&g.length?c.flatten(g):g})},textselect:function(f){d(document)[f?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",f?"off":"on").css("MozUserSelect",f?"":"none")},dontstart:function(){return false},callback:function(){}};c.callback.prototype={update:function(){if(a.drop&&this.available.length){d.each(this.available,function(f){a.drop.locate(this,f)})}}};a.draginit=a.dragstart=a.dragend=c})(window.comtop.cQuery);(function(a,b){b.UI.getBytesLength=function(g){var d=0;for(var f=0;f<g.length;f++){var h=g.charCodeAt(f);if((h>=1&&h<=126)||(65376<=h&&h<=65439)){d++}else{d+=2}}return d};b.UI.intercept=function(j,h){var f="";var d=0;for(var g=0;g<j.length;g++){var k=j.charCodeAt(g);if((k>=0&&k<=126)||(65376<=k&&k<=65439)){d++}else{d+=2}if(d<=h){f+=j.charAt(g)}else{break}}return f}})(window.comtop.cQuery,window.comtop);(function(f){var d=f.cQuery;f.UI.Overlay=a;var b="overLay_"+comtop.guid();function a(){var h,g=a.fx;if(g._dom&&!this[b]){return g}h=d("<div></div>");h.addClass("cui_overlay").css({width:g._page_width(),height:g._page_height()});d(document.body).append(h);if(!this[b]){g._dom=h;return g}else{this._dom=h}}var c;a.fx=a.prototype={_page_height:d.page.height,_page_width:d.page.width,_timeout:null,_resize:function(){if(this._dom===undefined){return}this._dom.css({width:0,height:0}).delay(10).css({width:this._page_width(),height:this._page_height()})},show:function(h){this._resize();d(window).on("resize",this._resize);var g=this._dom.data("opa")||0;h=g+parseInt(h*100);this._dom.data("opa",h).css("opacity",h/100).show()},hide:function(h){var g=this._dom.data("opa");h=g-parseInt(h*100);this._dom.data("opa",h);this._dom.css("opacity",h/100);if(h<=0){d(window).off("resize",this._resize);this._dom.hide()}}};a.fx[b]=true})(window.comtop);(function(a,b){b.UI.Float=b.UI.Base.extend({options:{uitype:"Float",target:null,mode:"right",offset:{x:0,y:0},outer:true,tolerance:null,lock:""},_create:function(){var d=this.options;this.$element=d.el;var c=this;if(d.target){this._move();this._bindTarget()}if(d.lock=="fixed"){this._fixElement()}else{if(d.lock=="top"){this.y=this.$element.offset().top;if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){this._setGlobal()}}}this._bindEvent()},_bindEvent:function(){var d=this;var f=this.options;var c=this.$element;if(f.target){a(window).bind("resize.float",function(){d._bindTarget();if(f.lock=="fixed"){d._fixElement()}})}if(f.lock=="top"){a(window).bind("scroll",function(){d._bindToTop()});a(window).bind("resize.float",function(){this.y=c.offset().top;var g=setTimeout(function(){var h=c.data("clone");if(h){c.removeData("clone");a(h).remove();c.css("visibility","visible")}d._bindToTop()},10)})}},_bindTarget:function(){var f=this.options;var d=this.$element;var c=f.tolerance?f.tolerance(d[0],f):this._getLocation();d.css({position:"absolute",top:c.y,left:c.x,zIndex:5000})},_fixElement:function(){var c=this.$element;var f=this.options;var i=f.offset.y;var h=f.offset.x;if(f.target){i=c.offset().top;h=c.offset().left}if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){this._move();this._setGlobal();var g="document."+(b.Browser.isQM?"body":"documentElement")+".scrollTop";var d="document."+(b.Browser.isQM?"body":"documentElement")+".clientHeight";var k="document."+(b.Browser.isQM?"body":"documentElement")+".scrollLeft";var j="document."+(b.Browser.isQM?"body":"documentElement")+".clientWidth";c.css({position:"absolute"});if(isNaN(i)&&i.indexOf("%")!=-1){c[0].style.setExpression("top","eval("+g+" +"+parseFloat(i)+" * "+d+' / 100) + "px"')}else{c[0].style.setExpression("top","eval("+g+" +"+parseFloat(i)+') + "px"')}if(isNaN(h)&&h.indexOf("%")!=-1){c[0].style.setExpression("left","eval("+k+" +"+parseFloat(h)+" * "+j+' / 100) + "px"')}else{c[0].style.setExpression("left","eval("+k+" +"+parseFloat(h)+') + "px"')}}else{c.css({position:"fixed",top:i,left:h})}},_bindToTop:function(){var c=this.$element;var d=a(window).scrollTop();var f=c.data("clone");if(d>this.y){if(!f){f=this._copyElement();c.css("visibility","hidden");if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){if(b.Browser.isQM){a(f)[0].style.setExpression("top",'eval(document.body.scrollTop) + "px"')}else{a(f)[0].style.setExpression("top",'eval(document.documentElement.scrollTop) + "px"')}}else{a(f).css({position:"fixed",top:"0px"})}}}else{c.removeData("clone");a(f).remove();c.css("visibility","visible")}},_copyElement:function(){var c=this.$element;var d=c.clone();a(d).css({position:"absolute",width:this._getWidth(),left:c.offset().left});c.data("clone",d);a(d).appendTo(document.body);return d},_getLocation:function(){var n=this.options;var x=n.target;var d=this.$element;var q=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?0:a(x).offset().left;var k=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?0:a(x).offset().top;var t=document.documentElement.clientWidth;var h=document.documentElement.clientHeight;if(b.Browser.isQM){t=document.body.clientWidth;h=document.body.clientHeight}var g=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?t:a(x).outerWidth();var i=(a(x)[0].tagName=="HTML"||a(x)[0].tagName=="html")?h:a(x).outerHeight();var p=parseFloat(a(x).css("borderTopWidth"));p=isNaN(p)?0:p;var l=parseFloat(a(x).css("borderRightWidth"));l=isNaN(l)?0:l;var v=parseFloat(a(x).css("borderBottomWidth"));v=isNaN(v)?0:v;var m=parseFloat(a(x).css("borderLeftWidth"));m=isNaN(m)?0:m;var c=d.outerWidth();var j=d.outerHeight();var w=parseFloat(n.offset.x);w=isNaN(w)?0:w;var u=parseFloat(n.offset.y);u=isNaN(u)?0:u;switch(n.mode){case"top":var f=q+(g-c)/2;var o=n.outer?k-j-u:k+u+p;return{x:f,y:o};case"right":var s=n.outer?q+g+w:q+g-c-w-l;var r=k+(i-j)/2;return{x:s,y:r};case"bottom":var f=q+(g-c)/2;var o=n.outer?k+i+u:k+i-j-u-v;return{x:f,y:o};case"left":var f=n.outer?q-c-w:q+w+m;var o=k+(i-j)/2;return{x:f,y:o}}},_getWidth:function(){var c=this.$element.width();if(!a.browser.msie&&(this.$element[0].tagName=="TABLE"||this.$element[0].tagName=="table")){c=this.$element.outerWidth()}return c},_move:function(){var d=this.$element;var c=d.parent()[0].tagName;if(c!="BODY"&&c!="body"){d.appendTo(document.body)}},_addCSSRule:function(d,f){if(document.styleSheets.length<1){document.write("<style type='text/css'></style>")}var c=document.styleSheets[document.styleSheets.length-1];c.cssRules?c.insertRule(d+"{"+f+"}",c.cssRules.length):c.addRule(d,f)},_setGlobal:function(){var c=a.data(document,"initCss");if(!c){this._addCSSRule("body","background-image: url(about:blank);background-attachment: fixed;");a.data(document,"initCss",true)}},_isIE6:function(){return a.browser.msie&&(a.browser.version=="6.0")&&!a.support.style||(!!window.ActiveXObject&&document.compatMode!="CSS1Compat")}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Button=b.UI.Base.extend({options:{uitype:"Button",label:"?? ?",hide:false,disable:false,icon:"",on_click:null,menu:null},_init:function(){this.options.menuId="button_"+b.guid()},_create:function(){var c=this.options;if(c.hide){this.hide()}if(c.disable){this.disable(true)}if(c.icon){this._setIcon(c.icon)}if(c.menu){if(a.isFunction(c.menu)){c.menu=c.menu()}c.menu=cui("#"+c.menuId).menu(c.menu);c.el.children("div").unbind("click")}},_mouseoverHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_visited")},_mouseoutHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_visited").removeClass("button_box_hover")},_mouseupHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_hover");a(c).addClass("button_box_visited")},_mousedownHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_hover")},_clickHandler:function(g,c,f){if(this.options.disable){return}g.stopPropagation();var d=this.options.menu;d&&d.show();this.options.on_click&&this.options.on_click(g,this)},_setIcon:function(c){var d;if(c.indexOf("/")!=-1){d="url("+c+")"}else{d="url("+this._getIconPath("comtop.ui")+"themes/default/images/button/"+c+")"}this.options.el.find(".button_icon_container").css("backgroundImage",d)},_getIconPath:function(h){var f=a("script");var g;var d=new RegExp(h);for(var c=0;c<f.length;c++){g=f.eq(c).attr("src");if(d.test(g)){break}}g=g.substr(0,g.lastIndexOf("/"));g=g.substr(0,g.lastIndexOf("/")+1);return g},disable:function(c){if(c==true){this.options.disable=true;this.options.el.children("div").addClass("button_box_disable").removeClass("button_box_visited").removeClass("button_box_hover");if(this.options.menu){this.options.menu.hide&&this.options.menu.hide()}}else{this.options.disable=false;this.options.el.children("div").removeClass("button_box_disable")}},hide:function(){this.options.el.hide();this.options.menu&&this.options.menu.hide&&this.options.menu.hide()},setLabel:function(c){var d=typeof c;if(d==="number"||d==="string"){this.options.label=c;a(".button_text_container",this.options.el).html(c)}}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.Borderlayout=b.UI.Base.extend({options:{uitype:"Borderlayout",id:"",is_root:true,gap:"0px 0px 0px 0px",fixed:{top:true,middle:false,left:true,center:false,right:true,bottom:true},items:[],on_sizechange:null},_init:function(){},_create:function(){var c=this.options;this.id=b.guid();this.el=c.el;if(this.el.parent().prop("tagName")==="BODY"){this.body=true;this.el.parent().css({margin:0,overflow:"hidden"})}this._setItems();this._createDom();this._bindHandler()},_setItems:function(){var c=this.options.items,f=this.el;var d=this.items_default={position:"left",width:-1,height:-1,gap:"0px 0px 0px 0px",resizable:false,min_size:30,max_size:200,split_size:2,is_header:false,header_content:"",header_height:30,collapsable:false,url:".",show_expand_icon:false};if(c.length){return}var g={string:String,number:parseInt,"boolean":function(h){return h==="true"}};this.setattr=true;f.children("[position]").each(function(){var i={};c.push(i);for(var h in d){i[h]=a(this).attr(h)===undefined?d[h]:g[typeof(d[h])](a(this).attr(h))}})},_isCols:function(c){if(c==="left"||c=="center"||c=="right"){return true}},_createDom:function(){var p=this.options.items,d=this.el,w=this.setattr,n={},m={},y={},h=this.options.fixed,j={top:"bottom",bottom:"top",left:"right",right:"left"},k={},z=this.min_size={},g=this.max_size={},r=this.collapsable={},l=this.show_expand_icon={},q=this.items_default,v={};for(var x=p.length;x--;){var A=p[x],C=A.position;A=w?p[x]:a.extend(q,p[x]);this._isCols(C)&&(m[C]=A.width!==-1?A.width:"auto");y[(this._isCols(C)?"middle":C)]=A.height!==-1?A.height:"auto";var s=A.gap.split(" "),o=s.length;o===1&&(s[1]=s[2]=s[3]=s[0]);o===2&&(s[2]=s[0],s[3]=s[1]);o===3&&(s[3]=s[1]);k[C]={"margin-top":parseInt(s[0]),"margin-right":parseInt(s[1]),"margin-bottom":parseInt(s[2]),"margin-left":parseInt(s[3])};h[C]&&(z[C]=A.min_size,g[C]=A.max_size);var c='<div class="bl_'+C+" bl_"+C+this.id+'">',u=header="",f=0;if(C!=="center"){var t=this._isCols(C)?"width":"height";u='<div class="'+(A.resizable?"bl_move":"bl_border")+'" style="'+t+":"+A.split_size+'px;">'+((h[C]&&A.collapsable&&A.show_expand_icon)?'<div class="bl_fold bl_unfold"></div>':"")+"</div>";k[C]["margin-"+j[C]]+=A.split_size}if(h[C]&&A.collapsable){r[C]=A.collapsable}if(A.id){v[C]=A.id}if(A.is_header){header='<div class="bl_header" style="height:'+A.header_height+"px;line-height:"+A.header_height+'px;">'+A.header_content+"</div>"}c+='<div class="bl_inner" header="'+(A.is_header?A.header_height:0)+'">'+header+'<div class="bl_box_'+C+" bl_box"+this.id+'">'+(A.url!=="."?'<iframe url="'+A.url+'" frameborder="0" class="bl_iframe_page"></iframe>':"")+"</div></div>";n[C]=(c+=u+"</div>")}var B=a("<div class='bl_middle bl_middle"+this.id+"'></div>").append(n.left).append(n.center).append(n.right);d.append(n.top).append(B.html()?B:"").append(n.bottom).append("<div class='bl_overlay'></div>");d.find(".bl_box"+this.id).each(function(){var i=this.className.match(/top|left|center|bottom|right/)[0];if(v[i]){var D=a("#"+v[i],d).css({height:"100%"}).append(a(this).html());a(this).append(D)}else{var D=d.children("[position="+i+"]").css({height:"100%"}).append(a(this).html());a(this).html(D)}});d.find(".bl_iframe_page").each(function(){a(this).attr("src",a(this).attr("url")).removeAttr("url")});this._setLayout(m,y);this._setBoxLayout(k)},_setLayout:function(i,j){var c=this,k=this.options.gap,g=this.el;c.auto_lays={width:[],height:[]};var k=k.split(" ");this.margin_v=parseInt(k[0])+(k[2]===undefined?parseInt(k[0]):parseInt(k[2])),margin_right=k[1]===undefined?parseInt(k[0]):parseInt(k[1]),this.margin_r=margin_right+(k[3]===undefined?margin_right:parseInt(k[3]));this.scope={};var f=this.scope=this._getParentLayout(b.Browser.isIE8);i=this._separateAutoLayout(i,f.width,"width");j=this._separateAutoLayout(j,f.height,"height");var h=this.layout=a.extend(i,j);for(var d in h){g.find(".bl_"+d+this.id).eq(0).css((this._isCols(d)?"width":"height"),h[d])}a(window).on("resize",function(){c._resizeHandle(true)});g.addClass("bl_main").css("padding",k)},_resizeHandle:function(d){var c=this._getParentLayout();this._resetLayout(c,this.scope,d);this.scope.width=c.width;this.scope.height=c.height},_separateAutoLayout:function(l,h,d){var g=[],k={},j=this.options.fixed;for(var c in l){if(!j[c]){this.auto_lays[d].push(c);g.push(c);continue}l[c]=typeof l[c]!=="number"?(d==="width"?500:300):l[c];h-=l[c];k[c]=l[c]}for(var f=g.length;f--;){k[g[f]]=h/g.length}return k},_getParentLayout:function(){var h=this.el.parent().css({positon:"relative",overflow:"hidden"}),g=this.el,j=b.Browser,f=this.scope;var i=document.createElement("div");i.style.width="100%";i.style.height="100%";i.style.positon="absolute";i.style.left=0;i.style.top=0;h.append(i);var d=a(i).width();if(this.body){var c=j.isQM?(window.innerHeight||document.documentElement.offsetHeight-4):a(window).height()}else{var c=a(i).height()}a(i).remove();h.css("positon","");if(!this.body){h.css("overflow","")}return{width:f.fix_width||(d-this.margin_r-1),height:f.fix_height||(c-this.margin_v)}},_setBoxLayout:function(f){var g=this.el,i=this.box_height={};for(var d in f){var h=g.find(".bl_box_"+d).eq(0),c=h.parent();i[d]=c.parent().css("overflow","hidden").height()-c.attr("header")-0-f[d]["margin-top"]-f[d]["margin-bottom"];c.parent().css("overflow","");c.css(f[d]);h.css("height",i[d])}},_resetLayout:function(f,d,g){var h=f.width-d.width;var c=f.height-d.height;if(h){this._setWidthAndHeight(h,"width",g)}if(c){this._setWidthAndHeight(c,"height",g)}},setWidth:function(d){var c=b.Browser.isQM?(d+this.margin_r):d;this.el.css("width",c);this.scope.fix_width=d;this._resizeHandle(false)},setHeight:function(d){var c=b.Browser.isQM?(d+this.margin_v):d;this.el.css("height",c);this.scope.fix_height=d;this._resizeHandle(false)},_setWidthAndHeight:function(q,g,f){var d=this.el,j=this.auto_lays[g],p=j.length,m=this.layout,c=q,o=0;for(var h=p;h--;){o+=m[j[h]]}for(var h=p;h--;){var n=Math.round(q*m[j[h]]/o),k=d.find(".bl_"+j[h]+this.id);var l=(h===0?c:n);c-=n;k.css(g,m[j[h]]+=l);g==="height"&&this._setBoxHeight(k,l)}if(!f){this._childrenHanlder()}},_setBoxHeight:function(c,f){var d=this.box_height;c.find(".bl_box"+this.id).each(function(h,i){var g=a(i).attr("class").match(/top|left|center|bottom|right/)[0];a(i).css("height",d[g]+=f)})},_bindHandler:function(){var c=this,d=this.el;d.find(".bl_top>.bl_move, .bl_bottom>.bl_move").on("mousedown",function(f){c._drag(f,this,"height")});d.find(".bl_left>.bl_move, .bl_center>.bl_move, .bl_right>.bl_move").on("mousedown",function(f){c._drag(f,this,"width")});d.find(".bl_top .bl_fold, .bl_bottom .bl_fold").on("mousedown",function(f){c._fold(f,this,"height")});d.find(".bl_middle .bl_fold").on("mousedown",function(f){c._fold(f,this,"width")})},_drag:function(A,l,r){A.stopPropagation(),A.preventDefault();var k=A.pageX,j=A.pageY,s;var f=this,z=this.layout,i=this.box_height,w=this.min_size,c=this.max_size;var d=a(l).parent(),o=d.prev(),q=d.next(),B=d.parent().not(".bl_main:eq(0)");if(o.length){q=d}else{o=d}var p=o.attr("class").match(/top|left|center|bottom|middle|right/)[0],t=q.attr("class").match(/top|left|center|bottom|middle|right/)[0];var m=z[p],n=z[t];var u=w[p],v=w[t];var g=c[p],h=c[t];this.el.children(".bl_overlay").show().css("height",this.scope.height).css("cursor",r==="width"?"col-resize":"row-resize").on("mousemove",function(C){C.stopPropagation();C.preventDefault();var x=C.pageX,y=C.pageY;var D=B.length?x-k:y-j;if(D===0||D*s>0){return}s=0;if(g!==undefined&&(m+D>g||m+D<u)){D=D>0?g-m:u-m;s=D}if(h!==undefined&&(n-D>h||n-D<v)){D=D<0?n-h:n-v;s=D}o.css(r,m+=D);q.css(r,n-=D);r==="height"&&(f._setBoxHeight(o,D),f._setBoxHeight(q,-D));j=y;k=x;f._childrenHanlder()}).on("mouseup mouseout",function(x){x.stopPropagation();a(this).hide().off("mousemove");(z[p]=z[p]===m?z[p]:m);(z[t]=z[t]===n?z[t]:n)})},_fold:function(d,f,c){d.stopPropagation();if(d.button>1){return}this._foldAction(a(f).parent().parent(),c)},_foldAction:function(j,f,d){var i=this.layout,c=j.attr("class").match(/top|left|center|bottom|right/)[0],h=j.data("fold"),g=j.children(".bl_move,.bl_border").eq(0).children().eq(0);if(this.collapsable[c]){if(d===true&&h!==undefined||d===false&&h===undefined){return}if(h===undefined){this._setWidthAndHeight(i[c],f);j.children(".bl_inner").hide();j.data("fold",i[c]).css(f,i[c]=0);g.removeClass("bl_unfold");return}this._setWidthAndHeight(-h,f);g.addClass("bl_unfold");j.children(".bl_inner").show();j.removeData("fold").css(f,i[c]=h).children(".bl_inner")}},_childrenHanlder:function(){if(!this.child_bl){var d=this.child_bl=this.el.find("[uitype=Borderlayout]");d=d.length===0?null:d}var d=this.child_bl;if(d){d.each(function(){cui(this)._resizeHandle()})}var c=this.options.on_sizechange;if(c&&typeof c==="function"){c()}},setContentURL:function(c,d){var g=this.el.find(".bl_"+c+this.id).eq(0).find(".bl_box"+this.id).eq(0).children().eq(0);var f=g.find(".bl_iframe_page");if(f.length){f.eq(0).attr("src",d)}else{g.append('<iframe class="bl_iframe_page" src="'+d+'" frameborder="0"></iframe>')}},setCollapse:function(c,d){if(this.options.fixed[c]){this._foldAction(a(".bl_"+c+this.id),(this._isCols(c)?"width":"height"),d)}},getCollapseState:function(c){return{collapsed:!!this.el.find(".bl_"+c+this.id).eq(0).data("fold"),contentHeight:this.box_height[c],contentWidth:this.el.find(".bl_"+c+this.id).eq(0).width()}},setGap:function(c){var d=this.options.gap;this.el.css("padding",d=c);var d=c.split(" ");this.margin_v=parseInt(d[0])+(d[2]===undefined?parseInt(d[0]):parseInt(d[2]));this._resizeHandle()},setTittle:function(c,d){a(".bl_"+c+this.id).find(".bl_header").eq(0).html(d)},setCollapsable:function(c,d){if(this.options.fixed[c]){this.collapsable[c]=d;var f=a(".bl_"+c).children(".bl_move").eq(0).children(".bl_fold").eq(0);if(d){f.show();return}f.hide()}}})})(window.comtop);(function(f,o){var h=null;o.UI.Calender=o.UI.Base.extend({options:{uitype:"Calender",name:"",model:"date",isrange:false,trigger:"click",value:[],format:"",entering:false,emptytext:"",readonly:false,disable:false,icon:true,textmode:false,panel:1,zindex:9999,width:"200px",okbtn:false,mindate:null,maxdate:null,nocurrent:false,iso8601:false,on_change:null,sunday_first:false},tipPosition:".C_CR_calInput_bd",_init:function(v){var w=this,y=w.options;if(v.value){y.value=!y.value?[v.value]:y.value}y.value=y.value===null?[]:y.value;y.mindate=[v.mindate,null];y.maxdate=[v.maxdate,null];y.uuid=o.guid();y.template="calender.html";y.curModel=[];y.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"};y.inputFocusClass="C_CR_calInput_focus";y.inputDisClass="C_CR_calInput_rd";y.inputErrClass="C_CR_calInput_err";y.selDate=[];y.cache={yearPop:{},selDate:[]};y.isBuild=false;y.inputEl=null;y.tipTxt=null;y.pEl=null;y.datePanel=[];y.yearPanel=[];y.monthPanel=[];y.quarterPanel=[];y.timePanel=[];y.weekPanel=[];y.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]};y.selIndex=0;y.activePop=null;var x=y.model==="all"?"date":y.model;y.curModel=[x,"for"+x.charAt(0).toUpperCase()+x.substring(1),x+"Frame",x+"Panel"];if(y.model==="all"&&v.format){y.format=f.parseJSON(v.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));y.formatList=f.extend(y.formatList,y.format);y.format=y.formatList[y.curModel[0]]}else{if(!v.format){y.format=y.formatList[y.curModel[0]]}else{y.formatList[y.curModel[0]]=y.format}}y.okbtn=/[y|M|q|w|d]/.test(y.format)?y.okbtn:true},_create:function(){var v=this,x=v.options;x.inputEl=x.el.find(":text");v._getDefault();v.setValue(f.extend(true,[],x.selDate),true);for(var w=0;w<x.cache.selDate.length;w++){if(x.cache.selDate[w]===null){x.selIndex=w;break}else{x.selIndex++}}if(x.disable||x.readonly){x.el.children(".C_CR_calInput_bd").addClass(x.inputDisClass)}if(!x.entering||x.disable||x.readonly){x.disable&&x.inputEl.attr("disabled",true);(x.readonly||!x.entering)&&x.inputEl.attr("readonly",true)}},_getDefault:function(){var v=this,w=v.options,x=[];if(w.value.length!=0){x=w.value}else{if(w.isrange){x=f.trim(w.inputEl.eq(0).val()).split("~");x=!x.join("")?[null,null]:x}else{f.each(w.inputEl,function(y,z){x.push(f.trim(f(this).val()))})}}w.selDate=s(k(x,w.format))},_buildData:function(v,D){var G=this,w=G.options,z,A,y,B,E,x;if(w.isBuild){if(D===undefined){w[w.curModel[3]]=[];w.yearPop[w.curModel[1]]=[]}else{x=!G._isReady("yearPop",D);w[w.curModel[3]][D]=[];x&&(w.yearPop[w.curModel[1]][D]=[])}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="date"){if(D===undefined){for(B=0;B<w.panel;B++){z=v[B]?new Date(v[B][0],v[B][1],1):new Date(z.getFullYear(),z.getMonth()+1,1);w.yearPop.forDate.push(u(z.getFullYear()-4,12));w.datePanel.push(j.call(G,z))}}else{z=new Date(v[0][0],v[0][1],1);x&&(w.yearPop.forDate[D]=u(z.getFullYear()-4,12));w.datePanel[D]=j.call(G,z)}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="year"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.yearPanel[B-1].data[11]+14;w.yearPop.forYear.push(u(E-4,12));w.yearPanel.push({year:E,month:null,data:u(E-7,18)})}}else{E=v[0][0];x&&(w.yearPop.forYear[D]=u(E-4,12));w.yearPanel[D]={year:E,month:null,data:u(E-7,18)}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="month"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.monthPanel[B-1].year+1;w.yearPop.forMonth.push(u(E-4,12));w.monthPanel.push({year:E,month:null,data:c()})}}else{E=v[0][0];x&&(w.yearPop.forMonth[D]=u(E-4,12));w.monthPanel[D]={year:E,month:null,data:c()}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="quarter"){if(D===undefined){for(B=0;B<w.panel;B++){E=v[B]?v[B][0]:w.quarterPanel[B-1].year+1;w.yearPop.forQuarter.push(u(E-4,12));w.quarterPanel.push({year:E,month:null,quarter:[1,2,3,4]})}}else{E=v[0][0];x&&(w.yearPop.forQuarter[D]=u(E-4,12));w.quarterPanel[D]={year:E,month:null,quarter:[1,2,3,4]}}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="date"){var C;w.timePanel=[];C=w.isrange?2:1;for(A=0;A<C;A++){y=w.cache.selDate[A]?w.cache.selDate[A]:b(new Date(),w.format);w.timePanel.push([y[5],y[6],y[7]])}}if((!w.isBuild&&w.model==="all")||w.curModel[0]==="week"){var F;if(D===undefined){for(B=0;B<w.panel;B++){if(v[B]){F=o.Date.getOnWeek(new Date(v[B][0],v[B][1]>0?v[B][1]:1,v[B][2]||1),w.iso8601,w.sunday_first)}E=v[B]?F.year:w.weekPanel[B-1].year+1;w.yearPop.forWeek.push(u(E-4,12));w.weekPanel.push({year:E,month:null,data:d(E,w.iso8601,w.sunday_first)})}}else{E=v[0][0];x&&(w.yearPop.forWeek[D]=u(E-4,12));w.weekPanel[D]={year:E,month:null,data:d(E,w.iso8601,w.sunday_first)}}}w.cache.yearPop=f.extend(true,{},w.yearPop)},_buildUpdateDate:function(){var w=this,z=w.options,v,y=[],x,A=[];v=b(new Date(),z.format);for(x=0;x<z.cache.selDate.length;x++){if(x===0){A.push(z.cache.selDate[x]?z.cache.selDate[x]:v);y.push([A[x][2],A[x][3],A[x][4]])}else{if(z.cache.selDate[x]){A.push(z.cache.selDate[x]);y.push([A[x][2],A[x][3],A[x][4]])}}}return y},_draw:function(){var v=this,w=v.options;v._buildData(v._buildUpdateDate());v._buildTemplate("body","calFrame",f.extend(true,{},w),true);w.pEl=f("#C_CR_"+w.uuid)},_drawYearPop:function(x,w){var v=this,z=v.options,B,A=z.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y");B=z.yearPop[x]||[];if(w!=undefined){v._buildTemplate(A.eq(w),"yearPopFrame",B[w])}else{for(var y=0;y<B.length;y++){v._buildTemplate(A.eq(y),"yearPopFrame",B[y])}}},_tagEventHandle:function(B,v,A){B.stopPropagation();var w=this,z=w.options,C=A.nodeName;l.call(w);if(C==="A"){var y=f(A),x=y.attr("val");y.parents("ul").find("a").removeClass("C_CR_Tag_cur");y.addClass("C_CR_Tag_cur");z.curModel=[x,"for"+x.charAt(0).toUpperCase()+x.substring(1),x+"Frame",x+"Panel"];z.cache.selDate=[];w._selectTag(z.curModel)}},_binderHandler:function(z,v,y){z.stopPropagation();var w=this,x=w.options,A=y.nodeName;if(x.readonly||x.disable){return}if(x.el.attr("isShow")==="true"){return}x.el.attr("isShow","true");if(A==="INPUT"){x.entering||f(y).blur()}x.inputEl.parents(".C_CR_calInput_bd").addClass(x.inputFocusClass);w.show();if(f.trim(x.inputEl.val())===x.emptytext){x.inputEl.val("").removeClass("C_CR_calInput_empty")}},_mainEventHandle:function(z,w,A){z.stopPropagation();var C=this,v=C.options,D=f(A),B=D[0].nodeName;l.call(C);if(B!=="A"){return}var x=D.attr("val").split("|");for(var y=0;y<x.length;y++){x[y]=+x[y]}C._cachingDate(x,D)},_ymEventHandle:function(y,w,z){y.stopPropagation();var C=this,v=C.options,D=f(z),A=D[0].nodeName,x,B;if(A==="A"){x=D.attr("val");B=+D.parents(".C_CR_YMer_item:eq(0)").attr("popIndex");switch(x){case"prevMonth":l.call(C);v.curModel[0]==="date"?C._selectMonthYear("month",null,null,-1):v.curModel[0]==="year"?C._selectMonthYear("year",null,null,-18):C._selectMonthYear("year",null,null,-1);break;case"nextMonth":l.call(C);v.curModel[0]==="date"?C._selectMonthYear("month",null,null,1):v.curModel[0]==="year"?C._selectMonthYear("year",null,null,18):C._selectMonthYear("year",null,null,1);break;case"prevPop":C._changeYear(-12,B);break;case"nextPop":C._changeYear(12,B);break;case"closePop":l.call(C);break;default:C._closeYMerPop(true);x=Number(x);if(D.attr("panel")==="y"){C._selectMonthYear("year",x,B)}else{C._selectMonthYear("month",x,B)}}}else{if(A==="INPUT"||A==="SPAN"){D=D.children("input").size()?D.children("input"):D;C._closeYMerPop(false,D);D.blur()}else{l.call(C)}}},_timerEventHandle:function(z,v,y){z.stopPropagation();var w=this,x=f(y),C=x[0].nodeName,A;if(C==="SPAN"){A=x.attr("val");switch(A){case"up":w._selectTime(x,1);break;case"down":w._selectTime(x,-1);break}l.call(w)}else{if(C==="INPUT"){x.blur();l.call(w,x.next())}else{if(C==="A"){var B=x.parents("div.C_CR_Timer_pop").prev();A=+x.attr("val");B.val(A<10?"0"+A:A);l.call(w)}}}},_btnEventHandle:function(B,x,C){B.stopPropagation();var D=this,w=D.options,E=f(C),z=E.attr("val"),A;l.call(D);switch(z){case"close":D.hide();break;case"cur":var y=new Date(),v=b(y,w.format);if(w.curModel[0]==="quarter"){D._cachingDate([v[2],Math.floor(v[3]/3)+1,1])}else{if(w.curModel[0]==="week"){D._cachingDate([v[2],o.Date.getOnWeek(new Date(v[0]),w.iso8601,w.sunday_first).week])}else{D._cachingDate([v[2],v[3],v[4]])}}break;case"clear":r.call(D,null,"clear",null);w.selIndex=0;D.setValue(w.isrange?["",""]:[""]);break;case"ok":if(w.curModel[0]==="date"){A=b(new Date,w.format);w.cache.selDate=/[y|M|q|w|d]/.test(w.format)?w.cache.selDate:w.isrange?[A,A]:[A]}D._export()}},_selectTag:function(z){var w=this,B=w.options,C=B.pEl.children(".C_CR_main_wrap"),y=C.children(".C_CR_main_loading"),x=C.children(".C_CR_main_panel[val="+z[0]+"]"),A=x.siblings(),v=x.attr("isBuild")==="true";B.cache.selDate=f.extend(true,[],B.selDate);B.format=B.formatList[z[0]];A.hide();y.show();if(z[0]!="all"&&z[0]!="date"){g(B.pEl,"disMonth")}else{g(B.pEl,"undo")}if((!v)){w._buildTemplate(x,z[2],B);x.attr("isBuild","true")}else{if(v&&!w._isReady("mainPanel")){w._update(w._buildUpdateDate())}else{r.call(w,null,"clear",null)}}y.hide();x.show();i.call(w);if(!B.isBuild){if(B.model==="all"||(z[0]==="date"&&/[h|m|s]/.test(B.format))){w._buildTemplate(B.pEl.children(".C_CR_Timer_box"),"timeFrame",B)}}m.call(w);if(B.model==="all"){p(B);q(B)}w._setYM(z[0]);w._scanFocus();B.isBuild&&l.call(w)},_selectMonthYear:function(F,v,D,x){var G=this,w=G.options,C,z,E=[],A=F==="month"?1:0;z=f("table.C_CR_YMer",w.pEl);if(D!=undefined&&D!=null){y(D)}else{for(var B=0;B<z.length;B++){y(B)}}G._update(E,D);function y(H){C=z.eq(H).attr("val").split("|");C[A]=x!=undefined?Number(C[A])+x:v;E.push([Number(C[0]),Number(C[1])])}},_selectTime:function(w,v){var y,x,A,z;x=w.parents(".C_CR_Timer_op").eq(0);A=x.prev().children("input");y=+f.trim(A.val());z=y+v;if(A.attr("name")==="timer_h"){x.children("a").removeClass("C_CR_Timer_disable");if(z>23||z<0){w.parent().addClass("C_CR_Timer_disable");return}}else{x.children("a").removeClass("C_CR_Timer_disable");if(z>59||z<0){w.parent().addClass("C_CR_Timer_disable");return}}z=String(z);A.val(z.length===1?(0+z):z)},_cachingDate:function(C,A){var v=this,z=v.options,B=null,w=null,y=null;if(!z.isrange){v._clear(z.okbtn)}else{z.selIndex===2&&v._clear(z.okbtn)}switch(z.curModel[0]){case"date":B=v._getTime(z.selIndex);w=new Date(C[0],C[1],C[2],B[0],B[1],B[2]);break;case"year":w=new Date(C[0],0,1);break;case"month":w=new Date(C[0],C[1],1);break;case"quarter":w=new Date(C[0],(C[1]-1)*3,1);break;case"week":w=o.Date.getWeekRange(C[0],C[1],z.iso8601,z.sunday_first)[0]}y=b(w,z.format);z.cache.selDate[z.selIndex]=y;if(z.isrange){z.selIndex=0;for(var x=0;x<z.cache.selDate.length;x++){if(z.cache.selDate[x]===null){z.selIndex=x;break}else{z.selIndex++}}}else{z.selIndex++}v._focus([w],"SEL",A);z.okbtn||v._export()},_changeYear:function(w,x){var v=this,z=v.options,A=z.yearPop[z.curModel[1]],y;if(w>0){y=u(A[x][A[x].length-1]+1,w)}else{if(w<0){y=u(A[x][0]-1,w)}}z.yearPop[z.curModel[1]][x]=y;v._drawYearPop(z.curModel[1],x)},_getTime:function(w){var v=this,z=v.options,A=[],y=null,x=f("table.C_CR_Timer",z.pEl).eq(w);y=x.find(":text");A.push(+y.eq(0).val()||0,+y.eq(1).val()||0,+y.eq(2).val()||0);return A},_update:function(z,w){var v=this,y=v.options,x;x=y.pEl.children(".C_CR_main_wrap").children(".C_CR_main_panel[val="+y.curModel[0]+"]");if(w!=undefined){v._buildData(z,w)}else{v._buildData(z)}v._buildTemplate(x,y.curModel[2],y);v._setYM(y.curModel[0]);v._scanFocus()},_setYM:function(x){var w=this,z=w.options,A;A=z[x+"Panel"];for(var y=0,v=A.length;y<v;y++){a(z.pEl,{year:A[y].year,month:A[y].month!=null?A[y].month+1:""},y)}},_setTime:function(w){var B=this,v=B.options,C,y,A,x,D;C=f("table.C_CR_Timer",v.pEl);for(var z=0;z<C.length;z++){y=C.eq(z).find(":text");if(!w[z]){continue}A=w[z][5];x=w[z][6];D=w[z][7];y.eq(0).val(A<10?"0"+A:A);y.eq(1).val(x<10?"0"+x:x);y.eq(2).val(D<10?"0"+D:D)}},_closeYMerPop:function(A,z){var w=this,y=w.options,v=null,x=null,B=z?z.parents(".C_CR_YMer_item"):null;l.call(w,A?null:B.children(".C_CR_YMer_pop"),"ym");if(B){v=B.attr("pop");x=B.attr("popIndex")}if(v==="year"){if(x!=""&&!w._isReady("yearPop",x)){y.yearPop=f.extend(true,{},y.cache.yearPop);setTimeout(function(){w._drawYearPop(y.curModel[1],x)},50)}}},_scanFocus:function(){var v=this,y=v.options,w=y.inputEl.index(v.eventEl),z=[];for(var x=0;x<y.cache.selDate.length;x++){y.cache.selDate[x]&&z.push(y.cache.selDate[x][0])}v._focus(z,"SEL");v._focus([new Date()],"CUR")},_focus:function(B,y,A){var v=this,z=v.options,x=[];for(var w=0;w<B.length;w++){switch(z.curModel[0]){case"date":B[w]=[B[w].getFullYear(),B[w].getMonth(),B[w].getDate()];break;case"year":B[w]=[B[w].getFullYear()];break;case"month":B[w]=[B[w].getFullYear(),B[w].getMonth()];break;case"quarter":B[w]=[B[w].getFullYear(),Math.floor(B[w].getMonth()/3)+1];break;case"week":B[w]=[B[w].getFullYear(),o.Date.getOnWeek(B[w]).week]}x.push(B[w])}r.call(v,A,y,x)},_clear:function(x){var v=this,w=v.options;if(!x){w.inputEl.val("");w.value=w.isrange?["",""]:[""];w.selDate=w.isrange?[null,null]:[null]}w.cache.selDate=w.isrange?[null,null]:[null];w.selIndex=0;r.call(v,null,"clear",null)},_export:function(){var w=this,A=w.options,C,B=null,x,v=true;if(A.isrange){A.cache.selDate=s(A.cache.selDate);z();C=[A.cache.selDate[0]?A.cache.selDate[0][1]:"",A.cache.selDate[1]?A.cache.selDate[1][1]:""];for(var y=0;y<A.cache.selDate.length;y++){if(!A.cache.selDate[y]){v=false}}v=A.okbtn?true:v}else{z();C=A.cache.selDate[0]?A.cache.selDate[0][1]:""}w.setValue(C);if(v){w.hide()}function z(){var D=A.cache.selDate.length;for(var E=0;E<D;E++){if(!A.cache.selDate[E]){continue}B=w._getTime(E);x=A.cache.selDate[E];x=new Date(x[2],x[3],x[4],B[0],B[1],B[2]);x=b(x,A.format);A.cache.selDate[E]=x}}},_isReady:function(E,C){var H=this,w=H.options,I=w.curModel[0],D,B,y,v;if(E==="mainPanel"){y=w.cache.selDate;v=w[w.curModel[3]];D=G(w.mindate[1],n.call(H,"mindate"))||G(w.maxdate[1],n.call(H,"maxdate"));for(var x=0;x<y.length;x++){if(y[x]===null){B=true;continue}for(var A=0;A<v.length;A++){switch(I){case"date":B=y[x][2]===v[A].year&&y[x][3]===v[A].month;break;case"year":for(var z=0;z<v[A].data.length;z++){if(y[x][2]===v[A].data[z]){B=true;break}else{B=false}}break;case"week":var F=o.Date.getOnWeek(y[x][0],w.iso8601,w.sunday_first);B=F.year===v[A].year;break;default:B=y[x][2]===v[A].year}if(B){break}}if(!B){break}}B=B&&!D}else{if(E==="yearPop"){y=w[w.curModel[3]][C].year;v=w.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y:eq("+C+")>table").attr("val")||"none";B=f.trim(v).indexOf(y+"")>=0}}return B;function G(K,J){K=K?K.getTime():K;J=J?J.getTime():J;return K!=J}},show:function(){var v=this,w=v.options;if(w.disable){return false}h&&h.hide();if(w.isBuild){w.selDate=k(f.extend([],w.selDate),w.format);w.cache.selDate=f.extend([],w.selDate);if(!v._isReady("mainPanel")){v._update(v._buildUpdateDate())}else{v._scanFocus()}w.pEl.show()}else{v._draw();w.pEl.show();v._selectTag(w.curModel)}if(!w.isBuild||w.model==="all"){p(w)}q(w);h=v;f(document).unbind("click.calender").one("click.calender",function(x){x.stopPropagation();h&&h.hide();h=null});return v},hide:function(){var v=this,w=v.options;if(w.disable||!w.pEl){return v}w.el.attr("isShow","false");l.call(v);w.pEl.hide();w.inputEl.parents(".C_CR_calInput_bd").removeClass(w.inputFocusClass);if(w.inputEl.val()===""){w.inputEl.val(w.emptytext).addClass("C_CR_calInput_empty")}r.call(v,null,"clear",null);h=null;return v},setValue:function(z,C){var v=this,x=v.options,y=null,A=[],B=f.extend({},x.formatList);if(x.disable){return v}z=f.type(z)==="number"?z+"":z;z=z||null;z=f.type(z)!=="array"?[z]:z;x.value=[];if(z.length!=0){y=k(f.extend(true,[],z),x.format);x.selDate=f.extend(true,[],y);x.cache.selDate=f.extend(true,[],y)}B.quarter="yyyy???q????";B.week="yyyy???w??";for(var w=0;w<y.length;w++){x.value.push(y[w]?y[w][1]:"");A.push(y[w]?o.Date.format(y[w][0],B[x.curModel[0]]):"")}A=A.join("~");x.inputEl.eq(0).val(/^.*~$/.test(A)?(A=A.replace("~","")):A);if(A===""){x.inputEl.val(x.emptytext).addClass("C_CR_calInput_empty")}else{x.inputEl.removeClass("C_CR_calInput_empty")}if(typeof x.on_change==="function"&&x.isBuild){x.on_change.apply(v,f.extend(true,[],y))}C||v._triggerHandler("change");return v},getValue:function(w){var x=this,z=x.options,A=[];if(z.disable){return""}w=w?w:"string";var v=z.isrange?2:1;for(var y=0;y<v;y++){if(!z.value[y]){A[y]=w==="string"?"":null;z.value[y]=w==="string"?"":null;continue}if(w==="date"){A[y]=o.Date.parse(z.value[y],z.format)}else{A[y]=z.value[y]}}return z.isrange?A:A[0]},getDateRange:function(w){var D=this,v=D.options,A=f.extend(true,[],v.selDate),B=[],y,C;w=w?w:"date";C=w==="date"?null:"";for(var z=0;z<A.length;z++){if(!(y=A[z])){B.push([C,C]);continue}switch(v.curModel[0]){case"month":B.push([x(new Date(y[2],y[3],1,0,0,0,0)),x(new Date(y[2],y[3],new Date(y[2],y[3]+1,0).getDate(),23,59,59,0))]);break;case"year":B.push([x(new Date(y[2],0,1,0,0,0,0)),x(new Date(y[2],11,31,23,59,59,0))]);break;case"quarter":B.push([x(new Date(y[2],y[3],1,0,0,0,0)),x(new Date(y[2],y[3]+2,new Date(y[2],y[3]+3,0).getDate(),23,59,59,0))]);break;case"week":B.push([x(new Date(y[2],y[3],y[4],0,0,0,0)),x(new Date(y[2],y[3],y[4]+6,23,59,59,0))]);break;default:B.push([x(new Date(y[0].getTime())),x(new Date(y[2],y[3],y[4],23,59,59,0))])}}if(B.length===1){return v.curModel[0]==="date"?B[0][0]:B[0]}else{return[B[0][0],B[1][1]]}function x(E){if(w==="date"){return E}else{return o.Date.format(E,"yyyy-MM-dd hh:mm:ss")}}},setWidth:function(x){var v=this.options.el.children("div"),w=this.options.width;if(x==null||x===undefined||x===""||typeof x==="object"){return}if(typeof x==="string"&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(x)){w=x}else{w=x+"px"}v.css({width:x})},setReadonly:function(v){v=typeof v==="undefined"?true:v;var w=this,x=w.options,y=v?"addClass":"removeClass";if(v===x.readonly){return}x.el.children(".C_CR_calInput_bd")[y](x.inputDisClass);x.readonly=v},destroy:function(){var v=this,w=v.options;v._super();w.el.unbind().empty();w.pEl&&w.pEl.remove()},setTextMode:function(){var w=this,x=w.options,v=w.getLabelValue();if(x.isrange){x.el.eq(0).html(v[0]+"~"+v[1])}else{x.el.eq(0).html(v[0])}},getLabelValue:function(){var x=this,z=x.options,w=[],v,A=/^(?:\{.*\}|\[.*\])$/;v=f.type(z.value);if(v==="string"){z.value=A.test(z.value)?f.parseJSON(z.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[z.value]}for(var y=0;y<z.value.length;y++){v=f.type(z.value[y]);if(v==="string"){w.push(z.value[y])}else{if(v==="date"){w.push(b(z.value[y],z.format)[1])}}}return w},onInValid:function(y,z){var v=this,x=v.options;x.tipTxt=x.tipTxt===null?x.el.attr("tip"):x.tipTxt;x.el.attr("tip",z);for(var w=0;w<x.value.length;w++){if(!x.value[w]){x.el.children(".C_CR_calInput_bd").addClass(x.inputErrClass)}}},onValid:function(x){var v=this,w=v.options;w.tipTxt=w.tipTxt===null?w.el.attr("tip"):w.tipTxt;w.el.attr("tip",w.tipTxt||"");w.el.children(".C_CR_calInput_bd").removeClass(w.inputErrClass)}});function k(z,x){var y=null;for(var w=0,v=z.length;w<v;w++){y=f.type(z[w]);if(y==="string"){z[w]=b(o.Date.parse(z[w],x),x)||null}else{if(y==="date"){z[w]=b(z[w],x)||null}}}return z}function t(w,z,B){var y=[],A,C=new Date(w.getTime()),v=B?C.getDay()-1:(C.getDay()||7)-1;for(var x=0;x<6;x++){y.push([o.Date.getOnWeek(new Date(C.getTime()),z,B).week,0]);C.setDate(C.getDate()+(7-v));v=0}return y}function j(N){var G=this,E=G.options,z=[],K=0,x=0,D=[],M,I,w,C,A,J,B,F=N.getFullYear(),v=N.getMonth();E.mindate[1]=n.call(G,"mindate");E.maxdate[1]=n.call(G,"maxdate");C=new Date(F,v,1).getDay();A=new Date(F,v,0).getDate();J=new Date(F,v+1,0).getDate();E.sunday_first||C--;if(C<0){C=6}var y=v-1<0?true:false,L=v+1>11?true:false;for(M=0;M<C;M++){w=new Date(y?F-1:F,y?11:v-1,A,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([A,I,w.getFullYear(),w.getMonth()]);A--}z.reverse();for(M=1;M<=J;M++){w=new Date(F,v,M,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([M,I,F,v])}for(M=1;M<=42-J-C;M++){w=new Date(L?F+1:F,L?0:v+1,M,0,0,0,0);if(H(w,E.mindate[1],"mindate")||H(w,E.maxdate[1],"maxdate")){I=0}else{I=1}z.push([M,I,w.getFullYear(),w.getMonth()])}B=t(N,E.iso8601,E.sunday_first);for(M=0;M<48;M++){if(M!=0&&M%8!=0){D.push(z[K]);K++}else{D.push(B[x]);x++}}return{year:F,month:v,date:D};function H(Q,O,P){if(!O){return false}if(P==="mindate"){return Q.getTime()<O.getTime()}else{return Q.getTime()>O.getTime()}}}function u(y,w){var v=[];if(w>0){for(var x=0;x<w;x++){v.push(y);y++}}else{for(var x=0;x<-w;x++){v.push(y);y--}v.reverse()}return v}function c(v){var x=["1","2","3","4","5","6","7","8","9","10","11","12"],w=[];v=v||[0,11];for(var y=v[0];y<=v[1];y++){w.push([y,x[y]])}return w}function d(z,y,A){var w=[],x;for(var v=31;v>0;v--){x=o.Date.getOnWeek(new Date(z,11,v),y,A).week;if(x!=1){break}}for(v=1;v<=x;v++){w.push([v,1])}return w}function b(v,w){if(!v){return null}var x=[];x.push(v);x.push(o.Date.format(v,w));x.push(v.getFullYear(),v.getMonth(),v.getDate());x.push(v.getHours(),v.getMinutes(),v.getSeconds());return x}function s(w){if(!w||w.length<2||!w[0]||!w[1]){return w}var v;if(w[0][0]>w[1][0]){v=w[1];w[1]=w[0];w[0]=v}return w}function n(B){var I=this,v=I.options,G,y=v[B][0],F=v.nocurrent;if(!y){return null}var x=/^([\+\-]{1})([0-9]{1,})([yMd]{1})$/,z=[null,null,null];if(typeof y==="string"){if(/[\+\-]{1}[0-9]{1,}[yMd]{1}/.test(y)){var H=y.split(","),D,C,E=[0,0,0],w=[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()];for(var A=0;A<H.length;A++){D=H[A].match(x);C="yMd".indexOf(D[3]);z[C]+=(D[1]==="+"?1:-1)*(+D[2])+w[C]}for(A=0;A<z.length;A++){E[A]=z[A]===null?0:1}switch(E.join("-")){case"1-0-0":y=B==="mindate"?new Date(z[0],0,1):new Date(z[0],11,31);break;case"1-1-0":y=B==="mindate"?new Date(z[0],z[1],1):new Date(z[0],z[1],new Date(z[0],z[1]+1,0).getDate());break;case"1-1-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(z[0],z[1],z[2]);break;case"0-1-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(w[0],z[1],z[2]);break;case"0-0-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(w[0],w[1],z[2]);break;case"0-1-0":y=B==="mindate"?new Date(w[0],z[1],1):new Date(w[0],z[1],new Date(z[0],z[1]+1,0).getDate());break;case"1-0-1":F&&(z[2]=B==="mindate"?z[2]+1:z[2]-1);y=new Date(z[0],w[1],z[2]);break}}else{if(G=f(y).data("uitype")){if(!(y=G.getValue("date"))){return null}F&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}else{if(!/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}|[0-9]{4}\-[0-9]{2}|[0-9]{4}$/.test(y)){return null}y=o.Date.parse(y,"yyyy-MM-dd");F&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}}}else{y=f.type(y)==="date"?y:null;F&&y&&y.setDate(B==="mindate"?y.getDate()+1:y.getDate()-1)}return new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0,0)}function g(v,z){var x=v.children(".C_CR_YM_wrap");var y="C_CR_tx_wrap_disable";if(z==="hide"){x.hide()}else{switch(z){case"disYear":x.find("span.C_CR_YMer_tx_y").addClass(y).parent().children(".C_CR_DisMark").show();break;case"disMonth":var w=x.find("span.C_CR_YMer_tx_m").addClass(y).parent().children(".C_CR_DisMark").show();break;case"dis":x.find("span.C_CR_YMer_tx_wrap").addClass(y).parent().children(".C_CR_DisMark").show();break;case"unDis":x.find("span.C_CR_YMer_tx_wrap").removeClass(y).parent().children(".C_CR_DisMark").hide();break;default:x.find("span.C_CR_YMer_tx_wrap").removeClass(y).parent().children(".C_CR_DisMark").hide()}x.show()}}function a(v,w,y){var x=f("table.C_CR_YMer:eq("+y+")",v).attr("val",w.year+"|"+(w.month-1)).find("input.C_CR_tx");x.eq(0).val(w.year);x.eq(1).val(w.month)}function l(z,x){var v=this,y=v.options,w;if(!y.activePop&&!z){return}if(y.activePop){y.activePop.hide();y.activePop.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)").removeClass("C_CR_tx_wrap_focus");y.activePop.parent(".C_CR_Timer_tx_wrap").removeClass("C_CR_tx_wrap_focus")}if(z){z.show();if(x==="ym"){w=z.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)")}else{w=z.parent(".C_CR_Timer_tx_wrap")}w.addClass("C_CR_tx_wrap_focus");y.activePop=z}}function i(){var v=this,A=v.options,z=A.pEl.children(".C_CR_OPBar_wrap").children("a").show(),x=z.filter('[val^="ok"]'),y=z.filter('[val^="cur"]'),w={date:"??&nbsp;??",month:"??&nbsp;??",year:"??&nbsp;??",quarter:"??????",week:"??&nbsp;??"};y.html(w[A.curModel[0]]);A.okbtn||x.hide()}function m(){var v=this,x=v.options;var w=x.pEl.children(".C_CR_Timer_box");if(x.curModel[0]==="date"&&/[h|s|m]/.test(x.format)){w.show()}else{w.hide()}}function r(B,z,C){var v=this,A=v.options,x=A.curModel[0],w;switch(z){case"CUR":w="C_CR_main_cur";break;case"SEL":w="C_CR_main_cur_d";break;case"clear":f("td.C_CR_main_cur_d",A.pEl).removeClass("C_CR_main_cur_d");return}if(B){B.parent("td").addClass(w)}else{for(var y=0;y<C.length;y++){f("#C_CR_"+x+"_"+C[y].join("_")+"_"+A.uuid).parent("td").addClass(w)}}}function p(y){var v=y.panel;var x=209*v;y.pEl.css("width",x+3*(y.panel-1));var w=y.pEl.outerWidth();var z=y.pEl.outerHeight();if(o.Browser.isIE6||o.Browser.isQM){y.pEl.find("iframe").css({width:w,height:z})}}function q(v){var y=f(window),x=v.el.children(".C_CR_calInput_bd"),w=x.offset(),E=x.outerHeight(),z=x.outerWidth(),A=y.width(),B=y.height(),H=y.scrollLeft(),G=y.scrollTop(),F=v.pEl.outerWidth(),C=v.pEl.outerHeight(),D={};if(w.left+F>A+H){if(w.left+z>F){D.left=z+w.left-F}else{if(A>F||A<F){D.left=0}}}else{D.left=w.left}if(w.top+E+C>B+G){if(w.top-C>0&&w.top-G){D.top=w.top-C}else{if(w.top<B+G-w.top-E){D.top=w.top+E}}}else{D.top=w.top+E}v.pEl.css(D);if(!v.isBuild){v.isBuild=true}}})(window.comtop.cQuery,window.comtop);(function(a,b){cui.calculate=cui.calculate||{};cui.calculate.setAutoCalculate=function(d,f,g){for(var c=0;c<g.length;c++){var h=g[c];cui(h).bind("change",function(){var i=f();cui(d).setValue(i)})}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.CheckboxGroup=b.UI.Base.extend({options:{uitype:"CheckboxGroup",cls:"checkbox-group",name:"",value:[],checkbox_list:[],readonly:false,border:false,color:"#FF7D21",direction:"horizontal",textmode:false,br:[],on_change:null},_init:function(){this.$container=a(this.options.el).addClass(this.options.cls).addClass("cui");this.readonly=this.options.readonly;this._getCheckboxList()},_create:function(){var d=this.options,c=this;this.$container.html(this._buildTemplateStr("checkboxGroup",d));this.$checkboxList=this.$container.find("input[type=checkbox]");c.$checkboxList.on("change",c,c._onChange);if(d.readonly===true){this.setReadonly(true)}else{var f=d.readonly_value_list;if(f.length){this.setReadonly(true,f)}}if(d.value!=null&&d.value.length>0&&d.value!=undefined&&d.value!="null"&&d.value!="undefined"){this.setValue(d.value,true)}if(d.border===true){this.$container.addClass("hasborder")}this.$container.data("input_tip",this.$container.attr("tip"))},setDatasource:function(c){this.options.checkbox_list=c;this._getCheckboxList()},_getCheckboxList:function(){var f=this.options;var t=f.readonly_value_list=[];var l=f.checkbox_list;var s=a.type(l);if(s==="array"&&l.length>0){for(var p=0,n=l.length;p<n;p++){if(l[p].readonly!==undefined){t.push(l[p].value)}}return}else{if(s==="function"){l(this);return}}var r=a.trim(this.$container.text()).split(/\s+/g);var h=this.$container.find("input[type=checkbox]");var m=[];for(var p=0;p<h.length;p++){var d=h.eq(p);var c=d.attr("name");if(c&&c!=""){f.name=c}var q=d.attr("readonly");var g=d.val();var k={text:r[p],value:g,color:d.attr("color")};if(q!==undefined){t.push(g);k.readonly=q}m.push(k)}f.checkbox_list=m},_onChange:function(d){var c=d.data;var f=c.options;c._setHightlight();c._triggerHandler("change");if(f.on_change!=null){f.on_change.call(c,c.getValue())}},setValue:function(c,g){if(!c||c.length<=0){this.unSelectAll()}else{this.$checkboxList.attr("checked",false);for(var d=0;d<c.length;d++){var f=c[d];this.$checkboxList.filter("[value="+f+"]").attr("checked",true)}}this._setHightlight();g||this._onChange({data:this})},getValue:function(){var c=[];this.$checkboxList.filter(":checked").each(function(){c.push(a(this).val())});return c.length==0?null:c},getValueString:function(c){var d=this.getValue();return this._listToString(d,c)},getText:function(){var c=[];this.$checkboxList.filter(":checked").each(function(){c.push(a.trim(a(this).parent().text()))});return c.length==0?null:c},getTextString:function(c){var d=this.getText();return this._listToString(d,c)},_listToString:function(g,f){if(g==null||g.length==0){return""}f=f||"??";var c="";for(var d=0;d<g.length;d++){c+=g[d];if(d!=g.length-1){c+=f}}return c},selectAll:function(){this.$checkboxList.attr("checked",true);this._setHightlight()},unSelectAll:function(){this.$checkboxList.attr("checked",false);this._setHightlight()},setReadonly:function(d,c){if(c===undefined){this.readonly=d}if(d===true){this._addReadOnly(c)}else{this._removeReadOnly(c);this._setHightlight()}},_addReadOnly:function(d){var c=this;var k=a.type(d);if(k==="undefined"){this.$checkboxList.each(function(j,l){a(l).off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked}})}else{if(k==="array"){for(var g=0,f=d.length;g<f;g++){var h=this.$checkboxList.filter("[value="+d[g]+"]");h.off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked}}}else{new Error("valueList error")}}},_removeReadOnly:function(d){var c=this;var h=a.type(d);if(h==="undefined"){this.$checkboxList.each(function(j,k){a(k).on("change",c,c._onChange).parent().removeClass("readonly").end().removeAttr("readonly")[0].onclick=null})}else{if(h==="array"){for(var g=0,f=d.length;g<f;g++){this.$checkboxList.filter("[value="+d[g]+"]").parent().removeClass("readonly").end().on("change",c,c._onChange).removeAttr("readonly")[0].onclick=null}}else{new Error("valueList error")}}},isReadonly:function(d){if(d===undefined){return this.readonly}else{var c=this.$checkboxList.filter("[value="+d+"]").attr("readonly");if(c!==undefined){return true}else{return false}}},_setHightlight:function(){var c=this;this.$container.find("label:not(.readonly)").css({fontWeight:"normal",color:"black"});this.$checkboxList.filter(":checked").each(function(){var d=a(this).closest("label");if(!d.hasClass("readonly")){if(d.data("color")){d.css({color:d.data("color"),fontWeight:"900"})}else{d.css({color:c.options.color})}}})},onInValid:function(f,d){var c=this.$container;c.css({border:"1px solid red"});if(!this.options.border){c.css({padding:"2px 5px"})}if(typeof(c.attr("tip"))!="undefined"){c.attr("tip",d)}},onValid:function(d){var c=this.$container;if(this.options.border){c.css({border:"1px solid #7F9DB9"})}else{c.css({border:"none",padding:"3px 5px"})}c.removeAttr("tip")},getLabelValue:function(){this.$container.css({padding:"0"});var l=this.options,g=l.checkbox_list,k=l.value,d="";if(g&&k){for(var f=0;f<g.length;f++){var h=g[f];for(var c=0;c<k.length;c++){if(h.value==k[c]){d+=h.text+" ";break}}}}return d}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ClickInput=b.UI.Base.extend({options:{uitype:"ClickInput",name:"",value:"",emptytext:"",width:"",maxlength:-1,readonly:false,icon:"",iconwidth:"",enterable:false,editable:false,textmode:false,on_iconclick:null,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},relation:"data-relation-value",tipPosition:".click_input_base",_init:function(){var c=this.options;c.id=b.guid();if(c.name==""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this.options;this.$inputWrap=a("#"+c.id+"_wrap");this.$inputBox=a("#"+c.id+"_box");this.$input=a("#"+c.id);this.$iconspan=a("#"+c.id+"_icon");if(c.icon!=""){if(c.icon.indexOf("/")!=-1||c.icon.indexOf(".")!=-1){this.$iconspan.css({backgroundImage:"url("+c.icon+")"})}else{this.$iconspan.addClass(c.icon)}}if(c.width!=""){this.setWidth(c.width)}if(c.readonly){this.setReadOnly(true)}if(c.value==""&&c.emptytext!=""){this.$input.val(c.emptytext);this.$input.addClass("input_tipcolor")}this.setEditAble(c.editable)},setWidth:function(c){this.$inputWrap.css({width:c})},setValue:function(d,g){var f=this.$input,c=this.options;d=(d==null||d==undefined)?"":d;if(a.type(d)=="string"){f.removeAttr(this.relation);f.val(d)}else{if(a.type(d)=="array"){if(d.length>0){f.val(d[0]);d.splice(0,1);f.attr(this.relation,d.join("|"))}}}if((d!=""&&d!=null)||(a.type(d)=="array"&&d.length>0)){f.removeClass("input_tipcolor")}else{if(c.emptytext!=""){f.val(c.emptytext);f.addClass("input_tipcolor")}}g||this._triggerHandler("change")},getValue:function(){var h=this.$input;var f=this.options;var g=a.trim(h.val());var d=h.attr(this.relation);var c=f.emptytext;if(g===c){return""}else{if(d){g=g+"|"+d;return g.split("|")}else{return g}}},getLabelValue:function(){var c=this.options.value;if(a.type(c)=="string"){return c}else{if(a.type(c)=="array"){if(c.length>0){return c[0]}else{return""}}}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var f=this.options;var h=this.$input;var g=this.$inputBox;f.readonly=c;if(c){h.attr("readonly",true);h.addClass("input_garybg");g.addClass("input_garybg");this._removeEmptyText(true)}else{if(f.editable){h.attr("readonly",false)}h.removeClass("input_garybg");g.removeClass("input_garybg");this._removeEmptyText(false)}this.$iconspan.css({display:c?"none":"inline-block"});var d="22px";if(f.iconwidth!=""){d=(parseFloat(f.iconwidth)+5)+"px"}this.$inputBox.css({marginRight:c?0:d})},setEditAble:function(c){var d=this.options;var f=this.$input;if(d.readonly){return false}d.editable=c;if(c){f.attr("readonly",false)}else{f.attr("readonly",true)}},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!=""){f.removeClass("input_tipcolor")}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(!c.editable||c.readonly){this.$input.blur();return false}this._removeEmptyText(true);this.$inputBox.addClass("input_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(g){var c=this.options;var f=this.$inputBox;if(c.readonly){return false}this._removeEmptyText(false);f.removeClass("input_focus");this._textCounter();var d=this.getValue();switch(a.type(d)){case"string":if(d!==""&&d!=null){this._triggerHandler("change")}break;case"array":if(d.length!==0){this._triggerHandler("change")}break}this._customHandler("on_blur",g)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}if(c.enterable&&d.keyCode==13){this._iconclickHandler(d);return false}this._customHandler("on_keydown",d)},_iconclickHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_iconclick",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)=="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var g=this.$input;var d=this.options.emptytext;var c=this.getValue();if(d==""||c.length!=0){return}if(f){g.val("");g.removeClass("input_tipcolor")}else{g.val(d);g.addClass("input_tipcolor")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength))}else{return false}}return false},onInValid:function(g,f){var c=this,d=c.options;c.$inputBox.addClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}c.$inputBox.removeClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Customform=b.UI.Base.extend({options:{uitype:"Customform",columnCount:2,datasource:[],classname:"customform"},_create:function(){var d=this.options.datasource,j,h,f,k,g,c;window.validater=window.validater||cui().validate();for(g=0;g<d.length;g++){j=d[g];f=j.uitype||j.uiType;h=f.charAt(0).toLowerCase()+f.substring(1);cui(j.el)[h](j)}for(g=0;g<d.length;g++){j=d[g];this._bindData(a(j.el),j.databind)}if(!b.UI.scan.textmode&&!comtop.UI.scan.disable){for(g=0,c=d.length;g<c;g++){j=d[g];k=a(j.el).data("uitype");if(k&&!k.options.textmode&&!k.options.disable){this._bindValidate(k.options.el,j.validate);this._bindTip(k.options.el,j,k.tipPosition||k.options.el)}}}},_bindData:function(g,c){if(c){var f=c.split(".");var i=f[0];var h=f[1];var j=window[i];if(!j){j=window[i]={}}if(j.nodeName){alert("???"+i+"????????ID????????????;");return false}var d=cui(j).databind();d.addBind(g,h)}},_bindValidate:function(f,c){if(c){switch(a.type(c)){case"array":for(var d=0;d<c.length;d++){if(c[d].rule){window.validater.add(cui(f),c[d].type,c[d].rule)}else{window.validater.add(cui(f),c[d].type)}}break;case"string":window.validater.add(cui(f),c)}}},_bindTip:function(d,f,c){c=a(c,d);if(cui(d).options.textmode!=undefined&&f.tip==undefined){d.attr("tip","");f.tip=""}if(f.tip!=undefined){d.attr("tip",f.tip);cui.tip(c,{trigger:f.trigger,tipEl:d})}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Dialog=b.UI.Base.extend({options:{uitype:"Dialog",title:"",modal:true,opacity:0.7,canClose:true,autoClose:false,width:350,height:100,left:"",top:"",minWidth:100,minHeight:50,draggable:true,animate:false,onClose:null,beforeClose:null,src:"",buttons:[],dragClass:".dialog-titlebar",closeBtnClass:".dialog-close-btn",contentClass:".dialog-content",footerClass:".dialog-ft"},hideOnBtnClick:false,_init:function(c){this.options.uid="dialog_"+comtop.guid()},_create:function(d){var f=this.options,c=this;if(f.modal===true){this.$overlay=b.UI.Overlay()}a("body").append(this._getView());this.$dialog=a("#"+f.uid);this._setContent();if(f.left!==""||f.top!==""){f.draggable=false;this.$dialog.find(f.dragClass).css("cursor","default")}if(typeof f.left==="string"&&typeof f.top==="string"){a(window).resize(function(){c._setPosition(c._calPosition())});a(window).scroll(function(){c._setPosition(c._calPosition())})}this._bindEvent();this._buildButtons(f.buttons)},_getView:function(){return this._buildTemplateStr("dialog",this.options)},_bindEvent:function(){var d=this.options,c=this;if(d.draggable===true){this.$dialog.find(d.dragClass).drag("start",function(i,g){var f=a(g.drag);if(!f.data("overlay")){var h=a("<div></div>");var l=comtop.guid();h.attr("id",l).css({position:"absolute",top:0,left:0,width:"100%",height:d.height,background:"#000",opacity:0});f.next().css("position","relative").append(h);f.data("overlay","#"+l)}else{f.next().css("position","relative");a(f.data("overlay")).show()}var j=a(document).scrollTop(),k=a(document).scrollLeft();g.limit={left:k,top:j};g.limit.bottom=g.limit.top+a(window).height()-a(this).parent().outerHeight(true)-1;g.limit.right=g.limit.left+a(window).width()-a(this).parent().outerWidth(true)-1}).drag(function(g,f){a(this).parent().css({top:Math.min(f.limit.bottom,Math.max(f.limit.top,f.offsetY)),left:Math.min(f.limit.right,Math.max(f.limit.left,f.offsetX))})}).drag("end",function(g,f){a(f.drag).next().css("position","");a(a(f.drag).data("overlay")).hide()})}else{this.$dialog.find(d.dragClass).css("cursor","default")}if(d.canClose){this.$dialog.find(d.closeBtnClass).bind("click",function(){if(d.beforeClose&&d.beforeClose(c)===false){return false}c.hide(false);return false})}},_buildButtons:function(m){var c=this.options,f=this.$dialog.find(c.footerClass).html(""),n=this;if(!m||(a.type(m)==="array"&&m.length<=0)){f.remove();return}var d=[],l=[],h,j=[],k,g;for(h=0;h<m.length;h++){m[h]=a.extend(true,{name:"???",handler:null,disable:false,hide:false},m[h]);d.push(m[h]);l.push("dialog_btn_"+b.guid());k=d[h].hide?"btn-normal-hide":"";g=d[h].disable?"btn-normal-dis":"";j.push('<a href="javascript:;" class="btn-normal ',g," ",k,'" id="',l[h],'">',d[h].name,"</a>")}f.append(j.join(""));for(h=0;h<l.length;h++){f.find("#"+l[h]).data("btn",d[h]).click(function(){n.hideOnBtnClick?n.hide():null;var i=a(this).data("btn");if(typeof i.handler==="function"&&i.disable===false){i.handler.call(n)}})}},_setContent:function(){var f=this.options;if(f.src!=null&&f.src!=""){var c="dialog_iframe_"+b.guid();this.ifmsrc=f.src;var d='<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" id="'+c+'" src="about:blank" ></iframe>';this.$dialog.find(f.contentClass).prepend(d);this.$content=a("#"+c);this.$content.width("100%")}else{this.$content=a(f.el).prependTo(this.$dialog.find(f.contentClass))}},_getContent:function(){return this.$content},show:function(f){var d=this.options,c=this;a("body").append(this.$dialog);if(f){this.reload(f)}else{if(this.ifmsrc!==undefined){this.reload(this.ifmsrc);this.ifmsrc=undefined}}if(d.modal===true){this.$overlay.show(d.opacity)}this._setSize();if(d.animate===true){this._animate(true)}else{this.$dialog.show();this._getContent().show();this._setMinSize();this._setPosition(this._calPosition())}if(d.autoClose&&d.autoClose>0){setTimeout(function(){c.hide()},d.autoClose)}return this},hide:function(){var c=this.options;if(c.modal===true){this.$overlay.hide(c.opacity)}if(c.animate===true){this._animate(false)}else{this.$dialog.hide()}if(c.onClose){c.onClose.call(this)}return this},_calPosition:function(){var h=this.options.left||"50%";var g=this.options.top||"50%";var i={};var f={scrolltop:function(){return a("html").scrollTop()||a("body").scrollTop()},scrollleft:function(){return a("html").scrollLeft()||a("body").scrollLeft()},client_width:function(){if(b.Browser.isQM){return document.documentElement.clientWidth||document.documentElement.offsetWidth-21}return a(window).width()},client_height:function(){if(b.Browser.isQM){return window.innerHeight||document.documentElement.offsetHeight-4}return a(window).height()}};if(typeof h==="number"&&typeof g==="number"){i={left:h,top:g}}else{if(typeof h==="string"&&typeof g==="string"){h=parseInt(h);g=parseInt(h);var d=this.$dialog.width()+18;var c=this.$dialog.height()+10;i={left:f.client_width()*h/100+f.scrollleft()-d*h/100,top:f.client_height()*g/100+f.scrolltop()-c*g/100}}}return i},_setPosition:function(c){this.$dialog.css(c)},_setSize:function(){var c=this.options;if(c.width&&c.width>0){this.$dialog.width(c.width)}if(c.height&&c.height>0){this.$content.height(c.height)}},_setMinSize:function(){var c=this.options;if(this.$dialog.width()<c.minWidth){this.$dialog.width(c.minWidth)}if(this.$content.height()<c.minHeight){this.$content.height(c.minHeight)}},_animate:function(c){},getIframeMember:function(c){if(this.$content[0].nodeName.toLocaleLowerCase()==="iframe"){return this.$content[0].contentWindow[c]}else{return null}},reload:function(g){g=g?g:this.options.src;var d=new Date().getTime();if(g.indexOf("?")===-1){g+="?cdl_time="+d}else{if(g.indexOf("&cdl_time=")===-1){g+="&cdl_time="+d}else{var c=g.substring(g.indexOf("&cdl_time="),g.indexOf("&cdl_time=")+6);var f="&cdl_time="+(parseInt(c.substring(5,6),10)+1);g=g.replace(c,f)}}this.$content.attr("src",g);return this},setTitle:function(d){var c=typeof d;if(c==="number"||c==="string"){d=a.trim(d);this.options.title=d;a("span.dialog-title",this.$dialog).html(d)}return this},setButton:function(){var d,h,g,c=arguments.length,j=a(".dialog-ft>a",this.$dialog);if(c===2){d=arguments[0];h=arguments[1];g=j.eq(d);if(a.type(h)!=="object"||typeof d!=="number"||g.length===0){return this}this.options.buttons[d]=a.extend(true,this.options.buttons[d],h);this._setButtonAttr(g,this.options.buttons[d])}else{h=arguments[0];if(a.type(h)!=="array"){return this}this.options.buttons=a.extend(true,this.options.buttons,h);for(var f=0;f<this.options.buttons.length;f++){this._setButtonAttr(j.eq(f),this.options.buttons[f])}}return this},_setButtonAttr:function(c,d){var f;for(var g in d){f=d[g];switch(g){case"name":c.html(f);break;case"disable":if(typeof f==="boolean"){f?c.addClass("btn-normal-dis"):c.removeClass("btn-normal-dis")}break;case"hide":if(typeof f==="boolean"){f?c.addClass("btn-normal-hide"):c.removeClass("btn-normal-hide")}break}}}});cui.dialog=function(c){return new comtop.UI.Dialog(c)}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.DragTable=b.UI.Base.extend({options:{uitype:"DragTable",noDragClass:"nodrag",dragClass:"highlight",dragPropmptClass:null,onDragStart:null,onDrag:null,onDragEnd:null,skipAccount:5,childEL:null},_create:function(){this.$table=this.options.el},doDrag:function(c,d){this._dragTable(c,d)},unDrag:function(){var c=this._getRows();if(c==null){return}a(c).unbind("dragstart").unbind("drag").unbind("dragend")},_dragTable:function(c,f){var d=this;var g=this.options;var h=this._getRows();if(h==null){return}a(h).drag("start",function(l,j){if(a(this).hasClass(g.noDragClass)){return}a(this).data("currRowTop",a(this).offset().top);a(this).data("currRowY",a(this).offset.top);a(this).addClass(g.dragClass);var m=a("<div></div>");var i=a(this).width();var k=a(this).offset().left;if(c){i=c}if(f){k=f}if(g.dragPromptClass){m.addClass(g.dragPromptClass).css({position:"absolute",width:i,height:a(this).height(),left:k})}else{m.css({border:"1px dashed #ccc",background:"#cdcbbc",opacity:0.5,position:"absolute",width:i,height:a(this).height(),left:k,cursor:"move"})}if(a.type(g.onDragStart)=="string"){window[g.onDragStart]&&window[g.onDragStart](l,j,this)}else{if(g.onDragStart){g.onDragStart(l,j,this)}}return m.appendTo(document.body)}).drag(function(m,i){if(a(this).hasClass(g.noDragClass)){return}a(i.proxy).css({top:i.offsetY});var l=a(this).data("currRowY");var o=i.offsetY-l;if((o>0&&o<g.skipAccount)||(o<0&&o>-g.skipAccount)){return}var n=a(this).data("currRowTop");var k=d._dropTargetRow(this,i,h,n);if(k!=null){var j=i.offsetY>n;if(j){a(this).insertAfter(k)}else{a(this).insertBefore(k)}if(a.type(g.onDrag)=="string"){window[g.onDrag]&&window[g.onDrag](m,i,this)}else{if(g.onDrag){g.onDrag(m,i,this)}}a(this).data("currRowTop",a(this).offset().top);a(this).data("currRowY",a(this).offset().top)}else{a(this).data("currRowY",i.offsetY)}}).drag("end",function(j,i){if(a(this).hasClass(g.noDragClass)){return}a(this).removeData("currRowTop");a(this).removeData("currRowY");a(i.proxy).remove();a(this).removeClass(g.dragClass);if(a.type(g.onDragEnd)=="string"){window[g.onDragEnd]&&window[g.onDragEnd](j,i,this)}else{if(g.onDragEnd){g.onDragEnd(j,i,this)}}})},_getRows:function(){var d=this.options;var c=this.$table;if(d.childEL){return d.childEL(c[0])}else{return c[0].rows}},_dropTargetRow:function(h,c,k,j){for(var f=0;f<k.length;f++){var l=k[f];if(l!=h){var d=a(l).offset().top;var g=parseInt(a(l).innerHeight())/2;if(((c.offsetY<d+g)&&d<j)||((c.offsetY+a(h).innerHeight()>d+g)&&d>j)){if(!a(l).hasClass("nodrag")){return l}}}}return null}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Input=b.UI.Base.extend({options:{uitype:"Input",width:"200px",readonly:false,maxlength:-1,value:"",emptytext:"",name:"",type:"text",mask:"",maskoptions:{},textmode:false,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null,on_keypress:null},tipPosition:".cui_inputCMP_wrap",_init:function(){var c=this.options;c.id="cui_inputCMP_"+b.guid();if(c.type!="password"&&c.type!="hidden"){c.type="text"}if(c.name==""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this,f=c.options;this.$input=a("#"+f.id);if(f.mask!==""){var d=a.extend({},f.maskoptions,{callback:function(){c._removeEmptyText(false)}});b.UI.InputMask.doMask(this.$input,f.mask,d)}if(f.value===""&&f.emptytext!==""){this.$input.val(f.emptytext);f.el.addClass("cui_inputCMP_empty")}},setWidth:function(c){if(typeof c==="string"&&/\d+(\%|px|pt|em)/.test(c)){this.options.el.children("div").css({width:c})}else{if(typeof c==="number"){this.options.el.children("div").css({width:c+"px"})}}},setValue:function(d,g){var f=this.$input,c=this.options;d=(d==null||d==undefined)?"":d;f.val(d);if(d!=""){c.el.removeClass("cui_inputCMP_empty")}else{if(c.emptytext!=""){f.val(c.emptytext);c.el.addClass("cui_inputCMP_empty")}}g||this._triggerHandler("change")},getValue:function(){var g=this.$input;var d=this.options;var f=a.trim(g.val());var c=d.emptytext;if(f===c){return""}else{if(d.mask!==""){return b.UI.InputMask.unMaskValue(g,d.mask,d.maskoptions)}return f}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){var d=this.options;var f=this.$input;d.readonly=c;f.attr("readonly",c);if(c){d.el.children("div").addClass("cui_inputCMP_readonly");this._removeEmptyText(true)}else{d.el.children("div").removeClass("cui_inputCMP_readonly");this._removeEmptyText(false)}},setReadonly:function(c){this.setReadOnly(c)},focus:function(){var c=this.options;if(!c.readonly){c.el.find(":text, :password").focus()}return this},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!==""){c.el.removeClass("cui_inputCMP_empty")}else{if(c.emptytext!==""){f.val(c.emptytext);c.el.addClass("cui_inputCMP_empty")}}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){return false}this._removeEmptyText(true);c.el.addClass("cui_inputCMP_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);c.el.removeClass("cui_inputCMP_focus");this._textCounter();var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keydown",d)},_keypressHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keypress",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var h=this.$input;var d=this.options.emptytext;var c=this.getValue();var g=this.options;if(d===""||c.length!==0){return}if(f){h.val("");g.el.removeClass("cui_inputCMP_empty")}else{h.val(d);g.el.addClass("cui_inputCMP_empty")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength))}else{return false}}return false},onInValid:function(g,f){var c=this,d=c.options;d.el.addClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}d.el.removeClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(d,h){var a=null;var b={};function c(){var j=cui.handleMask;var i=d("#"+b.id);a=new h.UI.Overlay();if(i.length===0){var k="z-index:"+(b.zIndex+1)+";";d("body").append('<div id="'+b.id+'" class="handlemask_wrap" style="'+k+'"></div>');i=d("#"+b.id)}i.html(b.html);i.css({visibility:"hidden",display:"block"});g();i.css({visibility:"visible",display:"none"})}function g(){var i=d("#"+b.id);i.css({margin:"-"+i.height()/2+"px 0 0 -"+i.width()/2+"px"})}function f(){d("#"+b.id).remove();if(b.mask){a.hide(0.5)}a._dom.remove();a=undefined}cui.handleMask=function(i){i=d.type(i)==="object"?i:{};if(d("#"+b.id).length!==0){f()}b=d.extend(true,{html:'<div class="handlemask_image_1"></div>',mask:true,zIndex:9999999,id:"handleMask_"+h.guid()},i);c();return cui.handleMask};cui.handleMask.show=function(){if(d("div.handlemask_wrap").length===0){cui.handleMask()}var i=d("#"+b.id);if(i.attr("isOpen")!=="true"){if(b.mask){a._dom.css("zIndex",b.zIndex).attr("id","ol_"+b.id);a.show(0.5)}i.show().attr("isOpen","true")}return cui.handleMask};cui.handleMask.hide=function(){if(d("div.handlemask_wrap").length===0){return}var i=d("#"+b.id);i.hide().attr("isOpen","false");if(b.mask){a.hide(0.5)}return cui.handleMask}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ListBox=b.UI.Base.extend({options:{uitype:"ListBox",width:"200",height:"200",name:"listboxName",value:"",value_field:"id",label_field:"text",multi:false,textmode:false,datasource:null,on_dbclick:null,on_click:null,on_select_change:null,on_add:null,on_remove:null,icon_path:null},$el:null,listbox:null,hiddenEl:null,listTemplateName:"cListBox",valueField:null,labelField:null,priorElement:null,rowTemplateName:"cListBoxRow",_init:function(c){this.$el=a(this.options.el);this._initParams();this.$el.addClass("cui")},_create:function(){if(typeof this.options.datasource=="function"){this.options.datasource(this,{})}this.listbox=a(".listbox",this.$el);this.hiddenEl=a("[type=hidden]",this.$el);this.valueField=this.options.value_field;this.labelField=this.options.label_field;this._setConfiguration();this._setDefaultText()},_initParams:function(){this._analysisHtmlTemplate()},_analysisHtmlTemplate:function(){var d=a("a",this.$el);if(d==null||typeof d=="undefine"||d.length<1){return}var g=this.options.value_field;var f=this.options.label_field;var c=[];a.each(d,function(i,j){var h={};h[f]=a.trim(a(this).text());h[g]=a.trim(a(this).attr("value"));c.push(h)});this.$el.html("");this.options.datasource=c},_setConfiguration:function(){this.listbox.width(this.options.width);this.listbox.height(this.options.height)},_selectChangeCallback:function(){var c=this.options.on_select_change;if(a.type(c)==="string"){window[c](this.getSelectedRows())}else{if(a.isFunction(c)){c(this.getSelectedRows())}}},setDatasource:function(c){this.options.datasource=c;this._renderElement()},setMulti:function(c){var d=this.options;if(d.multi===c||typeof c!=="boolean"){return}else{d.multi=c;this.cancelSelected()}},_renderElement:function(){var c=a(".tr",this.$el);this._buildTemplate(c,this.rowTemplateName,this.options)},_setDefaultText:function(){if(this.options.value){var h=a(".tr",this.$el);var i=this.options.multi?this.options.value.split(";"):this.options.value;var f=this.options.value_field;var g=[];var c=this.options.datasource;var d=this;a.each(c,function(j,k){if(d.options.multi){a.each(i,function(l,m){if(m==k[f]){a("li[name="+m+"]",h).addClass("selected");g.push(k[f])}})}else{if(i==k[f]){a("li[name="+i+"]",h).addClass("selected");g.push(k[f])}}});this.hiddenEl.val(g.join(";"))}},setWidth:function(c){this.listbox.width(c)},getRecordData:function(c){var g=this;var f=null;var d=this.options.datasource;a.each(d,function(h,i){if(i[g.valueField]==c){f=i;return false}});return f},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}var g=this.options.value.split(";");var d=this.options.value_field;var c=this.options.label_field;var f=[];a.each(this.options.datasource,function(h,i){a.each(g,function(j,k){if(k==i[d]){f.push(i[c])}})});return f.join(";")},deleteRecordData:function(c){var f=this;var d=null;var h=this.options.datasource;var g=[];if(this.hiddenEl.val()!=""){g=this.hiddenEl.val().split(";")}a.each(h,function(i,j){if(j[f.valueField]==c){d=j;h.splice(i,1);g.pop(c);return false}});this.hiddenEl.val(g.join(";"));return d},getValue:function(){var c=this.options.value_field;var d=[];var f=this.getSelectedRows();f=f===null?[]:(this.options.multi?f:[f]);a.each(f,function(g,h){d.push(h[c])});return d.join(";")},getText:function(){var c=this;var d=[];var f=this.getSelectedRows();f=f===null?[]:(this.options.multi?f:[f]);a.each(f,function(g,h){d.push(h[c.labelField])});return d.join(";")},setValue:function(f){var g=f+"";var d=g.split(";");if(!this.options.multi&&d.length>1){return}var c=[];this.cancelSelected();a(".td",this.$el).each(function(h,i){if(a.inArray(a(this).attr("name"),d)>=0){c.push(a(this).attr("name"));a(this).addClass("selected")}});this.hiddenEl.val(c.join(";"))},addRows:function(i){var f=[];var c=this;var d=true;if(i==null||i.length<1){return}var h=i;if(a.isPlainObject(i)){h=[];h.push(i)}if(this.options.datasource!=null){a.each(h,function(k,l){d=true;a.each(c.options.datasource,function(m,n){if(n[c.valueField]==l[c.valueField]){d=false;return false}});if(d){f.push(l)}});if(f.length<1){return}}else{f=h;c.options.datasource=[]}var g=a.extend({},this.options);g.datasource=f;this.options.datasource=this.options.datasource.concat(f);this._buildTemplate(a(".tr",this.$el),this.rowTemplateName,g,true);var j=this.options.on_add;if(a.type(j)==="string"){window[j](f)}else{if(a.isFunction(j)){j(f)}}},removeRow:function(d){var f=this;var h=null;var g=a("li[name="+d+"]",this.$el);if(g){h=this.deleteRecordData(d);g.remove()}var c=this.options.on_remove;if(a.type(c)==="string"){window[c]([h])}else{if(a.isFunction(c)){c([h])}}return h},removeSelectedRows:function(){var f=[];var d=this;a(".selected",this.$el).each(function(g,h){f.push(d.deleteRecordData(a(this).attr("name")));a(this).remove()});var c=this.options.on_remove;if(a.type(c)==="string"){window[c](f)}else{if(a.isFunction(c)){c(f)}}return f},removeAllRows:function(){var g=[];var d=this;var f;var h=this.options.datasource;a(".td",this.$el).remove();if(h!=null&&h.length>0){g=h.splice(0,h.length)}this.hiddenEl.val("");var c=this.options.on_remove;if(a.type(c)==="string"){window[c](g)}else{if(a.isFunction(c)){c(g)}}return g},getRow:function(d){var g=this.getRowSize();var c=null;if(d<g){var f=a(".td",this.$el).eq(d).attr("name");c=this.getRecordData(f)}return c},getSelectedRows:function(){var d=this.options.multi?[]:null;var c=this;a(".selected",this.$el).each(function(f,g){if(c.options.multi){d.push(c.getRecordData(a(this).attr("name")))}else{d=c.getRecordData(a(this).attr("name"))}});return d},selectRow:function(c){var d=[];if(this.hiddenEl.val()!=""){d=this.hiddenEl.val().split(";")}if(c>=0&&c<this.getRowSize()){a(".td",this.$el).eq(c).addClass("selected");d.push(a(".td",this.$el).eq(c).attr("name"));this.hiddenEl.val(d.join(";"))}this._selectChangeCallback()},selectAllRows:function(){if(!this.options.multi){return}var c=[];a(".td",this.$el).each(function(d,f){a(this).addClass("selected");c.push(a(this).attr("name"))});this.hiddenEl.val(c.join(";"));this._selectChangeCallback()},cancelSelected:function(){a(".selected",this.$el).each(function(c,d){a(this).removeClass("selected")});this.hiddenEl.val("");this._selectChangeCallback()},getAllRows:function(){return this.options.datasource},moveRow:function(f,c){var g=this.getRowSize();if(f>=0&&f<g&&c>=0&&c<g&&f!=c){var d=a(".td",this.$el);if(f<c){d.eq(c).after(d.eq(f))}else{d.eq(c).before(d.eq(f))}this.options.datasource.splice(c,0,this.options.datasource.splice(f,1)[0])}},moveUp:function(){var h=this.getSelectedRows();var g=this.getRowSize();var d;for(var f=0,c=h.length;f<c;f++){d=this._getRowIndexByName(h[f][this.valueField]);if(d==0){break}this.moveRow(d,d-1)}},moveDown:function(){var g=this.getSelectedRows();var f=this.getRowSize();var c;for(var d=g.length-1;d>=0;d--){c=this._getRowIndexByName(g[d][this.valueField]);if(c==(f-1)){break}this.moveRow(c,c+1)}},getRowSize:function(){return a(".td",this.$el).length},_getRowDataByKey:function(c){var d=this,g=this.options.datasource;var f=null;a.each(g,function(h,i){if(i&&i[d.valueField]==c){f=i;return false}});return f},_getRowIndexByName:function(d){var c=a("li",this.$el).index(a("li[name="+d+"]",this.$el));return c},_rowClick:function(d,l,n){var o="selected";var p=a(l);var k=[];if(this.hiddenEl.val()!=""){k=this.hiddenEl.val().split(";")}if(p.hasClass(o)){this.priorElement=null;p.removeClass(o);var f=p.attr("name");for(var m=0,h=k;m<h;m++){if(k[m]==p.attr("name")){k.splice(m,1);break}}}else{if(!this.options.multi){a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");p.addClass(o);k=[];k.push(p.attr("name"))}else{if(this.options.multi&&d.shiftKey){if(this.priorElement==null){this.priorElement=p.attr("name");k.push(this.priorElement)}else{var r=this._getRowIndexByName(p.attr("name"));var c=this._getRowIndexByName(this.priorElement);var g=a(".td",this.$el);a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");for(var m=Math.min(r,c),h=Math.max(r,c);m<=h;m++){g.eq(m).addClass(o);k.push(g.eq(m).attr("name"))}}p.addClass(o)}else{this.priorElement=p.attr("name");k.push(this.priorElement);p.addClass(o)}}}this.hiddenEl.val(k.join(";"));var q=this.options.on_click;if(a.type(q)==="string"){var f=a(l).attr("name");window[q](this._getRowDataByKey(f))}else{if(a.isFunction(q)){var f=a(l).attr("name");q(this._getRowDataByKey(f))}}this._selectChangeCallback()},_rowDblClick:function(g,d,h){var f=this.options.on_dbclick;if(a.type(f)==="string"){var c=a(d).attr("name");window[f](this._getRowDataByKey(c))}else{if(a.isFunction(f)){var c=a(d).attr("name");f(this._getRowDataByKey(c))}}},_trhoverin:function(d,c,f){var g="hover";a(c).addClass(g)},_trhoverout:function(d,c,f){var g="hover";a(c).removeClass(g)},_setCacheData:function(c,d){this.$el.data(c,d)},_getCacheData:function(c){return this.$el.data(c)},_removeCacheData:function(c){this.$el.removeData(c)}})})(window.comtop.cQuery,window.comtop);(function(c,d){d.UI.InputMask={Datetimes:"9999-1m-td 2h:59:59",Times:"2h:59:59",Time:"2h:59",Datetime:"9999-1m-td 2h:59",Date:"9999-1m-td",Int:{precision:0,prefix:"",separator:","},Dec:{precision:null,prefix:"",separator:","},Num:{precision:0,prefix:"",separator:""},Money:{precision:2,prefix:"",separator:","},Integer:{precision:0,prefix:""},definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",d:"d",m:"m",h:"h",t:"t","1":"[0-1]","2":"[0-2]","3":"[0-3]","5":"[0-5]"},dataName:"rawMaskFn",doMask:function(h,f,j){var k=f.toLocaleLowerCase();var g=c(h);switch(k){case"int":case"num":case"dec":case"money":var i;i=c.extend(true,{},this[f],j);if(k==="int"||k==="num"){i.precision=0}g.data("inputMaskModel",i);g.numberFormat(f,i);break;case"integer":g.scrapNumFormat(this[f].precision,this[f].prefix);break;case"custom":if(j&&j.model){g.mask(j.model,j)}break;default:if(this[f]){g.mask(this[f],j)}}},unMaskValue:function(i,f,l){function g(p,o){var n=false;c.each(o,function(q,r){if(p==q){n=true}});return n}var m=f.toLocaleLowerCase();var h=c(i);switch(m){case"int":case"num":case"dec":case"money":var k=h.data("inputMaskModel");var j=new RegExp("["+k.prefix+k.separator+"]","g");return h.val().replace(j,"");break;case"integer":return c(i).val().replace(/,/g,"");case"custom":return c(i).mask();default:return c(i).val()}}};var a=(d.Browser.isIE?"paste":"input")+".mask";var b=(window.orientation!=undefined);c.mask=d.UI.InputMask.definitions;c.fn.extend({caret:function(h,f){if(this.length==0){return}if(typeof h=="number"){f=(typeof f=="number")?f:h;c("#test").val(h+":"+f);return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(h,f)}else{if(this.createTextRange){var i=this.createTextRange();i.collapse(true);i.moveEnd("character",f);i.moveStart("character",h);i.select()}}})}else{if(this[0].setSelectionRange){h=this[0].selectionStart;f=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var g=document.selection.createRange();h=0-g.duplicate().moveStart("character",-100000);f=h+g.text.length}}return{begin:h,end:f}}},unmask:function(){return this.trigger("unmask")},mask:function(h,l){if(!h&&this.length>0){var i=c(this[0]);return i.data(d.UI.InputMask.dataName)()}l=c.extend({placeholder:"_",completed:null},l);var g=d.UI.InputMask.definitions;var k=[];var m=h.length;var j=null;var f=h.length;c.each(h.split(""),function(n,o){if(o=="?"){f--;m=n}else{if(g[o]){k.push(g[o]);if(j==null){j=k.length-1}}else{k.push(null)}}});return this.trigger("unmask").each(function(){var x=c(this);var s=c.map(h.split(""),function(B,A){if(B!="?"){return g[B]?l.placeholder:B}});var z=x.val();function w(A){while(++A<=f&&!k[A]){}return A}function t(A){while(--A>=0&&!k[A]){}return A}function o(D,C,F){switch(D){case"m":var K=x.val().substring(F-1,F);var E=parseFloat(C);if(K=="0"){return(E>0&&E<=9)}else{if(K=="1"){return(E>=0&&E<3)}}break;case"d":var B=x.val();var K=B.substring(F-1,F);var I=B.substring(0,4);var H=B.substring(5,7);var J=new Date(I,H,0).getDate();var A=(J+"").split("")[0];var G=(J+"").split("")[1];var E=parseFloat(C);if(K<A){if(K==0){return(E>0&&E<=9)}else{return(E>=0&&E<=9)}}else{return(E>=0&&E<=G)}break;case"h":var K=x.val().substring(F-1,F);var E=parseFloat(C);if(K=="0"||K=="1"){return(E>=0&&E<=9)}else{if(K=="2"){return(E>=0&&E<=3)}}break;case"t":var B=x.val();var I=B.substring(0,4);var H=B.substring(5,7);var J=new Date(I,H,0).getDate();var A=(J+"").split("")[0];var E=parseFloat(C);return E>=0&&E<=A;break;default:return new RegExp(D).test(C)}}function r(E,A){if(E<0){return}for(var D=E,C=w(A);D<f;D++){if(k[D]){if(C<f&&o(k[D],s[C],D)){s[D]=s[C];s[C]=l.placeholder}else{break}C=w(C)}}v();var B=j>E?j:E;x.caret(B)}function n(E){for(var C=E,D=l.placeholder;C<f;C++){if(k[C]){var A=w(C);var B=s[C];s[C]=D;if(A<f&&o(k[A],B,A)){D=B}else{break}}}}function u(D){var B=D.which;if(B==8||B==46||(b&&B==127)){var E=x.caret(),C=E.begin,A=E.end;if(A-C==0){C=B!=46?t(C):(A=w(C-1));A=B==46?w(A):A}p(C,A);r(C,A-1);return false}else{if(B==27){x.val(z);x.caret(0,q());return false}}}function y(D){var A=D.which,F=x.caret();if(D.ctrlKey||D.altKey||D.metaKey||A<32){return true}else{if(A){if(F.end-F.begin!=0){p(F.begin,F.end);r(F.begin,F.end-1)}var C=w(F.begin-1);if(C<f){var E=String.fromCharCode(A);if(o(k[C],E,C)){n(C);s[C]=E;v();var B=w(C);x.caret(B);if(l.completed&&B>=f){l.completed.call(x)}}}return false}}}function p(C,A){for(var B=C;B<A&&B<f;B++){if(k[B]){s[B]=l.placeholder}}}function v(){return x.val(s.join("")).val()}function q(B){var F=x.val();var E=-1;for(var A=0,D=0;A<f;A++){if(k[A]){s[A]=l.placeholder;while(D++<F.length){var C=F.charAt(D-1);if(o(k[A],C,A)){s[A]=C;E=A;break}}if(D>F.length){break}}else{if(s[A]==F.charAt(D)&&A!=m){D++;E=A}}}if(!B&&E+1<m){x.val("");p(0,f)}else{if(B||E+1>=m){v();if(!B){x.val(x.val().substring(0,E+1))}}}return(m?A:j)}x.data(d.UI.InputMask.dataName,function(){return c.map(s,function(B,A){return k[A]&&B!=l.placeholder?B:null}).join("")});if(!x.attr("readonly")){x.one("unmask",function(){x.unbind(".mask").removeData(d.UI.InputMask.dataName)}).bind("focus.mask",function(){z=x.val();var B=q();v();var A=function(){if(B==h.length){x.caret(0,B)}else{x.caret(B)}};(c.browser.msie?A:function(){setTimeout(A,0)})()}).bind("blur.mask",function(){q();if(x.val()!=z){x.change()}if(l.callback){l.callback()}}).bind("keydown.mask",u).bind("keypress.mask",y).bind(a,function(){setTimeout(function(){x.caret(q(true))},0)})}q()})},scrapNumFormat:function(m,l){var j=this,h=j.val();var k=function(p,v,s){var t=p.toString(),r=t.indexOf("."),u,o;if(r<0){u=t;o=""}else{u=t.substring(0,r);if(typeof v=="undefined"){o=t.substring(r)}else{o=t.substring(r,r+v+1)}}var q=/(-?\d+)(\d{3})/;while(q.test(u)){u=u.replace(q,"$1,$2")}return s?s+u+o:u+o};var f=function(){var n=j.val();if(!n.match(/^[\+\-]?\d*?\.?\d*?$/)){j.val(h)}else{h=n}};var g=function(){j.val(k(j.val(),m,l))};var i=function(){var n=j.val();if(l){n=n.replace(l,"")}n=n.replace(/,/g,"");j.val(n);f()};if(!j.attr("readonly")){j.one("unmask",function(){j.unbind(".mask")}).bind("keyup.mask",f).bind(a,f).bind("blur.mask",g).bind("focus.mask",i)}},numberFormat:function(g,m){var k=this,i=k.val();var l=function(q,s,t,p){var v=q.toString(),u=v.indexOf("."),o,r;if(u<0){o=v;r=""}else{o=v.substring(0,u);switch(s){case"null":case null:r=v.substring(u);break;case"0":r="";break;default:r=v.substring(u,u+s+1)}}var w=/(-?\d+)(\d{3})/;if(!!p||p!==""){while(w.test(o)){o=o.replace(w,"$1"+p+"$2")}}if(s>0&&r===""){for(var n=0;n<s;n++){r+="0"}r="."+r}return t?t+o+r:o+r};var f=function(){var o=k.val();var n={Int:/^[\+\-]?([1-9]{1}\d+|\d{1})?$/,Num:/^\d*$/,Dec:/^[\+\-]?([1-9]{1}\d*\.?\d*?|0{1}\.?\d*?)?$/,Money:/^[\+\-]?([1-9]{1}\d*\.?\d*?|0{1}\.?\d*?)?$/};if(!n[g].test(o)){k.val(i)}else{i=o}};var h=function(){var o=k.val();var n=l(o,m.precision,m.prefix,m.separator);if(/^[\-\+]$/.test(o)){n=""}k.val(n)};var j=function(){var n=k.val();if(m.prefix){n=n.replace(m.prefix,"")}n=n.replace(/,/g,"");k.val(n);f()};if(!k.attr("readonly")){k.one("unmask",function(){k.unbind(".mask")}).bind("keyup.mask",f).bind(a,f).bind("blur.mask",h).bind("focus.mask",j)}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Menu=b.UI.Base.extend({options:{uitype:"Menu",trigger:"click",width:"",on_click:null,datasource:null},_init:function(){var c=this;c.objMenu=null;c.objItemMap={};c.hideTimeout=null},_create:function(){var c=this;var f=this.options.el;var d=c.options.trigger;f.bind(d,function(g){g.stopPropagation();c.show()});f.bind("mouseout",function(g){c.hideTimeout=setTimeout(function(){c.hide()},100)});f.bind("mouseover",function(g){clearTimeout(c.hideTimeout)})},_loadTemplate:function(l,c){var j=this._buildTemplateStr("menuDom",c);j=this._bindTplEvent(j);var f=a(j);l.append(f);var d=f.find("li");for(var g=0;g<c.length;g++){var h=c[g];this.objItemMap[h.id]=h;if(h.disabled){this._disable(a("#"+h.id))}if(h.items){var k=d.eq(g);k.find("a").addClass("menu_item_a_background");this._loadTemplate(k,h.items)}}return f},_loadMenu:function(){if(this.objMenu==null){var c=this.options;if(a.isFunction(c.datasource)){c.datasource=c.datasource()}this.setDatasource(c.datasource)}},setDatasource:function(c){if(c){var f=this.options;this.objMenu=this._loadTemplate(a("body"),c);var d=this;this.objMenu.bind("mouseover",function(g){d.hideTimeout&&clearTimeout(d.hideTimeout)});this.objMenu.bind("mouseout",function(g){d.hideTimeout=setTimeout(function(){d.objMenu.hide()},100)})}},_mouseoverHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}if(c.mouseTimeout){clearTimeout(c.mouseTimeout)}var g=a(c).children(".menu_box");a(c).parent().children().css("zIndex",1);a(c).css("zIndex",2);if(g){g.show();this._setItemPosition(g,c);this._setItemsWidth(g.children(".menu"),this.options.width);this._setIframe(g)}},_mouseoutHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}var g=a(c).children(".menu_box");c.mouseTimeout=setTimeout(function(){g.hide()},100)},_clickHandler:function(g,c,f){if(a("#"+c.id).attr("disabled")){return}g.stopPropagation();if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){var d=a("#"+c.id);while(d[0].tagName!="BODY"){if(d[0].tagName=="DIV"){d.hide()}d=d.parent()}}this.hide();this.options.on_click&&this.options.on_click(this.objItemMap[c.id])},_setItemPosition:function(m,f){var d=m;m=m.children(".menu");var n={};var c=a(f);var g=c.offset();var k=c.outerHeight();var o=c.outerWidth();var l=m.outerHeight();var h=m.outerWidth();var j=a(window).height();var i=a(window).width();if(i-(g.left+o+h)<10&&(g.left-o)>0){n.left=0-h+4;n.right="auto"}else{n.left="auto";n.right=4}if(j-(g.top+k+l)<10&&(g.top-l)>0){n.bottom=0+l-4;n.top="auto"}else{n.bottom="auto";n.top=-4}d.css(n)},_setPosition:function(c){var d=a(c).offset();var j=a(c).outerHeight();var m=a(c).outerWidth();var i=a(window).height();var g=a(window).width();var f=this.objMenu.children(".menu").outerHeight();var k=this.objMenu.children(".menu").outerWidth();var l;var h;if(i-(d.top+j+f)<0&&(d.top-f)>0){l=d.top-f}else{l=d.top+j}if(g-(d.left+k)<0&&(d.left+m-k)>0){h=d.left+m-k}else{h=d.left}this.objMenu.css({left:h,top:l})},_setItemsWidth:function(c,j){var h=c.children("li");var g=0;for(var d=0;d<h.length;d++){var f=h.eq(d).children("a").children("span").outerWidth();if(f>g){g=f}}if(j>g){g=j}else{g=g+10}c.width(g)},_setIframe:function(c){if(b.Browser.isIE6){c.children("iframe").css({width:c.find(".menu_item").width(),height:c.find(".menu").height()})}},_setWidth:function(c){var d;if(this.options.width){d=parseInt(this.options.width,10)}else{d=a(c).outerWidth()-2}this.options.width=d;this._setItemsWidth(this.objMenu.children(".menu"),d)},_disable:function(c){c.children("a").children("span").addClass("menu_item_disable");c.attr("disabled",true)},_enable:function(c){c.children("a").children("span").removeClass("menu_item_disable");c.attr("disabled",false)},show:function(d){this._loadMenu();this.objMenu.show();if(!d){d=this.options.el}this._setWidth(d);this._setPosition(d);this._setIframe(this.objMenu);var c=this},hide:function(){this.objMenu&&this.objMenu.hide()},disable:function(f,c){this._loadMenu();var d=a("#"+f);if(c==true){this._disable(d)}else{this._enable(d)}},setLabel:function(f,c){this._loadMenu();var d=a("#"+f);d.children("a").children("span").html(c)}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.MultiNav=b.UI.Base.extend({options:{uitype:"MultiNav",unfold:false,initchecked:[],datasource:[],target:"_self",foldercheckable:false,_pos:-1},_create:function(){this.root=this.options.root=this.options.el.children(".multinav").eq(0);this._setDatasource(this.options.datasource)},_initcheck:function(g){var h=this.root;for(var f=0,d=g.length;f<d;f++){h=h.children("li").eq(g[f]);var c=h.find("a").eq(0);if(c.hasClass("multinav_fold")){if(f===d-1&&this.options.foldercheckable){c.addClass("checked");this.options._pos=c.attr("pos")}c.addClass("multinav_unfold").data("unfold",true);h=h.children("ul").eq(0);h.addClass("multinav_ul_unfold")}else{c.addClass("checked");this.options._pos=c.attr("pos");break}}},_bindEvents:function(){var c=this.root.find("[ev]");for(var k=0,g=c.length;k<g;k++){var o=c.eq(k).attr("pos").split("-");if(o!==undefined){var l=this.options.datasource;for(var f=0,d=o.length-1;f<d;f++){l=l[o[f]].children}var h=l[o[f]];l=l[o[f]].bind;for(var p in l){if(RegExp(p,"i").test("on_click on_dblclick on_mouseover on_mouseout")!==-1){c.eq(k).on(p.slice(3),function(i){l[p](i,this,h)})}}}}},_setDatasource:function(c){this.setDatasource(c,undefined);this._initcheck(this.options.initchecked);this.root.on("click",this.options,this._clickHandle)},setDatasource:function(g,d){var c=d?a.extend(this.options,d):this.options;function h(i){return new Function(i)}function f(m,p){var s=a(document.createDocumentFragment());for(var n=0,l=m.length;n<l;n++){var k=m[n],r=a("<li></li>"),q=a("<a></a>");r.append(q);if(k.onclick){q.click(h(k.onclick))}if(k.ondblclick){q.dblclick(h(k.ondblclick))}if(k.onmouseover){q.mouseover(h(k.onmouseover))}if(k.onmouseout){q.mouseout(h(k.onmouseout))}if(k.title){q.attr("title",k.title)}q.attr("pos",p+n);if(k.bind){q.attr("ev","1")}if(typeof k.href==="string"){q.attr("href",k.href);q.attr("target",k.target||c.target)}else{q.attr("href","javascript:;")}if(typeof k.children==="object"){q.addClass("multinav_fold").append("<span>"+k.name+"</span>");var o=a("<ul></ul>");o.append(f(k.children,p+n+"-"));r.append(o)}else{q.html(k.name)}s.append(r)}return s}this.options.datasource=g;c.root.html(f(g,""));this._bindEvents();if(c.unfold){this.allUnfold()}if(d&&d.initchecked){this._initcheck(d.initchecked)}},allUnfold:function(){this.root.find("ul").addClass("multinav_ul_unfold").show().end().find(".multinav_fold").addClass("multinav_unfold").data("unfold",true)},allFold:function(){this.root.find("ul").removeClass("multinav_ul_unfold").hide().end().find(".multinav_fold").removeClass("multinav_unfold").data("unfold",false)},_clickHandle:function(c){c.stopPropagation();var f=a(c.target);f=f.prop("tagName")==="A"?f:f.parent();c.data._pos=f.attr("pos");if(f.hasClass("multinav_fold")){var d=f.data("unfold");d=d===undefined?c.data.unfold:d;if(d){f.next("ul").stop().slideUp(100,function(){f.data("unfold",false).removeClass("multinav_unfold")})}else{f.next("ul").stop().slideDown(100,function(){f.data("unfold",true).addClass("multinav_unfold")})}if(c.data.foldercheckable){c.data.root.find(".checked").removeClass("checked");f.addClass("checked")}}else{c.data.root.find(".checked").removeClass("checked");f.addClass("checked")}},getCheckedData:function(){var f=this.options;var h=f._pos;if(h===-1){return null}var g=this.options.datasource;h=h.split("-");var c=h.length;for(var d=0;d<c-1;d++){g=g[parseInt(h[d])].children}g=g[parseInt(h[d])];if(!f.foldercheckable&&g.children!==undefined){return null}return g}})})(window.comtop);(function(a,b){b.UI.MessageBox=b.UI.Dialog.extend({options:{uitype:"MessageBox",type:"",msg:"",modal:true,canClose:true,autoClose:false,animate:false,position:"center",opacity:0.05,title:"",width:330,height:0,minWidth:150,minHeight:50,maxWidth:450,onClose:null,dragClass:".msgbox-titlebar",closeBtnClass:".msgbox-close-btn",contentClass:".msgbox-content .box-msg",footerClass:".msgbox-ft"},_init:function(c){this._super();if(b.Browser.isIE&&b.Browser.isQM){this.options.height?this.options.height+=20:null;this.options.minHeight?this.options.minHeight+=20:null}},hideOnBtnClick:true,_getView:function(){return this._buildTemplateStr("msgBox",this.options)},_calPosition:function(){var g=this.dialogWidth?this.dialogWidth:(this.dialogWidth=this.$dialog.outerWidth(true)),d=this.dialogHeight?this.dialogHeight:(this.dialogHeight=this.$dialog.outerHeight(true)),j=this.paddingV?this.paddingV:(this.paddingV=(this.$dialog.outerHeight(true)-this.$dialog.height()+2)),i=a.client.width(),c=a.client.height(),h=a.page.scrollLeft(),f=a.page.scrollTop();switch(this.options.position){case"center":return{left:i/2+h-g/2,top:c/2+f-d/2};case"rb":return{left:i+h-g-2,top:c+f-d-j}}},_animate:function(d){var g=this._calPosition();var f=this.dialogHeight,c=this.dialogWidth;if(b.Browser.isIE&&b.Browser.isQM){f+=10}switch(this.options.position){case"rb":if(d){this._setPosition({left:g.left,top:g.top+f});this.$dialog.css({height:1,minHeight:0});this.$dialog.animate({top:g.top+"px",height:f+"px",opacity:"show"},350)}else{this.$dialog.animate({height:1+"px",top:(g.top+f)+"px",opacity:"hide"},350)}break}},_setContent:function(){var c=this.options;this.$content=this.$dialog.find(c.contentClass).html(c.msg)},_getContent:function(){return this.$content},_setTitle:function(c){this.$dialog.find(".msgbox-title").text(c)},setMessage:function(c){this.$content.html(c);this.$content.removeAttr("style")},update:function(c){c=c||{};if(c.width){this.options.width=c.width;this._setSize()}if(c.title){this._setTitle(c.title)}this.options.onClose=c.onClose}});cui.alert=function(h,d,f){f=f||{};var g={msg:h,type:"alert",title:f.title||"???",width:f.width||330,buttons:[{name:"???"}],onClose:d};var c=a(document).data("alert-box");if(!c){c=new b.UI.MessageBox(g);a(document).data("alert-box",c)}c.setMessage(h);c.update(g);c.show()};cui.success=function(h,c,d){d=d||{};var f={msg:h,type:"success",title:d.title||"???",width:d.width||330,buttons:[{name:"???"}],onClose:c};var g=a(document).data("success-box");if(!g){g=new b.UI.MessageBox(f);a(document).data("success-box",g)}g.setMessage(h);g.update(f);g.show()};cui.error=function(h,c,f){f=f||{};var g={msg:h,type:"error",title:f.title||"????",width:f.width||330,buttons:[{name:"???"}],onClose:c};var d=a(document).data("error-box");if(!d){d=new b.UI.MessageBox(g);a(document).data("error-box",d)}d.setMessage(h);d.update(g);d.show()};cui.warn=function(h,c,f){f=f||{};var g={msg:h,type:"warn",title:f.title||"????",width:f.width||330,buttons:[{name:"???"}],onClose:c};var d=a(document).data("warn-box");if(!d){d=new b.UI.MessageBox(g);a(document).data("warn-box",d)}d.setMessage(h);d.update(g);d.show()};cui.confirm=function(h,d){d=d||{};var g=d.buttons||[{name:"???",handler:d.onYes},{name:"???",handler:d.onNo}];var f={msg:h,type:"confirm",title:d.title||"???",width:d.width||330,buttons:g};var c=a(document).data("confirm-box");if(!c){c=new b.UI.MessageBox(f);a(document).data("confirm-box",c)}else{c._buildButtons(g)}c.setMessage(h);c.update(f);c.show()};cui.message=function(g,d,c){var f=a(document).data("message-box-"+d);if(!f){f=new b.UI.MessageBox({modal:false,msg:g,canClose:false,autoClose:1500,animate:true,width:180,height:30,type:d?d:"alert",position:"rb",title:"???",buttons:null});a(document).data("message-box-"+d,f)}f.setMessage(g);f.show()}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.SinglePullDown=b.UI.Base.extend({options:{uitype:"SinglePullDown",name:"singlePullDownName",value_field:"id",label_field:"text",filter_fields:[],datasource:null,empty_text:"?????...",value:"",readonly:false,textmode:false,width:"200",height:200,auto_complete:false,editable:true,must_exist:true,on_select_data:null,on_filter_data:null},$el:null,$head:null,$headRack:null,$inputElement:null,$hiddenInput:null,$bodyElement:null,isOpen:false,isInputFocus:false,datasource:[],selected:{},displayValue:"",hideValue:"",preQuery:null,trHeight:0,defaultBodyHeight:5,bodyTemplateName:"tailCombo",listTemplateName:"comboList",isLoadData:false,calculateBodyPosition:true,loadData:null,callBackFunction:null,tipPosition:".cui_head",_init:function(c){this.$el=a(this.options.el);this._initParams(c);this.$el.addClass("cui");this._initHasDatasource=this.options.datasource==null?false:true},_create:function(){this.$inputElement=a(":text",this.$el);this.$hiddenInput=a("[type=hidden]",this.$el);this.$head=a(".cui_head",this.$el);this.$headRack=a(".cui_head_rack",this.$el);this._createBodyTemplate();this._resetTemplate();this._cacheFilterColumn();this._setDefaultText()},_createBodyTemplate:function(){var c=a("#cuiPullDownIsBuild_"+this.options.uuid).attr("isBuild");if(c==undefined||c==false){this._buildTemplate(a("body"),this.bodyTemplateName,this.options,true);a("#cuiPullDownIsBuild_"+this.options.uuid).attr("isBuild",true)}if(this.$bodyElement==null){this.$bodyElement=a("#cuiPullDownIsBuild_"+this.options.uuid)}this.$bodyElement.hide()},_initParams:function(d){this.options.uuid=b.guid();this._analysisHtmlTemplate();this.datasource=this.options.datasource;var c=this;this.loadData=function(f,g){if(g.query){f._filterRecord(g.query)}else{if(typeof f.options.datasource!=="function"){f.setDatasource(c.datasource)}else{f.options.datasource(f,g)}}};this._resetValue()},_analysisHtmlTemplate:function(){var d=a("a",this.$el);if(d==null||typeof d=="undefine"||d.length<1){return}var g=this.options.value_field;var f=this.options.label_field;var c=[];a.each(d,function(i,j){var h={};h[f]=a.trim(a(this).text());h[g]=a.trim(a(this).attr("value"));c.push(h)});this.$el.html("");this.options.datasource=c},setDatasource:function(c){this.options.datasource=c;this.datasource=c;this.isLoadData=true;this._setCacheData("datasource",this.options.datasource);if(this.calculateBodyPosition){this._reanderBody()}if(a.isFunction(this.callBackFunction)){this.callBackFunction();this.callBackFunction=null}if(this.openAction){this.open();this.$inputElement.focus()}},resetDataSource:function(c){this._resetValue();this.calculateBodyPosition=false;var d=this;this.callBackFunction=function(){d.calculateBodyPosition=true};this.setDatasource(c)},_resetTemplate:function(){if(this.options.readonly){this.setReadonly(true)}else{if(!this.options.editable){this.$inputElement.attr("readonly",true)}}this.setWidth(this.options.width)},_resetBodyShape:function(i){var q=this.$head.width()-2;if(b.Browser.isIE&&b.Browser.isQM){q=q+2}if(i==null||i.length<1){if(this.$bodyElement.height()<=0){this.$bodyElement.height(this.defaultBodyHeight+this.options.height);this.$bodyElement.width(q)}if(this.$bodyElement.width()<this.$head.width()){this.$bodyElement.width(q)}}else{if(this.trHeight==null||this.trHeight<=0){this.trHeight=a(".cui_tr",this.$bodyElement).outerHeight(true);if(b.Browser.isQM){a(".cui_tr",this.$bodyElement).height(this.trHeight-2)}}var f=i.length;var p=f*this.trHeight;var d=Math.floor(this.options.height/this.trHeight);if(p>this.options.height){this.$bodyElement.height(this.defaultBodyHeight+d*this.trHeight);this.$bodyElement.css({overflowY:"auto"})}else{this.$bodyElement.css({height:"auto",overflowY:"hidden"})}this.$bodyElement.css({width:"auto"});if(b.Browser.isIE){var o=this.$head.width()+2;var m=true;this.$bodyElement.show();a(".cui_tr .multitd",this.$bodyElement).each(function(s,r){m=false;if(o<a(this).width()){o=a(this).width()+50}else{a(this).parents(".cui_tr:eq(0)").css({display:"block"})}});if(m){a(".cui_tr",this.$bodyElement).each(function(s,r){if(o<a(this).width()){o=a(this).width()+35}else{a(this).css({display:"block"})}})}this.$bodyElement.width(o);var n=b.Dom.windowSize();var g=n.width;var j=this.$head;var c=j.offset();var h=c.left;var k=h+j.outerWidth()+2;if((g<=o)||(h+l>o)||(k<o)){this.$bodyElement.width(q);if(a(".cui_tr .cui_multitd",this.$bodyElement).length>0){if(b.Browser.isIE6){a(".cui_tr .cui_multitd",this.$bodyElement).width(q-20-a(".cui_tr .multicheck",this.$bodyElement).width())}else{a(".cui_tr .cui_multitd",this.$bodyElement).width(q-30-a(".cui_tr .multicheck",this.$bodyElement).width())}a(".cui_tr .cui_multitd",this.$bodyElement).addClass("cui_multi_apostrophe")}else{if(b.Browser.isIE6){a(".cui_tr",this.$bodyElement).width(q-16)}a(".cui_tr",this.$bodyElement).addClass("cui_apostrophe")}}this._initHasDatasource||this.$bodyElement.hide()}else{if(this.$bodyElement.width()<this.$head.width()&&this.$bodyElement.width()>0){this.$bodyElement.width(q)}var n=b.Dom.windowSize();var g=n.width;var j=this.$head;var c=j.offset();var h=c.left;var k=h+j.outerWidth();var l=this.$bodyElement.width();if((g<=l)||(h+l>g)||(k<=l)){this.$bodyElement.width(q);if(a(".cui_tr .cui_multitd",this.$bodyElement).length>0){a(".cui_tr .cui_multitd",this.$bodyElement).width(q-30-a(".cui_tr .multicheck",this.$bodyElement).width());a(".cui_tr .cui_multitd",this.$bodyElement).addClass("cui_multi_apostrophe")}else{a(".cui_tr",this.$bodyElement).addClass("cui_apostrophe")}}}if(b.Browser.isIE){this.$bodyElement.find("iframe").css({width:this.$bodyElement.width(),height:this.$bodyElement.height()})}}},setWidth:function(c){this.$head.width(c)},_inputdblClick:function(c){var d=c.target||c.srcElement;a(d).select()},_inputOnBlur:function(f,d){if(!this.isOpen){this.$headRack.removeClass("cursor")}var g=a.trim(a(d).val());var c=g==""&&this.hideValue=="";if(!g){if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}this._setEmptyText();c||this._change()}if(this.options.readonly||!this.options.editable||!this.isInputFocus){return}this.isInputFocus=false;if(g){this._setText(g)}},_setText:function(i){i=i+"";var d="";var j="";var g={};var f=this.options.label_field;var h=this.options.value_field;var c=this;g=c._findValueByRecord(i);if(a.isEmptyObject(g)){if(!c.options.must_exist){d=i;j=i;g[h]=i;g[f]=i;if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}}}else{d=g[f];j=g[h]}if(this.options.auto_complete){this.loadData(this,{});this.calculateBodyPosition=true}if(d){this.displayValue=d;this.hideValue=j;this.selected=g;this.$inputElement.val(this.displayValue);this.$hiddenInput.val(this.hideValue);this._removeDefaultCss();this._triggerHandler("change")}else{if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}this._setEmptyText()}this._change()},_inputOnFocus:function(d,c){if(this.options.readonly){a(c).trigger("blur");return}var f=a(c).val();if(this.options.empty_text==f){a(c).val("")}this._removeDefaultCss();this.$headRack.addClass("cursor")},_iconmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_btnmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_headmousedown:function(c){if(this.isOpen){c.stopPropagation()}},_btnclick:function(c){},_headclick:function(c){if(this.options.readonly){return}c.stopImmediatePropagation();if(!this.isLoadData){this.calculateBodyPosition=true;this.loadData(this,{query:""})}if(this.isOpen){this.close()}else{this.open();this.$inputElement.focus()}},_bodymousedown:function(c){c.stopImmediatePropagation()},_trmousedown:function(d,c){if(this.hideValue&&a.trim(this.hideValue)==a(c).attr("name")){this.close();return}if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}if(this.isInputFocus){this.loadData(this,{})}this.isInputFocus=false;a(c).addClass("selected");this.setValue(a.trim(a(c).attr("name")));this.close()},_catchKeypress:function(d,c){d=d||window.event;var h=d.target||d.srcElement;var g=d.keyCode||d.which||d.charCode;switch(g){case 38:this._previousElement();break;case 40:this._nextElement();break;case 27:this.close();break;case 108:case 13:this._enterElement();break;case 8:case 46:default:this.isInputFocus=true;if(!this.options.editable||!this.options.auto_complete){return}var j=a(c).val();var f=j.replace(/\\|\*|\(|\)|\[|\]|\+/g,"");a(c).val(f);f=this._gainQueryText(j);if(this.preQuery!=f){this.preQuery=f;this.calculateBodyPosition=true;var i={};i.query=f;this.loadData(this,i);if(!this.isOpen){this.open()}}break}},_enterElement:function(){var d=a(".cui_tr",this.$bodyElement);var c=d.index(a(".hover",this.$bodyElement));if(c<0){return}var f=a.trim(d.eq(c).attr("name"));if(this.hideValue&&this.hideValue==f){this.close();return}if(this.hideValue){a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).removeClass("selected")}if(this.isInputFocus){this.loadData(this,{})}this.isInputFocus=false;d.eq(c).addClass("selected");this.setValue(f);this.close()},_previousElement:function(){var g=a(".cui_tr",this.$bodyElement);var h="hover";var c=g.size();if(c<1){return}var f=Math.floor(this.$bodyElement.height()/this.trHeight);var d=g.index(a(".hover",this.$bodyElement));if(d<0){g.last().addClass(h);this.$bodyElement.scrollTop(this.options.datasource.length*this.trHeight)}else{if(d==0){g.eq(d).removeClass(h);g.last().addClass(h);if(d<f){this.$bodyElement.scrollTop(0)}else{this.$bodyElement.scrollTop(this.options.datasource.length*this.trHeight)}}else{g.eq(d).removeClass(h);g.eq(d-1).addClass(h);this.$bodyElement.scrollTop((d-1)*this.trHeight)}}},_nextElement:function(){var g=a(".cui_tr",this.$bodyElement);var i="hover";var c=g.size();if(c<1){return}var f=Math.floor((this.$bodyElement.height()-7)/this.trHeight);var h=(this.$bodyElement.height()-2)-f*this.trHeight;var d=g.index(a(".hover",this.$bodyElement));if(d<0){g.first().addClass(i);this.$bodyElement.scrollTop(0)}else{if(d>=(c-1)){g.eq(d).removeClass(i);g.first().addClass(i);this.$bodyElement.scrollTop(0)}else{g.eq(d).removeClass(i);g.eq(d+1).addClass(i);if(d>=(f-1)){this.$bodyElement.scrollTop(Math.max(d-f+7,0)*this.trHeight+h)}else{this.$bodyElement.scrollTop(0)}}}},_trhoverin:function(d,c){a(c).addClass("hover")},_trhoverout:function(d,c){a(c).removeClass("hover")},open:function(){if(typeof this.options.datasource==="function"){this.openAction=true;return}this.$inputElement.removeClass("vignette");if(this.calculateBodyPosition){this._reanderBody()}this.$bodyElement.css("z-index",999999);this.$bodyElement.show();this._fixedPositionBody();var i=a("#cuiPullDownIsBuild_"+this.options.uuid);var g=this.options.uitype==="SinglePullDown"?i.find(".selected:eq(0)"):i.find(".multiSelected:eq(0)");var f=i.innerHeight();var d=i[0].scrollHeight;var c=i.scrollTop();var h;if(g.length>0&&f!==d){h=i.children("div").index(g)+1;if(h===1){i.scrollTop(0)}else{if(h*23>=c+f){i.scrollTop(h*23)}else{if((h-1)*23<=c){i.scrollTop((h-1)*23)}}}}else{if(g.length===0){i.scrollTop(0)}}this.isOpen=true;a(document).one("mousedown",a.proxy(function(j){this.close()},this))},_cacheFilterColumn:function(){var c=this.options.filter_fields;var d=[];d.push(this.options.label_field);d=d.concat(c);this._setCacheData("filterColumn",d)},_fixedPositionBody:function(){var l=this.$bodyElement;var k=this.$head;var p=b.Dom.windowSize();var c=k.offset();var m=k.outerHeight();var d=k.outerWidth();var f=p.width;var h=p.height;var q=a(window).scrollLeft();var o=a(window).scrollTop();var n=l.outerWidth();var j=l.outerHeight();var g=c.left;var i=c.top+m;if(g+n>f+q){if(c.left+d>n){g=d+c.left-n}else{if(f>n||f<n){g=0}}}if(c.top+m+j+5>h+o){if(c.top-j>0&&c.top-o){i=c.top-j-1}else{if(c.top<h+o-c.top-m){i=c.top+m+1}}}else{i=c.top+m+1}l.css({left:g,top:i})},close:function(){if(this.isOpen){this.isOpen=false;this.$headRack.removeClass("cursor");this.$bodyElement.find(".hover").removeClass("hover");this.$bodyElement.hide();this.$bodyElement.css("z-index",0)}},_change:function(d){var c=this.options.on_select_data;if(a.type(c)==="string"){window[c](this.selected)}else{if(a.isFunction(c)){c(this.selected)}}},_setDefaultText:function(){if(a.trim(this.options.value)==""){this._setEmptyText()}else{this.setValue(this.options.value)}},_setEmptyText:function(){this.$inputElement.val(this.options.empty_text);this.$inputElement.addClass("vignette");this.$inputElement.attr("title","");this.$hiddenInput.val("");this._resetValue()},_resetValue:function(){this.displayValue="";this.hideValue="";this.selected=null},_removeDefaultCss:function(){this.$inputElement.removeClass("vignette");this.$headRack.removeClass("cursor")},setValue:function(c,d){if(a.trim(c).length<1||a.trim(c)==""){this._setEmptyText();return}if(this.isLoadData){this._setComponentEffect(c,d)}else{this.calculateBodyPosition=false;this.callBackFunction=function(){this._setComponentEffect(c,d)};this.loadData(this,{query:""})}},_setComponentEffect:function(d,f){var c=this.hideValue;this._setComponentValue(d);this.$inputElement.val(this.displayValue);this.$inputElement.attr("title",this.displayValue);this._removeDefaultCss();this.$hiddenInput.val(this.hideValue);f||this._triggerHandler("change");this.calculateBodyPosition=true;if(c!=this.hideValue){this._change()}},getText:function(){return this.displayValue},getValue:function(){return this.$hiddenInput.val()},getData:function(){return this.selected},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}if(this.isLoadData){this._setComponentValue(this.options.value);return this.getText()}else{this.calculateBodyPosition=false;this.callBackFunction=this.setTextMode;this.loadData(this,{query:""})}},_setComponentValue:function(g){if(a.trim(g)==this.hideValue||this.options.datasource==null){return}var j=g;var c={};var f=this.options.label_field;var d=this.options.value_field;var h="";var k="";var i=true;a.each(this.options.datasource,function(l,m){if(m[d]==j){h=m[f];c=m;k=m[d];i=false}});if(i){return}this.selected=c;this.displayValue=h;this.hideValue=k},onInValid:function(f,d){this.$headRack.addClass("input_invalid");var c=this.$el.attr("tip");if(c){this.$el.data("save_tip_message",c)}this.$el.attr("tip",d)},onValid:function(d){this.$headRack.removeClass("input_invalid");var c=this.$el.data("save_tip_message");this.$el.removeAttr("tip");if(c){this.$el.removeData("save_tip_message")}},_filterRecord:function(f){var d=this.options.on_filter_data;var c=[];if(d){if(a.type(d)==="string"){c=window[d](this,f)}else{if(a.isFunction(d)){c=d(this,f)}}}else{c=this._searchRecordByText(f)}this._setCacheData("datasource",c);this._reanderBody();this._fixedPositionBody()},_searchRecordByText:function(d){if(d==null||d.length<1){return this.options.datasource}var i=[];var g=a.extend({},this.options);var f=this._getCacheData("filterColumn");var h=false;var c=new RegExp("^"+d,"i");i=a.grep(g.datasource,function(k,j){h=false;a.each(f,function(m,l){h=c.test(k[l]);if(h){return false}});return h});return i},_gainQueryText:function(c){return c},_findValueByText:function(c){if(!this.options.data){return null}var g=null;var f=this.options.label_field;var d=this.options.value_field;a.each(this.options.data,function(h,i){if(i[f]==c){g=i[d];return false}});return g},_findValueByRecord:function(d){if(!this.options.datasource){return null}var c={};var f=this.options.label_field;a.each(this.options.datasource,function(g,h){if(h[f]==d){c=h;return false}});return c},_reanderBody:function(){var c=a.extend({},this.options);c.datasource=this._getCacheData("datasource");if(a.isArray(c.datasource)){this.calculateBodyPosition=false}this._buildTemplate(this.$bodyElement,this.listTemplateName,c);this._resetBodyShape(c.datasource);this._setChooseCss()},_setChooseCss:function(){if(this.hideValue){this.$bodyElement.find(".selected").removeClass("selected");a(".cui_tr[name='"+this.hideValue+"']",this.$bodyElement).addClass("selected")}},_setCacheData:function(c,d){this.$el.data(c,d)},_getCacheData:function(c){return this.$el.data(c)},_removeCacheData:function(c){this.$el.removeData(c)},setReadonly:function(c){c=typeof c=="undefined"?true:c;var d=this,f=d.options;if(c){d.$head.addClass("pulldown_readonly");d.$inputElement.attr("readonly",true)}else{d.$head.removeClass("pulldown_readonly");d.$inputElement.attr("readonly",false)}f.readonly=c;if(!f.editable){d.$inputElement.attr("readonly",true)}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.MultiPullDown=b.UI.SinglePullDown.extend({options:{uitype:"MultiPullDown",name:"MultiPullDownName",tpls:{comboList:"checkList"}},defaultBodyHeight:29,selected:[],displayValue:[],hideValue:[],listTemplateName:"checkList",_enterElement:function(){var c=a(".cui_tr",this.$bodyElement).index(a(".hover",this.$bodyElement));if(c<0){return}var g=a(".cui_tr :checkbox",this.$bodyElement).eq(c);var f=a(".cui_tr",this.$bodyElement).eq(c);var d=g.is(":checked");g.attr("checked",!d);if(d){f.removeClass("multiSelected");this._cancelValue(g.attr("name"));this._setComponentDisplayValue()}else{f.addClass("multiSelected");this.setValue(g.attr("name"))}this.isInputFocus=false;this.$inputElement.focus()},_gainQueryText:function(f){var c=f;var d=f.lastIndexOf(";");if(a.trim(f)!=""&&d!=-1){c=f.substring(d+1)}return c},_clickcheckAllHandle:function(d,c){d.stopImmediatePropagation();var f=a(c,this.$bodyElement).is(":checked");this.$inputElement.removeClass("vignette");if(f){this._chooseAll()}else{this._cancelAll()}if(this.hideValue.length<1){this.isInputFocus=true}this.$inputElement.focus()},_checkclickHandel:function(g,d){g.stopImmediatePropagation();var c=a(d,this.$bodyElement).attr("name");var f=a(".cui_tr[name='"+c+"']",this.$bodyElement);var j=a(d,this.$bodyElement).is(":checked");var i=a(".cui_tr",this.$bodyElement).size();var h=a(":checked",this.$bodyElement).size();if(j){if(i==h){a(".multicheckAll",this.$bodyElement).attr("checked",true)}f.addClass("multiSelected");this.setValue(c)}else{a(".multicheckAll",this.$bodyElement).attr("checked",false);f.removeClass("multiSelected");this._cancelValue(c);this._setComponentDisplayValue()}this.isInputFocus=false;this.$inputElement.focus()},_inputOnBlur:function(d,c){if(!this.isOpen){this.$headRack.removeClass("cursor")}var g=[];var f=a(c).val();if(!f){this._setEmptyText()}else{g=f.split(";")}if(this.options.readonly||!this.options.editable||!this.isInputFocus){return}this.isInputFocus=false;if(g.length>0){this._setText(g)}else{this._setEmptyText()}},_setText:function(c){var g={};var f=this.options.label_field;var h=this.options.value_field;var d=this;this.displayValue=[];this.hideValue=[];this.selected=[];a.each(c,function(i,j){g=d._findValueByRecord(j);if(!a.isEmptyObject(g)){d.displayValue.push(g[f]);d.hideValue.push(g[h]);d.selected.push(g)}});if(this.displayValue.length<1){this._setEmptyText();if(this.options.auto_complete){this.loadData(this,{});this.calculateBodyPosition=true}}else{this.$inputElement.val(this.displayValue.join(";"));this.$hiddenInput.val(this.hideValue.join(";"));if(!this.isOpen){this._removeDefaultCss()}}this._triggerHandler("change");this._change()},_chooseAll:function(){this._resetValue();var d=[];var c;this.$bodyElement.find(".cui_tr").each(function(g,f){c=a(":checkbox",this);c.attr("checked",true);a(this).addClass("multiSelected");d.push(c.attr("name"))});this.setValue(d)},_cancelAll:function(){var f=[];this.$bodyElement.find(".cui_tr").each(function(h,g){a(":checkbox",this).attr("checked",false);a(this).removeClass("multiSelected");f.push(a(this).attr("name"))});for(var d=0,c=f.length;d<c;d++){this._cancelValue(f[d])}this._setComponentDisplayValue()},setValue:function(d){var c=[];if(typeof d=="string"){if(a.trim(d)){c=d.split(";")}}else{if(a.isArray(d)){c=d}}if(c.length<1){this._setEmptyText();return}if(this.isLoadData){this._setComponentEffect(c)}else{this.calculateBodyPosition=false;this.callBackFunction=function(){this._setComponentEffect(c)};this.loadData(this,{query:""})}},_setComponentEffect:function(c){this._setComponentValue(c);this._setComponentDisplayValue()},_setComponentDisplayValue:function(){this.$inputElement.val(this.displayValue.join(";"));this.$inputElement.attr("title",this.displayValue.join(";"));this._removeDefaultCss();this.$hiddenInput.val(this.hideValue.join(";"));this._triggerHandler("change");this.calculateBodyPosition=true;this._change()},_cancelValue:function(j){var c,h,i;var g=this.options.label_field;var f=this.options.value_field;a.each(this.options.datasource,function(k,l){if(l[f]==j){c=l;i=l[f];h=l[g];return false}});var d=-1;a.each(this.hideValue,function(k,l){if(l==i){d=k;return false}});if(d>=0){this.selected.splice(d,1);this.hideValue.splice(d,1);this.displayValue.splice(d,1)}},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}if(this.isLoadData){this._setComponentValue(this.options.value);return this.getText().join(";")}else{this.calculateBodyPosition=false;this.callBackFunction=this.setTextMode;this.loadData(this,{query:""})}},_setComponentValue:function(i){if(this.options.datasource==null){this._resetValue();return}var k=[];if(typeof i=="string"){k=i.split(";")}else{k=i}var g=[];var d=this.options.label_field;var l=this.options.value_field;var j="multiSelected";var h=[];var f=[];var c=[];a.each(this.options.datasource,function(m,n){a.each(k,function(o,p){if(p==n[l]){g.push(n);f.push(n[l]);h.push(n[d]);c.push(m)}})});if(f.length<1){return}this.selected=this.selected.concat(g);this.displayValue=this.displayValue.concat(h);this.hideValue=this.hideValue.concat(f)},_resetValue:function(){this.displayValue=[];this.hideValue=[];this.selected=[]},_setChooseCss:function(){if(this.hideValue.length>0){if(this.hideValue.length==this.options.datasource.length){a(".multicheckAll",this.$bodyElement).attr("checked",true)}else{a(".multicheckAll",this.$bodyElement).attr("checked",false)}a.each(this.hideValue,function(d,f){var c=a("input[name='"+f+"']",this.$bodyElement);c.attr("checked",true);c.parents("div.cui_tr").eq(0).addClass("multiSelected")})}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.BasePagination=b.UI.Base.extend({_init:function(c){this.$container=a(this.options.el);this.setInitData(this.options)},_create:function(){if(this.totalItems<=0){this.$container.empty();return}this._calTotalPage();this._draw();this._bindEvent(this.$container)},_draw:function(){},_bindEvent:function(){},_calTotalPage:function(){this.totalPage=Math.ceil(this.totalItems/this.itemsPerPage);if(this.currentPage>=this.totalPage){this.currentPage=this.totalPage}},reDraw:function(){this._create();return this},setCount:function(c){this.totalItems=c;return this},setPagesize:function(c){this.itemsPerPage=c;return this},setInitData:function(c){c.count!=null?this.totalItems=c.count:null;c.pagesize!=null?this.itemsPerPage=c.pagesize:null;c.pageno!=null?this.currentPage=c.pageno:null;return this},go:function(c){if(c>this.totalPage){c=this.totalPage}this.currentPage=c;this._click(c,this.itemsPerPage)},next:function(){if(this.currentPage==this.totalPage){return}this.currentPage++;this._click(this.currentPage,this.itemsPerPage)},prev:function(c){if(this.currentPage==1){return}this.currentPage--;this._click(this.currentPage,this.itemsPerPage)},getCurrentPage:function(){return this.currentPage},_click:function(d,c){if(this.options.on_page_change){this.options.on_page_change.call(this,d,c)}},_setItemsPerPage:function(c){this.itemsPerPage=c}});b.UI.Pagination=b.UI.BasePagination.extend({options:{uitype:"Pagination",cls:"pagination",count:0,display_page:4,pagesize:25,pageno:1,pagesize_list:[25,50,100],on_page_change:null},_draw:function(){var g=this.options.display_page;if(g>this.totalPage){g=this.totalPage}if(g<=3){g=3}var c=Math.floor((g-1)/2),i=Math.ceil((g-1)/2);if(this.currentPage-2<c){i=i+c-(this.currentPage-2)}else{if(this.totalPage-this.currentPage-1<i){c=c+i-(this.totalPage-this.currentPage-1)}}if(c>this.currentPage-1){c=this.currentPage-1}if(i>this.totalPage-this.currentPage){i=this.totalPage-this.currentPage}var d=this.currentPage-c,f=this.currentPage+i;var h={totalItems:this.totalItems,totalPage:this.totalPage,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,selectList:this.options.pagesize_list,displayPreCount:c,displayNextCount:i,toFirst:d,toLast:f};this.$container.html(this._buildTemplateStr("pagination",h)).addClass(this.options.cls).addClass("cui");if(b.Browser.isQM&&b.Browser.isIE){this.$container.addClass("pagination-qm")}},_bindEvent:function(){var c=this,d=this.$container;d.find('[act="numPage"]').bind("click",function(){c.go(parseInt(a(this).text(),10));return false});d.find('[act="prevPage"]').bind("click",function(){c.prev();return false});d.find('[act="nextPage"]').bind("click",function(){c.next();return false});d.find('[act="goPage"]').bind("click",f);d.find('[act="cusPage"]').bind("keydown",function(g){if(g.keyCode===13){f()}});this.$container.find('[act="sizePage"]').bind("click",function(){c._setItemsPerPage(parseInt(a(this).text(),10));c._calTotalPage();c.go(c.currentPage);return false});function f(){var g=parseInt(c.$container.find(".page-skip-num").val(),10);if(isNaN(g)||g<=0){g=1}if(g>c.totalPage){g=c.totalPage}c.go(g);return false}}})})(window.comtop.cQuery,window.comtop);(function(f,g){var d=0,c=1,b="change";var a=function(i){if(!i){return{top:0,bottom:0,left:0,right:0}}var h=null;if(g.Browser.isIE){h=i.currentStyle}else{h=getComputedStyle(i,false)}return{top:parseInt(h.paddingTop),bottom:parseInt(h.paddingBottom),left:parseInt(h.paddingLeft),right:parseInt(h.paddingRight)}};comtop.UI.Panel=comtop.UI.Base.extend({options:{uitype:"Panel",header_title:"",width:0,height:0,url:"",html:"",on_change:null,collapsible:true,status:c,animate:"",containerCls:"cui-panel",titleCls:"cui-panel-title",triggerCls:"cui-panel-trigger",contentCls:"cui-panel-content"},container:null,title:null,trigger:null,content:null,status:null,loaded:false,events:[b],_init:function(h){var i=this.options;if(h.height){if(/\d+(\%|px|em|pt)/.test(h.height)){i.height=h.height}}this.status=i.status;if(h.html&&window[h.html]){i.html=window[h.html]}if(h.header_title&&window[h.header_title]){i.header_title=window[h.header_title]}if(!i.lazy){this.loaded=true}i.el.css({zoom:1});if(typeof i.on_change=="function"){this.bind("change",i.on_change)}if(f.trim(i.el.html())!==""){this._needBuildTemp=true}},_create:function(){var i=this.options,h=i.el;this._navHeight=31;if(this._needBuildTemp){this._initStructures()}this._parseMarkup();this._initView()},_parseMarkup:function(){var h=this.options;this.container=f("."+h.containerCls,h.el);this.title=f("."+h.titleCls,h.el);this.trigger=f("."+h.triggerCls,h.el).eq(0);this.content=f("."+h.contentCls,h.el)},_initView:function(){var i=this.options,h;if(arguments.length==0){h=true}else{h=arguments[0]}this._setUpSize();this._bindTriggers();if(i.header_title){this._setTitle(i.header_title)}if(i.html&&h){if(typeof(i.html)==="string"){this.content.find("div").html(i.html)}else{this.content.find("div").append(f(i.html))}}else{if(i.url&&h){this._loadFrame()}}if(i.collapsible!==undefined){if(i.collapsible==false){this.trigger.hide()}else{this.trigger.show()}}if(i.status!==undefined){if(i.status==c){this._showView()}else{this._hideView()}}},_setUpSize:function(){var i=this.options,l,h=i.height,k=i.el.parent();var j=a(i.el.find(".cui-panel-content").get(0)),m=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?0:(j.top+j.bottom)+2;this._contentPadding=j;if(i.width){this.container.width(i.width)}if(h){if(h==="100%"){if(k.prop("tagName")==="BODY"){this.h=f.client.height();i.el.find(".cui-panel-content").eq(0).css("height",0);this.margin=parseInt(k.css("marginTop"))+parseInt(k.css("marginBottom"));i.height=h=this.h-this.margin;this._resizeHandle()}else{this.margin=0;i.height=h=i.el.parent().height()}}l=h-this._navHeight-m;l=l<10?10:l;i.content_height=l;i.el.find(".cui-panel-content").height(l);i.el.find(".cui-panel-iframe").height("100%")}},_resizeHandle:function(){if(this.margin!==undefined){var h=this;var j=this.options;var k=this._contentPadding,l=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?(k.top+k.bottom)+2:0;function i(){var m=f.client.height();h.content.css("height",h.content.height()+m-h.h+l);h.h=m}f(window).on("resize",i)}},get:function(h){var i=this.options[h];if(h=="width"){i=i||this.container.width()}else{if(h=="height"){i=i||this.container.height()}else{if(!i&&h=="header_title"){i=this._getTitle()}else{if(h=="status"){i=this.status}}}}return i},set:function(i,j){var h=false;if(typeof(i)==="string"){this.options[i]=j;if(i=="url"||i=="html"){h=true}}else{if(i.hasOwnProperty("url")||i.hasOwnProperty("html")){h=true}f.extend(this.options,i)}this._initView(h);return this},expend:function(){if(!this.options.collapsible||this.status==c){return this}this._showView();this.status=c;if(this.options.onchange){this.options.onchange.call(null,this.status)}f(this).triggerHandler(b,this.status);return this},collapse:function(){if(!this.options.collapsible||this.status==d){return this}this._hideView();this.status=d;if(this.options.onchange){this.options.onchange.call(null,this.status)}f(this).triggerHandler(b,this.status);return this},toggle:function(){if(this.status==c){this.collapse()}else{this.expend()}return this},resize:function(h,j){if(arguments.length==0){return}if(typeof h=="number"){this.options.height=h;var i=this._contentPadding,k=(g.Browser.isQM&&g.Browser.isIE&&!g.Browser.isIE9)?0:(i.top+i.bottom)+2,l=h-this._navHeight-k;if(this.options.url){this.content.find("iframe").height(l)}else{this.content.find("div").height(l)}}if(typeof j=="number"){this.options.width=j;this.container.width(j)}},_initStructures:function(){var h=this.options,i=f("<div></div>");this._buildTemplate(i,"panel",h);f(h.el).before(i).appendTo(f("."+h.contentCls,i).find("div"));h.el.css("height","100%");this.el=h.el=i},_loadFrame:function(){var h=this,i=this.options,j=this.content.find("iframe");j.attr("src",this.options.url);this.loaded=true;j.one("load",function(){var o=j.get(0).contentWindow.document,n=o.body.scrollHeight,m=o.documentElement.scrollHeight,k=Math.max(n,m);if(i.content_height){k=k<i.content_height?i.content_height:k}if(g.Browser.isIE6&&!g.Browser.isQM){var l=j.height();if(l&&k>l){f(o).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(f(o).width()>j.width()){k+=17}if(!i.height){j.height(k)}})},_bindTriggers:function(){var i=this;var h=this.options.status;this.trigger.toggle(function(){if(h==c){i.collapse()}else{i.expend()}},function(){if(h==c){i.expend()}else{i.collapse()}})},_getTitle:function(){return this.title.find(".cui-panel-title-text").html()},_setTitle:function(h){this.title.find(".cui-panel-title-text").html(h)},_showView:function(){var h=this.options.animate;this.trigger.removeClass("collapse");if(h&&h==="slide"){this.content.slideDown(100)}else{this.content.show()}},_hideView:function(){var h=this.options.animate;this.trigger.addClass("collapse");if(h&&h==="slide"){this.content.slideUp(100)}else{this.content.hide()}}});comtop.UI.Panel.EXPAND=c;comtop.UI.Panel.COLLAPSE=d})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.RadioGroup=b.UI.Base.extend({options:{uitype:"RadioGroup",cls:"radio-group",name:"",value:"",radio_list:[],readonly:false,border:false,direction:"horizontal",textmode:false,br:[],on_change:null},_init:function(c){this.options.value=c.value+"";this.$container=a(this.options.el).addClass(this.options.cls).addClass("cui");this.readonly=this.options.readonly;this.options.color="#FF7D21";this._getRadioList()},_create:function(){var d=this.options,c=this;this.$container.html(this._buildTemplateStr("radioGroup",d));this.$radioList=this.$container.find("input[type=radio]");c.$radioList.on("change",c,c._onChange);if(d.readonly===true){this.setReadonly(true)}else{var f=d.readonly_value_list;if(f.length){this.setReadonly(true,f)}}if(d.value!=null&&d.value!=""&&d.value!=undefined&&d.value!="null"&&d.value!="undefined"){this.setValue(d.value,true)}if(d.border===true){this.$container.addClass("hasborder")}this.curr_checked();this.$container.data("input_tip",this.$container.attr("tip"));c._setHighlight()},curr_checked:function(){var c=this;c.$radioList.each(function(d,f){if(a(f).prop("checked")){c.checked_dom=f}})},_onChange:function(d){var c=d.data;var f=c.options;c._setHighlight();c._triggerHandler("change");c.curr_checked();if(f.on_change){f.on_change.call(c,c.getValue())}},setDatasource:function(c){this.options.radio_list=c;this._getRadioList()},_getRadioList:function(){var g=this.options;var t=g.readonly_value_list=[];var d=g.radio_list;var s=a.type(d);if(s==="array"&&d.length>0){for(var m=0,l=d.length;m<l;m++){if(d[m].readonly!==undefined){t.push(d[m].value)}}return}else{if(s==="function"){d(this);return}}var r=a.trim(this.$container.text()).split(/\s+/g);var p=this.$container.find("input[type=radio]");var q=[];for(var m=0;m<p.length;m++){var f=p.eq(m);var c=f.attr("name");if(c&&c!=""){g.name=c}var n=f.attr("readonly");var h=f.val();var k={text:r[m],value:h,color:f.attr("color")};if(n!==undefined){t.push(h);k.readonly=n}q.push(k)}g.radio_list=q},setValue:function(g,h){if(g===null||g===undefined||g===""){this.$radioList.attr("checked",false);this.$radioList.closest("label").css({color:"black"});if(this.getValue()!==null||!h){this._onChange({data:this})}return}var d=this.$radioList.filter(":checked").closest("label");var c=this.$radioList.filter("[value="+g+"]").attr("checked","checked");var f=c.closest("label");this.checked_dom=c;d.css({color:this.options.color});f.css({color:f.data("color")});if(this.getValue()!==g||!h){this._onChange({data:this})}},getValue:function(){var c=this.$radioList.filter(":checked").val();return c==undefined?null:c},getText:function(){var c=this.$radioList.filter(":checked");if(c.length==0){return null}else{return a.trim(c.parent().text())}},setReadonly:function(d,c){if(c===undefined){this.readonly=d}if(d===true){this._addReadOnly(c)}else{this._removeReadOnly(c);this._setHighlight()}},_addReadOnly:function(d){var c=this;var k=a.type(d);if(k==="undefined"){this.$radioList.each(function(j,l){a(l).off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked;if(c.checked_dom){a(c.checked_dom).prop("checked",true)}}})}else{if(k==="array"){for(var g=0,f=d.length;g<f;g++){var h=this.$radioList.filter("[value="+d[g]+"]");h.off("change",c._onChange).parent().addClass("readonly").removeAttr("style").end().attr("readonly","readonly")[0].onclick=function(){this.checked=!this.checked;if(c.checked_dom){a(c.checked_dom).prop("checked",true)}}}}else{new Error("valueList error")}}},_removeReadOnly:function(d){var c=this;var h=a.type(d);if(h==="undefined"){this.$radioList.each(function(j,k){a(k).on("change",c,c._onChange).parent().removeClass("readonly").end().removeAttr("readonly")[0].onclick=null})}else{if(h==="array"){for(var g=0,f=d.length;g<f;g++){this.$radioList.filter("[value="+d[g]+"]").parent().removeClass("readonly").end().on("change",c,c._onChange).removeAttr("readonly")[0].onclick=null}}else{new Error("valueList error")}}},isReadonly:function(d){if(d===undefined){return this.readonly}else{var c=this.$radioList.filter("[value="+d+"]").attr("readonly");if(c!==undefined){return true}else{return false}}},_setHighlight:function(){var c=this;this.$container.find("label:not(.readonly)").css({fontWeight:"normal",color:"black"});var d=this.$radioList.filter(":checked").closest("label");if(d.data("color")){d.css({fontWeight:"bold",color:d.data("color")})}else{d.css({color:c.options.color})}},onInValid:function(f,d){var c=this.$container;c.css({border:"1px solid red"});if(!this.options.border){c.css({padding:"2px 5px"})}if(typeof(c.attr("tip"))!="undefined"){c.attr("tip",d)}},onValid:function(d){var c=this.$container;if(this.options.border){c.css({border:"1px solid #7F9DB9"})}else{c.css({border:"none",padding:"3px 5px"})}c.removeAttr("tip")},getLabelValue:function(){this.$container.css({padding:"0"});var h=this.options,g=h.radio_list,f=h.value;if(g&&f){for(var d=0;d<g.length;d++){var c=g[d];if(c.value==f){return c.text}}}return""}})})(window.comtop.cQuery,window.comtop);(function(a,b){comtop.UI.Tab=comtop.UI.Base.extend({options:{uitype:"Tab",width:0,height:0,tab_width:65,active_index:0,outer_scroll:false,tabs:[],fill_height:false,reload_on_active:true,closeable:false,trigger_type:"click"},_className:{parentCls:"cui-tab",navCls:"cui-tab-nav",contentCls:"cui-tab-content",titleCls:"cui-tab-title",activeTriggerCls:"cui-active",hoverTriggerCls:"cui-tab-hover",closeTriggerCls:"cui-tab-close"},active_index:0,navs:[],titles:[],contents:[],urls:[],events:["switch"],_initUrl:function(){this.urls=a.map(this.options.tabs,function(c){return c.url||false})},_init:function(){this.active_index=this.options.active_index||0;this._initUrl()},_create:function(){var f=this.options,d=f.el,k=".",c=this;this._navHeight=a(k+this._className.parentCls,d).height();if(f.fill_height){var i=f.el.parent();if(i.prop("tagName")==="BODY"){var g=a.client.height(),j=parseInt(i.css("marginTop"))+parseInt(i.css("marginBottom"));f.height=g-j;this._resizeHandle()}else{f.height=i.height()}}this._parseMarkup();this._setUpHeight();this._initView();this._bindTriggers()},_resizeHandle:function(){var c=this;var f=this.options;c.h=a.client.height();function d(){var g=a.client.height();c.resize(f.el.height()+g-c.h);c.h=g}a(window).on("resize",d)},_parseMarkup:function(){var f=this._className,d=this.options.el,h=".",c=a(h+f.navCls,d),g=a(h+f.contentCls,d);this.navs=c.children();this.titles=a(h+f.titleCls,d);this.contents=g.children()},_setUpHeight:function(){var c=this.options,d;if(!c.height){return}d=c.height-this._navHeight;d=d<10?10:d;c.content_height=d},attr:function(){var c=arguments;if(c.length==0){return this.options}else{if(c.length==1){if(typeof c[0]==="string"){var f=this.options[c[0]];if(c[0]=="width"){f=a(this.options.el).width()}if(c[0]=="height"){f=a(this.options.el).height()}return f}else{if(typeof c[0]==="object"){var d=this.options;a.extend(this.options,c[0]);this._setUpHeight();this._initView();return this}}}}},switchTo:function(c){this._switchTo(c);return this},next:function(){this.switchTo((this.active_index+1)%this.navs.length);return this},prev:function(){var c=this.navs.length;this.switchTo((this.active_index-1+c)%c);return this},onClose:function(c){a(this).bind("close",c);return this},resize:function(d,g){var i={};if(typeof d=="number"){i.height=d}if(typeof g=="number"){i.width=g}a.extend(this.options,i);this._setUpHeight();var f=this.options,h=a("."+this._className.contentCls,f.el),j=b.Browser;if(f.width){f.el.width(f.width);var c=typeof f.width==="number"?(f.width-(j.isIE&&j.isQM?0:6)):f.width;h.width(c)}if(f.content_height){h.height(f.content_height+(j.isIE&&j.isQM?10:0))}},addTab:function(){var f=this.options;var g={title:"",closeable:f.closeable,tab_width:f.tab_width},d=arguments,c=this.navs.length;if(d.length==2){g.title=d[0];g.url=d[1]}else{if(d.length==1&&typeof(d[0])=="object"){a.extend(g,d[0])}}f.tabs[c]=g;this._add(g);return this},removeTab:function(c){if(c<this.navs.length&&this.navs.length>1){if(this.active_index===c){this.next()}this.navs.eq(c).remove();this.contents.eq(c).remove();this.urls.splice(c,1);if(this.active_index>0&&c<this.active_index){this.active_index--}var d=this.options.tabs.splice(c,1);this._parseMarkup();a(this).triggerHandler("close",d)}return this},getActiveTab:function(){return this.getTab(this.active_index)},getTab:function(f,d){if(!d){return this.navs.get(f)}var c;switch(d){case"tab_width":c=this.navs.eq(f).width();break;case"title":c=this.titles.eq(f).html();break;case"html":c=this.options.tabs(f).html;break;case"url":c=this.options.tabs(f).url;break;case"closeable":c=this.navs.eq(f).hasClass(this._className.closeTriggerCls);break}return c},getContent:function(c){var c=c||this.active_index;return this.contents[c]},setTab:function(d,c,f){if(typeof(c)==="string"){this.options.tabs[d][c]=f}else{a.extend(this.options.tabs[d],c)}this._initTabs();this._initUrl();if(this.active_index==d){this._loadFrame(this.active_index,this.active_index)}return this},index:function(){return this.active_index},_bindTriggers:function(){var d=this;this.navs.hover(function(){if(d.navs.index(a(this))!==d.active_index){a(this).addClass(d._className.hoverTriggerCls)}},function(){a(this).removeClass(d._className.hoverTriggerCls)});if(this.options.trigger_type=="click"){a("."+this._className.navCls,this.options.el).bind("click",a.proxy(this,"_onTrigger"))}else{if(this.options.trigger_type=="mouseover"){this.navs.bind("mouseover",a.proxy(this,"_onMouseover"))}}var c="."+this._className.closeTriggerCls;a("."+this._className.navCls+" > li",this.options.el).delegate(c,"click",function(g){var h=d._findNav(g.target),f=d.navs.index(h);d.removeTab(f);g.preventDefault()})},_loadFrame:function(h,g){var f=this,i=this.options,d=this.urls.length>0&&this.urls[h];if(g!=undefined&&i.reload_on_active){var c=this.contents.eq(g).unbind().removeData("_binded");c.attr("src","about:blank");if(!i.height){c.height(0)}}if(d){var j=this.contents.eq(h).show();if(j.attr("src")=="about:blank"||i.reload_on_active){j.attr("src",this.urls[h]);if(!j.data("_binded")){j.bind("load",function(){try{var p=j.get(0).contentWindow.document,o=p.body.scrollHeight,m=p.documentElement.scrollHeight,k=Math.max(o,m);if(b.Browser.isIE6){var l=parseInt(j.css("height").replace("px",""));if(l&&k>l){a(p).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(a(p).width()>j.width()){k+=17}if(!i.height){j.height(k)}}catch(n){}}).data("_binded",true)}}}},_initView:function(g){this.contents.hide();this.contents.eq(this.active_index).show();var d=this.options,f=a("."+this._className.contentCls,d.el),h=b.Browser;if(d.width){d.el.width(d.width);var c=typeof d.width==="number"?(d.width-(h.isIE&&h.isQM?0:6)):d.width;f.width(c)}if(d.content_height){f.height(d.content_height+(h.isIE&&h.isQM?10:0))}if(d.tab_width){this.navs.width(d.tab_width)}if(d.tabs.length>0){this._initTabs(g)}else{this._initCloseBtns()}this._initContents()},_initTabs:function(f){var c=this,d=c.options;if(d.tabs.length>0){a.each(d.tabs,function(g,h){if(h.tab_width){c.navs.eq(g).width(h.tab_width)}if(h.closeable!==undefined||d.closeable!==undefined){var i=h.closeable!==undefined?h.closeable:d.closeable;if(i){c._addCloseBtn(g)}else{c._removeCloseBtn(g)}}if(h.title){c.titles.eq(g).html(h.title)}})}},_initContents:function(c,h){var g=c||this.active_index;var d=this.options.tabs[g],f=this.contents.eq(g);if(!d){return}if(d.html){if(!d.__isLoad_){if(typeof(d.html)==="string"){f.html(d.html)}else{f.append(a(d.html))}d.__isLoad_=true}}else{if(d.url){this._loadFrame(g,h)}}},_initCloseBtns:function(){var f=this.options,c=this.navs.length;if(f.closeable!==undefined){if(f.closeable===true){for(var d=0;d<c;d++){this._addCloseBtn(d)}}else{for(var d=0;d<c;d++){if(!this._isHTMLTemplate){this._removeCloseBtn(d)}}}}},_onTrigger:function(c){var d=this._findNav(c.target);if(d){idx=this.navs.index(d);this._switchTo(idx,c)}},_findNav:function(c){while(!(c==this.options.el||c==document.body)){if(a(c).parent().hasClass(this._className.navCls)){return c}c=c.parentNode}return null},_onMouseover:function(d){var c=this.navs.index(d.currentTarget);this._switchTo(c,d)},_triggerIsValid:function(c){return this.active_index!=c&&c<this.navs.length},_switchTo:function(g,h,l){if(!this._triggerIsValid(g)){return}var j=this.active_index,k=g,f=this.navs.eq(j),c=this.navs.eq(k),d=this.contents.eq(j),i=this.contents.eq(k);this.active_index=this.options.active_index=k;this._switchTrigger(f,c)._switchView(d,i);this._initContents(this.active_index,j);l&&l.call(this);a(this).triggerHandler("switch",[{fromTab:j,toTab:k}]);return this},_switchTrigger:function(d,c){d.removeClass(this._className.activeTriggerCls);c.addClass(this._className.activeTriggerCls);return this},_switchView:function(c,d){c.hide();d.show();return this},_add:function(d){var f=this.options,c=this.navs.length;var j=!!d.closeable,i=this._findClone(j),k;if(i!==-1){k=this.navs.eq(i).clone(true)}else{k=this.navs.eq(0).clone(true);if(j){this._addCloseBtn(c,k)}else{this._removeCloseBtn(k)}}if(k.hasClass(this._className.activeTriggerCls)){k.removeClass(this._className.activeTriggerCls)}if(d.tab_width||f.tab_width){k.width(d.tab_width||f.tab_width)}a("."+this._className.titleCls,k).html(d.title);this.navs.eq(c-1).after(k);var g,h=f.content_height||this._minHeight;if(d.url){g=a('<iframe src="about:blank" frameborder="0" style="display:none;width:100%;height:100%"></iframe>');this.urls[c]=d.url}else{g=a('<div style="display: none;width:100%;overflow:auto;height:100%"></div>')}this.contents.eq(c-1).after(g);this._parseMarkup()},_addCloseBtn:function(c,d){if(!d){d=this.navs.eq(c)}d.addClass("closeable").append(this._generateCloseBtn(c))},_generateCloseBtn:function(c){var d=a("<span>").addClass(this._className.closeTriggerCls);return d},_removeCloseBtn:function(c){var d=typeof(c)==="number"?this.navs.eq(c):c;a("."+this._className.closeTriggerCls,d).remove()},_findClone:function(c){return this._indexOf(this._getCloseBtns(),c)},_getCloseBtns:function(){var h=!!this.options.closeable,c=this.navs.length,f=this.options.tabs,g,j=[];for(var d=0;d<c;d++){g=f[d];j.push((g&&g.closeable!==undefined)?g.closeable:h)}return j},_indexOf:function(d,f){var c=d.length;var g=Number(arguments[1])||0;g=(g<0)?Math.ceil(g):Math.floor(g);if(g<0){g+=c}for(;g<c;g++){if(g in d&&d[g]===f){return g}}return -1}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Textarea=b.UI.Base.extend({options:{uitype:"Textarea",name:"",relation:"",value:"",width:"300px",height:"57px",readonly:false,maxlength:-1,emptytext:"",autoheight:false,maxheight:"",textmode:false,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},tipPosition:".textarea_textarea",_init:function(){var c=this.options;c.id=b.guid();if(c.name===""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this,f=c.options;this.$textarea=a("#"+f.id);if(f.relation!=""&&f.maxlength!=-1){this.$relation=a("#"+f.relation);var d=f.maxlength-b.String.getBytesLength(f.value)<0?0:f.maxlength-b.String.getBytesLength(f.value);this.$relation.text(d)}if(f.emptytext!==""&&f.value===""){this.$textarea.val(f.emptytext);this.$textarea.addClass("textarea_tipcolor")}if(f.height===""){f.height="51px"}this._setHeight(f.height);if(f.width===""){f.width="300px"}this.setWidth(f.width);if(f.readonly){this.setReadOnly(true)}if(f.autoheight){this.$textarea.css({overflow:"hidden"});this.$textarea.bind("propertychange",function(g){if(!g.originalEvent||g.originalEvent.propertyName!="value"){return}c._autoHeight()});this.$textarea.bind("input change",function(){c._autoHeight()})}},setWidth:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({width:c})}else{this.$textarea.css({width:parseFloat(c)-7+"px"})}},_setHeight:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({height:c})}else{this.$textarea.css({height:parseFloat(c)-6+"px"})}},setValue:function(d,g){var f=this.$textarea,c=this.options;d=(d==null||d==undefined)?"":d;f.val(d);if(d!=""){f.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){f.val(c.emptytext);f.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}g||this._triggerHandler("change")},getValue:function(){var d=a.trim(this.$textarea.val());var c=this.options.emptytext;if(d===c){return""}else{return d}},setMaxLength:function(c){this.options.maxlength=c;if(this.$relation){this.$relation.text(this._getRemainLength())}},_getRemainLength:function(){var c=this.options.maxlength-b.String.getBytesLength(this.getValue());return c<0?0:c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var d=this.options;d.readonly=c;this.$textarea.attr("readonly",c);if(c){this.$textarea.addClass("textarea_garybg");this._removeEmptyText(true)}else{this.$textarea.removeClass("textarea_garybg");this._removeEmptyText(false)}},focus:function(){var c=this.options;if(!c.readonly){c.el.find("textarea").focus()}return this},_changeHander:function(d){var c=this.options;if(c.readonly){return false}if(this.getValue()!=""){this.$textarea.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){this.$textarea.val(c.emptytext);this.$textarea.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){this.$textarea.blur();return false}this._removeEmptyText(true);this.$textarea.addClass("textarea_textareafocus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);this.$textarea.removeClass("textarea_textareafocus");this._textCounter();clearInterval(this._mousedownListener);var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();if(this.$relation){this.$relation.text(this._getRemainLength())}this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keydown",d)},_mousedownListener:null,_mousedownHandler:function(j){var d=this;if(d.options.readonly){return false}var g=d.$relation;var h=d._mousedownListener;if(g&&j.button===2){var f=0;var c=d._getRemainLength();clearInterval(h);h=setInterval(function(){f++;d._textCounter();var i=d._getRemainLength();d.$relation.text(i);if(i!==c||f>3){clearInterval(h)}},1000)}if(j.button!==2){clearInterval(h)}},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(f){var c=this.options.emptytext;var d=this.getValue();if(c===""||d.length!=0){return}if(f){this.$textarea.val("");this.$textarea.removeClass("textarea_tipcolor")}else{this.$textarea.val(c);this.$textarea.addClass("textarea_tipcolor")}},_textCounter:function(){var d=this.options;if(d.maxlength>0){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength));if(this.autoheight){this._autoHeight()}}}return false},_autoHeight:function(){var c,h=0;var d=this.$textarea[0];var g=this.options;style=d.style;if(d._length===d.value.length){return}d._length=d.value.length;if(a.browser.msie&&!b.Browser.isQM){h=parseInt(this.$textarea.css("paddingTop"))+parseInt(this.$textarea.css("paddingBottom"))}this.$textarea.css({height:g.height});var f=d.scrollHeight;if(a.browser.mozilla){if(b.Browser.isQM){f=f+6}}else{if(window.navigator.userAgent.indexOf("Chrome")!==-1){if(b.Browser.isQM){f=f+2}else{f=f-4}}}if(f>parseFloat(g.height)){if(g.maxheight!=""&&f>parseFloat(g.maxheight)){c=b.Browser.isQM?(parseFloat(g.maxheight)+6):parseFloat(g.maxheight);style.overflowY="auto"}else{c=f-h;style.overflowY="hidden"}style.height=c+"px"}},onInValid:function(g,f){var c=this,d=c.options;c.$textarea.addClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",f)},onValid:function(f){var c=this,d=c.options,h=a(c.tipPosition,d.el).attr("tipID");if(h===undefined){return}c.$textarea.removeClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}var g=cui.tipList[h];typeof g!=="undefined"&&g.hide();d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(c,d){comtop.UI.Tree=comtop.UI.Base.extend({options:{uitype:"Tree",children:null,checkbox:false,select_mode:1,persist:false,icon:"",checkbox_style:"",on_dbl_click:null,on_expand:null,on_select:null,on_click:null,on_activate:null,on_focus:null,on_blur:null,on_lazy_read:null,auto_focus:false,keyboard:false,click_folder_mode:3,min_expand_level:1,on_post_init:null,reactive:true},dtree:null,_init:function(g){var h=this;var i=this.options;if(i.icon!=="false"&&i.icon!=""){f(i.children,i.icon)}if(typeof i.checkbox_style=="string"&&i.checkbox_style!=""){i.classNames={checkbox:"dynatree-radio"}}if(typeof i.children=="function"){i.initDataFn=i.children;i.children=[]}c.each(this.options,function(l,m){var n=l.indexOf("_");if(n&&n!=-1){var j="";c.each(l.split("_"),function(o){if(o==0){j+=this}else{j+=this.charAt(0).toUpperCase()+this.substring(1)}});var k=m;if(typeof k=="function"){h._proxyEvent(k,i,j)}else{i[j]=m}}})},_proxyEvent:function(i,h,j){var g=this;h[j]=function(){var l=this;if(arguments.length===1){i.call(null,g._wrapNode(arguments[0]))}else{if(arguments.length===2){if(typeof arguments[0]==="boolean"){if(typeof arguments[1]==="boolean"){i.apply(l,arguments)}else{i.call(null,arguments[0],g._wrapNode(arguments[1]))}}else{if(j=="onClick"){var k=arguments[1].target||arguments[1].srcElement;if(k.nodeName.toLowerCase()=="span"&&k.className=="dynatree-expander"){return}}i.call(null,g._wrapNode(arguments[0]),arguments[1])}}}}},_create:function(){var g=this.options;this.dtree=c(this.options.el).dynatree(this.options).dynatree("getTree");if(g.initDataFn){g.initDataFn(this,g)}},getActiveNode:function(){return this._wrapNode(this.dtree.getActiveNode())},getNode:function(g){return this._wrapNode(this.dtree.getNodeByKey(g))},selectNode:function(h,g){return this.getNode(h).select(g)},enable:function(){this.dtree.enable();return this},disable:function(){this.dtree.disable();return this},setDatasource:function(g){this.options.children=g;this.getRoot().removeChildren().addChild(g);return this},getDatasource:function(){var g=this.dtree.toDict();return g.children},getDataSource:function(){return this.getDatasource()},getSelectedNodes:function(g){var i=this,h=this.dtree.getSelectedNodes(g);return c.map(h,function(k,j){return i._wrapNode(k)})},getRoot:function(){return this._wrapNode(this.dtree.getRoot())},bind:function(i,h){if(typeof i!="string"||typeof h!="function"){return}var i="on"+i.charAt(0).toUpperCase()+i.substring(1),g=this.dtree.options[i];if(typeof g==="undefined"){return}this._proxyEvent(h,this.dtree.options,i)},unbind:function(h){if(typeof h=="string"){var h="on"+h.charAt(0).toUpperCase()+h.substring(1);var g=this.dtree.options[h];if(typeof g==="undefined"){return}this.dtree.options[h]=null}else{c.extend(this.dtree.options,{onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onCustomRender:null,onCreate:null,onRender:null})}},_wrapNode:function(g){if(!g){return null}return new a(g)}});var a=function(g){this.dNode=g};a.prototype={error:-1,loading:1,ok:0,activate:function(g){if(typeof g=="undefined"){g=true}this.dNode.activate(g)},getData:function(g){if(typeof g=="string"){return this.dNode.data[g]}return this.dNode.data},expand:function(g){this.dNode.expand(g);return this},remove:function(){this.dNode.remove()},removeChildren:function(){this.dNode.removeChildren();return this},select:function(g){this.dNode.select(g);return this},toggleSelect:function(){this.dNode.toggleSelect();return this},addChild:function(i,g){var h=this.dNode.addChild(i,g&&g.dNode);return this._wrapNode(h)},setTitle:function(g){return this.dNode.setTitle(g)},setStyle:function(g){c(this.dNode.span).find("a").attr("style",g);this.dNode.data._customStyle=g;return this},removeStyle:function(){c(this.dNode.span).find("a").removeAttr("style");this.dNode.data._customStyle=null;return this},prev:function(){var g=this.dNode.getPrevSibling();return g&&this._wrapNode(g)},next:function(){var g=this.dNode.getNextSibling();return g&&this._wrapNode(g)},firstChild:function(){var g=this.children();if(g==null||g==undefined){return g}return g.length>0?g[0]:null},lastChild:function(){var g=this.children();if(g==null||g==undefined){return g}return g.length>0?g[g.length-1]:null},children:function(){var h=this,g=this.dNode.getChildren();if(g==null||g==undefined){return g}return c.map(g,function(j,i){return h._wrapNode(j)})},parent:function(){var g=this.dNode.getParent();return g&&this._wrapNode(g)},setData:function(h){if(arguments.length===1){for(var j in h){this.dNode.data[j]=h[j]}}else{var g=arguments[0],i=arguments[1];this.dNode.data[g]=i}this.dNode.render();return this},focus:function(){this.dNode.focus();return this},hasChild:function(){return this.dNode.hasChildren()},isChildOf:function(g){return this.dNode.isChildOf(g.dNode)},isDescendantOf:function(g){return this.dNode.isDescendantOf(g.dNode)},setLazyNodeStatus:function(){this.dNode.setLazyNodeStatus.apply(this.dNode,arguments)},getEventTargetType:function(g){return this.dNode.getEventTargetType(g)},move:function(g,h){if(!g.dNode){return}this.dNode.move(g.dNode,h)},disable:function(){this.dNode.disable();return this},enable:function(){this.dNode.enable();return this},_wrapNode:function(g){if(!g){return null}return new a(g)}};comtop.UI.Tree.Node=a;function b(g){return g.replace(/(^|\s+)\w/g,function(h){return h.toUpperCase()})}function f(g,h){if(g.length>0){c.each(g,function(i,j){if(j.icon===undefined){j.icon=h}if(j.children){f(j.children,h)}})}}})(window.comtop.cQuery,window.comtop);(function(c,d){d.UI.Grid=d.UI.Base.extend({options:{uitype:"Grid",gridwidth:"600px",gridheight:"500px",tablewidth:"",ellipsis:true,primarykey:"ID",allboxname:"allbox",checkboxname:"idList",datasource:null,selectrows:"multi",sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,adaptive:true,pagesize_list:[25,50,100],colrender:null,colstylerender:null,rowstylerender:null,resizeheight:null,resizewidth:null,fixcolumnnumber:0,oddevenrow:false,oddevenclass:"cardinal_row",selectedrowclass:"selected_row",titlerender:null,pagination:true,loadtip:true,pagination_model:"pagination_min_1",titlelock:true,colhidden:true,adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,on_dragstart:null,on_drag:null,on_dragend:null},_init:function(){var f=this,g=f.options;f.query={sortType:g.sorttype||[],sortName:g.sortname||[],pageSize:f._contains(g.pagesize_list,g.pagesize)>=0?g.pagesize:(f.options.pagesize_list[1]||f.options.pagesize_list[0]),pageNo:g.pageno>1?g.pageno:1};f.id=d.guid();if(g.gridwidth.indexOf("%")!=-1){g.gridwidth="500px"}f.data=null;f.headList=[];f.totalSize=0;f.widthConfig={th:null,prevTh:null,x:0,thWidth:0,prevWidth:0};f.thLayer="th-layer";f.tempFilterCols={};f.oriThWidth=[];f.oriTableWidth=0;f.complexHead=false;f.thListNum=[];f.scrollWidth=g.gridheight=="auto"?0:b()},_create:function(){var f=this.options;this.$tablehead=f.el;this._analyzeTable();this._wrapTable();this._renderTHead();this._createDom();this._addEventLisenter();this.loadData()},_analyzeTable:function(){var f=this,h=f.options,i=h.el;var j=i.find("tr");var g=null;if(j.length==1){g=i.find("th")}else{f.complexHead=true;g=this._getComplexHead(j,0)}c(g).each(function(m,n){var l={};var k=c(n);l.bindName=k.attr("bindName");l.render=k.attr("render");l.renderStyle=k.attr("renderStyle");l.format=k.attr("format");l.text=k.text();l.el=n;f.headList.push(l)})},_getComplexHead:function(l,f){var k=c(l[f]).children("th");var j=[];for(var h=0;h<k.length;h++){var g=c(k[h]).attr("colspan");c(k[h]).attr(this.thLayer,"lay-"+h);if(g&&parseInt(g)>1){this._getSubHead(l,f+1,parseInt(g),j,"lay-"+h)}else{j.push(k[h])}}return j},_getSubHead:function(p,m,h,n,g){var l=c(p[m]).children("th");var f=0;var j=0;if(this.thListNum[m]){j=this.thListNum[m]+1}for(var k=j;k<l.length;k++){var o=c(l[k]).attr("colspan");c(l[k]).attr(this.thLayer,g+"-"+k);if(o&&parseInt(o)>1){this._getSubHead(p,m+1,parseInt(o),n,g+"-"+k)}else{n.push(l[k])}f+=o?parseInt(o):1;this.thListNum[m]=k;if(f==h){break}}},_wrapTable:function(){var r=this,f=r.options,i=f.el;if(f.resizewidth){f.gridwidth=f.resizewidth()}if(f.resizeheight){f.gridheight=f.resizeheight()}var p,n,m;p=parseFloat(f.gridwidth)+"px";if(f.gridheight!="auto"){n=parseFloat(f.gridheight)+"px";m=parseFloat(f.gridheight)-(f.pagination?40:0)+"px"}else{n="auto";m="auto"}var q=['<div id="',r.id,'_wrap" class="cui_grid_wrap" style="',(d.Browser.isIE6?"position:relative;":""),"width:",p,";height:",n,";",f.gridheight=="auto"?"border-width:1px 0 0 1px;":"",'">','<div id="',r.id,'_box" class="grid_list_box" style="width:',p,";height:",m,'">','<div id="',r.id,'_tableData" class="cui_grid_tableData" style="width:',p,";height:",m,'">',"</div></div>"];i.after(q.join(""));r.$tableWrap=c("#"+r.id+"_wrap");r.$tableBox=c("#"+r.id+"_box");r.$tableData=c("#"+r.id+"_tableData");r.$tableData.append(i);r.$tableWrap.show();var k=r.headList,g=c(k[0].el).width()==0;c.each(k,function(s,t){if(g){r.oriThWidth.push(150)}else{r.oriThWidth.push(c(t.el).width())}});if(f.adaptive||(f.tablewidth===""&&g)){var l=parseFloat(f.gridwidth)-r.scrollWidth;i.width(l)}else{if(f.tablewidth!==""){i.width(f.tablewidth)}}if(g){var o=i.width()/k.length;c.each(k,function(s,u){var t=c(u.el);t.width(o-1)})}else{if(f.adaptive){var h=[],j=0,l=parseFloat(f.gridwidth)-r.scrollWidth;c.each(k,function(s,u){var t=c(u.el).width();h.push(t);j+=t});c.each(k,function(s,t){c(t.el).width(h[s]*l/j-1)})}}r.oriTableWidth=i.width()},_renderTHead:function(){var f=this,g=f.options,h=f.headList;c.each(h,function(k,n){var r=n.el;if(k==0&&g.selectrows=="multi"){var m=c(r).find(":checkbox");m.attr("name",g.allboxname)}else{if(k!=0||g.selectrows!="single"){var p=c(r);var q=f._buildTemplateStr("gridHeadRender",{headSpanSort:p.attr("sort")=="true"?"head_sp_sort":"",text:p.html(),bindName:n.bindName});p.html(q);var l=f._contains(f.query.sortName,n.bindName);if(l!=-1){var o=f.query.sortName[l];var j=f.query.sortType[l];if(!j){j="DESC";f.query.sortType[l]=j}f._createImg(o,j,p.find("span"))}}}if(g.ellipsis){c(r).find("p").css({cursor:"col-resize"})}})},_renderTBody:function(){var f=this,j=f.options,l=j.el,k=f.data;var g=[];if(!k||k.length==0){g.push(f._buildTemplateStr("emptyRow",c.extend({},j,{emptycolspan:f.headList.length,id:f.id})))}else{for(var h=0;h<k.length;h++){g.push(f._renderRow(k[h],h))}}g=g.join("");if(f.$tBody){f.$tBody.html(g)}else{f.$tBody=c("<tbody></tbody>").append(g);l.append(f.$tBody);if(d.Browser.isIE&&j.selectrows!=="no"){c(window).bind("load",function(){f._reChecked()})}}},_reChecked:function(){var h=this;var i=this.options;var j=h.$tableBox.find(":checked");if(i.fixcolumnnumber){var f=h.$tableColumnClone.find(":checked")}for(var g=0;g<j.length;g++){j.eq(g).parents("tr:eq(0)").addClass(i.selectedrowclass);if(i.fixcolumnnumber){f.eq(g).parents("tr:eq(0)").addClass(i.selectedrowclass)}}j=undefined;f=undefined},_adjustTable:function(){var f=this,h=f.options;if(h.colhidden){c.each(f.$subPopMenu.find("input"),function(j,k){if(!k.checked){f._filterCols(k)}})}var g=c("input[name='"+h.allboxname+"']",f.$tableWrap);if(g&&g.length>0){g.attr("checked",false)}f._createTableFix()},_createTableFix:function(){var r=this,f=r.options,m=f.el;var h=0;if(f.titlelock){if(!r.$tableHead){var k=['<div id="',r.id,'_tableHead" class="cui_grid_tableHead">','<table id="',r.id,'_tableHeadClone" class="cui_grid_list" style="width:',m.width(),'px;"></table></div>'];r.$tableBox.append(k.join(""));r.$tableHead=c("#"+r.id+"_tableHead");r.$tableHead.width(r.$tableData[0].clientWidth);r.$tableHeadClone=c("#"+r.id+"_tableHeadClone");var j=m.children("thead").clone(true);r.$tableHeadClone.append(j);h=j.height();r.$tableHeadClone.height(h);r.$tableHead.height(h+1);r.$tableHead.css("visibility","visible");r.$tableHeadClone.css("visibility","visible");r.$tableData.scroll(function(){r.$tableHead.scrollLeft(r.$tableData.scrollLeft())});var l=r.$tableBox.offset();r.$tableData.offset(l)}else{r.$tableHead.width(r.$tableData[0].clientWidth)}}var q=0;if(f.fixcolumnnumber>0&&!r.$tableColumn){var i=['<div id="',r.id,'_tableColumn" class="cui_grid_tableColumn"','style="height:',r.$tableData[0].clientHeight,'px"></div>'];r.$tableBox.append(i.join(""));r.$tableColumn=c("#"+r.id+"_tableColumn");var n=m.clone(true).removeAttr("uitype");n.attr("id",r.id+"_tableColumnClone");r.$tableColumn.append(n);r.$tableColumnClone=n;r.$tableColumn.css("visibility","visible");r.$tableColumnClone.css("visibility","visible");q=r._getColumnWidth();r.$tableColumn.width(q);r.$tableData.scroll(function(){r.$tableColumn.scrollTop(r.$tableData.scrollTop())})}else{if(f.fixcolumnnumber>0){var p=m.find("tbody").clone(true);r.$tableColumnClone.children("tbody").replaceWith(p);r.$tableColumn.height(r.$tableData[0].clientHeight)}}if(r.$tableHead&&r.$tableColumn&&!r.$tableFix){var o=['<div id="',r.id,'_tableFix" class="cui_grid_tableFix" style="width:',r.$tableHead.width(),'px;">','<table id="',r.id,'_tableFixClone" class="cui_grid_list" style="width:',m.width(),'px"></table></div>'];r.$tableBox.append(o.join(""));r.$tableFix=c("#"+r.id+"_tableFix");r.$tableFixClone=c("#"+r.id+"_tableFixClone");var g=m.children("thead").clone(true);r.$tableFixClone.append(g);r.$tableFixClone.height(h);r.$tableFix.height(h+1);r.$tableFix.css("visibility","visible");r.$tableFixClone.css("visibility","visible");r.$tableFix.width(q)}if(!r.resizeFlag){c(window).bind("resize.grid",function(){r.resize()});r.resizeFlag=true}},_resizeGrid:function(n){var p=this,f=p.options,h=f.el;p.$tableHead&&p.$tableHead.hide();var j=p.headList,m=[],g=[],k=0,l=p.oriTableWidth=n-p.scrollWidth;h.width(l);c.each(j,function(q,u){var t=u.el,r=c(t);if(r.css("display")!="none"){var s=p.oriThWidth[q];g.push(s);k+=s;m.push(t)}});c.each(m,function(q,r){c(r).width(g[q]*l/k-1)});var i=h.children("thead");if(f.titlelock){p.$tableHeadClone.children("thead").replaceWith(i.clone(true));p.$tableHeadClone.width(l)}var o=0;if(p.$tableColumn){p.$tableColumnClone.width(l);p.$tableColumnClone.children("thead").replaceWith(i.clone(true));o=p._getColumnWidth();p.$tableColumn.width(o);p.$tableColumn.height(p.$tableData[0].clientHeight)}if(p.$tableFix){p.$tableFixClone.width(l);p.$tableFixClone.children("thead").replaceWith(i.clone(true));p.$tableFix.width(o)}if(f.titlelock){p.$tableHead.show()}setTimeout(function(){if(f.titlelock){p.$tableHead.offset(p.$tableBox.offset())}if(p.$tableFix){p.$tableFix.offset(p.$tableBox.offset())}},10)},_getColumnWidth:function(){var f=this,h=f.options,j=0,l=0;var k=c("#"+f.id+"_tableColumn tr:last td:lt("+h.fixcolumnnumber+")");for(var g=0;g<k.length;g++){if(k.eq(g)[0].style.display=="none"){continue}j+=(k.eq(g)[0].clientWidth||k.eq(g)[0].offsetWidth)+1;l++}if(d.Browser.isIE8&&l>=3){j++}return j},_getGridRow:function(h){var m=h.rowIndex,l=h.selectrows=="multi"||h.selectrows=="single",k=m%2==0,g=h.innerHtml,j=h.pKey,f=h.rowStyle;var i=[];if(l){if(!k&&h.oddevenrow){i=['<tr pKey="',j,'" rowIndex="',m,'" events="click=_rowClickHandler" class="',h.oddevenclass,'" style="',f,'">']}else{i=['<tr pKey="',j,'" rowIndex="',m,'" events="click=_rowClickHandler" style="',f,'">']}}else{if(!k&&h.oddevenrow){i=['<tr pKey="',j,'" rowIndex="',m,'" class="',h.oddevenclass,'" style="',f,'">']}else{i=['<tr pKey="',j,'" rowIndex="',m,'" style="',f,'">']}}i.push(g,"</tr>");return i.join("")},_renderRow:function(k,n){var f=this.options,h=this.headList,o=f.rowstylerender;var q=[];for(var m=0;m<h.length;m++){q.push(this._renderCol(h[m],m,f,k,n))}var j="";if(o){var g="";if(c.type(o)=="string"&&window[o]){g=window[o](k)}else{if(c.type(o)=="function"){g=o(k)}}if(g){j=g}}var l=c.extend({},f,{innerHtml:q.join(""),pKey:k[f.primarykey],rowIndex:n,rowStyle:j});var p=this._getGridRow(l);p=this._bindTplEvent(p);return p},_getGridColHTML:function(f){var j=f.rowData,k=f.rowIndex,i=f.renderStyle,h=j[f.primarykey];var g=[];if(f.selectrows=="multi"){g=['<td style="',i,';text-align: center;">','<input pKey="',h,'" rowIndex="',k,'" type="checkbox" id="',new Date().getTime(),'" events="click=_inputClickHandler" name="',f.checkboxname,'" /></td>']}else{if(f.selectrows=="single"){g=['<td style="',i,';text-align: center;">','<input pKey="',h,'" rowIndex="',k,'" type="radio" events="click=_inputClickHandler" name="',f.checkboxname,'"/></td>']}}return g.join("")},_renderCol:function(k,t,p,n,l){var r=this,v=p.selectrows,o=k.renderStyle;if(o=="undefined"||o==null){o=""}var m="";if(t==0&&(v=="multi"||v=="single")){var w=c.extend({},p,{rowData:n,renderStyle:o,rowIndex:l});m=r._getGridColHTML(w);m=r._bindTplEvent(m)}else{var x=n[k.bindName];if(x==null||x=="undefined"||x===""){x=""}else{if(k.format){if(k.format=="money"){x=a(parseFloat(x))}else{if(c.type(x)=="date"){x=d.Date.format(x,k.format)}}}}var j="&nbsp;"+x;var u=p.colrender;if(k.render){j=r._getRenderMode(n,k,l);if(j===""){j="&nbsp;"+x}}else{if(u){var q="";if(c.type(u)==="string"&&window[u]){q=window[u](n,k.bindName,k,l)}else{if(c.type(u)==="function"){q=u(n,k.bindName,k,l)}}if(q){j=q}}}var y=x,s=p.titlerender;if(s){var h="";if(c.type(s)==="string"&&window[s]){h=window[s](n,k.bindName)}else{if(c.type(s)==="function"){h=s(n,k.bindName)}}if(h){y=h}}var g=p.colstylerender;if(g){var f="";if(c.type(g)==="string"&&window[g]){f=window[g](n,k.bindName,l)}else{if(c.type(g)==="function"){f=g(n,k.bindName,l)}}if(f){o+=(o===""?"":";")+f}}if(k.render&&(k.render==="image"||k.render==="button")){o+=(o===""?"":";")+"text-align:center"}if(p.ellipsis){m="<td style='"+o+"' class='ellipsis' title='"+y+"'>"+j+"</td>"}else{m="<td style='"+o+"' title='"+y+"'>"+j+"</td>"}}return m},_getGridRenderMode:function(w){var v=w.renderMode,k=w.rowData,j=w.col,u=w.value?w.value:k[j.bindName],q=w.rowIndex;var o=[];if(v==="image"){var f=w.url,h=w.relation?w.relation:j.bindName,g=w.compare,s=w.title,n=k[h];if(g){f=g[n]}if(s){if(comtop.cQuery.type(s)!="string"){s=s[n]}}else{s=n}o=['<img src="',f,'"  title="',s,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'"/>']}else{if(v==="button"){o=['<input type="button" value="',u,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'">']}else{if(v==="a"){var r="",l=w.params,f=w.url,p=w.targets;if(l){l=l.split(";");for(var m=0;m<l.length;m++){r+=(r===""?"":"&")+(l[m]+"="+k[l[m]])}}if(f&&r){var t=w.url.lastIndexOf("?");if(t!=-1){if(t==f.length-1){f+=r}else{f+="&"+r}}else{f+="?"+r}}if(!p){p="_self"}o=['<a href="',f,'" target="',p,'" on_click="',w.click,'" class="',w.className,'" events="click=_renderClick" rowIndex="',q,'">',u,"</a>"]}}}return o.join("")},_getRenderMode:function(j,i,m){var f=this.options;var o="";if(window[i.render]){o=window[i.render](j,m,i)}else{var k=c.extend({},f,{renderMode:i.render,rowData:j,col:i,rowIndex:m});if(i.renderOptions){k=c.extend(k,i.renderOptions)}else{var h=i.el,g=c(h).attr("options"),n=/^(?:\{.*\}|\[.*\])$/;if(g&&n.test(g)){g=c.parseJSON(g.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));k=c.extend(k,g);i.renderOptions=g}}var l=this._getGridRenderMode(k);l=this._bindTplEvent(l);if(l!=""){o=l}}return o},_renderTFoot:function(){var f=this,h=f.options;var g=f._buildTemplateStr("tFootDom",h);f.$tFoot=c(g).insertAfter(f.$tableBox)},_readHead:function(h){var j=this.headList;for(var g=0;g<j.length;g++){var f=j[g];if(f.bindName==h){return{idx:g,elem:f}}}return null},_filterCols:function(l){var s=this,f=s.options,o=c(l).attr("textValue"),j=s.options.el,g=s.headList,p=-1,h=null;for(var k=0;k<g.length;k++){var n=g[k];if(c.trim(n.text)==c.trim(o)){p=k;h=n.el}}if(p!=-1){if(l.checked){c(h).show()}else{c(h).hide()}s._showComplexTitle(h,l.checked,j.find("thead"));s.$tBody.find("tr").each(function(u,v){var t=c(v).children("td").get(p);if(l.checked){c(t).show()}else{c(t).hide()}});var m=j.children("thead"),r=j.width();if(f.titlelock){s.$tableHeadClone.width(r);s.$tableHeadClone.html(m.clone(true))}var q=0;if(s.$tableColumn){s.$tableColumnClone.html(j.html());q=s._getColumnWidth();s.$tableColumn.width(q)}if(s.$tableFix){s.$tableFixClone.width(r);s.$tableFixClone.html(m.clone(true));s.$tableFix.width(q)}}},_showComplexTitle:function(n,j,l){var f=c(n).attr(this.thLayer);if(f){f=f.substring(0,f.lastIndexOf("-"));var o=c("th["+this.thLayer+"='"+f+"']",l);while(o[0]){if(j){var g=o.attr("colspan");if(!g){g=1}o.attr("colspan",parseInt(g)+1);o.show()}else{o.attr("colspan",parseInt(o.attr("colspan"))-1);var h=c("th["+this.thLayer+"*='"+f+"-']",l);var m=true;for(var k=0;k<h.length;k++){if(h[k].style.display!="none"){m=false;break}}if(m){o.hide()}}f=f.substring(0,f.lastIndexOf("-"));o=c("th["+this.thLayer+"='"+f+"']",l)}}},_changePage:function(g,f){this.query.pageNo=g;this.query.pageSize=f;this.loadData()},_resetSortIcon:function(){var h=this;if(c.type(h.query.sortName)=="array"&&c.type(h.query.sortType)=="array"){var g=c("#"+h.id+"_wrap span.head_sp_sort");g.children("em").remove();for(var j=0,f=h.query.sortName.length;j<f;j++){switch(h.query.sortType[j]){case"ASC":this._createImg(h.query.sortName[j],"ASC",g.filter('[bindName="'+h.query.sortName[j]+'"]'));break;case"DESC":this._createImg(h.query.sortName[j],"DESC",g.filter('[bindName="'+h.query.sortName[j]+'"]'));break}}}},_sortTitle:function(j,l,g){var f=this.options,n=f.sortstyle;var m=this.query.sortName;var i=this.query.sortType;if(!g&&g!="DESC"&&g!="ASC"){g="DESC"}var k=this._contains(m,l);if(k!=-1){var h=i[k];if(h=="ASC"||h=="asc"){i[k]="DESC"}else{i[k]="ASC"}this._changeImg(l,i[k])}else{this._createImg(l,g,j);if(m.length==n){c('span.head_sp_sort em[name="'+m[0]+'_sort_icon"]',this.$tableBox).remove();m.splice(0,1);i.splice(0,1);m[n-1]=l;i[n-1]=g}else{m[m.length]=l;i[i.length]=g}}this.loadData()},_createImg:function(h,j,i){var g=j=="DESC"?"grid_sort_title_down":"grid_sort_title_up";var f="<em class='"+g+"' name='"+h+"_sort_icon'></em>";c(f).appendTo(c("th[bindName="+h+"] span.head_sp",self.$tableBox))},_changeImg:function(f,g){if(g=="DESC"){c("em[name='"+f+"_sort_icon']").removeClass("grid_sort_title_up").addClass("grid_sort_title_down")}else{c("em[name='"+f+"_sort_icon']").removeClass("grid_sort_title_down").addClass("grid_sort_title_up")}},_contains:function(h,j){var f=-1;for(var g=0;g<h.length;g++){if(j==h[g]){f=g;break}}return f},_createDom:function(){if(this.options.colhidden){this._createMenu()}this._createLoading();this.$line=c("<div class='grid_line'></div>").appendTo(document.body)},_createMenu:function(){var f=this,h=f.options;var g=f._buildTemplateStr("subPopMenu",c.extend({},h,{headList:f.headList}));g=f._bindTplEvent(g);f.$subPopMenu=c(g).appendTo(document.body);f.$subPopMenu.bind("click",function(m){var k=m.target||m.srcElement,l=k.nodeName.toLowerCase()==="a";m=c.event.fix(m);m.stopPropagation();if(l||k.nodeName.toLowerCase()==="input"){var n=l?c(k).find("input"):c(k),j=n.attr("bindName");if(n[0].disabled){return}l&&(n[0].checked=(!n[0].checked));var i=n.attr("textValue");if(!f.tempFilterCols[i]){f.tempFilterCols[i]={el:n[0],checked:!n[0].checked}}}})},_createLoading:function(){var f=this;var g="<div class='cui_grid_loading'><div class='cui_grid_loaddiv'><div class='cui_grid_loadgif'>Loading...</div></div>";f.$loading=c(g).appendTo(f.$tableWrap)},_filterClickHandler:function(g){var r=this,f=r.options,j=f.el,h=r.headList,s=false,m=null;c.each(r.tempFilterCols,function(v,y){if(y.el.checked!=y.checked){var z=c(y.el).attr("textValue"),t=-1,u=null;for(var x=0;x<h.length;x++){var w=h[x];if(c.trim(w.text)==c.trim(z)){t=x;u=w.el;break}}if(t!=-1){s=true;if(y.el.checked){c(u).show()}else{c(u).hide()}r._showComplexTitle(u,y.el.checked,j.find("thead"));if(!m){m=r.$tBody.find("tr")}m.each(function(B,C){var A=c(C).children("td").get(t);if(y.el.checked){c(A).show()}else{c(A).hide()}})}}});if(s){var m=r.headList,o=[],i=[],l=0,n=r.oriTableWidth;c.each(m,function(t,x){var w=x.el,u=c(w);if(u.css("display")!="none"){var v=r.oriThWidth[t];i.push(v);l+=v;o.push(w)}});c.each(o,function(t,u){c(u).width(i[t]*n/l-1)});var k=j.children("thead"),q=j.width();if(f.titlelock){r.$tableHeadClone.width(q);r.$tableHeadClone.html(k.clone(true))}var p=0;if(r.$tableColumn){r.$tableColumnClone.html(j.html());p=r._getColumnWidth();r.$tableColumn.width(p)}if(r.$tableFix){r.$tableFixClone.width(q);r.$tableFixClone.html(k.clone(true));r.$tableFix.width(p)}}r.tempFilterCols={};r._filterCancelHandler(g)},_filterCancelHandler:function(h){var f=this,g=f.options;c.each(f.tempFilterCols,function(j,l){var k=l.el;k.checked=l.checked});f.$subPopMenu.hide();if(f.isMenuOpen){c(document).unbind("click.grid");c(f.isMenuOpen).removeClass("theadfocus");c(f.isMenuOpen).find("a").hide()}if(f.menuDisabled){f.menuDisabled.attr("disabled",false);c(f.menuDisabled[0].parentNode.parentNode).removeClass("disabled")}f.menuDisabled=null;f.isMenuOpen=false;f.tempFilterCols={}},_rowClickHandler:function(k,f,l){var h=this,j=h.options,m=c("input:eq(0)",f),i,g;if(l!==undefined){i=l.nodeName.toLowerCase();if(i!=="td"){if(!(i==="tr"&&k.button===undefined)){return false}}}switch(j.selectrows){case"no":break;default:h._inputClickHandler(k,m[0])}},_inputClickHandler:function(g,h,n){var p=this,f=p.options,k=g.target,j,i;if(k!==undefined){j=k.nodeName.toLowerCase();if(j==="input"){g.stopPropagation()}}var l=n==undefined?!h.checked:h.checked;var m=c(h),o=m.attr("rowIndex");i=p._selectRows([parseInt(o)],l)[0];c.type(f.rowclick_callback)==="function"&&f.rowclick_callback.call(this,i,l,o)},_selectRows:function(n,j){var p=this,f=p.options,h,g=[],m,o,l=j?"addClass":"removeClass";if(f.selectrows==="single"){c("tr."+f.selectedrowclass,p.$tableBox).removeClass(f.selectedrowclass)}for(var k=0;k<n.length;k++){m=c("tr[rowIndex="+n[k]+"]",p.$tableBox);m[l](f.selectedrowclass);switch(f.selectrows){case"multi":h="checkbox";break;case"single":h="radio"}o=c(":"+h,m);o.prop("checked",j);g.push(p._getDataByPrimaryKey(o.attr("pkey")))}if(f.selectrows==="multi"){p._checkSelectAll()}return g},_checkSelectAll:function(){var f=this,h=f.options,i=c('input[name="'+h.checkboxname+'"]:checked',f.$tableData).length;var g=c("th input[name='"+h.allboxname+"']",f.$tableBox);if(i===f.data.length&&g.prop("checked")===false&&i!==0){g.prop("checked",true);typeof h.selectall_callback=="function"&&h.selectall_callback.call(this,f.data,true)}else{if(i!==f.data.length&&g.prop("checked")===true){g.prop("checked",false);typeof h.selectall_callback=="function"&&h.selectall_callback.call(this,f.data,false)}}},_renderClick:function(i,f){i.stopPropagation();var g=this,k=c(f).attr("rowIndex"),h=c(f).attr("on_click"),j=g.data[k];window[h]&&window[h](j)},_selectAllBox:function(j,g){var f=this,i=f.options,h=c("input[name='"+g+"']",f.$tableBox);c("input[name='"+j.name+"']").each(function(k,l){l.checked=j.checked});h.each(function(k,l){if(!l.disabled){l.checked=j.checked;if(l.checked){c("tr[rowIndex="+k+"]",f.$tableBox).addClass(i.selectedrowclass)}else{c("tr[rowIndex="+k+"]",f.$tableBox).removeClass(i.selectedrowclass)}}});typeof i.selectall_callback=="function"&&i.selectall_callback.call(this,f.data,j.checked)},_addEventLisenter:function(){var f=this,h=f.options,i=h.el,g=i.find("th");if(h.colhidden){g.bind("mouseover",function(){var k=c(this);var j=k.attr("colspan");if(j&&parseInt(j)>1){return}k.addClass("theadfocus").find("a").show()}).bind("mouseout",function(){var m=c(this);var l=m.attr("colspan");if(l&&parseInt(l)>1){return}var j=m.attr("bindName");if(f.isMenuOpen){var k=c(f.isMenuOpen).attr("bindName");if(j==k){return}}m.removeClass("theadfocus").find("a").hide()})}g.bind("click",function(q){var p=q.target||q.srcElement,o=p.nodeName.toLowerCase();q=c.event.fix(q);if(o==="a"){function r(){f._filterCancelHandler(q)}var s=c(p).offset(),n=s.left,t=s.top+p.offsetHeight,j=p.parentNode.parentNode;f.isMenuOpen&&r();q.stopPropagation();f.isMenuOpen=j;c(document).bind("click.grid",r);var k=c(f.isMenuOpen).find("span.head_sp").text();f.menuDisabled=f.$subPopMenu.find("input[textValue='"+k+"']");f.menuDisabled.attr("disabled",true);c(f.menuDisabled[0].parentNode.parentNode).addClass("disabled");f.$subPopMenu.css({left:n+"px",top:t+"px",display:"block"});var m=f.$subPopMenu.height();var l=f.$tableData[0].clientHeight;if(l<230){f.$subPopMenu.height(l-30);f.$subPopMenu.children("div:first").height(l-60)}else{if(m<200){f.$subPopMenu.height(200);f.$subPopMenu.children("div:first").height(170)}}var u=document.documentElement.clientWidth||document.body.clientWidth;if(f.$subPopMenu.width()+n>u){f.$subPopMenu.css({left:n-f.$subPopMenu.width()+"px"})}}else{if(o==="span"){if(c(this).attr("sort")=="true"){f._sortTitle(p,c(this).attr("bindName"),null)}}else{if(o==="input"){f._selectAllBox(c(this).find("input")[0],f.options.checkboxname)}}}});if(h.ellipsis){g.bind("mousedown",function(p){var n=p.target||p.srcElement;if(n.nodeName.toLowerCase()==="p"){var t=c(this).attr("bindName"),k=f.headList,q=true;for(var o=0;o<k.length;o++){var r=k[o];if(r.bindName==t){break}else{if(c(r.el).css("display")!="none"){q=false;break}}}if(q){return}var l=this,j=f.widthConfig;j.x=p.clientX;var s=f._readHead(t);j.th=s.elem.el;d.Browser.isIE?i[0].setCapture(false):p.preventDefault();var m=c(j.th).attr(f.thLayer);var w=null;for(var o=s.idx-1;o>=0;o--){var r=k[o];if(c(r.el).css("display")!="none"){w=r.el;break}else{continue}}j.prevTh=w;j.thWidth=~~c(j.th).width();j.prevWidth=~~c(j.prevTh).width();var u=Math.min(f.$tableBox[0].offsetHeight,i[0].offsetHeight),v=f.$tableBox[0].offsetHeight>=i[0].offsetHeight?0:18;f.$line.css({left:p.clientX+c(window).scrollLeft()+"px",height:u-v+"px",top:f.$tableBox.offset().top+"px"});c(document).bind("mousemove.grid",function(B){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var x=f.widthConfig,A=B.clientX,z=A,y=0;if(z>x.x&&B.clientX-x.x>x.thWidth-y){A=x.x+x.thWidth-y}if(z<x.x&&x.x-z>x.prevWidth-y){A=x.x-x.prevWidth+y}f.$line.css({left:A+c(window).scrollLeft()+"px",display:"block"})}).bind("mouseup.grid",function(D){f.$line.hide();var z=f.widthConfig,y=parseInt(f.$line[0].style.left)-c(window).scrollLeft()-z.x;i.width(i.width()+y);c(z.prevTh).width(~~z.prevWidth+y);var B=i.children("thead"),A=i.width();if(h.titlelock){f.$tableHeadClone.width(A);f.$tableHeadClone.html(B.clone(true))}var C=0;if(f.$tableColumn){f.$tableColumnClone.width(A);f.$tableColumnClone.children("thead").replaceWith(B.clone(true));C=f._getColumnWidth();f.$tableColumn.width(C);f.$tableColumn.height(f.$tableData[0].clientHeight)}if(f.$tableFix){f.$tableFixClone.width(A);f.$tableFixClone.html(B.clone(true));f.$tableFix.width(C);f.$tableFix.offset(f.$tableBox.offset())}if(h.titlelock){f.$tableHead.width(f.$tableData[0].clientWidth);d.Browser.isIE&&f.$tablehead[0].releaseCapture()}c(document).unbind("mousemove.grid").unbind("mouseup.grid")})}})}},_getDataByPrimaryKey:function(k){var g=this,j=g.options,l;for(var h=0,f=g.data.length;h<f;h++){if(g.data[h][j.primarykey]+""==k){l=g.data[h]}}return l},resize:function(){var f=this,h=f.options;if(h.resizeheight){f.setHeight(h.resizeheight())}if(h.resizewidth){var g=h.resizewidth();f.$tableWrap.width(g);f.$tableBox.width(g);f.$tableData.width(g);if(f.$tableHead){f.$tableHead.width(f.$tableData[0].clientWidth)}if(h.adaptive){f._resizeGrid(g)}}},getSelectedRowData:function(){var f=this;var h=[];var g=c("input[name='"+this.options.checkboxname+"']:checked",this.$tableData);g.each(function(k,j){h.push(f._getDataByPrimaryKey(c(j).attr("pkey")))});return h},getSelectedPrimaryKey:function(){var g=this,j=g.options,l,k=[];l=g.getSelectedRowData();for(var h=0,f=l.length;h<f;h++){k.push(l[h][j.primarykey])}return k},getSelectedIndex:function(){var f=[];var g=c("input[name='"+this.options.checkboxname+"']",this.$tableData);g.each(function(j,h){if(h.checked){f.push(j)}});return f},getRowsDataByIndex:function(g){var f=this,j=c.type(g),k=[];if(j=="undefined"||j=="null"){return[]}g=j=="array"?g:[g];for(var h=0;h<g.length;h++){k.push(f.data[g[h]])}return k},getRowsDataByPK:function(h){var g=this,n=g.options,m=c.type(h),o=[];if(m=="undefined"||m=="null"){return[]}h=m=="array"?h:[h];for(var f=0,l=g.data.length;f<l;f++){for(var j=0;j<h.length;j++){if(g.data[f][n.primarykey]==h[j]){o.push(g.data[f])}}}return o},selectRowsByPK:function(g,n){var f=this,k=f.options,j=c.type(g),m,l=[];n=n==undefined?true:n;if(j=="undefined"||j=="null"){return[]}g=j=="array"?g:[g];if(k.selectrows=="single"){g=[g[0]];c("tr."+k.selectedrowclass,f.$tableBox).removeClass()}for(var h=0;h<g.length;h++){m=c("input[pKey='"+g[h]+"']",this.$tableBox);l.push(m.attr("rowIndex"))}return f._selectRows(l,n)},selectRowsByIndex:function(g,j){var f=this,i=f.options,h=c.type(g);j=j==undefined?true:j;if(h=="undefined"||h=="null"){return[]}g=h=="array"?g:[g];if(i.selectrows=="single"){g=[g[0]];c("tr."+i.selectedrowclass,f.$tableBox).removeClass()}return f._selectRows(g,j)},setDatasource:function(i,f){var g=this,h=g.options;if(c.type(i)!=="array"){g.data=[]}else{g.data=i}g._resetSortIcon();g._renderTBody();g._adjustTable();if(g.data.length===0){g.setHeight()}g.setPagination(f);g.$loading.hide();typeof h.loadcomplate_callback=="function"&&h.loadcomplate_callback.call(g,g)},setPagination:function(g){var h=this,j=this.options,i=typeof g;h.totalSize=i==="number"?g:h.totalSize;if(j.pagination&&!this.$tFoot){this._renderTFoot()}if(i!=="number"){c(".cui_grid_pagination_tip",h.$tFoot).show()}if(j.pagination){if(h.cuiPagination){h.cuiPagination.setInitData({count:h.totalSize,pageno:h.query.pageNo,pagesize:h.query.pageSize}).reDraw();c(".cui_grid_pagination_tip",h.$tFoot).hide()}else{h.cuiPagination=cui(c(".pagination_wrap",h.$tFoot)).pagination({count:h.totalSize,pagesize:h.query.pageSize,pageno:h.query.pageNo,pagesize_list:j.pagesize_list,on_page_change:function(l,k){h._changePage(l,k)},cls:j.pagination_model,tpls:{pagination:j.pagination_model}})}}if(h.data.length==0){j.pagination&&h.$tFoot.hide();h.$tableColumn&&h.$tableColumn.hide();var f=this.$tableWrap.height();this.$tableBox.data("old_height",this.$tableBox.height()).height(f);this.$tableData.data("old_height",this.$tableData.height()).height(f)}else{if(this.$tableBox.data("old_height")){this.$tableBox.height(this.$tableBox.data("old_height")).removeData("old_height");this.$tableData.height(this.$tableData.data("old_height")).removeData("old_height")}h.$tableColumn&&h.$tableColumn.show();j.pagination&&h.$tFoot.show()}},loadData:function(){var f=this,g=f.options,h=g.datasource;g.loadtip&&f.$loading.show();if(c.type(h)=="string"){window[h]&&window[h](f,c.extend(true,{},f.query))}else{if(c.type(h)=="function"){h(f,c.extend(true,{},f.query))}}},dragSort:function(i){var f=this,h=f.options;if(!f.dragObj){var g=f.$tablehead.find("tbody");f.dragObj=cui(g).dragTable({dragClass:"drag_highlight",onDragStart:h.on_dragstart,onDrag:h.on_drag,onDragEnd:h.on_dragend,childEL:function(){return c(g).children("tr")}})}if(i){f.dragObj.doDrag(f.$tableData[0].clientWidth,f.$tableData.offset().left)}else{f.dragObj.unDrag()}},getQuery:function(){return c.extend(true,{},this.query)},setQuery:function(f){if(c.type(f)==="object"){this.query=c.extend(true,this.query,f);if(f.pageSize){this.query.pageSize=f.pageSize}if(f.pageNo){this.query.pageNo=f.pageNo}if(f.sortName){this.query.sortName=f.sortName}if(f.sortType){this.query.sortType=f.sortType}}},setHighLight:function(g){var f=this;c("input[pKey='"+g+"']",this.$tableBox).each(function(h,j){c(j.parentNode.parentNode).addClass(f.options.selectedrowclass)})},setHeight:function(f){if(f===undefined||f==null){return}var g=this.options;this.$tableWrap.height(f);this.$tableBox.height((parseFloat(f)-(g.pagination?40:0)));this.$tableData.height((parseFloat(f)-(g.pagination?40:0)));if(this.$tableColumn){this.$tableColumn.height(this.$tableData[0].clientHeight)}},addData:function(j){var o=this,f=o.options,h=f.adddata_callback,m=0,n="";var l=o.$tBody.children("tr:last");if(l[0]){var i=l.attr("rowIndex");if(i){m=parseInt(i)}}var g=c("#"+o.id+"_empty_cell",o.$tBody);if(g[0]){g.parent().remove();if(f.fixcolumnnumber>0){c("#"+o.id+"_empty_cell",o.$tableColumnClone).parent().remove()}}if(c.type(j)=="array"){c.each(j,function(p,q){n+=o._renderRow(q,m+p+1)})}else{n=o._renderRow(j,m+1)}o.$tBody.append(n);if(f.fixcolumnnumber>0){var k=o.$tableColumnClone.children("tbody");k.append(n);o.$tableColumn.height(o.$tableData[0].clientHeight)}if(!o.data){o.data=[]}if(c.type(j)=="array"){c.each(j,function(q,p){o.data.push(q)})}else{o.data.push(j)}if(!h){return}if(c.type(h)=="string"){window[h]&&window[h](j)}else{if(c.type(h)=="function"){h(j)}}},removeData:function(q){var r=this,f=r.options,j=f.removedata_callback,m=[],p=[],h=[];if(!q){var l=c("input[name='"+f.checkboxname+"']",r.$tablehead);l.each(function(t,s){if(s.checked){m.push(c(s).attr("rowindex"));p.push(t);h.push(r.data[t])}})}else{if(c.type(q)=="array"){m=q}else{m.push(q)}r.$tBody.children("tr").each(function(s,t){var u=c(t).attr("rowindex");if(u&&r._contains(m,u)!=-1){p.push(s);h.push(r.data[s])}})}if(m.length>0){var o=null;for(var k=0;k<m.length;k++){r.$tBody.children("tr[rowIndex="+m[k]+"]").remove();if(f.fixcolumnnumber>0){if(!o){o=r.$tableColumnClone.children("tbody")}o.children("tr[rowIndex="+m[k]+"]").remove()}}if(f.fixcolumnnumber>0){r.$tableColumn.height(r.$tableData[0].clientHeight)}}c.each(p,function(t,s){r.data.splice(t[s]-s,1)});if(r.data.length==0){r.query.pageNo=r.query.pageNo<=1?1:r.query.pageNo-1}if(r.data.length==0&&c("#"+r.id+"_empty_cell").length==0){var g=r._buildTemplateStr("emptyRow",c.extend({},f,{emptycolspan:r.headList.length,id:r.id}));r.$tBody.append(g);if(f.fixcolumnnumber>0){var n=r.$tableColumnClone.children("tbody");n.append(g);r.$tableColumn.height(r.$tableData[0].clientHeight)}}if(!j){return}if(c.type(j)=="string"){window[j]&&window[j](h)}else{if(c.type(j)=="function"){j(h)}}}});function a(j){var h,g;j=j.toString().replace(/\$|\,/g,"");if(isNaN(j)){j="0"}h=(j==(j=Math.abs(j)));var f=j.toString().indexOf(".");if(f==-1){g="00";j=j.toString()}else{g=j.toString().substring(f+1,j.length);j=j.toString().substring(0,f)}for(var k=0;k<Math.floor((j.length-(1+k))/3);k++){j=j.substring(0,j.length-(4*k+3))+","+j.substring(j.length-(4*k+3))}return(((h)?"":"-")+j+"."+g)}function b(){var h,f,g=document.createElement("DIV");g.style.cssText="position:absolute; top:-1000px; width:100px; height:100px; overflow:hidden;";h=document.body.appendChild(g).clientWidth;g.style.overflowY="scroll";f=g.clientWidth;document.body.removeChild(g);return h-f}})(window.comtop.cQuery,window.comtop);(function(d,c){var b=d.cQuery;var a=parseInt("");d.UI.Gridx=d.UI.Base.extend({options:{uitype:"Gridx",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"ID",ellipsis:true,titleellipsis:true,adaptive:true,titlelock:true,oddevenrow:false,oddevenclass:"cardinal_row",selectedrowclass:"selected_row",selectrows:"multi",checkboxname:"idList",allboxname:"allbox",fixcolumnnumber:0,datasource:null,titlerender:null,colhidden:true,loadtip:true,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],pagination:true,pagination_model:"pagination_min_1",adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,rowdblclick_callback:null},_init:function(h){this.__setPropertys();this.__getDomTh();this.__getTagsPropertys();this.__initWidthAndHeight();this.__initColWidth();var g=h.datasource;if(typeof g==="string"){this.options.datasource=window[g]}var j=this.options;var i=j.sortstyle;var k=j.sortname;var f=j.sorttype;if(k.length>i||f.length>i){k.length=k.length=i}},__setPropertys:function(){this.el=this.options.el;this.grid_container=null;this.grid_box=null;this.grid_style=null;this.grid_head=null;this.grid_head_table=null;this.grid_body=null;this.grid_table_box=null;this.grid_tbody=null;this.grid_scroll=null;this.grid_line=null;this.grid_empty=null;this.grid_tfoot=null;this.loading=null;this.grid_overlay=null;this.dom_th_colgroup=null;this.dom_td_colgroup=null;this.grid_all_check=null;this.dom_th=[];this.dom_tr=[];this.dom_td=[];this.dom_fixed=[];this.dom_head_col=[];this.dom_body_col=[];this.thead_map=[];this.data=[];this.row_size=0;this.col_size=0;this.sort=[];this.sort_type={};this.thead_text=[];this.render_style=[];this.col_render=[];this.bind_name=[];this.num_col=a;this.new_bind_name=[];this.col_width=[];this.col_width_backup=[];this.multi_checked=[];this.multi_checked_num=0;this.single_checked=a;this.fixed_fn_click=[];this.col_hidden=[];this.col_hidden_backup=[];this.total_size=0;this.guid="grid_"+d.guid();this.grid_width=0;this.grid_height=0;this.table_width=0;this.thead_height=31;this.box_height=0;this.pagination_height=this.options.pagination?40:0;this.selectrows_html="";this.tds_package=[];this.render_complete=false;this.odd=false;this.un_render=true;this.auto_height=false;var f=d.Browser;this.isqm=(f.isIE6||f.isIE7)&&!f.isQM;this.end_row=0;this.is_ittab=false;this.format_fn={date:function(j,h){if(!j){return""}var q=b.type(j);if(q==="string"||q==="number"){var n=new Date();n.setTime(j);if(isNaN(n.getDate())){return j}j=n}var p=["y+","yyyy","M","MM","d","dd","h","hh","m","mm","s","ss"];var r=j.getFullYear().toString();var o=(j.getMonth()+1).toString();var m=(j.getDate()+1).toString();var s=(j.getHours()+1).toString();var k=(j.getMinutes()+1).toString();var t=(j.getSeconds()+1).toString();var g=[r.slice(2),r,o,o.charAt(1)?o:0+o,m,m.charAt(1)?m:0+m,s,s.charAt(1)?s:0+s,k,k.charAt(1)?k:0+k,t,t.charAt(1)?t:0+t];for(var l=p.length;l--;){h=h.replace(new RegExp(p[l]),g[l])}return h},money:function(n){n=n.toString().split(".");var m=n[0];var l=n[1];var g=m.length;var o=g%3;var h=o?[m.slice(0,o)]:[];for(var k=0,j=Math.floor(g/3);k<j;k++){h.push(m.slice(o+k*3,o+k*3+3))}return h.join(",")+(l?"."+l:"")}};this.render_method={a:function(l,p,m){var j=["<a"];var g=p.params;var o="";if(g){g=g.split(";");var k=[];for(var h=g.length;h--;){var n=g[h];if(n in l){k.push([n,"=",l[n]].join(""))}}o="?"+k.join("&")}j.push(" href='");j.push((p.url||"")+o);j.push("' class='");j.push(p.className||"");j.push("' target='");j.push(p.targets||"_self");j.push("' clickid='");j.push(p.click);j.push("'>");j.push(m);j.push("</a>");return j.join("")},image:function(l,p,n){var k=["<img"];k.push(" class='");k.push(p.className||"");var h=p.url;var i=p.compare;var j=p.relation;var m=p.title;var o=n;if(typeof j==="string"){if(/\./.test(j)){var g=j.split(".");o=l[g[0]][g[1]]}else{o=l[j]}}if(m&&m[o]){m=m[o]}else{m=n}if(i){h=i[n]||h}k.push("' src='");k.push(h);k.push("' title='");k.push(m);k.push("' clickid='");k.push(p.click);k.push("' />");return k.join("")},button:function(i,g,j){var h=["<button class='"];h.push(g.className||"");h.push("' clickid='");h.push(g.click);h.push("'>");h.push(g.value||j);h.push("</button>");return h.join("")}}},__getDomTh:function(){var m=this.el[0];var x=m.rows;var w=x.length;if(w<2){var f=this.el[0].getElementsByTagName("th");var q=[];for(var u=0,s=f.length;u<s;u++){q.push(f[u])}this.dom_th=q}else{var v=[];for(var r=0;r<w;r++){var y=x[r].cells;var t=y.length;for(var p=0;p<t;p++){var A=y[p];var z=A.colSpan;var B=A.rowSpan;for(var o=0;o<B;o++){if(!v[r+o]){v[r+o]=[]}for(var n=0;n<z;n++){v[r+o].push(A)}}}}this.dom_th=b.unique(v[w-1]);this.thead_map=v}this.col_size=this.dom_th.length},__getTagsPropertys:function(){var o=this.options;var k=this.dom_th;var x=this.new_bind_name;var j=this.col_size;var p=this.render_style;var y=this.bind_name;var B=this.sort;var n=this.thead_text;var z=this.col_width;var h=this.col_render;var q=this.fixed_fn_click;for(var v=0;v<j;v++){var C=k[v];z.push(C.style.width);var l=(C.getAttribute("renderStyle")||"").replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";this.col_hidden[v]=b(C).css("display")==="none"||C.getAttribute("hide")==="true";p.push(l);var f=C.getAttribute("bindName")||"";y.push(f);if(/\./.test(f)){x[v]=f.split(".")}if(f==="0"||f==="1"){this.num_col=v;y[v]=parseInt(y[v])}B.push(C.getAttribute("sort")==="true"||false);n.push(C.innerHTML);var w=C.getAttribute("format");var r=o.colrender;var D=C.getAttribute("render");if(typeof D==="string"){if(new RegExp(D).test("a;button;image")){var g=C.getAttribute("options");if(g!==null){if(/{/.test(g)){try{g=JSON.parse(g)}catch(A){g=(Function("return "+g+";"))()}finally{if(typeof g!=="object"){g=c}}}else{g=window[g]}}if(g){var u=g.click;if(typeof u==="function"){g.click=q.push(u)-1}else{g.click=""}h[v]={render:"fiexd_fn",method:D,options:g};continue}}else{var t=window[D];if(t){var m={format:w||c,render:D,renderStyle:p[v],text:n[v]};h[v]={render:"render_fn",col_json:m,callback:t};continue}}}if(w!==null){if(w==="money"){h[v]={render:"format_fn",callback:this.format_fn.money};continue}if(/(\s|\-|:|yy)/i.test(w)){h[v]={render:"format_fn",format:w,callback:this.format_fn.date};continue}}if(typeof r==="function"){h[v]={render:"colrender_fn",callback:r};continue}h[v]=null}var s=o.selectrows;if(s==="multi"||s==="single"){y[0]=""}},__initWidthAndHeight:function(){var g=this.options;var i=typeof g.resizewidth==="function"?g.resizewidth():c;var f=typeof g.resizeheight==="function"?g.resizeheight():c;this.grid_width=(i||parseInt(g.gridwidth))-2;var h=g.gridheight;if(h==="auto"){h="500px";this.auto_height=true}this.grid_height=(f||parseInt(h))-2;this.thead_height=this.el.find("tr").length*31;this.box_height=this.grid_height-this.pagination_height-(g.titlelock?this.thead_height:0);this.table_width=g.adaptive?this.grid_width-17:parseInt(g.tablewidth)},__initColWidth:function(){var h=this.table_width;var k=this.grid_width;var l=this.col_width;var j=this.col_size;var m=0;for(var g=0;g<j;g++){var f=l[g];if(f===""){l[g]=200}else{if(/%/.test(f)){l[g]=(h||k)*parseInt(f)/100}else{l[g]=parseInt(f)}}m+=l[g]}if(isNaN(h)){this.table_width=m}this._calculateWidth(true)},_calculateWidth:function(p){var r=this.col_width;var k=this.col_hidden;var q=this.table_width;var l=this.col_size;var h=0;for(var o=l;o--;){var f=r[o];if(k[o]!==true){h+=f}}var s=[];var m=0;var t=0;for(var n=l;n--;){if(k[n]!==true){var g=Math.round(r[n]*q/h);m+=g;s[n]=g;t=n}else{s[n]=0;if(p){s[n]=Math.round(r[n]*q/h)}}}s[t]+=q-m;this.col_width=s},_create:function(){var j=this.options;var i=this.el;var g=document.createElement("div");g.className="grid_container";var l=j.titlelock;var h;if(l===true){h=['<div class="grid_style"></div>','<div class="grid_box">','<div class="grid_head">','<table class="grid_head_table"></table>',"</div>",'<div class="grid_body">','<div class="grid_empty">?? ?? ?? ?? ?? ?? ???</div>','<div class="grid_table_box"></div>',"</div>",'<div class="grid_line"></div>','<div class="grid_overlay"></div>','<div class="grid_scroll">',"<div></div>","</div>","</div>",'<div class="grid_tfoot"></div>']}else{h=['<div class="grid_style"></div>','<div class="grid_box">','<div class="grid_body">','<div class="grid_head">','<table class="grid_head_table"></table>',"</div>",'<div class="grid_empty">?? ?? ?? ?? ?? ?? ???</div>','<div class="grid_table_box"></div>',"</div>",'<div class="grid_line"></div>','<div class="grid_overlay"></div>','<div class="grid_scroll">',"<div></div>","</div>","</div>",'<div class="grid_tfoot"></div>']}if(j.loadtip){h.push("<div class='grid_loading_bg'></div><div class='grid_loading_box'><span>Loading...</span></div>")}g.innerHTML=h.join("");i[0].parentNode.insertBefore(g,i[0]);var f=this.grid_container=b(g).addClass(this.guid);this.grid_table_box=b(".grid_table_box",f);var k=this.grid_box=f.children(".grid_box");this.grid_style=f.find(".grid_style").eq(0);this.grid_head=k.find(".grid_head").eq(0);this.grid_body=k.children(".grid_body").eq(0);this.grid_overlay=k.children(".grid_overlay").eq(0);this.grid_head_table=this.grid_head.children(".grid_head_table").eq(0);this.grid_line=k.children(".grid_line").eq(0);this.grid_scroll=k.children(".grid_scroll").eq(0);this.grid_tfoot=f.children(".grid_tfoot").eq(0);this.grid_empty=this.grid_body.children(".grid_empty").eq(0);this.loading=f.children(".grid_loading_bg").next().andSelf();this.grid_table_box.append(i.addClass("grid_body_table"));if(j.ellipsis){i.addClass("grid_ellipsis")}if(j.titleellipsis){this.grid_head_table.addClass("grid_ellipsis")}this._setStyleWidth();this._setStyleHeight();this.__start()},_setStyleWidth:function(){this.grid_container.css("width",this.grid_width);this.el.css("width",this.table_width);this.grid_head_table.css("width",this.table_width)},_setStyleHeight:function(){this.grid_container.css("height",this.grid_height);this.grid_head.css("height",this.thead_height);this.grid_body.css("height",this.box_height)},__start:function(){var f=this.options;this.__renderThead();this.__renderTableBody();this.__setTableDom();this.__theadClickHandler();this.__theadMouseHandler();this.__clickHandler();this.__mouseoverHandler();this.__imitateScroll();this._resizeHandler();this.__lazyloadHandler();this.__packageTds();this._colHidden(true);this.ittab._init(this);if(f.colhidden){this.hideCol._init(this)}if(typeof f.datasource==="function"){this._loading("show");f.datasource(this,this.getQuery())}},_loading:function(f){if(!this.options.loadtip){return}this.loading[f]()},__renderThead:function(){var q=this.options;var g=this.el;var u=this.dom_th;var w=this.col_width;var p=this.thead_text;var j=this.col_size;var r=q.fixcolumnnumber;var m=this.options.colhidden;var n=this.isqm;var x=this.sort;var f=document.createElement("tr");f.style.display="none";f.className="grid_width_norm";var o=["<colgroup>"];for(var t=0;t<j;t++){o.push('<col style="width:');if(n){var s=w[t]-1;o.push(s<0?0:s)}else{o.push(w[t])}o.push('px;" />');var h=u[t];if(t<r){b(h).addClass("grid_fixed")}if(x[t]){b(h).addClass("grid_sort")}h.style.width="";var l=['<div class="grid_fixed_d">','<span class="grid_fixed_s">','<a class="grid_thead_text">'+p[t]+"</a>"];if(m){l.push('<a class="grid_select"></a>')}l.push('<em class="grid_ittab"></em>');l.push("</span>");if(t<r){l.push(p[t])}l.push("</div>");h.innerHTML=l.join("");var k=document.createElement("th");f.appendChild(k)}o.push("</colgroup>");o=this.colgroup=o.join("");this.grid_head_table.html(o).append(g.find("thead").eq(0));if(this.isqm&&this.thead_map.length){this.grid_head_table.find("thead").prepend(f)}else{f=null}if(q.selectrows==="multi"){var v=this.grid_head;v.find(".grid_select").eq(0).remove();var y=b(u[0]).find(".grid_thead_text");y.find("input").remove().end().append("<input type='checkbox' class='grid_all_check' name='"+q.allboxname+"' />")}},__renderTableBody:function(){this.el.html("<tbody></tbody>").prepend(this.colgroup);delete this.colgroup},__setTableDom:function(){var g=this.el;var k=this.options.fixcolumnnumber;var h=this.col_size;var o=[];for(var l=0;l<k;l++){this.dom_th[l].getElementsByTagName("div")[0].style.zIndex=k+1-l;o.push(this.dom_th[l].getElementsByTagName("span")[0])}this.dom_fixed.push(o);this.grid_tbody=this.el.find("tbody").eq(0);this.dom_th_colgroup=this.grid_head_table.find("colgroup").eq(0);this.dom_td_colgroup=g.find("colgroup").eq(0);var p=this.grid_head[0].getElementsByTagName("col");var f=g[0].getElementsByTagName("col");var q=this.dom_head_col;var n=this.dom_body_col;for(var m=h;m--;){q[m]=p[m];q[m].className="grid_col"+m;n[m]=f[m];n[m].className="grid_col"+m}},__theadClickHandler:function(){var g=this.bind_name;var f=this;this.grid_head_table.on("click",function(k){k.stopPropagation();var m=k.target;var l=m.className;if(l==="grid_select"||l==="grid_ittab"){return}var o=b(m).parents(".grid_sort");if(!o.length){return}var h=f.sort_type;var n=g[f._thIndex(o[0])];var i=h[n]||"ASC";var j=i!=="DESC"?"DESC":"ASC";o.removeClass("grid_sort_"+i.toLowerCase()).addClass("grid_sort_"+j.toLowerCase());f._setOptsSortNameAndSoryType(n,j);f.loadData()})},_thIndex:function(f){var h=this.dom_th;for(var g=this.col_size;g--;){if(h[g]===f){return g}}return a},_setOptsSortNameAndSoryType:function(h,s){var g=this.options;var p=g.sortstyle;var o=g.sortname;var k=g.sorttype;var q=this.sort_type;for(var n=p;n--;){if(h===o[n]){k.splice(n,1);o.splice(n,1);q[h]=s;break}}if(o.length===p){var f=o.shift();k.shift();q[o[0]]="ASC";var r=this.bind_name;var m=this.dom_th;for(var l=this.col_size;l--;){if(f===r[l]){b(m[l]).removeClass("grid_sort_desc").removeClass("grid_sort_asc");break}}}o.push(h);k.push(s);q[h]=s},__theadMouseHandler:function(){this.grid_head_table.on("mouseover",function(g){var h=b(g.target);var f=h.closest(".grid_fixed_s").eq(0);if(f.length){f.parents("th").addClass("grid_thead_mouseover")}}).on("mouseout",function(g){var h=b(g.target);var f=h.closest(".grid_fixed_s").eq(0);if(f.length){f.parents("th").removeClass("grid_thead_mouseover")}})},__clickHandler:function(){var i=this.options;var g=typeof i.rowdblclick_callback==="function"?i.rowdblclick_callback:null;var k=i.selectrows;var m=i.selectedrowclass;var f=this;var j=null;var l=null;f.el.on("click",function(r){r.stopPropagation();l=r.target;var s=b(l).parents("tr").eq(0);var o=s.attr("index");if(!o){var p=s[0].rowIndex;s.attr("index",p);o=p}var n=l.getAttribute("clickid");var q=new RegExp(l.tagName,"i");if(q.test("a;button")||q.test("img")&&n){if(n){f.fixed_fn_click[n](f.data[o])}return}if(j){clearTimeout(j);j=null;g(f.data[o],o);return}if(g){j=setTimeout(function(){j=null;h(o)},300)}else{h(o)}});function h(o){if(k==="no"){return}f._selectRows(o,c);if(typeof i.rowclick_callback==="function"){var n=false;if(k==="multi"){n=f.multi_checked[o]}if(k==="single"){n=o===f.single_checked}i.rowclick_callback(f.data[o],n,o)}}if(k==="multi"){this.grid_all_check=f.grid_head_table.find(".grid_all_check").on("change",function(s){s.stopPropagation();var n=f.dom_tr;var r=f.multi_checked;if(!b(this).prop("checked")){for(var p=n.length;p--;){r[p]=false;b(n[p]).removeClass(m).find("input").eq(0).prop("checked",false)}f.multi_checked_num=0}else{for(var o=n.length;o--;){r[o]=true;b(n[o]).addClass(m).find("input").eq(0).prop("checked",true)}f.multi_checked_num=f.row_size}var q=i.selectall_callback;if(typeof q==="function"){q(f.data,b(this).prop("checked"))}})}},_selectRows:function(h,g){var j=this.options;var l=j.selectrows;var m=j.selectedrowclass;var f=this.dom_tr;var k=b(f[h]);if(g&&k.hasClass(m)){return}var i=this.multi_checked;if(l==="multi"){if(i[h]||g===false){i[h]=false;k.removeClass(m).children("td").find("input").prop("checked",false);this.multi_checked_num--;this.grid_all_check.prop("checked",false)}else{i[h]=true;k.addClass(m).children("td").find("input").prop("checked",true);this.multi_checked_num++;if(this.multi_checked_num===this.row_size){this.grid_all_check.prop("checked",true)}}}else{if(l==="single"){if(g===false){k.removeClass(m).children("td").eq(0).find("input").prop("checked",false);this.single_checked=a}else{k.addClass(m).children("td").eq(0).find("input").prop("checked",true);b(f[this.single_checked]).removeClass(m);this.single_checked=h}}}},__mouseoverHandler:function(){var h=this.options.titlerender;if(typeof h==="function"){var g=this;var i=this.bind_name;var f=this.selectrows_html;g.el.on("mouseover",function(m){var o=b(m.target).closest("td");var l=o[0].cellIndex;if(o.attr("title")!==c||l===0&&f!==""){return}var n=o.parent("tr");var j=n.attr("index");if(!j){var k=n.rowIndex;n.attr("index",k);j=k}o.attr("title",h(g.data[j],i[l]))})}},__imitateScroll:function(){var f=this;var g=f.guid;var m=this.grid_head_table[0];var j=this.grid_style[0];var i=this.el[0];var l;try{var h=b("head");h.append("<style type='text/css'></style>");h.find("style").last()[0].innerHTML="";this.grid_scroll.on("scroll",function(){l=this.scrollLeft;j.innerHTML=['<style type="text/css">.',g," .grid_fixed .grid_fixed_s{left:",l,"px}.",g," .grid_body_table, .",g," .grid_head_table{margin-left:-",l,"px}</style>"].join("")})}catch(k){this.grid_scroll.on("scroll",function(){var s=this.scrollLeft+"px";var p="-"+s;m.style.marginLeft=p;i.style.marginLeft=p;var n=f.dom_fixed;for(var q=n.length;q--;){var r=n[q];for(var o=r.length;o--;){r[o].style.left=s}}})}},_resizeHandler:function(){var g=this.options;var f=this;if(g.resizeheight||g.resizewidth){var h=null;b(window).on("resize",function(){clearTimeout(h);h=setTimeout(function(){f.resize()},10)})}},resize:function(){var h=this.options;try{var f=h.resizeheight();if(typeof f==="number"&&f>0){this.setHeight(f)}}catch(i){}try{var g=h.resizewidth();if(typeof g==="number"&&g>0){this.setWidth(g)}}catch(i){}},__lazyloadHandler:function(){var f=this;setTimeout(function(){f.grid_body[0].scrollTop=0},1);this.grid_body.on("scroll",function(){f._lazyload()})},_lazyload:function(h){var f=this.grid_body.scrollTop+this.box_height+100;var g=this.el.height();if(this.render_complete||f<g){return}if(h){h=(f-g)/27}this.__appendTr(h||20)},__appendTr:function(n){var f=this.dom_tr;var k=this.row_size;var m=this.grid_tbody[0];var h=m.getElementsByTagName("tr").length;var g=Math.min(h+n,k);if(this.auto_height){g=k}for(var l=h;l<g;l++){m.appendChild(f[l])}this.grid_table_box.css("paddingBottom",(k-g)*27);var j=this.el.height();this.render_complete=g===k;if(this.auto_height){this.setHeight(j+this.thead_height+(this.options.pagination?40:0)+2)}},__packageTds:function(){var f=this.options;var k=f.fixcolumnnumber;var q=this.render_style;var o=f.selectrows;var j=this.selectrows_html={no:"",multi:"<input type='checkbox' name='"+f.checkboxname+"' />",single:"<input type='radio' name='"+f.checkboxname+"' />"}[o];var h=this.col_size;var n=[];var g=0;if(j!==""){g++;var l=n[0]={};if(k>0){l.html="<div class='grid_fixed_d' style='z-index:"+(k+1)+";'><span class='grid_fixed_s' style='"+q[0]+"'>"+j+"</span></div>"}else{l.style=q[0];l.html=j}}for(var m=g;m<h;m++){var p=n[m]={};if(m<k){p.html=["<div class='grid_fixed_d' style='z-index:",k+1-m,";'><span class='grid_fixed_s' style='",q[m],"'><!---->","</div>"].join("")}else{p.style=q[m]}}this.tds_package=n},_colHidden:function(q){var h=this.row_size;var B=this.dom_th;var D=this.dom_td;var g=this.tds_package;var m=this.dom_head_col;var r=this.dom_body_col;var s=this.dom_th_colgroup;var F=this.dom_td_colgroup;var G=this.col_hidden;var w=this.col_hidden_backup;var C=this.col_width;var f=this.col_width_backup;var n=this.table_width;var E=this.thead_map;var p=null;for(var A=this.col_size;A--;){var o=G[A];var v=C[A];var u=f[A];if(o){if(w[A]){continue}b(m[A]).detach();b(r[A]).detach();B[A].style.display="none";if(E.length){for(var x=E.length-1;x--;){p=E[x][A];if(p.colSpan>1){p.colSpan--}else{p.style.display="none"}}}g[A].style+="display:none;";f[A]=v;C[A]=0;n-=v;w[A]=true}else{if(!w[A]){continue}var z=F.children(r[A+1]).length;if(z){b(m[A]).insertBefore(m[A+1]);b(r[A]).insertBefore(r[A+1])}else{b(m[A]).appendTo(s);b(r[A]).appendTo(F)}B[A].style.display="";if(E.length){for(var t=E.length-1;t--;){p=E[t][A];if(p.style.display==="none"){p.style.display=""}else{p.colSpan++}}}g[A].style=g[A].style.replace(/display.*?($|;)/g,"");C[A]=u;n+=u;G[A]=c;w[A]=false;f[A]=c}for(var y=h;y--;){if(o){D[y][A].style.display="none"}else{D[y][A].style.display=""}}}if(!q){this.table_width=n;this.grid_head_table.css("width",n);this.el.css("width",n);this._setLayout()}},hideCols:function(h){if(b.type(h)!=="object"){return}var l=this.col_hidden;var j=this.col_size;var k=this.bind_name;for(var g=0;g<j;g++){var m=l[g];var f=h[k[g]];if(f===m){l[g]=c}else{if(typeof f==="boolean"){l[g]=f}}}this._colHidden()},setDatasource:function(i,f){i=i||[];f=f||0;var h=this.options;var g=this.row_size=i.length;this.data=b.extend(true,[],i);if(this.un_render){this.total_size=f;this.__createPagination()}else{this._initProperty()}if(g===0){this.grid_empty.show();this.grid_tfoot.hide();this.el.hide();this.pagination_height=0}else{this.grid_empty.hide();this.el.show();if(h.pagination){this.grid_tfoot.show();this.pagination_height=40}if(this.total_size!==0&&this.total_size!==f){this.total_size=f;this._changepages()}}this.box_height=this.grid_height-this.pagination_height-(h.titlelock?this.thead_height:0);this._renderTbody(i,false);this._setLayout();this._loading("hide");delete this.un_render},_initProperty:function(){this.dom_fixed.length=1;this.multi_checked=[];this.single_checked=a;this.odd=false;this.grid_head.find(".grid_all_check").prop("checked",false);this.grid_tbody.html("").scrollTop(0)},loadData:function(){this._loading("show");this.options.datasource(this,this.getQuery())},addData:function(g,f){g=b.extend(true,[],g);if(this.un_render){this.setDatasource(g);return}if(typeof f==="number"){this._spliceArray(this.data,f,g)}else{this.data=this.data.concat(g)}this._renderTbody(g,true,f);this._isScrolling();this._setLayout();var h=this.options.adddata_callback;if(typeof h==="function"){h(g)}},__createPagination:function(){var g=this.options;if(!g.pagination){return}var f=this;cui(this.grid_tfoot).pagination({count:this.total_size,pagesize:g.pagesize,pageno:g.pageno,pagesize_list:g.pagesize_list,tpls:{pagination:g.pagination_model},cls:g.pagination_model,on_page_change:function(i,h){g.pageno=i;g.pagesize=h;f.loadData();f._changepages()}});this.pagination_obj=cui(this.grid_tfoot)},_changepages:function(){this.pagination_obj.setCount(this.total_size);this.pagination_obj.reDraw()},_spliceArray:function(g,f,h){Array.prototype.splice.apply(g,[f,0].concat(h))},_renderTbody:function(l,m,h){var k=l.length;var n=this._dataToDom(l);if(m){var g=this.row_size;this.row_size+=k;if(h!==c&&h<g){this._spliceArray(this.dom_tr,h,n.dom_tr);this._spliceArray(this.dom_td,h,n.dom_td);this._spliceArray(this.dom_fixed,h+1,n.dom_fixed);var f=this.dom_tr;for(var i=k;i--;){f[i].removeAttribute("index")}if(this.grid_all_check){this.grid_all_check.prop("checked",false)}if(this.end_row>h){this._insertTr(h,k)}this._setOddEven(h-1);this._setNum(h-1)}else{this.dom_tr=this.dom_tr.concat(n.dom_tr);this.dom_td=this.dom_td.concat(n.dom_td);this.dom_fixed=this.dom_fixed.concat(n.dom_fixed);this._setNum(g);if(this.end_row>=g){this._appendTr(this.box_height/27*2)}}}else{this.dom_tr=n.dom_tr;this.dom_td=n.dom_td;this.dom_fixed=this.dom_fixed.concat(n.dom_fixed);this._appendTr(this.box_height/27*2)}},_dataToDom:function(Z){var G=this.options;var O=G.oddevenclass;var E=G.oddevenrow;var Y=this.col_size;var P=Z.length;var m=this.tds_package;var o=this.bind_name;var w=this.new_bind_name;var aa=G.fixcolumnnumber;var f=this.num_col;var n=this.col_render;var t=G.rowstylerender;var x=G.colstylerender;var M=typeof t==="function";var z=typeof x==="function";var r=this.render_method;var W=[];var k=[];var h=[];var T=[];var F=(this.selectrows_html!=="")?1:0;var C=this.odd;var q=G.primarykey;var l=typeof Z[0]==="object"&&q in Z[0];for(var S=0;S<P;S++){var u=document.createElement("tr");if(E){if(C){u.className=O}C=!C}var v=Z[S];if(l){u.setAttribute("pkey",v[q].toString())}if(M){var B=t(v);if(typeof B!=="string"){B=c}else{B+=";";u.style.cssText=B}}var X;var H=[];var y=c;var ab=[];if(F===1){X=document.createElement("td");var D=m[0];X.innerHTML=D.html;X.className="grid_select_input";X.style.cssText=D.style;H.push(X);u.appendChild(X);if(aa>0){b(X).addClass("grid_fixed");y=X.getElementsByTagName("span")[0];if(B){y.setAttribute("style",y.getAttribute("style")+B)}ab.push(y)}}var R=c,J=c,L=c,s=c,N="",A=c,I=c,K=c;for(var U=F;U<aa;U++){L=o[U];s=w[U];X=document.createElement("td");if(f===U){N=S+L}else{if(!L){N=""}else{N=s===c?v[L]:v[s[0]][s[1]]}}A=n[U];var g="";if(A){K=A.render;var V=A.method;switch(K){case"format_fn":N=A.callback(N,A.format)||N;break;case"colrender_fn":N=A.callback(v,L)||N;break;case"render_fn":I=A.col_json;I.el=h[U];I.bindName=L;N=A.callback(v,S,I)||N;break;case"fiexd_fn":N=r[V](v,A.options,L)||N;break}if(V==="button"||V==="image"){g=[N,"</span>"].join("")}}if(!g){g=[N,"</span>",N].join("")}X.innerHTML=m[U].html.replace("<!---->",g);X.className="grid_fixed";H.push(X);u.appendChild(X);y=X.getElementsByTagName("span")[0];var Q=y.getAttribute("style");if(B){Q+=B}if(z){J=x(v,L);if(typeof J==="string"){Q+=";"+J}}y.setAttribute("style",Q);ab.push(y)}for(;U<Y;U++){L=o[U];s=w[U];X=document.createElement("td");R=m[U];if(f===U){N=S+L}else{if(!L){N=""}else{N=s===c?v[L]:v[s[0]][s[1]]}}A=n[U];if(A){K=A.render;switch(K){case"format_fn":N=A.callback(N,A.format)||N;break;case"colrender_fn":N=A.callback(v,L)||N;break;case"render_fn":I=A.col_json;I.el=h[U];I.bindName=L;N=A.callback(v,S,I)||N;break;case"fiexd_fn":N=r[A.method](v,A.options,N)||N;break}}X.innerHTML=N;var p=R.style;if(z){J=x(v,L);if(typeof J==="string"){p+=";"+J}}X.style.cssText=p;H.push(X);u.appendChild(X)}k.push(H);W.push(u);T.push(ab)}this.odd=C;return{dom_td:k,dom_tr:W,dom_fixed:T}},_insertTr:function(g,k){var f=this.dom_tr;var j=this.grid_tbody[0];for(var h=g+k;h>g;h--){j.insertBefore(f[h-1],f[h])}this.end_row+=k;this._setAutoHeight()},_appendTr:function(m){var f=this.dom_tr;var j=this.row_size;var l=this.grid_tbody[0];var h=l.getElementsByTagName("tr").length;var g=Math.min(h+m,j);if(this.auto_height){g=j}for(var k=h;k<g;k++){l.appendChild(f[k])}this.grid_table_box.css("paddingBottom",(j-g)*27);this.render_complete=g===j;this.end_row=g;this._setAutoHeight()},_setOddEven:function(h){var l=this.options;if(!l.oddevenrow){return}var g=this.dom_tr;var j=this.row_size;var n=l.oddevenclass;var m=this.odd=j%2===1;var k=h;var f=this.row_size;for(;k<f;k++){if(!m){b(g[k]).addClass(n)}else{b(g[k]).removeClass(n)}m=!m}},_setNum:function(j){if(isNaN(this.num_col)){return}var l=this.dom_td;var o=this.dom_fixed;var m=this.num_col;var f=this.bind_name[m];var h=j;var g=this.row_size;if(this.options.fixcolumnnumber>m){for(;h<g;h++){var k=o[h+1][m];var n=h+f;k.innerHTML=n;k.nextSibling.nodeValue=n}}else{for(;h<g;h++){l[h][m].innerHTML=h+f}}},_setAutoHeight:function(){if(this.auto_height){var g=parseInt(this.grid_table_box.css("marginBottom"))||0;var f=this.el.height();this.setHeight(f+g+this.thead_height+(this.options.pagination?40:0)+2)}},_setLayout:function(){var i=this.grid_width;var f=this.grid_height;var g=this.table_width;var h=this.el.height();this.grid_container.css({width:i,height:f});this.el.css("width",g);this.grid_head_table.css("width",g);this._calculateWidth();this._setColWidthStyle();this._isScrolling();if(!this.options.titleellipsis){this._setTheadHeight()}this.grid_head.css("height",this.thead_height);this.grid_body.css("height",this.box_height);if(h!==this.el.height()){this._isScrolling(true)}this._setAutoHeight()},_setColWidthStyle:function(){var g=this.col_size;var i=this.col_width;var j=this.dom_head_col;var h=this.dom_body_col;var f=g;var l="";if(this.isqm){for(f=g;f--;){l=i[f]===0?0:i[f]-1+"px";j[f].style.width=l;h[f].style.width=l}}else{for(f=g;f--;){l=i[f]+"px";j[f].style.width=l;h[f].style.width=l}}},_setTheadHeight:function(){var j=this.thead_height=this.grid_head.css("height","auto").height();this.box_height=this.grid_height-this.pagination_height-(this.options.titlelock?j:0);var k=this.dom_fixed[0];var f=j-1+"px";for(var g=k.length;g--;){var h=k[g];h.style.height=f;h.style.lineHeight=f}},_isScrolling:function(g){var i=this.el;var k=this.grid_width;var h=this.table_width;var j=this.box_height;var f=i.height();if(this.options.adaptive&&!this.is_ittab){if(j<f){h=this.table_width=k-17}else{this.table_width=k;h=k+1}i.css("width",h);this.grid_head_table.css("width",h);if(!g){this._calculateWidth()}}else{if(j<f&&k>=h+17){this.grid_table_box.css("marginBottom",0);this.grid_scroll.hide()}if(k<h&&j>=f+17){this.grid_scroll.show().children("div").eq(0).css("width",h-18);this.grid_table_box.css("marginBottom",17)}if(k<h+17&&j<f||k<h&&j<f+17){this.grid_scroll.show().children("div").eq(0).css("width",h);this.grid_table_box.css("marginBottom",17)}if(j>=f&&k>=h){this.grid_table_box.css("marginBottom",0);this.grid_scroll.hide()}}},getQuery:function(){var f=this.options;return{pageSize:f.pagesize,pageNo:f.pageno,sortName:f.sortname,sortType:f.sorttype}},setQuery:function(m){var l=this.options;var k=l.pagesize_list;var h=m.pageSize;for(var g=k.length;g--;){if(h===k[g]){l.pagesize=h}}l.pageno=m.pageNo;var n=l.sortname=m.sortName;var f=l.sorttype=m.sortType;var j=l.sortstyle;if(n.length>j||f.length>j){n.length=n.length=j}},setHeight:function(f){if(typeof f!=="number"||f-2===this.grid_height){return}f-=2;this.box_height-=this.grid_height-f;this.grid_height=f;this._setLayout();this._lazyload(true)},setWidth:function(f){if(typeof f!=="number"||f-2===this.grid_width){return}f-=2;if(this.options.adaptive){this.table_width=f-17}this.grid_width=f;this._setLayout()},setHighLight:function(h){var g=this.options.primarykey;var i=this.data;if(g in i[0]){for(var f=this.row_size;f--;){if(i[f][g]===h){b(this.dom_tr[f]).addClass("grid_highlight");break}}}},selectRowsByIndex:function(h,g){var k=this.options.selectrows;if(k==="no"){return}if(g!==false){g=true}if(typeof h==="number"){h=[h]}if(k==="single"){this._selectRows(h[0],g)}for(var j=0,f=h.length;j<f;j++){this._selectRows(h[j],g)}},_pkToIndex:function(g){if(b.type(g)!=="array"){g=[g]}var m=this.data;var l=this.options.primarykey;if(!l in m[0]){return[]}var f=g.length;var o=[];for(var k=0;k<f;k++){var n=g[k];for(var h=this.row_size;h--;){if(m[h][l]===n){o.push(h);break}}}return o},selectRowsByPK:function(g,f){var h=this.options;if(h.selectrows==="no"||!h.primarykey in this.data[0]){return}this.selectRowsByIndex(this._pkToIndex(g),f)},_removeRow:function(g){var f=this.data;var h=f[g];this.data.splice(g,1);b(this.dom_tr[g]).remove();this.dom_tr.splice(g,1);this.dom_td.splice(g,1);this.multi_checked.splice(g,1);this.dom_fixed.splice(g,1);return h},removeData:function(t){if(typeof t==="number"||b.type(t)==="array"){if(typeof t==="number"){t=[t]}t.sort();var n=t.length;var f=[];var o=this.single_checked;var l=this.multi_checked;var q=this.options.selectrows;for(var m=0;m<n;m++){var p=parseInt(t[m]);if(q==="multi"){if(l[p]===true){l[p]=false;this.multi_checked_num--}}else{if(q==="single"){if(o===p){this.single_checked=a}}}p-=m;var k=this._removeRow(p);if(k){f.push(k)}}this.row_size-=n;console.log(this.multi_checked_num,this.row_size);if(this.multi_checked_num===this.row_size){this.grid_all_check.prop("checked",true)}else{this.grid_all_check.prop("checked",false)}var g=this.row_size;var r=this.dom_tr;for(var h=g;h--;){r[h].removeAttribute("index")}this._setAutoHeight();this._setLayout();this._setOddEven(t[0]);this._setNum(t[0]);var s=this.options.removedata_callback;if(typeof s==="function"){s(f)}}},changeData:function(j,k){var f=this.options;j=b.extend(true,{},j);if(typeof k==="string"){k=this._pkToIndex(k)[0]}if(k===c||k>=this.row_size){return}var i=this._dataToDom([j]);var q=this.dom_tr[k];var g=i.dom_tr[0];var m=i.dom_td[0];this.data[k]=j;this.dom_tr[k]=g;this.dom_td[k]=m;this.dom_fixed[k+1]=i.dom_fixed[0];this.odd=!this.odd;g.setAttribute("class",q.getAttribute("class")||"");this.grid_tbody[0].replaceChild(g,q);var p=b(q).find("[name="+f.checkboxname+"]").prop("checked");b(g).find("[name="+f.checkboxname+"]").prop("checked",p);var l=this.num_col;if(isNaN(l)){return}var h=m[l];var o=k+this.bind_name[l];if(this.options.fixcolumnnumber>l){var n=h.getElementsByTagName("span")[0];n.innerHTML=o;n.nextSibling.nodeValue=o}else{h.innerHTML=o}},getSelectedRowData:function(){var l=this.options.selectrows;if(l==="no"){return[]}var k=this.data;if(l==="single"){return[k[this.single_checked]]}var j=this.multi_checked;var g=this.row_size;var f=[];for(var h=0;h<g;h++){if(j[h]){f.push(k[h])}}return f},getSelectedPrimaryKey:function(){var k=this.options;var l=k.selectrows;var j=k.primarykey;var m=this.getSelectedRowData();var f=m.length;if(l==="no"||!f||!j in m[0]){return[]}var g=[];for(var h=0;h<f;h++){g.push(m[h][j])}return g},getSelectedIndex:function(){var k=this.options.selectrows;if(k==="no"){return[]}if(k==="single"){return[this.single_checked]}var j=this.multi_checked;var g=this.row_size;var f=[];for(var h=0;h<g;h++){if(j[h]){f.push(h)}}return f},getRowsDataByIndex:function(k){var j=this.data;if(typeof k==="number"){return[j[k]]}if(b.type(k)==="array"){var f=k.length;var g=[];for(var h=0;h<f;h++){g.push(j[k[h]])}return g}},getRowsDataByPK:function(g){var m=this.options.primarykey;var n=this.data;if(m in n[0]){if(b.type(g)!=="array"){g=[g]}var f=g.length;var k=[];for(var l=0;l<f;l++){var o=g[l];for(var h=this.row_size;h--;){if(n[h][m]===o){k.push(n[h]);break}}}return k}else{return null}},ittab:{_init:function(g){var k=g.grid_overlay;var j=g.grid_line;var l=[];var m=0;var f=0;var i=false;var h=a;g.grid_head_table.find(".grid_ittab").show();g.grid_head_table.on("mousedown",function(n){var p=n.target;f=0;if(p.className==="grid_ittab"){l=g.col_width;h=g._thIndex(b(p).parents("th")[0]);k.show();var o=k.offset().left;m=n.pageX-o;j.show().css("left",m);i=false;k.off("mousemove").on("mousemove",function(q){q.stopPropagation();f=q.pageX-o;if(l[h]+f-m<24){f=24+m-l[h]}j.css("left",f);return false})}return false});k.on("mouseup mouseout",function(){if(i||isNaN(h)){return}i=true;b(this).hide().off("mousemove");j.hide();if(f===0){return}var n=f-m;g.is_ittab=true;g.col_width[h]=l[h]+n;g.table_width=g.table_width+n;g._setLayout()})}},hideCol:{_init:function(h){var g=document.createElement("div");g.className="grid_hidecol";var j=h.thead_height;g.style.top=j+"px";g.tabIndex="1";h.grid_box.append(g);g=b(g);var m=h.col_size;var n=h.thead_text;var l=0;if(h.selectrows_html!==""){l++}var k=['<div class="grid_hidecol_list" hidefocus="true" >'];for(;l<m;l++){k.push('<a href="javascript:;" hidefocus="true" title=');k.push(n[l]);k.push('><input type="checkbox" checked="checked" />');k.push(n[l]);k.push("</a>")}k.push('</div><div class="grid_hidecol_button"><a hidefocus="true" class="grid_hidecol_confirm">???</a><a hidefocus="true" class="grid_hidecol_cancel">???</a></div>');g.html(k.join(""));var f=h.box_height-j-40;if(22*m>f){g.children(".grid_hidecol_list").css("height",f)}this.bindEvent(h,g)},bindEvent:function(o,i){var k=o.grid_box.offset().left;var h=k+o.grid_width/2;var n=null;var p=false;var j=i.find("input");var f=0;var m=-1;if(o.selectrows_html!==""){f++}o.grid_head_table.on("click",function(s){var u=s.target;if(u.className==="grid_select"){if(n){i.blur()}n=b(u).parents("th").addClass("grid_thead_select");var q=b(u).offset().left;var t=q-k+2;if(q>h){t-=126}i.css({left:t,top:o.thead_height}).show().focus().attr("hidefocus","true");var r=o._thIndex(n[0])-f;j.eq(m).prop("disabled",false).end().eq(r).prop("disabled",true);m=r;p=false}});i.on("blur",function(){if(p){return}n.removeClass("grid_thead_select");b(i).hide()});i.on("mouseover",function(){p=true});i.on("mouseout",function(){p=false});var l=o.col_hidden;var g=o.col_size;setTimeout(function(){for(var q=g-f;q--;){j.eq(q).prop("checked",l[q+f]!==true)}},100);i.on("click",function(u){this.focus();var w=b(u.target);var v=w.prop("className");if(v==="grid_hidecol_confirm"){for(var t=f;t<g;t++){l[t]=j.eq(t-f).prop("checked")===false}p=false;o._colHidden();b(this).blur();return}if(v==="grid_hidecol_cancel"){for(var s=g-f;s--;){var r=l[s]!==true;j.eq(s).prop("checked",r)}p=false;b(this).blur();return}if(w.prop("tagName")==="A"){var q=w.children("input").eq(0);if(!q.prop("disabled")){q.prop("checked",!q.prop("checked"))}}})}}})})(window.comtop);(function(h,a){a.UI.scan=function(){var q={};for(var r=0;r<arguments.length;r++){switch(typeof arguments[r]){case"string":case"object":q.range=h(arguments[r]);break;case"boolean":q.databind=arguments[r];break}}q=h.extend({range:document,databind:true},q);j(q)};a.UI.scan.debug=false;a.UI.scan.textmode=false;a.UI.scan.disable=false;a.UI.scan.readonly=false;a.UI.scan.databind=o;a.UI.scan.setReadonly=p;var b,d=[],k=[];function j(t){b=null;d=[];k=[];b=h("[uitype]",t.range);b.each(function(){var v=h(this);var u=v.attr("uitype");if(v.data("uitype")||!a.UI[u.charAt(0).toUpperCase()+u.substring(1)]){b=b.not(v);return true}d.push(l(v,u))});var s=null;if(t.databind){o()}if(!a.UI.scan.textmode&&!comtop.UI.scan.disable){for(var r=0,q=b.length;r<q;r++){s=b.eq(r).data("uitype");if(s&&!s.options.textmode&&!s.options.disable){k.push(f(b.eq(r),d[r]));k.push(i(b.eq(r),d[r],s.tipPosition||s.options.el))}}}if(a.UI.scan.debug){c(t.databind)}t=undefined}function l(r,q){if(!q&&q===""){return false}var s=n(r[0]);var x={validate:s.validate};var w={databind:s.databind};var v={tip:s.tip,trigger:s.tipTrigger?s.tipTrigger:"hover"};delete s.uitype;delete s.tipTrigger;delete s.tip;delete s.databind;delete s.validate;var t=q.charAt(0).toLowerCase()+q.substring(1);if(a.UI.scan.textmode){s.textmode=true;s.readonly=false;s.disable=false}if(a.UI.scan.disable){s.textmode=false;s.readonly=false;s.disable=true}if(a.UI.scan.readonly){s.readonly=true;s.textmode=false;s.disable=false}if(a.UI.scan.debug){try{r[t](s)}catch(u){k.push("["+q+":"+r.attr("id")+"]:????????????????????????????????????????\n")}}else{r[t](s)}return{opts:s,valiOpts:x,dbOpts:w,tipOpts:v}}function o(){if(!b||b.length===0){return}for(var r=0,q=b.length;r<q;r++){b.eq(r).data("uitype")&&k.push(g(b.eq(r),d[r]))}}function c(t){if(a.UI.scan.debug){var s=[];for(var r=0,q=k.length;r<q;r++){k[r]&&s.push(k[r])}s.length>0&&alert(s.join(""))}k=[];if(!t){b=undefined;d=[]}}function g(B,r){var A=r.dbOpts.databind;var z=null;var t=a.UI.scan.debug;if(A){var s=A.split(".");if(s.length<2){t&&(z="["+B.attr("uitype")+":"+B.attr("id")+"]:??????????JSON????????????;\n");return false}var v=[];var q;var x;for(var w=0,u=s.length;w<u;w++){if(w<u-1){v.push(s[w])}else{x=s[w]}}q=a.namespace(v.join("."));if(q.nodeName){t&&(z="["+B.attr("uitype")+":"+B.attr("id")+"]:???"+v+"????????ID????????????;\n");return false}var y=cui(q).databind();y.addBind(B,x)}return z}function f(t,u){var r=u.valiOpts.validate;var q="";if(r){var v=/^(?:\{.*\}|\[.*\])$/;if(!window.validater){window.validater=cui().validate()}if(v.test(r)){try{r=h.parseJSON(r.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"))}catch(w){q="["+t.attr("uitype")+":"+t.attr("id")+"]:???JSON???????;\n"}}else{try{r=m(r)}catch(w){q="["+t.attr("uitype")+":"+t.attr("id")+"]:?????????????;\n"}}switch(h.type(r)){case"array":for(var s=0;s<r.length;s++){if(r[s].rule){window.validater.add(cui(t),r[s].type,r[s].rule)}else{window.validater.add(cui(t),r[s].type)}}break;case"string":window.validater.add(cui(t),r)}}return q}function i(s,t,r){var q="";r=h(r,s);if(cui(s).options.textmode!=undefined&&!t.tipOpts.tip){s.attr("tip","");t.tipOpts.tip=""}if(t.tipOpts.tip!=undefined){try{cui.tip(r,{trigger:t.tipOpts.trigger,tipEl:s})}catch(u){q="["+s.attr("uitype")+":"+s.attr("id")+"]:??????????;\n"}}return q}function n(r){var q=h(r);return{isScanner:true,databind:q.attr("databind"),validate:q.attr("validate"),tip:q.attr("tip"),tipTrigger:q.attr("tip_trigger")}}function m(s){var q=s.split("."),t=window;for(var r=0;r<q.length;r++){t=t[q[r]]}return(typeof t==="object"&&!t.nodeName)?t:s}function p(r,v){r=typeof r==="undefined"?true:r;v=typeof v==="undefined"?"body":v;var u=[];var s=h(v);var t,q;if(v!="document"&&v!="body"&&v!="html"){for(t=0,q=a.UI.componentList.length;t<q;t++){if(s.find(a.UI.componentList[t].options.el).length){u.push(a.UI.componentList[t])}}}else{u=a.UI.componentList}for(t=0,q=u.length;t<q;t++){if(typeof u[t].setReadonly==="function"){u[t].setReadonly(r)}}}})(window.comtop.cQuery,window.comtop);