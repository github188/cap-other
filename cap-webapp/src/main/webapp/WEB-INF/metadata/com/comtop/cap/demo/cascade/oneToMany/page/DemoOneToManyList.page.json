{
	"charEncode":"UTF-8",
	"cname":"DemoOneToManyList",
	"code":"cap_demo_cascade_oneToMany_demoOneToManyList",
	"createTime":1463556835060,
	"createrId":"001",
	"createrName":"CAP超级管理员",
	"crudeUIIds":"",
	"crudeUINames":"",
	"dataStoreVOList":[
		{
			"cname":"页面全局参数",
			"ename":"environmentVariable",
			"entityId":"",
			"modelType":"environmentVariable",
			"pageConstantList":[],
			"saveToSession":false,
			"verifyIdList":[]
		},
		{
			"cname":"页面传入参数",
			"ename":"pageParam",
			"entityId":"",
			"modelType":"pageParam",
			"pageConstantList":[],
			"saveToSession":false,
			"verifyIdList":[]
		},
		{
			"cname":"页面用户权限",
			"ename":"rightsVariable",
			"entityId":"",
			"modelType":"rightsVariable",
			"pageConstantList":[],
			"saveToSession":false,
			"verifyIdList":[]
		},
		{
			"cname":"页面常量",
			"ename":"pageConstantList",
			"entityId":"",
			"modelType":"pageConstant",
			"pageConstantList":[{
				"constantDescription":"DemoOneToManyEdit",
				"constantName":"demoOneToManyEdit",
				"constantOption":{
					"pageAttributeVOList":"[{\"attributeName\":\"primaryValue\",\"attributeDescription\":\"主键ID\",\"attributeValue\":\"\"}]",
					"pageModelId":"com.comtop.cap.demo.cascade.oneToMany.page.DemoOneToManyEdit",
					"url":"/cap/demo/cascade/oneToMany/demoOneToManyEdit.ac"
				},
				"constantType":"url",
				"constantValue":"'/cap/demo/cascade/oneToMany/demoOneToManyEdit.ac'"
			}],
			"saveToSession":false,
			"verifyIdList":[]
		},
		{
			"cname":"一对多级联示例主表集合",
			"ename":"cascadeActionMainList",
			"entityId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain",
			"modelType":"list",
			"pageConstantList":[],
			"saveToSession":false,
			"verifyIdList":[]
		},
		{
			"cname":"一对多级联示例主表",
			"ename":"cascadeActionMain",
			"entityId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain",
			"modelType":"object",
			"pageConstantList":[],
			"saveToSession":false,
			"verifyIdList":[]
		}
	],
	"description":"",
	"hasMenu":false,
	"hasPermission":true,
	"includeFileList":[
		{
			"defaultReference":true,
			"fileName":"base",
			"filePath":"/cap/rt/common/base/css/base.css",
			"fileType":"css"
		},
		{
			"defaultReference":true,
			"fileName":"comtop.cap.rt",
			"filePath":"/cap/rt/common/base/css/comtop.cap.rt.css",
			"fileType":"css"
		},
		{
			"defaultReference":true,
			"fileName":"comtop.ui.min",
			"filePath":"/cap/rt/common/cui/themes/default/css/comtop.ui.min.css",
			"fileType":"css"
		},
		{
			"defaultReference":true,
			"fileName":"jquery",
			"filePath":"/cap/rt/common/base/js/jquery.js",
			"fileType":"js"
		},
		{
			"defaultReference":true,
			"fileName":"comtop.ui.min",
			"filePath":"/cap/rt/common/cui/js/comtop.ui.min.js",
			"fileType":"js"
		},
		{
			"defaultReference":true,
			"fileName":"comtop.cap.rt",
			"filePath":"/cap/rt/common/base/js/comtop.cap.rt.js",
			"fileType":"js"
		},
		{
			"defaultReference":true,
			"fileName":"cui.utils",
			"filePath":"/cap/rt/common/cui/js/cui.utils.js",
			"fileType":"js"
		},
		{
			"defaultReference":true,
			"fileName":"globalVars",
			"filePath":"/cap/rt/common/globalVars.js",
			"fileType":"js"
		},
		{
			"defaultReference":true,
			"fileName":"Taglibs",
			"filePath":"/cap/rt/common/CapRtTaglibs.jsp",
			"fileType":"jsp"
		}
	],
	"layoutVO":{
		"children":[
			{
				"children":[{
					"children":[{
						"children":[
							{
								"children":[],
								"componentModelId":"uicomponent.bestPractice.listFunc.component.addButton",
								"id":"uiid-7652287511155009",
								"options":{
									"id":"btnAdd",
									"label":"新增",
									"name":"btnAdd",
									"on_click":"addBizObject",
									"on_click_id":"14635567789200",
									"uitype":"Button"
								},
								"type":"ui",
								"uiType":"Button"
							},
							{
								"children":[],
								"componentModelId":"uicomponent.bestPractice.listFunc.component.deleteButton",
								"id":"uiid-3740098786307499",
								"options":{
									"id":"btnDelete",
									"label":"删除",
									"name":"btnDelete",
									"on_click":"deleteRow",
									"on_click_id":"14635567814050",
									"uitype":"Button"
								},
								"type":"ui",
								"uiType":"Button"
							}
						],
						"componentModelId":"uicomponent.layout.component.tableLayout",
						"id":"tdid-530818782793358",
						"options":{
							"label":"单元格",
							"uitype":"Td"
						},
						"type":"layout",
						"uiType":"td"
					}],
					"id":"trid-34911059685982764",
					"options":{
						"uitype":"tr"
					},
					"type":"layout",
					"uiType":"tr"
				}],
				"id":"tableid-5912455905461684",
				"options":{
					"label":"表格布局",
					"uitype":"table"
				},
				"type":"layout",
				"uiType":"table"
			},
			{
				"children":[{
					"children":[{
						"children":[{
							"children":[],
							"componentModelId":"uicomponent.common.component.gridCallService",
							"id":"uiid-17085732894483954",
							"options":{
								"columns":"[{\"name\":\"编号\",\"bindName\":\"code\",\"sort\":false,\"hide\":false,\"disabled\":false,\"render\":\"gridViewLinkRender\"},{\"name\":\"单位\",\"bindName\":\"unit\",\"sort\":false,\"hide\":false,\"disabled\":false},{\"name\":\"单位id\",\"bindName\":\"unitId\",\"sort\":false,\"hide\":false,\"disabled\":false},{\"name\":\"填表人\",\"bindName\":\"information\",\"sort\":false,\"hide\":false,\"disabled\":false},{\"name\":\"填表人id\",\"bindName\":\"informationId\",\"sort\":false,\"hide\":false,\"disabled\":false},{\"name\":\"调管范围\",\"bindName\":\"adjustableScope\",\"sort\":false,\"hide\":false,\"disabled\":false}]",
								"custom_pagesize":false,
								"datasource":"initDatasource",
								"datasource_id":"14635631202690",
								"extras":"{\"entityId\":\"com.comtop.cap.demo.cascadeExample.entity.CascadeActionMain\",\"dataStoreEname\":\"cascadeActionMain\",\"tableHeader\":\"[{\\\"customHeaderId\\\":\\\"code\\\",\\\"name\\\":\\\"编号\\\",\\\"bindName\\\":\\\"code\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"gridViewLinkRender\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"},{\\\"customHeaderId\\\":\\\"unit\\\",\\\"name\\\":\\\"单位\\\",\\\"bindName\\\":\\\"unit\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"},{\\\"customHeaderId\\\":\\\"unitId\\\",\\\"name\\\":\\\"单位id\\\",\\\"bindName\\\":\\\"unitId\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"},{\\\"customHeaderId\\\":\\\"information\\\",\\\"name\\\":\\\"填表人\\\",\\\"bindName\\\":\\\"information\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"},{\\\"customHeaderId\\\":\\\"informationId\\\",\\\"name\\\":\\\"填表人id\\\",\\\"bindName\\\":\\\"informationId\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"},{\\\"customHeaderId\\\":\\\"adjustableScope\\\",\\\"name\\\":\\\"调管范围\\\",\\\"bindName\\\":\\\"adjustableScope\\\",\\\"sort\\\":\\\"false\\\",\\\"hide\\\":\\\"false\\\",\\\"disabled\\\":\\\"false\\\",\\\"level\\\":1,\\\"indent\\\":\\\"\\\",\\\"format\\\":\\\"\\\",\\\"check\\\":false,\\\"render\\\":\\\"\\\",\\\"options\\\":\\\"\\\",\\\"width\\\":\\\"\\\",\\\"rowspan\\\":\\\"\\\",\\\"colspan\\\":\\\"\\\"}]\"}",
								"gridheight":"auto",
								"label":"网格",
								"lazy":true,
								"pagination":true,
								"primarykey":"uuid",
								"resizeheight":"getBodyHeight",
								"resizeheight_id":"getBodyHeight",
								"resizewidth":"getBodyWidth",
								"resizewidth_id":"getBodyWidth",
								"uitype":"Grid"
							},
							"type":"ui",
							"uiType":"Grid"
						}],
						"componentModelId":"uicomponent.layout.component.tableLayout",
						"id":"tdid-1188273053849116",
						"options":{
							"label":"单元格",
							"uitype":"Td"
						},
						"type":"layout",
						"uiType":"td"
					}],
					"id":"trid-16858925824053586",
					"options":{
						"uitype":"tr"
					},
					"type":"layout",
					"uiType":"tr"
				}],
				"id":"tableid-40021393585484475",
				"options":{
					"label":"表格布局",
					"uitype":"table"
				},
				"type":"layout",
				"uiType":"table"
			}
		],
		"options":{}
	},
	"menuName":"",
	"menuType":"1",
	"minWidth":"1024px",
	"modelId":"com.comtop.cap.demo.cascade.oneToMany.page.DemoOneToManyList",
	"modelName":"DemoOneToManyList",
	"modelPackage":"com.comtop.cap.demo.cascade.oneToMany",
	"modelPackageId":"F999A88998C6487D8D7190514267E612",
	"modelType":"page",
	"pageActionVOList":[
		{
			"cname":"点击按钮跳转页面",
			"description":"点击按钮跳转页面",
			"ename":"addBizObject",
			"methodBody":"\t\t\n/*\n * 点击按钮跳转页面 点击按钮跳转页面\n *\n * @param event 当前事件对象\n * @param self 当前button对象\n * @param mark 传入的参数\n */\nfunction addBizObject(event, self, mark) { \n\tvar pageJumpURL=cap.getforwardURL(demoOneToManyEdit);\n\tvar container=window;\n\t//TODO  调用后台前处理逻辑\n\n\t//带查询条件返回设置\n  \tvar saveQueryData='no';\n  \t if(saveQueryData=='yes'){\n  \t\tpageJumpURL=cap.buildURL(pageJumpURL,{clearSession:false});\n  \t}\n  \t//当打开的页面为新窗口，并且当前window实现了addBizObject_pageJump方法，则调用addBizObject_pageJump方法来打开新页面\n  \tvar _openWindow = window[\"addBizObject_pageJump\"]; \n  \tif(\"location\" == \"win\" && _openWindow && typeof(_openWindow) == \"function\"){\n  \t\t_openWindow(pageJumpURL);\n  \t}else{\n\t\tcap.pageJump(pageJumpURL,\"location\",container);\n  \t}\n}\n\t\t\n\t\n",
			"methodBodyExtend":{
				"before":""
			},
			"methodOption":{
				"actionMethodName":"",
				"container":"window",
				"methodParameter1":"",
				"pageURL":"demoOneToManyEdit",
				"relationGridId":"",
				"returnValueBind":"",
				"saveQueryData":"no",
				"target":"location"
			},
			"methodTemplate":"actionlibrary.bestPracticeAction.action.addBizObject",
			"pageActionId":"14635567789200"
		},
		{
			"cname":"删除行为",
			"description":"删除行为",
			"ename":"deleteRow",
			"methodBody":"\t\t\n//删除行为 删除行为\nfunction deleteRow(){\n\t//删除前操作\n\n\tvar gridId=\"uiid-17085732894483954\";\n\tvar gridObj = cui(\"#\"+gridId);\n\tvar selects = gridObj.getSelectedRowData();\n\tif(selects == null || selects.length == 0){\n\t\tcui.alert(\"请选择要删除的数据。\");\n\t\treturn;\n\t}\n\tcui.confirm(\"确定要删除这\"+selects.length+\"条数据吗？\",{\n\t\tonYes:function(){\n\t\t\tvar paramArray = [];\n\t\t\tparamArray[0] = selects;\n\t\t\tvar dwrInvokeParam = cap.getDwrInvokeParam('com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain','cascadeDelete',paramArray);\n\t\t\tDemoOneToManyListAction.dwrInvoke(dwrInvokeParam,{callback:function(result){\n\t\t\t\t//数据刷新前处理\n\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tgridObj.loadData();\n\t\t\t\t \tcui.message(\"删除成功！\",\"success\");\n\t\t\t\t}else{\n\t\t\t\t\tcui.error(\"删除失败，请重新操作！\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//数据刷新后处理\n\n\t\t\t},\n\t\t\terrorHandler:function(message, exception){\n\t\t\t   //TODO 后台异常信息回调\n\t\t\t   var message =\"删除失败,存在异常信息:\"+message;\n\n\t\t\t   cui.message(message);\n\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\t//TODO 可自定义设置返回值\n\n}\n\t\n",
			"methodBodyExtend":{
				"before":"",
				"saveErrorHandler":"",
				"setReturnVal":"",
				"updateDataAfter":"",
				"updateDataBefore":""
			},
			"methodOption":{
				"actionMethodName":"cascadeDelete",
				"container":"",
				"entityId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain",
				"isGenerateParameterForm":"false",
				"methodId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain/cascadeDelete",
				"pageURL":"",
				"paramType":"[{\"chName\":\"删除的实体VO集合\",\"dataType\":{\"generic\":[{\"generic\":null,\"source\":\"entity\",\"type\":\"entity\",\"value\":\"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain\"}],\"source\":\"collection\",\"type\":\"java.util.List\",\"value\":null},\"description\":\"删除的实体VO集合\",\"engName\":\"lstDelVO\",\"parameterId\":\"1463564545398\",\"sortNo\":0}]",
				"relationGridId":"uiid-17085732894483954",
				"returnSource":"primitive",
				"saveQueryData":"",
				"target":""
			},
			"methodTemplate":"actionlibrary.formAction.action.delete",
			"pageActionId":"14635567814050"
		},
		{
			"cname":"查看链接渲染",
			"description":"grid查看链接渲染",
			"ename":"gridViewLinkRender",
			"methodBody":"\t\t\n//查看链接渲染 grid查看链接渲染\nfunction gridViewLinkRender(rd, index, col) { \n\tif(rd[col.bindName] == null){\n\t\treturn;\n\t}\n\tvar url=cap.getforwardURL(demoOneToManyEdit);\n\turl = cap.buildURL(url,{'pageMode':'readonly', 'primaryValue':rd['primaryValue']});\n\n\tvar content= \"<a style=\\\"cursor:pointer\\\" onclick=\\\"cap.pageJump('\"+url+\"','_self',window)\\\">\" + rd[col.bindName] + \"</a>\";\n\t//自定义content内容\n\n\treturn content;\n}\n\t\n",
			"methodBodyExtend":{
				"before":"",
				"setURL":""
			},
			"methodOption":{
				"actionMethodName":"",
				"container":"window",
				"methodParameter1":"",
				"pageURL":"demoOneToManyEdit",
				"relationGridId":"",
				"returnValueBind":"",
				"saveQueryData":"",
				"target":"_self"
			},
			"methodTemplate":"actionlibrary.bestPracticeAction.gridAction.action.gridViewLinkRender",
			"pageActionId":"1463557705530"
		},
		{
			"cname":"初始化查询行为",
			"description":"列表查询行为方法",
			"ename":"initDatasource",
			"methodBody":"\t\t\n/**\n * 初始化查询行为 列表查询行为方法\n * 该方法只支持后台方法有且只有一个参数，且参数类型为对象（vo）\n * 若是多条件查询，需把条件封装在vo中\n * @obj grid对象\n * @pageQuery grid分页信息\n */\nfunction initDatasource(obj, pageQuery) {\n\tvar queryVarName = 'cascadeActionMain';\n\tvar query = {};\n\tif(queryVarName !== ''){\n\t\tquery=cap.getQueryObject(window[queryVarName],pageQuery);\n\t}\n\t//初始化查询参数\n\n\t//获取查询条件\n \tvar paramArray = [];\n \tparamArray[0] = query;\n \tvar dwrInvokeParam = cap.getDwrInvokeParam('com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain','queryVOListByPage',paramArray);\n \t//TODO 调用前操作\n\n \t//调用后台查询\n \tdwr.TOPEngine.setAsync(true);\n\tDemoOneToManyListAction.dwrInvoke(dwrInvokeParam,{callback:function(result){\n\t\tvar returnValueVarName= 'cascadeActionMainList';\n\t\tif(returnValueVarName === ''){\n\t\t\treturnValueVarName = 'returnValueVarName';\n\t\t}\n  \t\t//TODO 数据设置前操作\n\n  \t\twindow[returnValueVarName]=result.list;\n  \t\t//设置到数据源\n  \t\tif(result.list!=null){\n  \t\t\tobj.setQuery({pageNo:result.pageNo});\n  \t\t\tobj.setDatasource(result.list,result.count); \n      \t}else{\n      \t\tobj.setDatasource([],0);\n      \t}\n  \t\t//TODO 数据设置后操作\n\n  \t\t//查询条件保存设置\n  \t\tvar saveQueryData='no';\n  \t\tif(saveQueryData=='yes'){\n  \t\t\tcap.setSessionAttribute({'cascadeActionMain':eval('cascadeActionMain')});\n  \t\t}\n  \t},\n  \terrorHandler:function(message, exception){\n\t   //TODO 后台异常信息回调\n\n\t}\n  \t});\n  \tdwr.TOPEngine.setAsync(true);\n  \t//TODO 可自定义设置返回值\n\n}\n\t\n",
			"methodBodyExtend":{
				"before":"",
				"initParam":"",
				"saveErrorHandler":"",
				"setDataAfter":"",
				"setDataBefore":"",
				"setReturnVal":""
			},
			"methodOption":{
				"actionMethodName":"queryVOListByPage",
				"container":"",
				"entityId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain",
				"isGenerateParameterForm":"true",
				"methodId":"com.comtop.cap.demo.cascade.oneToMany.entity.CascadeActionMain/queryVOListByPage",
				"methodParameter":"{{methodOption.methodParameter1}}",
				"methodParameter1":"cascadeActionMain",
				"pageURL":"",
				"paramType":"[{\"chName\":\"查询条件\",\"dataType\":{\"generic\":null,\"source\":\"javaObject\",\"type\":\"java.lang.Object\",\"value\":\"\"},\"description\":\"\",\"engName\":\"condition\",\"parameterId\":\"1446454546153\",\"sortNo\":0}]",
				"relationGridId":"",
				"requestMode":"true",
				"returnSource":"collection",
				"returnValueBind":"cascadeActionMainList",
				"saveQueryData":"no",
				"target":""
			},
			"methodTemplate":"actionlibrary.bestPracticeAction.gridAction.action.gridDatasource",
			"pageActionId":"14635631202690"
		}
	],
	"pageAttributeVOList":[],
	"pageComponentExpressionVOList":[],
	"pageId":"E785FCBA683F47469FF4DFF24D60315V",
	"pageMinWidth":"600px",
	"pageType":1,
	"parentId":"6B2421FC4B744776AF850B36E3BF844D",
	"parentName":"级联操作示例",
	"url":"/cap/demo/cascade/oneToMany/demoOneToManyList.ac"
}